/*
THIS IS A GENERATED/BUNDLED FILE BY ESBUILD
if you want to view the source, please visit the github repository of this plugin
*/

var x3=Object.create;var ju=Object.defineProperty;var k3=Object.getOwnPropertyDescriptor;var R3=Object.getOwnPropertyNames;var N3=Object.getPrototypeOf,O3=Object.prototype.hasOwnProperty;var IA=t=>{throw TypeError(t)};var D3=(t,e,n)=>e in t?ju(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var It=(t,e)=>()=>(t&&(e=t(t=0)),e);var te=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports),Qg=(t,e)=>{for(var n in e)ju(t,n,{get:e[n],enumerable:!0})},xA=(t,e,n,r)=>{if(e&&typeof e=="object"||typeof e=="function")for(let o of R3(e))!O3.call(t,o)&&o!==n&&ju(t,o,{get:()=>e[o],enumerable:!(r=k3(e,o))||r.enumerable});return t};var ht=(t,e,n)=>(n=t!=null?x3(N3(t)):{},xA(e||!t||!t.__esModule?ju(n,"default",{value:t,enumerable:!0}):n,t)),M3=t=>xA(ju({},"__esModule",{value:!0}),t);var F=(t,e,n)=>D3(t,typeof e!="symbol"?e+"":e,n),Zg=(t,e,n)=>e.has(t)||IA("Cannot "+n);var fe=(t,e,n)=>(Zg(t,e,"read from private field"),n?n.call(t):e.get(t)),Re=(t,e,n)=>e.has(t)?IA("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,n),qe=(t,e,n,r)=>(Zg(t,e,"write to private field"),r?r.call(t,n):e.set(t,n),n),Le=(t,e,n)=>(Zg(t,e,"access private method"),n);var ry=te((_d,UA)=>{(function(t,e){typeof _d=="object"&&typeof UA!="undefined"?e(_d):typeof define=="function"&&define.amd?define(["exports"],e):e(t.WHATWGFetch={})})(_d,function(t){"use strict";var e=typeof globalThis!="undefined"&&globalThis||typeof self!="undefined"&&self||typeof global!="undefined"&&global||{},n={searchParams:"URLSearchParams"in e,iterable:"Symbol"in e&&"iterator"in Symbol,blob:"FileReader"in e&&"Blob"in e&&function(){try{return new Blob,!0}catch(E){return!1}}(),formData:"FormData"in e,arrayBuffer:"ArrayBuffer"in e};function r(E){return E&&DataView.prototype.isPrototypeOf(E)}if(n.arrayBuffer)var o=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],i=ArrayBuffer.isView||function(E){return E&&o.indexOf(Object.prototype.toString.call(E))>-1};function s(E){if(typeof E!="string"&&(E=String(E)),/[^a-z0-9\-#$%&'*+.^_`|~!]/i.test(E)||E==="")throw new TypeError('Invalid character in header field name: "'+E+'"');return E.toLowerCase()}function a(E){return typeof E!="string"&&(E=String(E)),E}function l(E){var O={next:function(){var X=E.shift();return{done:X===void 0,value:X}}};return n.iterable&&(O[Symbol.iterator]=function(){return O}),O}function u(E){this.map={},E instanceof u?E.forEach(function(O,X){this.append(X,O)},this):Array.isArray(E)?E.forEach(function(O){if(O.length!=2)throw new TypeError("Headers constructor: expected name/value pair to be length 2, found"+O.length);this.append(O[0],O[1])},this):E&&Object.getOwnPropertyNames(E).forEach(function(O){this.append(O,E[O])},this)}u.prototype.append=function(E,O){E=s(E),O=a(O);var X=this.map[E];this.map[E]=X?X+", "+O:O},u.prototype.delete=function(E){delete this.map[s(E)]},u.prototype.get=function(E){return E=s(E),this.has(E)?this.map[E]:null},u.prototype.has=function(E){return this.map.hasOwnProperty(s(E))},u.prototype.set=function(E,O){this.map[s(E)]=a(O)},u.prototype.forEach=function(E,O){for(var X in this.map)this.map.hasOwnProperty(X)&&E.call(O,this.map[X],X,this)},u.prototype.keys=function(){var E=[];return this.forEach(function(O,X){E.push(X)}),l(E)},u.prototype.values=function(){var E=[];return this.forEach(function(O){E.push(O)}),l(E)},u.prototype.entries=function(){var E=[];return this.forEach(function(O,X){E.push([X,O])}),l(E)},n.iterable&&(u.prototype[Symbol.iterator]=u.prototype.entries);function f(E){if(!E._noBody){if(E.bodyUsed)return Promise.reject(new TypeError("Already read"));E.bodyUsed=!0}}function p(E){return new Promise(function(O,X){E.onload=function(){O(E.result)},E.onerror=function(){X(E.error)}})}function m(E){var O=new FileReader,X=p(O);return O.readAsArrayBuffer(E),X}function b(E){var O=new FileReader,X=p(O),ee=/charset=([A-Za-z0-9_-]+)/.exec(E.type),se=ee?ee[1]:"utf-8";return O.readAsText(E,se),X}function v(E){for(var O=new Uint8Array(E),X=new Array(O.length),ee=0;ee<O.length;ee++)X[ee]=String.fromCharCode(O[ee]);return X.join("")}function w(E){if(E.slice)return E.slice(0);var O=new Uint8Array(E.byteLength);return O.set(new Uint8Array(E)),O.buffer}function _(){return this.bodyUsed=!1,this._initBody=function(E){this.bodyUsed=this.bodyUsed,this._bodyInit=E,E?typeof E=="string"?this._bodyText=E:n.blob&&Blob.prototype.isPrototypeOf(E)?this._bodyBlob=E:n.formData&&FormData.prototype.isPrototypeOf(E)?this._bodyFormData=E:n.searchParams&&URLSearchParams.prototype.isPrototypeOf(E)?this._bodyText=E.toString():n.arrayBuffer&&n.blob&&r(E)?(this._bodyArrayBuffer=w(E.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):n.arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(E)||i(E))?this._bodyArrayBuffer=w(E):this._bodyText=E=Object.prototype.toString.call(E):(this._noBody=!0,this._bodyText=""),this.headers.get("content-type")||(typeof E=="string"?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):n.searchParams&&URLSearchParams.prototype.isPrototypeOf(E)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},n.blob&&(this.blob=function(){var E=f(this);if(E)return E;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))}),this.arrayBuffer=function(){if(this._bodyArrayBuffer){var E=f(this);return E||(ArrayBuffer.isView(this._bodyArrayBuffer)?Promise.resolve(this._bodyArrayBuffer.buffer.slice(this._bodyArrayBuffer.byteOffset,this._bodyArrayBuffer.byteOffset+this._bodyArrayBuffer.byteLength)):Promise.resolve(this._bodyArrayBuffer))}else{if(n.blob)return this.blob().then(m);throw new Error("could not read as ArrayBuffer")}},this.text=function(){var E=f(this);if(E)return E;if(this._bodyBlob)return b(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(v(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},n.formData&&(this.formData=function(){return this.text().then(D)}),this.json=function(){return this.text().then(JSON.parse)},this}var T=["CONNECT","DELETE","GET","HEAD","OPTIONS","PATCH","POST","PUT","TRACE"];function R(E){var O=E.toUpperCase();return T.indexOf(O)>-1?O:E}function L(E,O){if(!(this instanceof L))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');O=O||{};var X=O.body;if(E instanceof L){if(E.bodyUsed)throw new TypeError("Already read");this.url=E.url,this.credentials=E.credentials,O.headers||(this.headers=new u(E.headers)),this.method=E.method,this.mode=E.mode,this.signal=E.signal,!X&&E._bodyInit!=null&&(X=E._bodyInit,E.bodyUsed=!0)}else this.url=String(E);if(this.credentials=O.credentials||this.credentials||"same-origin",(O.headers||!this.headers)&&(this.headers=new u(O.headers)),this.method=R(O.method||this.method||"GET"),this.mode=O.mode||this.mode||null,this.signal=O.signal||this.signal||function(){if("AbortController"in e){var re=new AbortController;return re.signal}}(),this.referrer=null,(this.method==="GET"||this.method==="HEAD")&&X)throw new TypeError("Body not allowed for GET or HEAD requests");if(this._initBody(X),(this.method==="GET"||this.method==="HEAD")&&(O.cache==="no-store"||O.cache==="no-cache")){var ee=/([?&])_=[^&]*/;if(ee.test(this.url))this.url=this.url.replace(ee,"$1_="+new Date().getTime());else{var se=/\?/;this.url+=(se.test(this.url)?"&":"?")+"_="+new Date().getTime()}}}L.prototype.clone=function(){return new L(this,{body:this._bodyInit})};function D(E){var O=new FormData;return E.trim().split("&").forEach(function(X){if(X){var ee=X.split("="),se=ee.shift().replace(/\+/g," "),re=ee.join("=").replace(/\+/g," ");O.append(decodeURIComponent(se),decodeURIComponent(re))}}),O}function x(E){var O=new u,X=E.replace(/\r?\n[\t ]+/g," ");return X.split("\r").map(function(ee){return ee.indexOf(`
`)===0?ee.substr(1,ee.length):ee}).forEach(function(ee){var se=ee.split(":"),re=se.shift().trim();if(re){var be=se.join(":").trim();try{O.append(re,be)}catch(Me){console.warn("Response "+Me.message)}}}),O}_.call(L.prototype);function P(E,O){if(!(this instanceof P))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');if(O||(O={}),this.type="default",this.status=O.status===void 0?200:O.status,this.status<200||this.status>599)throw new RangeError("Failed to construct 'Response': The status provided (0) is outside the range [200, 599].");this.ok=this.status>=200&&this.status<300,this.statusText=O.statusText===void 0?"":""+O.statusText,this.headers=new u(O.headers),this.url=O.url||"",this._initBody(E)}_.call(P.prototype),P.prototype.clone=function(){return new P(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new u(this.headers),url:this.url})},P.error=function(){var E=new P(null,{status:200,statusText:""});return E.ok=!1,E.status=0,E.type="error",E};var V=[301,302,303,307,308];P.redirect=function(E,O){if(V.indexOf(O)===-1)throw new RangeError("Invalid status code");return new P(null,{status:O,headers:{location:E}})},t.DOMException=e.DOMException;try{new t.DOMException}catch(E){t.DOMException=function(O,X){this.message=O,this.name=X;var ee=Error(O);this.stack=ee.stack},t.DOMException.prototype=Object.create(Error.prototype),t.DOMException.prototype.constructor=t.DOMException}function J(E,O){return new Promise(function(X,ee){var se=new L(E,O);if(se.signal&&se.signal.aborted)return ee(new t.DOMException("Aborted","AbortError"));var re=new XMLHttpRequest;function be(){re.abort()}re.onload=function(){var Ie={statusText:re.statusText,headers:x(re.getAllResponseHeaders()||"")};se.url.indexOf("file://")===0&&(re.status<200||re.status>599)?Ie.status=200:Ie.status=re.status,Ie.url="responseURL"in re?re.responseURL:Ie.headers.get("X-Request-URL");var Qe="response"in re?re.response:re.responseText;setTimeout(function(){X(new P(Qe,Ie))},0)},re.onerror=function(){setTimeout(function(){ee(new TypeError("Network request failed"))},0)},re.ontimeout=function(){setTimeout(function(){ee(new TypeError("Network request timed out"))},0)},re.onabort=function(){setTimeout(function(){ee(new t.DOMException("Aborted","AbortError"))},0)};function Me(Ie){try{return Ie===""&&e.location.href?e.location.href:Ie}catch(Qe){return Ie}}if(re.open(se.method,Me(se.url),!0),se.credentials==="include"?re.withCredentials=!0:se.credentials==="omit"&&(re.withCredentials=!1),"responseType"in re&&(n.blob?re.responseType="blob":n.arrayBuffer&&(re.responseType="arraybuffer")),O&&typeof O.headers=="object"&&!(O.headers instanceof u||e.Headers&&O.headers instanceof e.Headers)){var ke=[];Object.getOwnPropertyNames(O.headers).forEach(function(Ie){ke.push(s(Ie)),re.setRequestHeader(Ie,a(O.headers[Ie]))}),se.headers.forEach(function(Ie,Qe){ke.indexOf(Qe)===-1&&re.setRequestHeader(Qe,Ie)})}else se.headers.forEach(function(Ie,Qe){re.setRequestHeader(Qe,Ie)});se.signal&&(se.signal.addEventListener("abort",be),re.onreadystatechange=function(){re.readyState===4&&se.signal.removeEventListener("abort",be)}),re.send(typeof se._bodyInit=="undefined"?null:se._bodyInit)})}J.polyfill=!0,e.fetch||(e.fetch=J,e.Headers=u,e.Request=L,e.Response=P),t.Headers=u,t.Request=L,t.Response=P,t.fetch=J,Object.defineProperty(t,"__esModule",{value:!0})})});var Qy=te((Uge,JC)=>{"use strict";var ih=Object.prototype.hasOwnProperty,zC=Object.prototype.toString,HC=Object.defineProperty,qC=Object.getOwnPropertyDescriptor,$C=function(e){return typeof Array.isArray=="function"?Array.isArray(e):zC.call(e)==="[object Array]"},VC=function(e){if(!e||zC.call(e)!=="[object Object]")return!1;var n=ih.call(e,"constructor"),r=e.constructor&&e.constructor.prototype&&ih.call(e.constructor.prototype,"isPrototypeOf");if(e.constructor&&!n&&!r)return!1;var o;for(o in e);return typeof o=="undefined"||ih.call(e,o)},jC=function(e,n){HC&&n.name==="__proto__"?HC(e,n.name,{enumerable:!0,configurable:!0,value:n.newValue,writable:!0}):e[n.name]=n.newValue},WC=function(e,n){if(n==="__proto__")if(ih.call(e,n)){if(qC)return qC(e,n).value}else return;return e[n]};JC.exports=function t(){var e,n,r,o,i,s,a=arguments[0],l=1,u=arguments.length,f=!1;for(typeof a=="boolean"&&(f=a,a=arguments[1]||{},l=2),(a==null||typeof a!="object"&&typeof a!="function")&&(a={});l<u;++l)if(e=arguments[l],e!=null)for(n in e)r=WC(a,n),o=WC(e,n),a!==o&&(f&&o&&(VC(o)||(i=$C(o)))?(i?(i=!1,s=r&&$C(r)?r:[]):s=r&&VC(r)?r:{},jC(a,{name:n,newValue:t(f,s,o)})):typeof o!="undefined"&&jC(a,{name:n,newValue:o}));return a}});var KC=te((Bge,Pq)=>{Pq.exports={name:"gaxios",version:"7.1.3",description:"A simple common HTTP client specifically for Google APIs and services.",main:"build/cjs/src/index.js",types:"build/cjs/src/index.d.ts",files:["build/"],exports:{".":{import:{types:"./build/esm/src/index.d.ts",default:"./build/esm/src/index.js"},require:{types:"./build/cjs/src/index.d.ts",default:"./build/cjs/src/index.js"}}},scripts:{lint:"gts check --no-inline-config",test:"c8 mocha build/esm/test","presystem-test":"npm run compile","system-test":"mocha build/esm/system-test --timeout 80000",compile:"tsc -b ./tsconfig.json ./tsconfig.cjs.json && node utils/enable-esm.mjs",fix:"gts fix",prepare:"npm run compile",pretest:"npm run compile",webpack:"webpack","prebrowser-test":"npm run compile","browser-test":"node build/browser-test/browser-test-runner.js",docs:"jsdoc -c .jsdoc.js","docs-test":"linkinator docs","predocs-test":"npm run docs","samples-test":"cd samples/ && npm link ../ && npm test && cd ../",prelint:"cd samples; npm link ../; npm install",clean:"gts clean"},repository:{type:"git",directory:"packages/gaxios",url:"https://github.com/googleapis/google-cloud-node-core.git"},keywords:["google"],engines:{node:">=18"},author:"Google, LLC",license:"Apache-2.0",devDependencies:{"@babel/plugin-proposal-private-methods":"^7.18.6","@types/cors":"^2.8.6","@types/express":"^5.0.0","@types/extend":"^3.0.1","@types/mocha":"^10.0.10","@types/multiparty":"4.2.1","@types/mv":"^2.1.0","@types/ncp":"^2.0.1","@types/node":"^22.0.0","@types/sinon":"^17.0.0","@types/tmp":"0.2.6",assert:"^2.0.0",browserify:"^17.0.0",c8:"^10.0.0",cors:"^2.8.5",express:"^5.0.0",gts:"^6.0.0","is-docker":"^3.0.0",jsdoc:"^4.0.0","jsdoc-fresh":"^5.0.0","jsdoc-region-tag":"^4.0.0",karma:"^6.0.0","karma-chrome-launcher":"^3.0.0","karma-coverage":"^2.0.0","karma-firefox-launcher":"^2.0.0","karma-mocha":"^2.0.0","karma-remap-coverage":"^0.1.5","karma-sourcemap-loader":"^0.4.0","karma-webpack":"^5.0.1",linkinator:"^6.1.2",mocha:"^11.1.0",multiparty:"^4.2.1",mv:"^2.1.1",ncp:"^2.0.0",nock:"^14.0.0-beta.13","null-loader":"^4.0.0","pack-n-play":"^4.0.0",puppeteer:"^24.0.0",sinon:"^21.0.0","stream-browserify":"^3.0.0",tmp:"0.2.5","ts-loader":"^9.5.2",typescript:"^5.8.3",webpack:"^5.35.0","webpack-cli":"^6.0.1"},dependencies:{extend:"^3.0.2","https-proxy-agent":"^7.0.1","node-fetch":"^3.3.2",rimraf:"^5.0.1"},homepage:"https://github.com/googleapis/google-cloud-node-core/tree/main/packages/gaxios"}});var XC=te((Gge,YC)=>{"use strict";var Iq=KC();YC.exports={pkg:Iq}});var t0=te(Wn=>{"use strict";var eT=Wn&&Wn.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Wn,"__esModule",{value:!0});Wn.GaxiosError=Wn.GAXIOS_ERROR_SYMBOL=void 0;Wn.defaultErrorRedactor=tT;var QC=eT(Qy()),xq=eT(XC()),Zy=xq.default.pkg;Wn.GAXIOS_ERROR_SYMBOL=Symbol.for(`${Zy.name}-gaxios-error`);var ZC,e0=class t extends Error{constructor(n,r,o,i){var s,a;super(n,{cause:i});F(this,"config");F(this,"response");F(this,"code");F(this,"status");F(this,"error");F(this,ZC,Zy.version);if(this.config=r,this.response=o,this.error=i instanceof Error?i:void 0,this.config=(0,QC.default)(!0,{},r),this.response&&(this.response.config=(0,QC.default)(!0,{},this.response.config)),this.response){try{this.response.data=kq(this.config.responseType,(s=this.response)!=null&&s.bodyUsed?(a=this.response)==null?void 0:a.data:void 0)}catch(l){}this.status=this.response.status}i instanceof DOMException?this.code=i.name:i&&typeof i=="object"&&"code"in i&&(typeof i.code=="string"||typeof i.code=="number")&&(this.code=i.code)}static[(ZC=Wn.GAXIOS_ERROR_SYMBOL,Symbol.hasInstance)](n){return n&&typeof n=="object"&&Wn.GAXIOS_ERROR_SYMBOL in n&&n[Wn.GAXIOS_ERROR_SYMBOL]===Zy.version?!0:Function.prototype[Symbol.hasInstance].call(t,n)}static extractAPIErrorFromResponse(n,r="The request failed"){let o=r;if(typeof n.data=="string"&&(o=n.data),n.data&&typeof n.data=="object"&&"error"in n.data&&n.data.error&&!n.ok){if(typeof n.data.error=="string")return{message:n.data.error,code:n.status,status:n.statusText};if(typeof n.data.error=="object"){o="message"in n.data.error&&typeof n.data.error.message=="string"?n.data.error.message:o;let i="status"in n.data.error&&typeof n.data.error.status=="string"?n.data.error.status:n.statusText,s="code"in n.data.error&&typeof n.data.error.code=="number"?n.data.error.code:n.status;if("errors"in n.data.error&&Array.isArray(n.data.error.errors)){let a=[];for(let l of n.data.error.errors)typeof l=="object"&&"message"in l&&typeof l.message=="string"&&a.push(l.message);return Object.assign({message:a.join(`
`)||o,code:s,status:i},n.data.error)}return Object.assign({message:o,code:s,status:i},n.data.error)}}return{message:o,code:n.status,status:n.statusText}}};Wn.GaxiosError=e0;function kq(t,e){switch(t){case"stream":return e;case"json":return JSON.parse(JSON.stringify(e));case"arraybuffer":return JSON.parse(Buffer.from(e).toString("utf8"));case"blob":return JSON.parse(e.text());default:return e}}function tT(t){let e="<<REDACTED> - See `errorRedactor` option in `gaxios` for configuration>.";function n(i){i&&i.forEach((s,a)=>{(/^authentication$/i.test(a)||/^authorization$/i.test(a)||/secret/i.test(a))&&i.set(a,e)})}function r(i,s){if(typeof i=="object"&&i!==null&&typeof i[s]=="string"){let a=i[s];(/grant_type=/i.test(a)||/assertion=/i.test(a)||/secret/i.test(a))&&(i[s]=e)}}function o(i){!i||typeof i!="object"||(i instanceof FormData||i instanceof URLSearchParams||"forEach"in i&&"set"in i?i.forEach((s,a)=>{(["grant_type","assertion"].includes(a)||/secret/.test(a))&&i.set(a,e)}):("grant_type"in i&&(i.grant_type=e),"assertion"in i&&(i.assertion=e),"client_secret"in i&&(i.client_secret=e)))}return t.config&&(n(t.config.headers),r(t.config,"data"),o(t.config.data),r(t.config,"body"),o(t.config.body),t.config.url.searchParams.has("token")&&t.config.url.searchParams.set("token",e),t.config.url.searchParams.has("client_secret")&&t.config.url.searchParams.set("client_secret",e)),t.response&&(tT({config:t.response.config}),n(t.response.headers),t.response.bodyUsed&&(r(t.response,"data"),o(t.response.data))),t}});var rT=te(n0=>{"use strict";Object.defineProperty(n0,"__esModule",{value:!0});n0.getRetryConfig=Rq;async function Rq(t){let e=nT(t);if(!t||!t.config||!e&&!t.config.retry)return{shouldRetry:!1};e=e||{},e.currentRetryAttempt=e.currentRetryAttempt||0,e.retry=e.retry===void 0||e.retry===null?3:e.retry,e.httpMethodsToRetry=e.httpMethodsToRetry||["GET","HEAD","PUT","OPTIONS","DELETE"],e.noResponseRetries=e.noResponseRetries===void 0||e.noResponseRetries===null?2:e.noResponseRetries,e.retryDelayMultiplier=e.retryDelayMultiplier?e.retryDelayMultiplier:2,e.timeOfFirstRequest=e.timeOfFirstRequest?e.timeOfFirstRequest:Date.now(),e.totalTimeout=e.totalTimeout?e.totalTimeout:Number.MAX_SAFE_INTEGER,e.maxRetryDelay=e.maxRetryDelay?e.maxRetryDelay:Number.MAX_SAFE_INTEGER;let n=[[100,199],[408,408],[429,429],[500,599]];if(e.statusCodesToRetry=e.statusCodesToRetry||n,t.config.retryConfig=e,!await(e.shouldRetry||Nq)(t))return{shouldRetry:!1,config:t.config};let o=Oq(e);t.config.retryConfig.currentRetryAttempt+=1;let i=e.retryBackoff?e.retryBackoff(t,o):new Promise(s=>{setTimeout(s,o)});return e.onRetryAttempt&&await e.onRetryAttempt(t),await i,{shouldRetry:!0,config:t.config}}function Nq(t){var n,r;let e=nT(t);if((n=t.config.signal)!=null&&n.aborted&&t.code!=="TimeoutError"||t.code==="AbortError"||!e||e.retry===0||!t.response&&(e.currentRetryAttempt||0)>=e.noResponseRetries||!e.httpMethodsToRetry||!e.httpMethodsToRetry.includes(((r=t.config.method)==null?void 0:r.toUpperCase())||"GET"))return!1;if(t.response&&t.response.status){let o=!1;for(let[i,s]of e.statusCodesToRetry){let a=t.response.status;if(a>=i&&a<=s){o=!0;break}}if(!o)return!1}return e.currentRetryAttempt=e.currentRetryAttempt||0,!(e.currentRetryAttempt>=e.retry)}function nT(t){if(t&&t.config&&t.config.retryConfig)return t.config.retryConfig}function Oq(t){var o;let n=(t.currentRetryAttempt?0:(o=t.retryDelay)!=null?o:100)+(Math.pow(t.retryDelayMultiplier,t.currentRetryAttempt)-1)/2*1e3,r=t.totalTimeout-(Date.now()-t.timeOfFirstRequest);return Math.min(n,r,t.maxRetryDelay)}});var o0=te(sh=>{"use strict";Object.defineProperty(sh,"__esModule",{value:!0});sh.GaxiosInterceptorManager=void 0;var r0=class extends Set{};sh.GaxiosInterceptorManager=r0});var iT=te((jge,oT)=>{var Sl=1e3,Pl=Sl*60,Il=Pl*60,Fs=Il*24,Dq=Fs*7,Mq=Fs*365.25;oT.exports=function(t,e){e=e||{};var n=typeof t;if(n==="string"&&t.length>0)return Fq(t);if(n==="number"&&isFinite(t))return e.long?Uq(t):Lq(t);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(t))};function Fq(t){if(t=String(t),!(t.length>100)){var e=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(t);if(e){var n=parseFloat(e[1]),r=(e[2]||"ms").toLowerCase();switch(r){case"years":case"year":case"yrs":case"yr":case"y":return n*Mq;case"weeks":case"week":case"w":return n*Dq;case"days":case"day":case"d":return n*Fs;case"hours":case"hour":case"hrs":case"hr":case"h":return n*Il;case"minutes":case"minute":case"mins":case"min":case"m":return n*Pl;case"seconds":case"second":case"secs":case"sec":case"s":return n*Sl;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return n;default:return}}}}function Lq(t){var e=Math.abs(t);return e>=Fs?Math.round(t/Fs)+"d":e>=Il?Math.round(t/Il)+"h":e>=Pl?Math.round(t/Pl)+"m":e>=Sl?Math.round(t/Sl)+"s":t+"ms"}function Uq(t){var e=Math.abs(t);return e>=Fs?ah(t,e,Fs,"day"):e>=Il?ah(t,e,Il,"hour"):e>=Pl?ah(t,e,Pl,"minute"):e>=Sl?ah(t,e,Sl,"second"):t+" ms"}function ah(t,e,n,r){var o=e>=n*1.5;return Math.round(t/n)+" "+r+(o?"s":"")}});var i0=te((Wge,sT)=>{function Bq(t){n.debug=n,n.default=n,n.coerce=l,n.disable=s,n.enable=o,n.enabled=a,n.humanize=iT(),n.destroy=u,Object.keys(t).forEach(f=>{n[f]=t[f]}),n.names=[],n.skips=[],n.formatters={};function e(f){let p=0;for(let m=0;m<f.length;m++)p=(p<<5)-p+f.charCodeAt(m),p|=0;return n.colors[Math.abs(p)%n.colors.length]}n.selectColor=e;function n(f){let p,m=null,b,v;function w(..._){if(!w.enabled)return;let T=w,R=Number(new Date),L=R-(p||R);T.diff=L,T.prev=p,T.curr=R,p=R,_[0]=n.coerce(_[0]),typeof _[0]!="string"&&_.unshift("%O");let D=0;_[0]=_[0].replace(/%([a-zA-Z%])/g,(P,V)=>{if(P==="%%")return"%";D++;let J=n.formatters[V];if(typeof J=="function"){let E=_[D];P=J.call(T,E),_.splice(D,1),D--}return P}),n.formatArgs.call(T,_),(T.log||n.log).apply(T,_)}return w.namespace=f,w.useColors=n.useColors(),w.color=n.selectColor(f),w.extend=r,w.destroy=n.destroy,Object.defineProperty(w,"enabled",{enumerable:!0,configurable:!1,get:()=>m!==null?m:(b!==n.namespaces&&(b=n.namespaces,v=n.enabled(f)),v),set:_=>{m=_}}),typeof n.init=="function"&&n.init(w),w}function r(f,p){let m=n(this.namespace+(typeof p=="undefined"?":":p)+f);return m.log=this.log,m}function o(f){n.save(f),n.namespaces=f,n.names=[],n.skips=[];let p=(typeof f=="string"?f:"").trim().replace(" ",",").split(",").filter(Boolean);for(let m of p)m[0]==="-"?n.skips.push(m.slice(1)):n.names.push(m)}function i(f,p){let m=0,b=0,v=-1,w=0;for(;m<f.length;)if(b<p.length&&(p[b]===f[m]||p[b]==="*"))p[b]==="*"?(v=b,w=m,b++):(m++,b++);else if(v!==-1)b=v+1,w++,m=w;else return!1;for(;b<p.length&&p[b]==="*";)b++;return b===p.length}function s(){let f=[...n.names,...n.skips.map(p=>"-"+p)].join(",");return n.enable(""),f}function a(f){for(let p of n.skips)if(i(f,p))return!1;for(let p of n.names)if(i(f,p))return!0;return!1}function l(f){return f instanceof Error?f.stack||f.message:f}function u(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return n.enable(n.load()),n}sT.exports=Bq});var aT=te((Sn,lh)=>{Sn.formatArgs=Hq;Sn.save=qq;Sn.load=$q;Sn.useColors=Gq;Sn.storage=Vq();Sn.destroy=(()=>{let t=!1;return()=>{t||(t=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})();Sn.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function Gq(){if(typeof window!="undefined"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs))return!0;if(typeof navigator!="undefined"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;let t;return typeof document!="undefined"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window!="undefined"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator!="undefined"&&navigator.userAgent&&(t=navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/))&&parseInt(t[1],10)>=31||typeof navigator!="undefined"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function Hq(t){if(t[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+t[0]+(this.useColors?"%c ":" ")+"+"+lh.exports.humanize(this.diff),!this.useColors)return;let e="color: "+this.color;t.splice(1,0,e,"color: inherit");let n=0,r=0;t[0].replace(/%[a-zA-Z%]/g,o=>{o!=="%%"&&(n++,o==="%c"&&(r=n))}),t.splice(r,0,e)}Sn.log=console.debug||console.log||(()=>{});function qq(t){try{t?Sn.storage.setItem("debug",t):Sn.storage.removeItem("debug")}catch(e){}}function $q(){let t;try{t=Sn.storage.getItem("debug")}catch(e){}return!t&&typeof process!="undefined"&&"env"in process&&(t=process.env.DEBUG),t}function Vq(){try{return localStorage}catch(t){}}lh.exports=i0()(Sn);var{formatters:jq}=lh.exports;jq.j=function(t){try{return JSON.stringify(t)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}}});var uT=te((zge,lT)=>{"use strict";lT.exports=(t,e=process.argv)=>{let n=t.startsWith("-")?"":t.length===1?"-":"--",r=e.indexOf(n+t),o=e.indexOf("--");return r!==-1&&(o===-1||r<o)}});var dT=te((Jge,fT)=>{"use strict";var Wq=require("os"),cT=require("tty"),zn=uT(),{env:kt}=process,Ri;zn("no-color")||zn("no-colors")||zn("color=false")||zn("color=never")?Ri=0:(zn("color")||zn("colors")||zn("color=true")||zn("color=always"))&&(Ri=1);"FORCE_COLOR"in kt&&(kt.FORCE_COLOR==="true"?Ri=1:kt.FORCE_COLOR==="false"?Ri=0:Ri=kt.FORCE_COLOR.length===0?1:Math.min(parseInt(kt.FORCE_COLOR,10),3));function s0(t){return t===0?!1:{level:t,hasBasic:!0,has256:t>=2,has16m:t>=3}}function a0(t,e){if(Ri===0)return 0;if(zn("color=16m")||zn("color=full")||zn("color=truecolor"))return 3;if(zn("color=256"))return 2;if(t&&!e&&Ri===void 0)return 0;let n=Ri||0;if(kt.TERM==="dumb")return n;if(process.platform==="win32"){let r=Wq.release().split(".");return Number(r[0])>=10&&Number(r[2])>=10586?Number(r[2])>=14931?3:2:1}if("CI"in kt)return["TRAVIS","CIRCLECI","APPVEYOR","GITLAB_CI","GITHUB_ACTIONS","BUILDKITE"].some(r=>r in kt)||kt.CI_NAME==="codeship"?1:n;if("TEAMCITY_VERSION"in kt)return/^(9\.(0*[1-9]\d*)\.|\d{2,}\.)/.test(kt.TEAMCITY_VERSION)?1:0;if(kt.COLORTERM==="truecolor")return 3;if("TERM_PROGRAM"in kt){let r=parseInt((kt.TERM_PROGRAM_VERSION||"").split(".")[0],10);switch(kt.TERM_PROGRAM){case"iTerm.app":return r>=3?3:2;case"Apple_Terminal":return 2}}return/-256(color)?$/i.test(kt.TERM)?2:/^screen|^xterm|^vt100|^vt220|^rxvt|color|ansi|cygwin|linux/i.test(kt.TERM)||"COLORTERM"in kt?1:n}function zq(t){let e=a0(t,t&&t.isTTY);return s0(e)}fT.exports={supportsColor:zq,stdout:s0(a0(!0,cT.isatty(1))),stderr:s0(a0(!0,cT.isatty(2)))}});var pT=te((Rt,ch)=>{var Jq=require("tty"),uh=require("util");Rt.init=t$;Rt.log=Qq;Rt.formatArgs=Yq;Rt.save=Zq;Rt.load=e$;Rt.useColors=Kq;Rt.destroy=uh.deprecate(()=>{},"Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.");Rt.colors=[6,2,3,4,5,1];try{let t=dT();t&&(t.stderr||t).level>=2&&(Rt.colors=[20,21,26,27,32,33,38,39,40,41,42,43,44,45,56,57,62,63,68,69,74,75,76,77,78,79,80,81,92,93,98,99,112,113,128,129,134,135,148,149,160,161,162,163,164,165,166,167,168,169,170,171,172,173,178,179,184,185,196,197,198,199,200,201,202,203,204,205,206,207,208,209,214,215,220,221])}catch(t){}Rt.inspectOpts=Object.keys(process.env).filter(t=>/^debug_/i.test(t)).reduce((t,e)=>{let n=e.substring(6).toLowerCase().replace(/_([a-z])/g,(o,i)=>i.toUpperCase()),r=process.env[e];return/^(yes|on|true|enabled)$/i.test(r)?r=!0:/^(no|off|false|disabled)$/i.test(r)?r=!1:r==="null"?r=null:r=Number(r),t[n]=r,t},{});function Kq(){return"colors"in Rt.inspectOpts?!!Rt.inspectOpts.colors:Jq.isatty(process.stderr.fd)}function Yq(t){let{namespace:e,useColors:n}=this;if(n){let r=this.color,o="\x1B[3"+(r<8?r:"8;5;"+r),i=`  ${o};1m${e} \x1B[0m`;t[0]=i+t[0].split(`
`).join(`
`+i),t.push(o+"m+"+ch.exports.humanize(this.diff)+"\x1B[0m")}else t[0]=Xq()+e+" "+t[0]}function Xq(){return Rt.inspectOpts.hideDate?"":new Date().toISOString()+" "}function Qq(...t){return process.stderr.write(uh.formatWithOptions(Rt.inspectOpts,...t)+`
`)}function Zq(t){t?process.env.DEBUG=t:delete process.env.DEBUG}function e$(){return process.env.DEBUG}function t$(t){t.inspectOpts={};let e=Object.keys(Rt.inspectOpts);for(let n=0;n<e.length;n++)t.inspectOpts[e[n]]=Rt.inspectOpts[e[n]]}ch.exports=i0()(Rt);var{formatters:hT}=ch.exports;hT.o=function(t){return this.inspectOpts.colors=this.useColors,uh.inspect(t,this.inspectOpts).split(`
`).map(e=>e.trim()).join(" ")};hT.O=function(t){return this.inspectOpts.colors=this.useColors,uh.inspect(t,this.inspectOpts)}});var u0=te((Kge,l0)=>{typeof process=="undefined"||process.type==="renderer"||process.browser===!0||process.__nwjs?l0.exports=aT():l0.exports=pT()});var yT=te(dn=>{"use strict";var n$=dn&&dn.__createBinding||(Object.create?function(t,e,n,r){r===void 0&&(r=n);var o=Object.getOwnPropertyDescriptor(e,n);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[n]}}),Object.defineProperty(t,r,o)}:function(t,e,n,r){r===void 0&&(r=n),t[r]=e[n]}),r$=dn&&dn.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),mT=dn&&dn.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var n in t)n!=="default"&&Object.prototype.hasOwnProperty.call(t,n)&&n$(e,t,n);return r$(e,t),e};Object.defineProperty(dn,"__esModule",{value:!0});dn.req=dn.json=dn.toBuffer=void 0;var o$=mT(require("http")),i$=mT(require("https"));async function gT(t){let e=0,n=[];for await(let r of t)e+=r.length,n.push(r);return Buffer.concat(n,e)}dn.toBuffer=gT;async function s$(t){let n=(await gT(t)).toString("utf8");try{return JSON.parse(n)}catch(r){let o=r;throw o.message+=` (input: ${n})`,o}}dn.json=s$;function a$(t,e={}){let r=((typeof t=="string"?t:t.href).startsWith("https:")?i$:o$).request(t,e),o=new Promise((i,s)=>{r.once("response",i).once("error",s).end()});return r.then=o.then.bind(o),r}dn.req=a$});var _T=te(Pn=>{"use strict";var vT=Pn&&Pn.__createBinding||(Object.create?function(t,e,n,r){r===void 0&&(r=n);var o=Object.getOwnPropertyDescriptor(e,n);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[n]}}),Object.defineProperty(t,r,o)}:function(t,e,n,r){r===void 0&&(r=n),t[r]=e[n]}),l$=Pn&&Pn.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),wT=Pn&&Pn.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var n in t)n!=="default"&&Object.prototype.hasOwnProperty.call(t,n)&&vT(e,t,n);return l$(e,t),e},u$=Pn&&Pn.__exportStar||function(t,e){for(var n in t)n!=="default"&&!Object.prototype.hasOwnProperty.call(e,n)&&vT(e,t,n)};Object.defineProperty(Pn,"__esModule",{value:!0});Pn.Agent=void 0;var c$=wT(require("net")),bT=wT(require("http")),f$=require("https");u$(yT(),Pn);var Jr=Symbol("AgentBaseInternalState"),c0=class extends bT.Agent{constructor(e){super(e),this[Jr]={}}isSecureEndpoint(e){if(e){if(typeof e.secureEndpoint=="boolean")return e.secureEndpoint;if(typeof e.protocol=="string")return e.protocol==="https:"}let{stack:n}=new Error;return typeof n!="string"?!1:n.split(`
`).some(r=>r.indexOf("(https.js:")!==-1||r.indexOf("node:https:")!==-1)}incrementSockets(e){if(this.maxSockets===1/0&&this.maxTotalSockets===1/0)return null;this.sockets[e]||(this.sockets[e]=[]);let n=new c$.Socket({writable:!1});return this.sockets[e].push(n),this.totalSocketCount++,n}decrementSockets(e,n){if(!this.sockets[e]||n===null)return;let r=this.sockets[e],o=r.indexOf(n);o!==-1&&(r.splice(o,1),this.totalSocketCount--,r.length===0&&delete this.sockets[e])}getName(e){return this.isSecureEndpoint(e)?f$.Agent.prototype.getName.call(this,e):super.getName(e)}createSocket(e,n,r){let o={...n,secureEndpoint:this.isSecureEndpoint(n)},i=this.getName(o),s=this.incrementSockets(i);Promise.resolve().then(()=>this.connect(e,o)).then(a=>{if(this.decrementSockets(i,s),a instanceof bT.Agent)try{return a.addRequest(e,o)}catch(l){return r(l)}this[Jr].currentSocket=a,super.createSocket(e,n,r)},a=>{this.decrementSockets(i,s),r(a)})}createConnection(){let e=this[Jr].currentSocket;if(this[Jr].currentSocket=void 0,!e)throw new Error("No socket was returned in the `connect()` function");return e}get defaultPort(){var e;return(e=this[Jr].defaultPort)!=null?e:this.protocol==="https:"?443:80}set defaultPort(e){this[Jr]&&(this[Jr].defaultPort=e)}get protocol(){var e;return(e=this[Jr].protocol)!=null?e:this.isSecureEndpoint()?"https:":"http:"}set protocol(e){this[Jr]&&(this[Jr].protocol=e)}};Pn.Agent=c0});var ET=te(xl=>{"use strict";var d$=xl&&xl.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(xl,"__esModule",{value:!0});xl.parseProxyResponse=void 0;var h$=d$(u0()),fh=(0,h$.default)("https-proxy-agent:parse-proxy-response");function p$(t){return new Promise((e,n)=>{let r=0,o=[];function i(){let f=t.read();f?u(f):t.once("readable",i)}function s(){t.removeListener("end",a),t.removeListener("error",l),t.removeListener("readable",i)}function a(){s(),fh("onend"),n(new Error("Proxy connection ended before receiving CONNECT response"))}function l(f){s(),fh("onerror %o",f),n(f)}function u(f){o.push(f),r+=f.length;let p=Buffer.concat(o,r),m=p.indexOf(`\r
\r
`);if(m===-1){fh("have not received end of HTTP headers yet..."),i();return}let b=p.slice(0,m).toString("ascii").split(`\r
`),v=b.shift();if(!v)return t.destroy(),n(new Error("No header received from proxy CONNECT response"));let w=v.split(" "),_=+w[1],T=w.slice(2).join(" "),R={};for(let L of b){if(!L)continue;let D=L.indexOf(":");if(D===-1)return t.destroy(),n(new Error(`Invalid header from proxy CONNECT response: "${L}"`));let x=L.slice(0,D).toLowerCase(),P=L.slice(D+1).trimStart(),V=R[x];typeof V=="string"?R[x]=[V,P]:Array.isArray(V)?V.push(P):R[x]=P}fh("got proxy server response: %o %o",v,R),s(),e({connect:{statusCode:_,statusText:T,headers:R},buffered:p})}t.on("error",l),t.on("end",a),i()})}xl.parseProxyResponse=p$});var IT=te(Jn=>{"use strict";var m$=Jn&&Jn.__createBinding||(Object.create?function(t,e,n,r){r===void 0&&(r=n);var o=Object.getOwnPropertyDescriptor(e,n);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[n]}}),Object.defineProperty(t,r,o)}:function(t,e,n,r){r===void 0&&(r=n),t[r]=e[n]}),g$=Jn&&Jn.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),ST=Jn&&Jn.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var n in t)n!=="default"&&Object.prototype.hasOwnProperty.call(t,n)&&m$(e,t,n);return g$(e,t),e},PT=Jn&&Jn.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Jn,"__esModule",{value:!0});Jn.HttpsProxyAgent=void 0;var dh=ST(require("net")),AT=ST(require("tls")),y$=PT(require("assert")),b$=PT(u0()),v$=_T(),w$=require("url"),_$=ET(),yc=(0,b$.default)("https-proxy-agent"),CT=t=>t.servername===void 0&&t.host&&!dh.isIP(t.host)?{...t,servername:t.host}:t,hh=class extends v$.Agent{constructor(e,n){var i;super(n),this.options={path:void 0},this.proxy=typeof e=="string"?new w$.URL(e):e,this.proxyHeaders=(i=n==null?void 0:n.headers)!=null?i:{},yc("Creating new HttpsProxyAgent instance: %o",this.proxy.href);let r=(this.proxy.hostname||this.proxy.host).replace(/^\[|\]$/g,""),o=this.proxy.port?parseInt(this.proxy.port,10):this.proxy.protocol==="https:"?443:80;this.connectOpts={ALPNProtocols:["http/1.1"],...n?TT(n,"headers"):null,host:r,port:o}}async connect(e,n){let{proxy:r}=this;if(!n.host)throw new TypeError('No "host" provided');let o;r.protocol==="https:"?(yc("Creating `tls.Socket`: %o",this.connectOpts),o=AT.connect(CT(this.connectOpts))):(yc("Creating `net.Socket`: %o",this.connectOpts),o=dh.connect(this.connectOpts));let i=typeof this.proxyHeaders=="function"?this.proxyHeaders():{...this.proxyHeaders},s=dh.isIPv6(n.host)?`[${n.host}]`:n.host,a=`CONNECT ${s}:${n.port} HTTP/1.1\r
`;if(r.username||r.password){let m=`${decodeURIComponent(r.username)}:${decodeURIComponent(r.password)}`;i["Proxy-Authorization"]=`Basic ${Buffer.from(m).toString("base64")}`}i.Host=`${s}:${n.port}`,i["Proxy-Connection"]||(i["Proxy-Connection"]=this.keepAlive?"Keep-Alive":"close");for(let m of Object.keys(i))a+=`${m}: ${i[m]}\r
`;let l=(0,_$.parseProxyResponse)(o);o.write(`${a}\r
`);let{connect:u,buffered:f}=await l;if(e.emit("proxyConnect",u),this.emit("proxyConnect",u,e),u.statusCode===200)return e.once("socket",E$),n.secureEndpoint?(yc("Upgrading socket connection to TLS"),AT.connect({...TT(CT(n),"host","path","port"),socket:o})):o;o.destroy();let p=new dh.Socket({writable:!1});return p.readable=!0,e.once("socket",m=>{yc("Replaying proxy buffer for failed request"),(0,y$.default)(m.listenerCount("data")>0),m.push(f),m.push(null)}),p}};hh.protocols=["http","https"];Jn.HttpsProxyAgent=hh;function E$(t){t.resume()}function TT(t,...e){let n={},r;for(r in t)e.includes(r)||(n[r]=t[r]);return n}});function A$(t){if(!/^data:/i.test(t))throw new TypeError('`uri` does not appear to be a Data URI (must begin with "data:")');t=t.replace(/\r?\n/g,"");let e=t.indexOf(",");if(e===-1||e<=4)throw new TypeError("malformed data: URI");let n=t.substring(5,e).split(";"),r="",o=!1,i=n[0]||"text/plain",s=i;for(let f=1;f<n.length;f++)n[f]==="base64"?o=!0:n[f]&&(s+=`;${n[f]}`,n[f].indexOf("charset=")===0&&(r=n[f].substring(8)));!n[0]&&!r.length&&(s+=";charset=US-ASCII",r="US-ASCII");let a=o?"base64":"ascii",l=unescape(t.substring(e+1)),u=Buffer.from(l,a);return u.type=i,u.typeFull=s,u.charset=r,u}var xT,kT=It(()=>{xT=A$});var NT=te((ph,RT)=>{(function(t,e){typeof ph=="object"&&typeof RT!="undefined"?e(ph):typeof define=="function"&&define.amd?define(["exports"],e):(t=typeof globalThis!="undefined"?globalThis:t||self,e(t.WebStreamsPolyfill={}))})(ph,function(t){"use strict";function e(){}function n(h){return typeof h=="object"&&h!==null||typeof h=="function"}let r=e;function o(h,g){try{Object.defineProperty(h,"name",{value:g,configurable:!0})}catch(y){}}let i=Promise,s=Promise.prototype.then,a=Promise.reject.bind(i);function l(h){return new i(h)}function u(h){return l(g=>g(h))}function f(h){return a(h)}function p(h,g,y){return s.call(h,g,y)}function m(h,g,y){p(p(h,g,y),void 0,r)}function b(h,g){m(h,g)}function v(h,g){m(h,void 0,g)}function w(h,g,y){return p(h,g,y)}function _(h){p(h,void 0,r)}let T=h=>{if(typeof queueMicrotask=="function")T=queueMicrotask;else{let g=u(void 0);T=y=>p(g,y)}return T(h)};function R(h,g,y){if(typeof h!="function")throw new TypeError("Argument is not a function");return Function.prototype.apply.call(h,g,y)}function L(h,g,y){try{return u(R(h,g,y))}catch(C){return f(C)}}let D=16384;class x{constructor(){this._cursor=0,this._size=0,this._front={_elements:[],_next:void 0},this._back=this._front,this._cursor=0,this._size=0}get length(){return this._size}push(g){let y=this._back,C=y;y._elements.length===D-1&&(C={_elements:[],_next:void 0}),y._elements.push(g),C!==y&&(this._back=C,y._next=C),++this._size}shift(){let g=this._front,y=g,C=this._cursor,k=C+1,j=g._elements,K=j[C];return k===D&&(y=g._next,k=0),--this._size,this._cursor=k,g!==y&&(this._front=y),j[C]=void 0,K}forEach(g){let y=this._cursor,C=this._front,k=C._elements;for(;(y!==k.length||C._next!==void 0)&&!(y===k.length&&(C=C._next,k=C._elements,y=0,k.length===0));)g(k[y]),++y}peek(){let g=this._front,y=this._cursor;return g._elements[y]}}let P=Symbol("[[AbortSteps]]"),V=Symbol("[[ErrorSteps]]"),J=Symbol("[[CancelSteps]]"),E=Symbol("[[PullSteps]]"),O=Symbol("[[ReleaseSteps]]");function X(h,g){h._ownerReadableStream=g,g._reader=h,g._state==="readable"?be(h):g._state==="closed"?ke(h):Me(h,g._storedError)}function ee(h,g){let y=h._ownerReadableStream;return cr(y,g)}function se(h){let g=h._ownerReadableStream;g._state==="readable"?Ie(h,new TypeError("Reader was released and can no longer be used to monitor the stream's closedness")):Qe(h,new TypeError("Reader was released and can no longer be used to monitor the stream's closedness")),g._readableStreamController[O](),g._reader=void 0,h._ownerReadableStream=void 0}function re(h){return new TypeError("Cannot "+h+" a stream using a released reader")}function be(h){h._closedPromise=l((g,y)=>{h._closedPromise_resolve=g,h._closedPromise_reject=y})}function Me(h,g){be(h),Ie(h,g)}function ke(h){be(h),ba(h)}function Ie(h,g){h._closedPromise_reject!==void 0&&(_(h._closedPromise),h._closedPromise_reject(g),h._closedPromise_resolve=void 0,h._closedPromise_reject=void 0)}function Qe(h,g){Me(h,g)}function ba(h){h._closedPromise_resolve!==void 0&&(h._closedPromise_resolve(void 0),h._closedPromise_resolve=void 0,h._closedPromise_reject=void 0)}let Br=Number.isFinite||function(h){return typeof h=="number"&&isFinite(h)},Mu=Math.trunc||function(h){return h<0?Math.ceil(h):Math.floor(h)};function ie(h){return typeof h=="object"||typeof h=="function"}function cn(h,g){if(h!==void 0&&!ie(h))throw new TypeError(`${g} is not an object.`)}function Yt(h,g){if(typeof h!="function")throw new TypeError(`${g} is not a function.`)}function Fu(h){return typeof h=="object"&&h!==null||typeof h=="function"}function Xt(h,g){if(!Fu(h))throw new TypeError(`${g} is not an object.`)}function _t(h,g,y){if(h===void 0)throw new TypeError(`Parameter ${g} is required in '${y}'.`)}function A(h,g,y){if(h===void 0)throw new TypeError(`${g} is required in '${y}'.`)}function S(h){return Number(h)}function I(h){return h===0?0:h}function q(h){return I(Mu(h))}function M(h,g){let C=Number.MAX_SAFE_INTEGER,k=Number(h);if(k=I(k),!Br(k))throw new TypeError(`${g} is not a finite number`);if(k=q(k),k<0||k>C)throw new TypeError(`${g} is outside the accepted range of 0 to ${C}, inclusive`);return!Br(k)||k===0?0:k}function B(h,g){if(!ci(h))throw new TypeError(`${g} is not a ReadableStream.`)}function W(h){return new Z(h)}function N(h,g){h._reader._readRequests.push(g)}function U(h,g,y){let k=h._reader._readRequests.shift();y?k._closeSteps():k._chunkSteps(g)}function $(h){return h._reader._readRequests.length}function H(h){let g=h._reader;return!(g===void 0||!de(g))}class Z{constructor(g){if(_t(g,1,"ReadableStreamDefaultReader"),B(g,"First parameter"),fi(g))throw new TypeError("This stream has already been locked for exclusive reading by another reader");X(this,g),this._readRequests=new x}get closed(){return de(this)?this._closedPromise:f(at("closed"))}cancel(g=void 0){return de(this)?this._ownerReadableStream===void 0?f(re("cancel")):ee(this,g):f(at("cancel"))}read(){if(!de(this))return f(at("read"));if(this._ownerReadableStream===void 0)return f(re("read from"));let g,y,C=l((j,K)=>{g=j,y=K});return pe(this,{_chunkSteps:j=>g({value:j,done:!1}),_closeSteps:()=>g({value:void 0,done:!0}),_errorSteps:j=>y(j)}),C}releaseLock(){if(!de(this))throw at("releaseLock");this._ownerReadableStream!==void 0&&Fe(this)}}Object.defineProperties(Z.prototype,{cancel:{enumerable:!0},read:{enumerable:!0},releaseLock:{enumerable:!0},closed:{enumerable:!0}}),o(Z.prototype.cancel,"cancel"),o(Z.prototype.read,"read"),o(Z.prototype.releaseLock,"releaseLock"),typeof Symbol.toStringTag=="symbol"&&Object.defineProperty(Z.prototype,Symbol.toStringTag,{value:"ReadableStreamDefaultReader",configurable:!0});function de(h){return!n(h)||!Object.prototype.hasOwnProperty.call(h,"_readRequests")?!1:h instanceof Z}function pe(h,g){let y=h._ownerReadableStream;y._disturbed=!0,y._state==="closed"?g._closeSteps():y._state==="errored"?g._errorSteps(y._storedError):y._readableStreamController[E](g)}function Fe(h){se(h);let g=new TypeError("Reader was released");rt(h,g)}function rt(h,g){let y=h._readRequests;h._readRequests=new x,y.forEach(C=>{C._errorSteps(g)})}function at(h){return new TypeError(`ReadableStreamDefaultReader.prototype.${h} can only be used on a ReadableStreamDefaultReader`)}let De=Object.getPrototypeOf(Object.getPrototypeOf(async function*(){}).prototype);class He{constructor(g,y){this._ongoingPromise=void 0,this._isFinished=!1,this._reader=g,this._preventCancel=y}next(){let g=()=>this._nextSteps();return this._ongoingPromise=this._ongoingPromise?w(this._ongoingPromise,g,g):g(),this._ongoingPromise}return(g){let y=()=>this._returnSteps(g);return this._ongoingPromise?w(this._ongoingPromise,y,y):y()}_nextSteps(){if(this._isFinished)return Promise.resolve({value:void 0,done:!0});let g=this._reader,y,C,k=l((K,ce)=>{y=K,C=ce});return pe(g,{_chunkSteps:K=>{this._ongoingPromise=void 0,T(()=>y({value:K,done:!1}))},_closeSteps:()=>{this._ongoingPromise=void 0,this._isFinished=!0,se(g),y({value:void 0,done:!0})},_errorSteps:K=>{this._ongoingPromise=void 0,this._isFinished=!0,se(g),C(K)}}),k}_returnSteps(g){if(this._isFinished)return Promise.resolve({value:g,done:!0});this._isFinished=!0;let y=this._reader;if(!this._preventCancel){let C=ee(y,g);return se(y),w(C,()=>({value:g,done:!0}))}return se(y),u({value:g,done:!0})}}let Et={next(){return wa(this)?this._asyncIteratorImpl.next():f(_a("next"))},return(h){return wa(this)?this._asyncIteratorImpl.return(h):f(_a("return"))}};Object.setPrototypeOf(Et,De);function va(h,g){let y=W(h),C=new He(y,g),k=Object.create(Et);return k._asyncIteratorImpl=C,k}function wa(h){if(!n(h)||!Object.prototype.hasOwnProperty.call(h,"_asyncIteratorImpl"))return!1;try{return h._asyncIteratorImpl instanceof He}catch(g){return!1}}function _a(h){return new TypeError(`ReadableStreamAsyncIterator.${h} can only be used on a ReadableSteamAsyncIterator`)}let _n=Number.isNaN||function(h){return h!==h};var mo,Ht,At;function Je(h){return h.slice()}function SE(h,g,y,C,k){new Uint8Array(h).set(new Uint8Array(y,C,k),g)}let go=h=>(typeof h.transfer=="function"?go=g=>g.transfer():typeof structuredClone=="function"?go=g=>structuredClone(g,{transfer:[g]}):go=g=>g,go(h)),si=h=>(typeof h.detached=="boolean"?si=g=>g.detached:si=g=>g.byteLength===0,si(h));function PE(h,g,y){if(h.slice)return h.slice(g,y);let C=y-g,k=new ArrayBuffer(C);return SE(k,0,h,g,C),k}function Wf(h,g){let y=h[g];if(y!=null){if(typeof y!="function")throw new TypeError(`${String(g)} is not a function`);return y}}function JB(h){let g={[Symbol.iterator]:()=>h.iterator},y=async function*(){return yield*g}(),C=y.next;return{iterator:y,nextMethod:C,done:!1}}let Tg=(At=(mo=Symbol.asyncIterator)!==null&&mo!==void 0?mo:(Ht=Symbol.for)===null||Ht===void 0?void 0:Ht.call(Symbol,"Symbol.asyncIterator"))!==null&&At!==void 0?At:"@@asyncIterator";function IE(h,g="sync",y){if(y===void 0)if(g==="async"){if(y=Wf(h,Tg),y===void 0){let j=Wf(h,Symbol.iterator),K=IE(h,"sync",j);return JB(K)}}else y=Wf(h,Symbol.iterator);if(y===void 0)throw new TypeError("The object is not iterable");let C=R(y,h,[]);if(!n(C))throw new TypeError("The iterator method must return an object");let k=C.next;return{iterator:C,nextMethod:k,done:!1}}function KB(h){let g=R(h.nextMethod,h.iterator,[]);if(!n(g))throw new TypeError("The iterator.next() method must return an object");return g}function YB(h){return!!h.done}function XB(h){return h.value}function QB(h){return!(typeof h!="number"||_n(h)||h<0)}function xE(h){let g=PE(h.buffer,h.byteOffset,h.byteOffset+h.byteLength);return new Uint8Array(g)}function Sg(h){let g=h._queue.shift();return h._queueTotalSize-=g.size,h._queueTotalSize<0&&(h._queueTotalSize=0),g.value}function Pg(h,g,y){if(!QB(y)||y===1/0)throw new RangeError("Size must be a finite, non-NaN, non-negative number.");h._queue.push({value:g,size:y}),h._queueTotalSize+=y}function ZB(h){return h._queue.peek().value}function ai(h){h._queue=new x,h._queueTotalSize=0}function kE(h){return h===DataView}function eG(h){return kE(h.constructor)}function tG(h){return kE(h)?1:h.BYTES_PER_ELEMENT}class rs{constructor(){throw new TypeError("Illegal constructor")}get view(){if(!Ig(this))throw Og("view");return this._view}respond(g){if(!Ig(this))throw Og("respond");if(_t(g,1,"respond"),g=M(g,"First parameter"),this._associatedReadableByteStreamController===void 0)throw new TypeError("This BYOB request has been invalidated");if(si(this._view.buffer))throw new TypeError("The BYOB request's buffer has been detached and so cannot be used as a response");Yf(this._associatedReadableByteStreamController,g)}respondWithNewView(g){if(!Ig(this))throw Og("respondWithNewView");if(_t(g,1,"respondWithNewView"),!ArrayBuffer.isView(g))throw new TypeError("You can only respond with array buffer views");if(this._associatedReadableByteStreamController===void 0)throw new TypeError("This BYOB request has been invalidated");if(si(g.buffer))throw new TypeError("The given view's buffer has been detached and so cannot be used as a response");Xf(this._associatedReadableByteStreamController,g)}}Object.defineProperties(rs.prototype,{respond:{enumerable:!0},respondWithNewView:{enumerable:!0},view:{enumerable:!0}}),o(rs.prototype.respond,"respond"),o(rs.prototype.respondWithNewView,"respondWithNewView"),typeof Symbol.toStringTag=="symbol"&&Object.defineProperty(rs.prototype,Symbol.toStringTag,{value:"ReadableStreamBYOBRequest",configurable:!0});class yo{constructor(){throw new TypeError("Illegal constructor")}get byobRequest(){if(!os(this))throw Uu("byobRequest");return Ng(this)}get desiredSize(){if(!os(this))throw Uu("desiredSize");return GE(this)}close(){if(!os(this))throw Uu("close");if(this._closeRequested)throw new TypeError("The stream has already been closed; do not close it again!");let g=this._controlledReadableByteStream._state;if(g!=="readable")throw new TypeError(`The stream (in ${g} state) is not in the readable state and cannot be closed`);Lu(this)}enqueue(g){if(!os(this))throw Uu("enqueue");if(_t(g,1,"enqueue"),!ArrayBuffer.isView(g))throw new TypeError("chunk must be an array buffer view");if(g.byteLength===0)throw new TypeError("chunk must have non-zero byteLength");if(g.buffer.byteLength===0)throw new TypeError("chunk's buffer must have non-zero byteLength");if(this._closeRequested)throw new TypeError("stream is closed or draining");let y=this._controlledReadableByteStream._state;if(y!=="readable")throw new TypeError(`The stream (in ${y} state) is not in the readable state and cannot be enqueued to`);Kf(this,g)}error(g=void 0){if(!os(this))throw Uu("error");Vn(this,g)}[J](g){RE(this),ai(this);let y=this._cancelAlgorithm(g);return Jf(this),y}[E](g){let y=this._controlledReadableByteStream;if(this._queueTotalSize>0){BE(this,g);return}let C=this._autoAllocateChunkSize;if(C!==void 0){let k;try{k=new ArrayBuffer(C)}catch(K){g._errorSteps(K);return}let j={buffer:k,bufferByteLength:C,byteOffset:0,byteLength:C,bytesFilled:0,minimumFill:1,elementSize:1,viewConstructor:Uint8Array,readerType:"default"};this._pendingPullIntos.push(j)}N(y,g),is(this)}[O](){if(this._pendingPullIntos.length>0){let g=this._pendingPullIntos.peek();g.readerType="none",this._pendingPullIntos=new x,this._pendingPullIntos.push(g)}}}Object.defineProperties(yo.prototype,{close:{enumerable:!0},enqueue:{enumerable:!0},error:{enumerable:!0},byobRequest:{enumerable:!0},desiredSize:{enumerable:!0}}),o(yo.prototype.close,"close"),o(yo.prototype.enqueue,"enqueue"),o(yo.prototype.error,"error"),typeof Symbol.toStringTag=="symbol"&&Object.defineProperty(yo.prototype,Symbol.toStringTag,{value:"ReadableByteStreamController",configurable:!0});function os(h){return!n(h)||!Object.prototype.hasOwnProperty.call(h,"_controlledReadableByteStream")?!1:h instanceof yo}function Ig(h){return!n(h)||!Object.prototype.hasOwnProperty.call(h,"_associatedReadableByteStreamController")?!1:h instanceof rs}function is(h){if(!sG(h))return;if(h._pulling){h._pullAgain=!0;return}h._pulling=!0;let y=h._pullAlgorithm();m(y,()=>(h._pulling=!1,h._pullAgain&&(h._pullAgain=!1,is(h)),null),C=>(Vn(h,C),null))}function RE(h){kg(h),h._pendingPullIntos=new x}function xg(h,g){let y=!1;h._state==="closed"&&(y=!0);let C=NE(g);g.readerType==="default"?U(h,C,y):dG(h,C,y)}function NE(h){let g=h.bytesFilled,y=h.elementSize;return new h.viewConstructor(h.buffer,h.byteOffset,g/y)}function zf(h,g,y,C){h._queue.push({buffer:g,byteOffset:y,byteLength:C}),h._queueTotalSize+=C}function OE(h,g,y,C){let k;try{k=PE(g,y,y+C)}catch(j){throw Vn(h,j),j}zf(h,k,0,C)}function DE(h,g){g.bytesFilled>0&&OE(h,g.buffer,g.byteOffset,g.bytesFilled),Ea(h)}function ME(h,g){let y=Math.min(h._queueTotalSize,g.byteLength-g.bytesFilled),C=g.bytesFilled+y,k=y,j=!1,K=C%g.elementSize,ce=C-K;ce>=g.minimumFill&&(k=ce-g.bytesFilled,j=!0);let Ee=h._queue;for(;k>0;){let ge=Ee.peek(),Se=Math.min(k,ge.byteLength),Ne=g.byteOffset+g.bytesFilled;SE(g.buffer,Ne,ge.buffer,ge.byteOffset,Se),ge.byteLength===Se?Ee.shift():(ge.byteOffset+=Se,ge.byteLength-=Se),h._queueTotalSize-=Se,FE(h,Se,g),k-=Se}return j}function FE(h,g,y){y.bytesFilled+=g}function LE(h){h._queueTotalSize===0&&h._closeRequested?(Jf(h),Vu(h._controlledReadableByteStream)):is(h)}function kg(h){h._byobRequest!==null&&(h._byobRequest._associatedReadableByteStreamController=void 0,h._byobRequest._view=null,h._byobRequest=null)}function Rg(h){for(;h._pendingPullIntos.length>0;){if(h._queueTotalSize===0)return;let g=h._pendingPullIntos.peek();ME(h,g)&&(Ea(h),xg(h._controlledReadableByteStream,g))}}function nG(h){let g=h._controlledReadableByteStream._reader;for(;g._readRequests.length>0;){if(h._queueTotalSize===0)return;let y=g._readRequests.shift();BE(h,y)}}function rG(h,g,y,C){let k=h._controlledReadableByteStream,j=g.constructor,K=tG(j),{byteOffset:ce,byteLength:Ee}=g,ge=y*K,Se;try{Se=go(g.buffer)}catch(Ze){C._errorSteps(Ze);return}let Ne={buffer:Se,bufferByteLength:Se.byteLength,byteOffset:ce,byteLength:Ee,bytesFilled:0,minimumFill:ge,elementSize:K,viewConstructor:j,readerType:"byob"};if(h._pendingPullIntos.length>0){h._pendingPullIntos.push(Ne),$E(k,C);return}if(k._state==="closed"){let Ze=new j(Ne.buffer,Ne.byteOffset,0);C._closeSteps(Ze);return}if(h._queueTotalSize>0){if(ME(h,Ne)){let Ze=NE(Ne);LE(h),C._chunkSteps(Ze);return}if(h._closeRequested){let Ze=new TypeError("Insufficient bytes to fill elements in the given buffer");Vn(h,Ze),C._errorSteps(Ze);return}}h._pendingPullIntos.push(Ne),$E(k,C),is(h)}function oG(h,g){g.readerType==="none"&&Ea(h);let y=h._controlledReadableByteStream;if(Dg(y))for(;VE(y)>0;){let C=Ea(h);xg(y,C)}}function iG(h,g,y){if(FE(h,g,y),y.readerType==="none"){DE(h,y),Rg(h);return}if(y.bytesFilled<y.minimumFill)return;Ea(h);let C=y.bytesFilled%y.elementSize;if(C>0){let k=y.byteOffset+y.bytesFilled;OE(h,y.buffer,k-C,C)}y.bytesFilled-=C,xg(h._controlledReadableByteStream,y),Rg(h)}function UE(h,g){let y=h._pendingPullIntos.peek();kg(h),h._controlledReadableByteStream._state==="closed"?oG(h,y):iG(h,g,y),is(h)}function Ea(h){return h._pendingPullIntos.shift()}function sG(h){let g=h._controlledReadableByteStream;return g._state!=="readable"||h._closeRequested||!h._started?!1:!!(H(g)&&$(g)>0||Dg(g)&&VE(g)>0||GE(h)>0)}function Jf(h){h._pullAlgorithm=void 0,h._cancelAlgorithm=void 0}function Lu(h){let g=h._controlledReadableByteStream;if(!(h._closeRequested||g._state!=="readable")){if(h._queueTotalSize>0){h._closeRequested=!0;return}if(h._pendingPullIntos.length>0){let y=h._pendingPullIntos.peek();if(y.bytesFilled%y.elementSize!==0){let C=new TypeError("Insufficient bytes to fill elements in the given buffer");throw Vn(h,C),C}}Jf(h),Vu(g)}}function Kf(h,g){let y=h._controlledReadableByteStream;if(h._closeRequested||y._state!=="readable")return;let{buffer:C,byteOffset:k,byteLength:j}=g;if(si(C))throw new TypeError("chunk's buffer is detached and so cannot be enqueued");let K=go(C);if(h._pendingPullIntos.length>0){let ce=h._pendingPullIntos.peek();if(si(ce.buffer))throw new TypeError("The BYOB request's buffer has been detached and so cannot be filled with an enqueued chunk");kg(h),ce.buffer=go(ce.buffer),ce.readerType==="none"&&DE(h,ce)}if(H(y))if(nG(h),$(y)===0)zf(h,K,k,j);else{h._pendingPullIntos.length>0&&Ea(h);let ce=new Uint8Array(K,k,j);U(y,ce,!1)}else Dg(y)?(zf(h,K,k,j),Rg(h)):zf(h,K,k,j);is(h)}function Vn(h,g){let y=h._controlledReadableByteStream;y._state==="readable"&&(RE(h),ai(h),Jf(h),pA(y,g))}function BE(h,g){let y=h._queue.shift();h._queueTotalSize-=y.byteLength,LE(h);let C=new Uint8Array(y.buffer,y.byteOffset,y.byteLength);g._chunkSteps(C)}function Ng(h){if(h._byobRequest===null&&h._pendingPullIntos.length>0){let g=h._pendingPullIntos.peek(),y=new Uint8Array(g.buffer,g.byteOffset+g.bytesFilled,g.byteLength-g.bytesFilled),C=Object.create(rs.prototype);lG(C,h,y),h._byobRequest=C}return h._byobRequest}function GE(h){let g=h._controlledReadableByteStream._state;return g==="errored"?null:g==="closed"?0:h._strategyHWM-h._queueTotalSize}function Yf(h,g){let y=h._pendingPullIntos.peek();if(h._controlledReadableByteStream._state==="closed"){if(g!==0)throw new TypeError("bytesWritten must be 0 when calling respond() on a closed stream")}else{if(g===0)throw new TypeError("bytesWritten must be greater than 0 when calling respond() on a readable stream");if(y.bytesFilled+g>y.byteLength)throw new RangeError("bytesWritten out of range")}y.buffer=go(y.buffer),UE(h,g)}function Xf(h,g){let y=h._pendingPullIntos.peek();if(h._controlledReadableByteStream._state==="closed"){if(g.byteLength!==0)throw new TypeError("The view's length must be 0 when calling respondWithNewView() on a closed stream")}else if(g.byteLength===0)throw new TypeError("The view's length must be greater than 0 when calling respondWithNewView() on a readable stream");if(y.byteOffset+y.bytesFilled!==g.byteOffset)throw new RangeError("The region specified by view does not match byobRequest");if(y.bufferByteLength!==g.buffer.byteLength)throw new RangeError("The buffer of view has different capacity than byobRequest");if(y.bytesFilled+g.byteLength>y.byteLength)throw new RangeError("The region specified by view is larger than byobRequest");let k=g.byteLength;y.buffer=go(g.buffer),UE(h,k)}function HE(h,g,y,C,k,j,K){g._controlledReadableByteStream=h,g._pullAgain=!1,g._pulling=!1,g._byobRequest=null,g._queue=g._queueTotalSize=void 0,ai(g),g._closeRequested=!1,g._started=!1,g._strategyHWM=j,g._pullAlgorithm=C,g._cancelAlgorithm=k,g._autoAllocateChunkSize=K,g._pendingPullIntos=new x,h._readableStreamController=g;let ce=y();m(u(ce),()=>(g._started=!0,is(g),null),Ee=>(Vn(g,Ee),null))}function aG(h,g,y){let C=Object.create(yo.prototype),k,j,K;g.start!==void 0?k=()=>g.start(C):k=()=>{},g.pull!==void 0?j=()=>g.pull(C):j=()=>u(void 0),g.cancel!==void 0?K=Ee=>g.cancel(Ee):K=()=>u(void 0);let ce=g.autoAllocateChunkSize;if(ce===0)throw new TypeError("autoAllocateChunkSize must be greater than 0");HE(h,C,k,j,K,y,ce)}function lG(h,g,y){h._associatedReadableByteStreamController=g,h._view=y}function Og(h){return new TypeError(`ReadableStreamBYOBRequest.prototype.${h} can only be used on a ReadableStreamBYOBRequest`)}function Uu(h){return new TypeError(`ReadableByteStreamController.prototype.${h} can only be used on a ReadableByteStreamController`)}function uG(h,g){cn(h,g);let y=h==null?void 0:h.mode;return{mode:y===void 0?void 0:cG(y,`${g} has member 'mode' that`)}}function cG(h,g){if(h=`${h}`,h!=="byob")throw new TypeError(`${g} '${h}' is not a valid enumeration value for ReadableStreamReaderMode`);return h}function fG(h,g){var y;cn(h,g);let C=(y=h==null?void 0:h.min)!==null&&y!==void 0?y:1;return{min:M(C,`${g} has member 'min' that`)}}function qE(h){return new li(h)}function $E(h,g){h._reader._readIntoRequests.push(g)}function dG(h,g,y){let k=h._reader._readIntoRequests.shift();y?k._closeSteps(g):k._chunkSteps(g)}function VE(h){return h._reader._readIntoRequests.length}function Dg(h){let g=h._reader;return!(g===void 0||!ss(g))}class li{constructor(g){if(_t(g,1,"ReadableStreamBYOBReader"),B(g,"First parameter"),fi(g))throw new TypeError("This stream has already been locked for exclusive reading by another reader");if(!os(g._readableStreamController))throw new TypeError("Cannot construct a ReadableStreamBYOBReader for a stream not constructed with a byte source");X(this,g),this._readIntoRequests=new x}get closed(){return ss(this)?this._closedPromise:f(Qf("closed"))}cancel(g=void 0){return ss(this)?this._ownerReadableStream===void 0?f(re("cancel")):ee(this,g):f(Qf("cancel"))}read(g,y={}){if(!ss(this))return f(Qf("read"));if(!ArrayBuffer.isView(g))return f(new TypeError("view must be an array buffer view"));if(g.byteLength===0)return f(new TypeError("view must have non-zero byteLength"));if(g.buffer.byteLength===0)return f(new TypeError("view's buffer must have non-zero byteLength"));if(si(g.buffer))return f(new TypeError("view's buffer has been detached"));let C;try{C=fG(y,"options")}catch(ge){return f(ge)}let k=C.min;if(k===0)return f(new TypeError("options.min must be greater than 0"));if(eG(g)){if(k>g.byteLength)return f(new RangeError("options.min must be less than or equal to view's byteLength"))}else if(k>g.length)return f(new RangeError("options.min must be less than or equal to view's length"));if(this._ownerReadableStream===void 0)return f(re("read from"));let j,K,ce=l((ge,Se)=>{j=ge,K=Se});return jE(this,g,k,{_chunkSteps:ge=>j({value:ge,done:!1}),_closeSteps:ge=>j({value:ge,done:!0}),_errorSteps:ge=>K(ge)}),ce}releaseLock(){if(!ss(this))throw Qf("releaseLock");this._ownerReadableStream!==void 0&&hG(this)}}Object.defineProperties(li.prototype,{cancel:{enumerable:!0},read:{enumerable:!0},releaseLock:{enumerable:!0},closed:{enumerable:!0}}),o(li.prototype.cancel,"cancel"),o(li.prototype.read,"read"),o(li.prototype.releaseLock,"releaseLock"),typeof Symbol.toStringTag=="symbol"&&Object.defineProperty(li.prototype,Symbol.toStringTag,{value:"ReadableStreamBYOBReader",configurable:!0});function ss(h){return!n(h)||!Object.prototype.hasOwnProperty.call(h,"_readIntoRequests")?!1:h instanceof li}function jE(h,g,y,C){let k=h._ownerReadableStream;k._disturbed=!0,k._state==="errored"?C._errorSteps(k._storedError):rG(k._readableStreamController,g,y,C)}function hG(h){se(h);let g=new TypeError("Reader was released");WE(h,g)}function WE(h,g){let y=h._readIntoRequests;h._readIntoRequests=new x,y.forEach(C=>{C._errorSteps(g)})}function Qf(h){return new TypeError(`ReadableStreamBYOBReader.prototype.${h} can only be used on a ReadableStreamBYOBReader`)}function Bu(h,g){let{highWaterMark:y}=h;if(y===void 0)return g;if(_n(y)||y<0)throw new RangeError("Invalid highWaterMark");return y}function Zf(h){let{size:g}=h;return g||(()=>1)}function ed(h,g){cn(h,g);let y=h==null?void 0:h.highWaterMark,C=h==null?void 0:h.size;return{highWaterMark:y===void 0?void 0:S(y),size:C===void 0?void 0:pG(C,`${g} has member 'size' that`)}}function pG(h,g){return Yt(h,g),y=>S(h(y))}function mG(h,g){cn(h,g);let y=h==null?void 0:h.abort,C=h==null?void 0:h.close,k=h==null?void 0:h.start,j=h==null?void 0:h.type,K=h==null?void 0:h.write;return{abort:y===void 0?void 0:gG(y,h,`${g} has member 'abort' that`),close:C===void 0?void 0:yG(C,h,`${g} has member 'close' that`),start:k===void 0?void 0:bG(k,h,`${g} has member 'start' that`),write:K===void 0?void 0:vG(K,h,`${g} has member 'write' that`),type:j}}function gG(h,g,y){return Yt(h,y),C=>L(h,g,[C])}function yG(h,g,y){return Yt(h,y),()=>L(h,g,[])}function bG(h,g,y){return Yt(h,y),C=>R(h,g,[C])}function vG(h,g,y){return Yt(h,y),(C,k)=>L(h,g,[C,k])}function zE(h,g){if(!Aa(h))throw new TypeError(`${g} is not a WritableStream.`)}function wG(h){if(typeof h!="object"||h===null)return!1;try{return typeof h.aborted=="boolean"}catch(g){return!1}}let _G=typeof AbortController=="function";function EG(){if(_G)return new AbortController}class ui{constructor(g={},y={}){g===void 0?g=null:Xt(g,"First parameter");let C=ed(y,"Second parameter"),k=mG(g,"First parameter");if(KE(this),k.type!==void 0)throw new RangeError("Invalid type is specified");let K=Zf(C),ce=Bu(C,1);FG(this,k,ce,K)}get locked(){if(!Aa(this))throw id("locked");return Ca(this)}abort(g=void 0){return Aa(this)?Ca(this)?f(new TypeError("Cannot abort a stream that already has a writer")):td(this,g):f(id("abort"))}close(){return Aa(this)?Ca(this)?f(new TypeError("Cannot close a stream that already has a writer")):Gr(this)?f(new TypeError("Cannot close an already-closing stream")):YE(this):f(id("close"))}getWriter(){if(!Aa(this))throw id("getWriter");return JE(this)}}Object.defineProperties(ui.prototype,{abort:{enumerable:!0},close:{enumerable:!0},getWriter:{enumerable:!0},locked:{enumerable:!0}}),o(ui.prototype.abort,"abort"),o(ui.prototype.close,"close"),o(ui.prototype.getWriter,"getWriter"),typeof Symbol.toStringTag=="symbol"&&Object.defineProperty(ui.prototype,Symbol.toStringTag,{value:"WritableStream",configurable:!0});function JE(h){return new bo(h)}function AG(h,g,y,C,k=1,j=()=>1){let K=Object.create(ui.prototype);KE(K);let ce=Object.create(Ta.prototype);return nA(K,ce,h,g,y,C,k,j),K}function KE(h){h._state="writable",h._storedError=void 0,h._writer=void 0,h._writableStreamController=void 0,h._writeRequests=new x,h._inFlightWriteRequest=void 0,h._closeRequest=void 0,h._inFlightCloseRequest=void 0,h._pendingAbortRequest=void 0,h._backpressure=!1}function Aa(h){return!n(h)||!Object.prototype.hasOwnProperty.call(h,"_writableStreamController")?!1:h instanceof ui}function Ca(h){return h._writer!==void 0}function td(h,g){var y;if(h._state==="closed"||h._state==="errored")return u(void 0);h._writableStreamController._abortReason=g,(y=h._writableStreamController._abortController)===null||y===void 0||y.abort(g);let C=h._state;if(C==="closed"||C==="errored")return u(void 0);if(h._pendingAbortRequest!==void 0)return h._pendingAbortRequest._promise;let k=!1;C==="erroring"&&(k=!0,g=void 0);let j=l((K,ce)=>{h._pendingAbortRequest={_promise:void 0,_resolve:K,_reject:ce,_reason:g,_wasAlreadyErroring:k}});return h._pendingAbortRequest._promise=j,k||Fg(h,g),j}function YE(h){let g=h._state;if(g==="closed"||g==="errored")return f(new TypeError(`The stream (in ${g} state) is not in the writable state and cannot be closed`));let y=l((k,j)=>{let K={_resolve:k,_reject:j};h._closeRequest=K}),C=h._writer;return C!==void 0&&h._backpressure&&g==="writable"&&Vg(C),LG(h._writableStreamController),y}function CG(h){return l((y,C)=>{let k={_resolve:y,_reject:C};h._writeRequests.push(k)})}function Mg(h,g){if(h._state==="writable"){Fg(h,g);return}Lg(h)}function Fg(h,g){let y=h._writableStreamController;h._state="erroring",h._storedError=g;let C=h._writer;C!==void 0&&QE(C,g),!xG(h)&&y._started&&Lg(h)}function Lg(h){h._state="errored",h._writableStreamController[V]();let g=h._storedError;if(h._writeRequests.forEach(k=>{k._reject(g)}),h._writeRequests=new x,h._pendingAbortRequest===void 0){nd(h);return}let y=h._pendingAbortRequest;if(h._pendingAbortRequest=void 0,y._wasAlreadyErroring){y._reject(g),nd(h);return}let C=h._writableStreamController[P](y._reason);m(C,()=>(y._resolve(),nd(h),null),k=>(y._reject(k),nd(h),null))}function TG(h){h._inFlightWriteRequest._resolve(void 0),h._inFlightWriteRequest=void 0}function SG(h,g){h._inFlightWriteRequest._reject(g),h._inFlightWriteRequest=void 0,Mg(h,g)}function PG(h){h._inFlightCloseRequest._resolve(void 0),h._inFlightCloseRequest=void 0,h._state==="erroring"&&(h._storedError=void 0,h._pendingAbortRequest!==void 0&&(h._pendingAbortRequest._resolve(),h._pendingAbortRequest=void 0)),h._state="closed";let y=h._writer;y!==void 0&&sA(y)}function IG(h,g){h._inFlightCloseRequest._reject(g),h._inFlightCloseRequest=void 0,h._pendingAbortRequest!==void 0&&(h._pendingAbortRequest._reject(g),h._pendingAbortRequest=void 0),Mg(h,g)}function Gr(h){return!(h._closeRequest===void 0&&h._inFlightCloseRequest===void 0)}function xG(h){return!(h._inFlightWriteRequest===void 0&&h._inFlightCloseRequest===void 0)}function kG(h){h._inFlightCloseRequest=h._closeRequest,h._closeRequest=void 0}function RG(h){h._inFlightWriteRequest=h._writeRequests.shift()}function nd(h){h._closeRequest!==void 0&&(h._closeRequest._reject(h._storedError),h._closeRequest=void 0);let g=h._writer;g!==void 0&&qg(g,h._storedError)}function Ug(h,g){let y=h._writer;y!==void 0&&g!==h._backpressure&&(g?VG(y):Vg(y)),h._backpressure=g}class bo{constructor(g){if(_t(g,1,"WritableStreamDefaultWriter"),zE(g,"First parameter"),Ca(g))throw new TypeError("This stream has already been locked for exclusive writing by another writer");this._ownerWritableStream=g,g._writer=this;let y=g._state;if(y==="writable")!Gr(g)&&g._backpressure?ad(this):aA(this),sd(this);else if(y==="erroring")$g(this,g._storedError),sd(this);else if(y==="closed")aA(this),qG(this);else{let C=g._storedError;$g(this,C),iA(this,C)}}get closed(){return as(this)?this._closedPromise:f(ls("closed"))}get desiredSize(){if(!as(this))throw ls("desiredSize");if(this._ownerWritableStream===void 0)throw Hu("desiredSize");return MG(this)}get ready(){return as(this)?this._readyPromise:f(ls("ready"))}abort(g=void 0){return as(this)?this._ownerWritableStream===void 0?f(Hu("abort")):NG(this,g):f(ls("abort"))}close(){if(!as(this))return f(ls("close"));let g=this._ownerWritableStream;return g===void 0?f(Hu("close")):Gr(g)?f(new TypeError("Cannot close an already-closing stream")):XE(this)}releaseLock(){if(!as(this))throw ls("releaseLock");this._ownerWritableStream!==void 0&&ZE(this)}write(g=void 0){return as(this)?this._ownerWritableStream===void 0?f(Hu("write to")):eA(this,g):f(ls("write"))}}Object.defineProperties(bo.prototype,{abort:{enumerable:!0},close:{enumerable:!0},releaseLock:{enumerable:!0},write:{enumerable:!0},closed:{enumerable:!0},desiredSize:{enumerable:!0},ready:{enumerable:!0}}),o(bo.prototype.abort,"abort"),o(bo.prototype.close,"close"),o(bo.prototype.releaseLock,"releaseLock"),o(bo.prototype.write,"write"),typeof Symbol.toStringTag=="symbol"&&Object.defineProperty(bo.prototype,Symbol.toStringTag,{value:"WritableStreamDefaultWriter",configurable:!0});function as(h){return!n(h)||!Object.prototype.hasOwnProperty.call(h,"_ownerWritableStream")?!1:h instanceof bo}function NG(h,g){let y=h._ownerWritableStream;return td(y,g)}function XE(h){let g=h._ownerWritableStream;return YE(g)}function OG(h){let g=h._ownerWritableStream,y=g._state;return Gr(g)||y==="closed"?u(void 0):y==="errored"?f(g._storedError):XE(h)}function DG(h,g){h._closedPromiseState==="pending"?qg(h,g):$G(h,g)}function QE(h,g){h._readyPromiseState==="pending"?lA(h,g):jG(h,g)}function MG(h){let g=h._ownerWritableStream,y=g._state;return y==="errored"||y==="erroring"?null:y==="closed"?0:rA(g._writableStreamController)}function ZE(h){let g=h._ownerWritableStream,y=new TypeError("Writer was released and can no longer be used to monitor the stream's closedness");QE(h,y),DG(h,y),g._writer=void 0,h._ownerWritableStream=void 0}function eA(h,g){let y=h._ownerWritableStream,C=y._writableStreamController,k=UG(C,g);if(y!==h._ownerWritableStream)return f(Hu("write to"));let j=y._state;if(j==="errored")return f(y._storedError);if(Gr(y)||j==="closed")return f(new TypeError("The stream is closing or closed and cannot be written to"));if(j==="erroring")return f(y._storedError);let K=CG(y);return BG(C,g,k),K}let tA={};class Ta{constructor(){throw new TypeError("Illegal constructor")}get abortReason(){if(!Bg(this))throw Hg("abortReason");return this._abortReason}get signal(){if(!Bg(this))throw Hg("signal");if(this._abortController===void 0)throw new TypeError("WritableStreamDefaultController.prototype.signal is not supported");return this._abortController.signal}error(g=void 0){if(!Bg(this))throw Hg("error");this._controlledWritableStream._state==="writable"&&oA(this,g)}[P](g){let y=this._abortAlgorithm(g);return rd(this),y}[V](){ai(this)}}Object.defineProperties(Ta.prototype,{abortReason:{enumerable:!0},signal:{enumerable:!0},error:{enumerable:!0}}),typeof Symbol.toStringTag=="symbol"&&Object.defineProperty(Ta.prototype,Symbol.toStringTag,{value:"WritableStreamDefaultController",configurable:!0});function Bg(h){return!n(h)||!Object.prototype.hasOwnProperty.call(h,"_controlledWritableStream")?!1:h instanceof Ta}function nA(h,g,y,C,k,j,K,ce){g._controlledWritableStream=h,h._writableStreamController=g,g._queue=void 0,g._queueTotalSize=void 0,ai(g),g._abortReason=void 0,g._abortController=EG(),g._started=!1,g._strategySizeAlgorithm=ce,g._strategyHWM=K,g._writeAlgorithm=C,g._closeAlgorithm=k,g._abortAlgorithm=j;let Ee=Gg(g);Ug(h,Ee);let ge=y(),Se=u(ge);m(Se,()=>(g._started=!0,od(g),null),Ne=>(g._started=!0,Mg(h,Ne),null))}function FG(h,g,y,C){let k=Object.create(Ta.prototype),j,K,ce,Ee;g.start!==void 0?j=()=>g.start(k):j=()=>{},g.write!==void 0?K=ge=>g.write(ge,k):K=()=>u(void 0),g.close!==void 0?ce=()=>g.close():ce=()=>u(void 0),g.abort!==void 0?Ee=ge=>g.abort(ge):Ee=()=>u(void 0),nA(h,k,j,K,ce,Ee,y,C)}function rd(h){h._writeAlgorithm=void 0,h._closeAlgorithm=void 0,h._abortAlgorithm=void 0,h._strategySizeAlgorithm=void 0}function LG(h){Pg(h,tA,0),od(h)}function UG(h,g){try{return h._strategySizeAlgorithm(g)}catch(y){return Gu(h,y),1}}function rA(h){return h._strategyHWM-h._queueTotalSize}function BG(h,g,y){try{Pg(h,g,y)}catch(k){Gu(h,k);return}let C=h._controlledWritableStream;if(!Gr(C)&&C._state==="writable"){let k=Gg(h);Ug(C,k)}od(h)}function od(h){let g=h._controlledWritableStream;if(!h._started||g._inFlightWriteRequest!==void 0)return;if(g._state==="erroring"){Lg(g);return}if(h._queue.length===0)return;let C=ZB(h);C===tA?GG(h):HG(h,C)}function Gu(h,g){h._controlledWritableStream._state==="writable"&&oA(h,g)}function GG(h){let g=h._controlledWritableStream;kG(g),Sg(h);let y=h._closeAlgorithm();rd(h),m(y,()=>(PG(g),null),C=>(IG(g,C),null))}function HG(h,g){let y=h._controlledWritableStream;RG(y);let C=h._writeAlgorithm(g);m(C,()=>{TG(y);let k=y._state;if(Sg(h),!Gr(y)&&k==="writable"){let j=Gg(h);Ug(y,j)}return od(h),null},k=>(y._state==="writable"&&rd(h),SG(y,k),null))}function Gg(h){return rA(h)<=0}function oA(h,g){let y=h._controlledWritableStream;rd(h),Fg(y,g)}function id(h){return new TypeError(`WritableStream.prototype.${h} can only be used on a WritableStream`)}function Hg(h){return new TypeError(`WritableStreamDefaultController.prototype.${h} can only be used on a WritableStreamDefaultController`)}function ls(h){return new TypeError(`WritableStreamDefaultWriter.prototype.${h} can only be used on a WritableStreamDefaultWriter`)}function Hu(h){return new TypeError("Cannot "+h+" a stream using a released writer")}function sd(h){h._closedPromise=l((g,y)=>{h._closedPromise_resolve=g,h._closedPromise_reject=y,h._closedPromiseState="pending"})}function iA(h,g){sd(h),qg(h,g)}function qG(h){sd(h),sA(h)}function qg(h,g){h._closedPromise_reject!==void 0&&(_(h._closedPromise),h._closedPromise_reject(g),h._closedPromise_resolve=void 0,h._closedPromise_reject=void 0,h._closedPromiseState="rejected")}function $G(h,g){iA(h,g)}function sA(h){h._closedPromise_resolve!==void 0&&(h._closedPromise_resolve(void 0),h._closedPromise_resolve=void 0,h._closedPromise_reject=void 0,h._closedPromiseState="resolved")}function ad(h){h._readyPromise=l((g,y)=>{h._readyPromise_resolve=g,h._readyPromise_reject=y}),h._readyPromiseState="pending"}function $g(h,g){ad(h),lA(h,g)}function aA(h){ad(h),Vg(h)}function lA(h,g){h._readyPromise_reject!==void 0&&(_(h._readyPromise),h._readyPromise_reject(g),h._readyPromise_resolve=void 0,h._readyPromise_reject=void 0,h._readyPromiseState="rejected")}function VG(h){ad(h)}function jG(h,g){$g(h,g)}function Vg(h){h._readyPromise_resolve!==void 0&&(h._readyPromise_resolve(void 0),h._readyPromise_resolve=void 0,h._readyPromise_reject=void 0,h._readyPromiseState="fulfilled")}function WG(){if(typeof globalThis!="undefined")return globalThis;if(typeof self!="undefined")return self;if(typeof global!="undefined")return global}let jg=WG();function zG(h){if(!(typeof h=="function"||typeof h=="object")||h.name!=="DOMException")return!1;try{return new h,!0}catch(g){return!1}}function JG(){let h=jg==null?void 0:jg.DOMException;return zG(h)?h:void 0}function KG(){let h=function(y,C){this.message=y||"",this.name=C||"Error",Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor)};return o(h,"DOMException"),h.prototype=Object.create(Error.prototype),Object.defineProperty(h.prototype,"constructor",{value:h,writable:!0,configurable:!0}),h}let YG=JG()||KG();function uA(h,g,y,C,k,j){let K=W(h),ce=JE(g);h._disturbed=!0;let Ee=!1,ge=u(void 0);return l((Se,Ne)=>{let Ze;if(j!==void 0){if(Ze=()=>{let ye=j.reason!==void 0?j.reason:new YG("Aborted","AbortError"),Oe=[];C||Oe.push(()=>g._state==="writable"?td(g,ye):u(void 0)),k||Oe.push(()=>h._state==="readable"?cr(h,ye):u(void 0)),fn(()=>Promise.all(Oe.map(et=>et())),!0,ye)},j.aborted){Ze();return}j.addEventListener("abort",Ze)}function fr(){return l((ye,Oe)=>{function et(En){En?ye():p(xa(),et,Oe)}et(!1)})}function xa(){return Ee?u(!0):p(ce._readyPromise,()=>l((ye,Oe)=>{pe(K,{_chunkSteps:et=>{ge=p(eA(ce,et),void 0,e),ye(!1)},_closeSteps:()=>ye(!0),_errorSteps:Oe})}))}if(wo(h,K._closedPromise,ye=>(C?jn(!0,ye):fn(()=>td(g,ye),!0,ye),null)),wo(g,ce._closedPromise,ye=>(k?jn(!0,ye):fn(()=>cr(h,ye),!0,ye),null)),Qt(h,K._closedPromise,()=>(y?jn():fn(()=>OG(ce)),null)),Gr(g)||g._state==="closed"){let ye=new TypeError("the destination writable stream closed before all data could be piped to it");k?jn(!0,ye):fn(()=>cr(h,ye),!0,ye)}_(fr());function hi(){let ye=ge;return p(ge,()=>ye!==ge?hi():void 0)}function wo(ye,Oe,et){ye._state==="errored"?et(ye._storedError):v(Oe,et)}function Qt(ye,Oe,et){ye._state==="closed"?et():b(Oe,et)}function fn(ye,Oe,et){if(Ee)return;Ee=!0,g._state==="writable"&&!Gr(g)?b(hi(),En):En();function En(){return m(ye(),()=>_o(Oe,et),ka=>_o(!0,ka)),null}}function jn(ye,Oe){Ee||(Ee=!0,g._state==="writable"&&!Gr(g)?b(hi(),()=>_o(ye,Oe)):_o(ye,Oe))}function _o(ye,Oe){return ZE(ce),se(K),j!==void 0&&j.removeEventListener("abort",Ze),ye?Ne(Oe):Se(void 0),null}})}class vo{constructor(){throw new TypeError("Illegal constructor")}get desiredSize(){if(!ld(this))throw cd("desiredSize");return Wg(this)}close(){if(!ld(this))throw cd("close");if(!Pa(this))throw new TypeError("The stream is not in a state that permits close");us(this)}enqueue(g=void 0){if(!ld(this))throw cd("enqueue");if(!Pa(this))throw new TypeError("The stream is not in a state that permits enqueue");return Sa(this,g)}error(g=void 0){if(!ld(this))throw cd("error");ur(this,g)}[J](g){ai(this);let y=this._cancelAlgorithm(g);return ud(this),y}[E](g){let y=this._controlledReadableStream;if(this._queue.length>0){let C=Sg(this);this._closeRequested&&this._queue.length===0?(ud(this),Vu(y)):qu(this),g._chunkSteps(C)}else N(y,g),qu(this)}[O](){}}Object.defineProperties(vo.prototype,{close:{enumerable:!0},enqueue:{enumerable:!0},error:{enumerable:!0},desiredSize:{enumerable:!0}}),o(vo.prototype.close,"close"),o(vo.prototype.enqueue,"enqueue"),o(vo.prototype.error,"error"),typeof Symbol.toStringTag=="symbol"&&Object.defineProperty(vo.prototype,Symbol.toStringTag,{value:"ReadableStreamDefaultController",configurable:!0});function ld(h){return!n(h)||!Object.prototype.hasOwnProperty.call(h,"_controlledReadableStream")?!1:h instanceof vo}function qu(h){if(!cA(h))return;if(h._pulling){h._pullAgain=!0;return}h._pulling=!0;let y=h._pullAlgorithm();m(y,()=>(h._pulling=!1,h._pullAgain&&(h._pullAgain=!1,qu(h)),null),C=>(ur(h,C),null))}function cA(h){let g=h._controlledReadableStream;return!Pa(h)||!h._started?!1:!!(fi(g)&&$(g)>0||Wg(h)>0)}function ud(h){h._pullAlgorithm=void 0,h._cancelAlgorithm=void 0,h._strategySizeAlgorithm=void 0}function us(h){if(!Pa(h))return;let g=h._controlledReadableStream;h._closeRequested=!0,h._queue.length===0&&(ud(h),Vu(g))}function Sa(h,g){if(!Pa(h))return;let y=h._controlledReadableStream;if(fi(y)&&$(y)>0)U(y,g,!1);else{let C;try{C=h._strategySizeAlgorithm(g)}catch(k){throw ur(h,k),k}try{Pg(h,g,C)}catch(k){throw ur(h,k),k}}qu(h)}function ur(h,g){let y=h._controlledReadableStream;y._state==="readable"&&(ai(h),ud(h),pA(y,g))}function Wg(h){let g=h._controlledReadableStream._state;return g==="errored"?null:g==="closed"?0:h._strategyHWM-h._queueTotalSize}function XG(h){return!cA(h)}function Pa(h){let g=h._controlledReadableStream._state;return!h._closeRequested&&g==="readable"}function fA(h,g,y,C,k,j,K){g._controlledReadableStream=h,g._queue=void 0,g._queueTotalSize=void 0,ai(g),g._started=!1,g._closeRequested=!1,g._pullAgain=!1,g._pulling=!1,g._strategySizeAlgorithm=K,g._strategyHWM=j,g._pullAlgorithm=C,g._cancelAlgorithm=k,h._readableStreamController=g;let ce=y();m(u(ce),()=>(g._started=!0,qu(g),null),Ee=>(ur(g,Ee),null))}function QG(h,g,y,C){let k=Object.create(vo.prototype),j,K,ce;g.start!==void 0?j=()=>g.start(k):j=()=>{},g.pull!==void 0?K=()=>g.pull(k):K=()=>u(void 0),g.cancel!==void 0?ce=Ee=>g.cancel(Ee):ce=()=>u(void 0),fA(h,k,j,K,ce,y,C)}function cd(h){return new TypeError(`ReadableStreamDefaultController.prototype.${h} can only be used on a ReadableStreamDefaultController`)}function ZG(h,g){return os(h._readableStreamController)?t3(h):e3(h)}function e3(h,g){let y=W(h),C=!1,k=!1,j=!1,K=!1,ce,Ee,ge,Se,Ne,Ze=l(Qt=>{Ne=Qt});function fr(){return C?(k=!0,u(void 0)):(C=!0,pe(y,{_chunkSteps:fn=>{T(()=>{k=!1;let jn=fn,_o=fn;j||Sa(ge._readableStreamController,jn),K||Sa(Se._readableStreamController,_o),C=!1,k&&fr()})},_closeSteps:()=>{C=!1,j||us(ge._readableStreamController),K||us(Se._readableStreamController),(!j||!K)&&Ne(void 0)},_errorSteps:()=>{C=!1}}),u(void 0))}function xa(Qt){if(j=!0,ce=Qt,K){let fn=Je([ce,Ee]),jn=cr(h,fn);Ne(jn)}return Ze}function hi(Qt){if(K=!0,Ee=Qt,j){let fn=Je([ce,Ee]),jn=cr(h,fn);Ne(jn)}return Ze}function wo(){}return ge=$u(wo,fr,xa),Se=$u(wo,fr,hi),v(y._closedPromise,Qt=>(ur(ge._readableStreamController,Qt),ur(Se._readableStreamController,Qt),(!j||!K)&&Ne(void 0),null)),[ge,Se]}function t3(h){let g=W(h),y=!1,C=!1,k=!1,j=!1,K=!1,ce,Ee,ge,Se,Ne,Ze=l(ye=>{Ne=ye});function fr(ye){v(ye._closedPromise,Oe=>(ye!==g||(Vn(ge._readableStreamController,Oe),Vn(Se._readableStreamController,Oe),(!j||!K)&&Ne(void 0)),null))}function xa(){ss(g)&&(se(g),g=W(h),fr(g)),pe(g,{_chunkSteps:Oe=>{T(()=>{C=!1,k=!1;let et=Oe,En=Oe;if(!j&&!K)try{En=xE(Oe)}catch(ka){Vn(ge._readableStreamController,ka),Vn(Se._readableStreamController,ka),Ne(cr(h,ka));return}j||Kf(ge._readableStreamController,et),K||Kf(Se._readableStreamController,En),y=!1,C?wo():k&&Qt()})},_closeSteps:()=>{y=!1,j||Lu(ge._readableStreamController),K||Lu(Se._readableStreamController),ge._readableStreamController._pendingPullIntos.length>0&&Yf(ge._readableStreamController,0),Se._readableStreamController._pendingPullIntos.length>0&&Yf(Se._readableStreamController,0),(!j||!K)&&Ne(void 0)},_errorSteps:()=>{y=!1}})}function hi(ye,Oe){de(g)&&(se(g),g=qE(h),fr(g));let et=Oe?Se:ge,En=Oe?ge:Se;jE(g,ye,1,{_chunkSteps:Ra=>{T(()=>{C=!1,k=!1;let Na=Oe?K:j;if(Oe?j:K)Na||Xf(et._readableStreamController,Ra);else{let PA;try{PA=xE(Ra)}catch(Xg){Vn(et._readableStreamController,Xg),Vn(En._readableStreamController,Xg),Ne(cr(h,Xg));return}Na||Xf(et._readableStreamController,Ra),Kf(En._readableStreamController,PA)}y=!1,C?wo():k&&Qt()})},_closeSteps:Ra=>{y=!1;let Na=Oe?K:j,bd=Oe?j:K;Na||Lu(et._readableStreamController),bd||Lu(En._readableStreamController),Ra!==void 0&&(Na||Xf(et._readableStreamController,Ra),!bd&&En._readableStreamController._pendingPullIntos.length>0&&Yf(En._readableStreamController,0)),(!Na||!bd)&&Ne(void 0)},_errorSteps:()=>{y=!1}})}function wo(){if(y)return C=!0,u(void 0);y=!0;let ye=Ng(ge._readableStreamController);return ye===null?xa():hi(ye._view,!1),u(void 0)}function Qt(){if(y)return k=!0,u(void 0);y=!0;let ye=Ng(Se._readableStreamController);return ye===null?xa():hi(ye._view,!0),u(void 0)}function fn(ye){if(j=!0,ce=ye,K){let Oe=Je([ce,Ee]),et=cr(h,Oe);Ne(et)}return Ze}function jn(ye){if(K=!0,Ee=ye,j){let Oe=Je([ce,Ee]),et=cr(h,Oe);Ne(et)}return Ze}function _o(){}return ge=hA(_o,wo,fn),Se=hA(_o,Qt,jn),fr(g),[ge,Se]}function n3(h){return n(h)&&typeof h.getReader!="undefined"}function r3(h){return n3(h)?i3(h.getReader()):o3(h)}function o3(h){let g,y=IE(h,"async"),C=e;function k(){let K;try{K=KB(y)}catch(Ee){return f(Ee)}let ce=u(K);return w(ce,Ee=>{if(!n(Ee))throw new TypeError("The promise returned by the iterator.next() method must fulfill with an object");if(YB(Ee))us(g._readableStreamController);else{let Se=XB(Ee);Sa(g._readableStreamController,Se)}})}function j(K){let ce=y.iterator,Ee;try{Ee=Wf(ce,"return")}catch(Ne){return f(Ne)}if(Ee===void 0)return u(void 0);let ge;try{ge=R(Ee,ce,[K])}catch(Ne){return f(Ne)}let Se=u(ge);return w(Se,Ne=>{if(!n(Ne))throw new TypeError("The promise returned by the iterator.return() method must fulfill with an object")})}return g=$u(C,k,j,0),g}function i3(h){let g,y=e;function C(){let j;try{j=h.read()}catch(K){return f(K)}return w(j,K=>{if(!n(K))throw new TypeError("The promise returned by the reader.read() method must fulfill with an object");if(K.done)us(g._readableStreamController);else{let ce=K.value;Sa(g._readableStreamController,ce)}})}function k(j){try{return u(h.cancel(j))}catch(K){return f(K)}}return g=$u(y,C,k,0),g}function s3(h,g){cn(h,g);let y=h,C=y==null?void 0:y.autoAllocateChunkSize,k=y==null?void 0:y.cancel,j=y==null?void 0:y.pull,K=y==null?void 0:y.start,ce=y==null?void 0:y.type;return{autoAllocateChunkSize:C===void 0?void 0:M(C,`${g} has member 'autoAllocateChunkSize' that`),cancel:k===void 0?void 0:a3(k,y,`${g} has member 'cancel' that`),pull:j===void 0?void 0:l3(j,y,`${g} has member 'pull' that`),start:K===void 0?void 0:u3(K,y,`${g} has member 'start' that`),type:ce===void 0?void 0:c3(ce,`${g} has member 'type' that`)}}function a3(h,g,y){return Yt(h,y),C=>L(h,g,[C])}function l3(h,g,y){return Yt(h,y),C=>L(h,g,[C])}function u3(h,g,y){return Yt(h,y),C=>R(h,g,[C])}function c3(h,g){if(h=`${h}`,h!=="bytes")throw new TypeError(`${g} '${h}' is not a valid enumeration value for ReadableStreamType`);return h}function f3(h,g){return cn(h,g),{preventCancel:!!(h==null?void 0:h.preventCancel)}}function dA(h,g){cn(h,g);let y=h==null?void 0:h.preventAbort,C=h==null?void 0:h.preventCancel,k=h==null?void 0:h.preventClose,j=h==null?void 0:h.signal;return j!==void 0&&d3(j,`${g} has member 'signal' that`),{preventAbort:!!y,preventCancel:!!C,preventClose:!!k,signal:j}}function d3(h,g){if(!wG(h))throw new TypeError(`${g} is not an AbortSignal.`)}function h3(h,g){cn(h,g);let y=h==null?void 0:h.readable;A(y,"readable","ReadableWritablePair"),B(y,`${g} has member 'readable' that`);let C=h==null?void 0:h.writable;return A(C,"writable","ReadableWritablePair"),zE(C,`${g} has member 'writable' that`),{readable:y,writable:C}}class qt{constructor(g={},y={}){g===void 0?g=null:Xt(g,"First parameter");let C=ed(y,"Second parameter"),k=s3(g,"First parameter");if(zg(this),k.type==="bytes"){if(C.size!==void 0)throw new RangeError("The strategy for a byte stream cannot have a size function");let j=Bu(C,0);aG(this,k,j)}else{let j=Zf(C),K=Bu(C,1);QG(this,k,K,j)}}get locked(){if(!ci(this))throw cs("locked");return fi(this)}cancel(g=void 0){return ci(this)?fi(this)?f(new TypeError("Cannot cancel a stream that already has a reader")):cr(this,g):f(cs("cancel"))}getReader(g=void 0){if(!ci(this))throw cs("getReader");return uG(g,"First parameter").mode===void 0?W(this):qE(this)}pipeThrough(g,y={}){if(!ci(this))throw cs("pipeThrough");_t(g,1,"pipeThrough");let C=h3(g,"First parameter"),k=dA(y,"Second parameter");if(fi(this))throw new TypeError("ReadableStream.prototype.pipeThrough cannot be used on a locked ReadableStream");if(Ca(C.writable))throw new TypeError("ReadableStream.prototype.pipeThrough cannot be used on a locked WritableStream");let j=uA(this,C.writable,k.preventClose,k.preventAbort,k.preventCancel,k.signal);return _(j),C.readable}pipeTo(g,y={}){if(!ci(this))return f(cs("pipeTo"));if(g===void 0)return f("Parameter 1 is required in 'pipeTo'.");if(!Aa(g))return f(new TypeError("ReadableStream.prototype.pipeTo's first argument must be a WritableStream"));let C;try{C=dA(y,"Second parameter")}catch(k){return f(k)}return fi(this)?f(new TypeError("ReadableStream.prototype.pipeTo cannot be used on a locked ReadableStream")):Ca(g)?f(new TypeError("ReadableStream.prototype.pipeTo cannot be used on a locked WritableStream")):uA(this,g,C.preventClose,C.preventAbort,C.preventCancel,C.signal)}tee(){if(!ci(this))throw cs("tee");let g=ZG(this);return Je(g)}values(g=void 0){if(!ci(this))throw cs("values");let y=f3(g,"First parameter");return va(this,y.preventCancel)}[Tg](g){return this.values(g)}static from(g){return r3(g)}}Object.defineProperties(qt,{from:{enumerable:!0}}),Object.defineProperties(qt.prototype,{cancel:{enumerable:!0},getReader:{enumerable:!0},pipeThrough:{enumerable:!0},pipeTo:{enumerable:!0},tee:{enumerable:!0},values:{enumerable:!0},locked:{enumerable:!0}}),o(qt.from,"from"),o(qt.prototype.cancel,"cancel"),o(qt.prototype.getReader,"getReader"),o(qt.prototype.pipeThrough,"pipeThrough"),o(qt.prototype.pipeTo,"pipeTo"),o(qt.prototype.tee,"tee"),o(qt.prototype.values,"values"),typeof Symbol.toStringTag=="symbol"&&Object.defineProperty(qt.prototype,Symbol.toStringTag,{value:"ReadableStream",configurable:!0}),Object.defineProperty(qt.prototype,Tg,{value:qt.prototype.values,writable:!0,configurable:!0});function $u(h,g,y,C=1,k=()=>1){let j=Object.create(qt.prototype);zg(j);let K=Object.create(vo.prototype);return fA(j,K,h,g,y,C,k),j}function hA(h,g,y){let C=Object.create(qt.prototype);zg(C);let k=Object.create(yo.prototype);return HE(C,k,h,g,y,0,void 0),C}function zg(h){h._state="readable",h._reader=void 0,h._storedError=void 0,h._disturbed=!1}function ci(h){return!n(h)||!Object.prototype.hasOwnProperty.call(h,"_readableStreamController")?!1:h instanceof qt}function fi(h){return h._reader!==void 0}function cr(h,g){if(h._disturbed=!0,h._state==="closed")return u(void 0);if(h._state==="errored")return f(h._storedError);Vu(h);let y=h._reader;if(y!==void 0&&ss(y)){let k=y._readIntoRequests;y._readIntoRequests=new x,k.forEach(j=>{j._closeSteps(void 0)})}let C=h._readableStreamController[J](g);return w(C,e)}function Vu(h){h._state="closed";let g=h._reader;if(g!==void 0&&(ba(g),de(g))){let y=g._readRequests;g._readRequests=new x,y.forEach(C=>{C._closeSteps()})}}function pA(h,g){h._state="errored",h._storedError=g;let y=h._reader;y!==void 0&&(Ie(y,g),de(y)?rt(y,g):WE(y,g))}function cs(h){return new TypeError(`ReadableStream.prototype.${h} can only be used on a ReadableStream`)}function mA(h,g){cn(h,g);let y=h==null?void 0:h.highWaterMark;return A(y,"highWaterMark","QueuingStrategyInit"),{highWaterMark:S(y)}}let gA=h=>h.byteLength;o(gA,"size");class fd{constructor(g){_t(g,1,"ByteLengthQueuingStrategy"),g=mA(g,"First parameter"),this._byteLengthQueuingStrategyHighWaterMark=g.highWaterMark}get highWaterMark(){if(!bA(this))throw yA("highWaterMark");return this._byteLengthQueuingStrategyHighWaterMark}get size(){if(!bA(this))throw yA("size");return gA}}Object.defineProperties(fd.prototype,{highWaterMark:{enumerable:!0},size:{enumerable:!0}}),typeof Symbol.toStringTag=="symbol"&&Object.defineProperty(fd.prototype,Symbol.toStringTag,{value:"ByteLengthQueuingStrategy",configurable:!0});function yA(h){return new TypeError(`ByteLengthQueuingStrategy.prototype.${h} can only be used on a ByteLengthQueuingStrategy`)}function bA(h){return!n(h)||!Object.prototype.hasOwnProperty.call(h,"_byteLengthQueuingStrategyHighWaterMark")?!1:h instanceof fd}let vA=()=>1;o(vA,"size");class dd{constructor(g){_t(g,1,"CountQueuingStrategy"),g=mA(g,"First parameter"),this._countQueuingStrategyHighWaterMark=g.highWaterMark}get highWaterMark(){if(!_A(this))throw wA("highWaterMark");return this._countQueuingStrategyHighWaterMark}get size(){if(!_A(this))throw wA("size");return vA}}Object.defineProperties(dd.prototype,{highWaterMark:{enumerable:!0},size:{enumerable:!0}}),typeof Symbol.toStringTag=="symbol"&&Object.defineProperty(dd.prototype,Symbol.toStringTag,{value:"CountQueuingStrategy",configurable:!0});function wA(h){return new TypeError(`CountQueuingStrategy.prototype.${h} can only be used on a CountQueuingStrategy`)}function _A(h){return!n(h)||!Object.prototype.hasOwnProperty.call(h,"_countQueuingStrategyHighWaterMark")?!1:h instanceof dd}function p3(h,g){cn(h,g);let y=h==null?void 0:h.cancel,C=h==null?void 0:h.flush,k=h==null?void 0:h.readableType,j=h==null?void 0:h.start,K=h==null?void 0:h.transform,ce=h==null?void 0:h.writableType;return{cancel:y===void 0?void 0:b3(y,h,`${g} has member 'cancel' that`),flush:C===void 0?void 0:m3(C,h,`${g} has member 'flush' that`),readableType:k,start:j===void 0?void 0:g3(j,h,`${g} has member 'start' that`),transform:K===void 0?void 0:y3(K,h,`${g} has member 'transform' that`),writableType:ce}}function m3(h,g,y){return Yt(h,y),C=>L(h,g,[C])}function g3(h,g,y){return Yt(h,y),C=>R(h,g,[C])}function y3(h,g,y){return Yt(h,y),(C,k)=>L(h,g,[C,k])}function b3(h,g,y){return Yt(h,y),C=>L(h,g,[C])}class hd{constructor(g={},y={},C={}){g===void 0&&(g=null);let k=ed(y,"Second parameter"),j=ed(C,"Third parameter"),K=p3(g,"First parameter");if(K.readableType!==void 0)throw new RangeError("Invalid readableType specified");if(K.writableType!==void 0)throw new RangeError("Invalid writableType specified");let ce=Bu(j,0),Ee=Zf(j),ge=Bu(k,1),Se=Zf(k),Ne,Ze=l(fr=>{Ne=fr});v3(this,Ze,ge,Se,ce,Ee),_3(this,K),K.start!==void 0?Ne(K.start(this._transformStreamController)):Ne(void 0)}get readable(){if(!EA(this))throw SA("readable");return this._readable}get writable(){if(!EA(this))throw SA("writable");return this._writable}}Object.defineProperties(hd.prototype,{readable:{enumerable:!0},writable:{enumerable:!0}}),typeof Symbol.toStringTag=="symbol"&&Object.defineProperty(hd.prototype,Symbol.toStringTag,{value:"TransformStream",configurable:!0});function v3(h,g,y,C,k,j){function K(){return g}function ce(Ze){return C3(h,Ze)}function Ee(Ze){return T3(h,Ze)}function ge(){return S3(h)}h._writable=AG(K,ce,ge,Ee,y,C);function Se(){return P3(h)}function Ne(Ze){return I3(h,Ze)}h._readable=$u(K,Se,Ne,k,j),h._backpressure=void 0,h._backpressureChangePromise=void 0,h._backpressureChangePromise_resolve=void 0,pd(h,!0),h._transformStreamController=void 0}function EA(h){return!n(h)||!Object.prototype.hasOwnProperty.call(h,"_transformStreamController")?!1:h instanceof hd}function AA(h,g){ur(h._readable._readableStreamController,g),Jg(h,g)}function Jg(h,g){gd(h._transformStreamController),Gu(h._writable._writableStreamController,g),Kg(h)}function Kg(h){h._backpressure&&pd(h,!1)}function pd(h,g){h._backpressureChangePromise!==void 0&&h._backpressureChangePromise_resolve(),h._backpressureChangePromise=l(y=>{h._backpressureChangePromise_resolve=y}),h._backpressure=g}class di{constructor(){throw new TypeError("Illegal constructor")}get desiredSize(){if(!md(this))throw yd("desiredSize");let g=this._controlledTransformStream._readable._readableStreamController;return Wg(g)}enqueue(g=void 0){if(!md(this))throw yd("enqueue");CA(this,g)}error(g=void 0){if(!md(this))throw yd("error");E3(this,g)}terminate(){if(!md(this))throw yd("terminate");A3(this)}}Object.defineProperties(di.prototype,{enqueue:{enumerable:!0},error:{enumerable:!0},terminate:{enumerable:!0},desiredSize:{enumerable:!0}}),o(di.prototype.enqueue,"enqueue"),o(di.prototype.error,"error"),o(di.prototype.terminate,"terminate"),typeof Symbol.toStringTag=="symbol"&&Object.defineProperty(di.prototype,Symbol.toStringTag,{value:"TransformStreamDefaultController",configurable:!0});function md(h){return!n(h)||!Object.prototype.hasOwnProperty.call(h,"_controlledTransformStream")?!1:h instanceof di}function w3(h,g,y,C,k){g._controlledTransformStream=h,h._transformStreamController=g,g._transformAlgorithm=y,g._flushAlgorithm=C,g._cancelAlgorithm=k,g._finishPromise=void 0,g._finishPromise_resolve=void 0,g._finishPromise_reject=void 0}function _3(h,g){let y=Object.create(di.prototype),C,k,j;g.transform!==void 0?C=K=>g.transform(K,y):C=K=>{try{return CA(y,K),u(void 0)}catch(ce){return f(ce)}},g.flush!==void 0?k=()=>g.flush(y):k=()=>u(void 0),g.cancel!==void 0?j=K=>g.cancel(K):j=()=>u(void 0),w3(h,y,C,k,j)}function gd(h){h._transformAlgorithm=void 0,h._flushAlgorithm=void 0,h._cancelAlgorithm=void 0}function CA(h,g){let y=h._controlledTransformStream,C=y._readable._readableStreamController;if(!Pa(C))throw new TypeError("Readable side is not in a state that permits enqueue");try{Sa(C,g)}catch(j){throw Jg(y,j),y._readable._storedError}XG(C)!==y._backpressure&&pd(y,!0)}function E3(h,g){AA(h._controlledTransformStream,g)}function TA(h,g){let y=h._transformAlgorithm(g);return w(y,void 0,C=>{throw AA(h._controlledTransformStream,C),C})}function A3(h){let g=h._controlledTransformStream,y=g._readable._readableStreamController;us(y);let C=new TypeError("TransformStream terminated");Jg(g,C)}function C3(h,g){let y=h._transformStreamController;if(h._backpressure){let C=h._backpressureChangePromise;return w(C,()=>{let k=h._writable;if(k._state==="erroring")throw k._storedError;return TA(y,g)})}return TA(y,g)}function T3(h,g){let y=h._transformStreamController;if(y._finishPromise!==void 0)return y._finishPromise;let C=h._readable;y._finishPromise=l((j,K)=>{y._finishPromise_resolve=j,y._finishPromise_reject=K});let k=y._cancelAlgorithm(g);return gd(y),m(k,()=>(C._state==="errored"?Ia(y,C._storedError):(ur(C._readableStreamController,g),Yg(y)),null),j=>(ur(C._readableStreamController,j),Ia(y,j),null)),y._finishPromise}function S3(h){let g=h._transformStreamController;if(g._finishPromise!==void 0)return g._finishPromise;let y=h._readable;g._finishPromise=l((k,j)=>{g._finishPromise_resolve=k,g._finishPromise_reject=j});let C=g._flushAlgorithm();return gd(g),m(C,()=>(y._state==="errored"?Ia(g,y._storedError):(us(y._readableStreamController),Yg(g)),null),k=>(ur(y._readableStreamController,k),Ia(g,k),null)),g._finishPromise}function P3(h){return pd(h,!1),h._backpressureChangePromise}function I3(h,g){let y=h._transformStreamController;if(y._finishPromise!==void 0)return y._finishPromise;let C=h._writable;y._finishPromise=l((j,K)=>{y._finishPromise_resolve=j,y._finishPromise_reject=K});let k=y._cancelAlgorithm(g);return gd(y),m(k,()=>(C._state==="errored"?Ia(y,C._storedError):(Gu(C._writableStreamController,g),Kg(h),Yg(y)),null),j=>(Gu(C._writableStreamController,j),Kg(h),Ia(y,j),null)),y._finishPromise}function yd(h){return new TypeError(`TransformStreamDefaultController.prototype.${h} can only be used on a TransformStreamDefaultController`)}function Yg(h){h._finishPromise_resolve!==void 0&&(h._finishPromise_resolve(),h._finishPromise_resolve=void 0,h._finishPromise_reject=void 0)}function Ia(h,g){h._finishPromise_reject!==void 0&&(_(h._finishPromise),h._finishPromise_reject(g),h._finishPromise_resolve=void 0,h._finishPromise_reject=void 0)}function SA(h){return new TypeError(`TransformStream.prototype.${h} can only be used on a TransformStream`)}t.ByteLengthQueuingStrategy=fd,t.CountQueuingStrategy=dd,t.ReadableByteStreamController=yo,t.ReadableStream=qt,t.ReadableStreamBYOBReader=li,t.ReadableStreamBYOBRequest=rs,t.ReadableStreamDefaultController=vo,t.ReadableStreamDefaultReader=Z,t.TransformStream=hd,t.TransformStreamDefaultController=di,t.WritableStream=ui,t.WritableStreamDefaultController=Ta,t.WritableStreamDefaultWriter=bo})});var OT=te(()=>{if(!globalThis.ReadableStream)try{let t=require("node:process"),{emitWarning:e}=t;try{t.emitWarning=()=>{},Object.assign(globalThis,require("node:stream/web")),t.emitWarning=e}catch(n){throw t.emitWarning=e,n}}catch(t){Object.assign(globalThis,NT())}try{let{Blob:t}=require("buffer");t&&!t.prototype.stream&&(t.prototype.stream=function(n){let r=0,o=this;return new ReadableStream({type:"bytes",async pull(i){let a=await o.slice(r,Math.min(o.size,r+65536)).arrayBuffer();r+=a.byteLength,i.enqueue(new Uint8Array(a)),r===o.size&&i.close()}})})}catch(t){}});async function*f0(t,e=!0){for(let n of t)if("stream"in n)yield*n.stream();else if(ArrayBuffer.isView(n))if(e){let r=n.byteOffset,o=n.byteOffset+n.byteLength;for(;r!==o;){let i=Math.min(o-r,DT),s=n.buffer.slice(r,r+i);r+=s.byteLength,yield new Uint8Array(s)}}else yield n;else{let r=0,o=n;for(;r!==o.size;){let s=await o.slice(r,Math.min(o.size,r+DT)).arrayBuffer();r+=s.byteLength,yield new Uint8Array(s)}}}var rye,DT,Do,bc,kl,mh,Ls,MT,C$,gr,vc=It(()=>{rye=ht(OT(),1);DT=65536;MT=(Ls=class{constructor(e=[],n={}){Re(this,Do,[]);Re(this,bc,"");Re(this,kl,0);Re(this,mh,"transparent");if(typeof e!="object"||e===null)throw new TypeError("Failed to construct 'Blob': The provided value cannot be converted to a sequence.");if(typeof e[Symbol.iterator]!="function")throw new TypeError("Failed to construct 'Blob': The object must have a callable @@iterator property.");if(typeof n!="object"&&typeof n!="function")throw new TypeError("Failed to construct 'Blob': parameter 2 cannot convert to dictionary.");n===null&&(n={});let r=new TextEncoder;for(let i of e){let s;ArrayBuffer.isView(i)?s=new Uint8Array(i.buffer.slice(i.byteOffset,i.byteOffset+i.byteLength)):i instanceof ArrayBuffer?s=new Uint8Array(i.slice(0)):i instanceof Ls?s=i:s=r.encode(`${i}`),qe(this,kl,fe(this,kl)+(ArrayBuffer.isView(s)?s.byteLength:s.size)),fe(this,Do).push(s)}qe(this,mh,`${n.endings===void 0?"transparent":n.endings}`);let o=n.type===void 0?"":String(n.type);qe(this,bc,/^[\x20-\x7E]*$/.test(o)?o:"")}get size(){return fe(this,kl)}get type(){return fe(this,bc)}async text(){let e=new TextDecoder,n="";for await(let r of f0(fe(this,Do),!1))n+=e.decode(r,{stream:!0});return n+=e.decode(),n}async arrayBuffer(){let e=new Uint8Array(this.size),n=0;for await(let r of f0(fe(this,Do),!1))e.set(r,n),n+=r.length;return e.buffer}stream(){let e=f0(fe(this,Do),!0);return new globalThis.ReadableStream({type:"bytes",async pull(n){let r=await e.next();r.done?n.close():n.enqueue(r.value)},async cancel(){await e.return()}})}slice(e=0,n=this.size,r=""){let{size:o}=this,i=e<0?Math.max(o+e,0):Math.min(e,o),s=n<0?Math.max(o+n,0):Math.min(n,o),a=Math.max(s-i,0),l=fe(this,Do),u=[],f=0;for(let m of l){if(f>=a)break;let b=ArrayBuffer.isView(m)?m.byteLength:m.size;if(i&&b<=i)i-=b,s-=b;else{let v;ArrayBuffer.isView(m)?(v=m.subarray(i,Math.min(b,s)),f+=v.byteLength):(v=m.slice(i,Math.min(b,s)),f+=v.size),s-=b,u.push(v),i=0}}let p=new Ls([],{type:String(r).toLowerCase()});return qe(p,kl,a),qe(p,Do,u),p}get[Symbol.toStringTag](){return"Blob"}static[Symbol.hasInstance](e){return e&&typeof e=="object"&&typeof e.constructor=="function"&&(typeof e.stream=="function"||typeof e.arrayBuffer=="function")&&/^(Blob|File)$/.test(e[Symbol.toStringTag])}},Do=new WeakMap,bc=new WeakMap,kl=new WeakMap,mh=new WeakMap,Ls);Object.defineProperties(MT.prototype,{size:{enumerable:!0},type:{enumerable:!0},slice:{enumerable:!0}});C$=MT,gr=C$});var wc,_c,FT,T$,S$,Ni,d0=It(()=>{vc();T$=(FT=class extends gr{constructor(n,r,o={}){if(arguments.length<2)throw new TypeError(`Failed to construct 'File': 2 arguments required, but only ${arguments.length} present.`);super(n,o);Re(this,wc,0);Re(this,_c,"");o===null&&(o={});let i=o.lastModified===void 0?Date.now():Number(o.lastModified);Number.isNaN(i)||qe(this,wc,i),qe(this,_c,String(r))}get name(){return fe(this,_c)}get lastModified(){return fe(this,wc)}get[Symbol.toStringTag](){return"File"}static[Symbol.hasInstance](n){return!!n&&n instanceof gr&&/^(File)$/.test(n[Symbol.toStringTag])}},wc=new WeakMap,_c=new WeakMap,FT),S$=T$,Ni=S$});function GT(t,e=gr){var n=`${LT()}${LT()}`.replace(/\./g,"").slice(-28).padStart(32,"-"),r=[],o=`--${n}\r
Content-Disposition: form-data; name="`;return t.forEach((i,s)=>typeof i=="string"?r.push(o+h0(s)+`"\r
\r
${i.replace(/\r(?!\n)|(?<!\r)\n/g,`\r
`)}\r
`):r.push(o+h0(s)+`"; filename="${h0(i.name,1)}"\r
Content-Type: ${i.type||"application/octet-stream"}\r
\r
`,i,`\r
`)),r.push(`--${n}--`),new e(r,{type:"multipart/form-data; boundary="+n})}var Ec,P$,I$,LT,x$,UT,h0,Us,Kn,BT,Oi,gh=It(()=>{vc();d0();({toStringTag:Ec,iterator:P$,hasInstance:I$}=Symbol),LT=Math.random,x$="append,set,get,getAll,delete,keys,values,entries,forEach,constructor".split(","),UT=(t,e,n)=>(t+="",/^(Blob|File)$/.test(e&&e[Ec])?[(n=n!==void 0?n+"":e[Ec]=="File"?e.name:"blob",t),e.name!==n||e[Ec]=="blob"?new Ni([e],n,e):e]:[t,e+""]),h0=(t,e)=>(e?t:t.replace(/\r?\n|\r/g,`\r
`)).replace(/\n/g,"%0A").replace(/\r/g,"%0D").replace(/"/g,"%22"),Us=(t,e,n)=>{if(e.length<n)throw new TypeError(`Failed to execute '${t}' on 'FormData': ${n} arguments required, but only ${e.length} present.`)},Oi=(BT=class{constructor(...e){Re(this,Kn,[]);if(e.length)throw new TypeError("Failed to construct 'FormData': parameter 1 is not of type 'HTMLFormElement'.")}get[Ec](){return"FormData"}[P$](){return this.entries()}static[I$](e){return e&&typeof e=="object"&&e[Ec]==="FormData"&&!x$.some(n=>typeof e[n]!="function")}append(...e){Us("append",arguments,2),fe(this,Kn).push(UT(...e))}delete(e){Us("delete",arguments,1),e+="",qe(this,Kn,fe(this,Kn).filter(([n])=>n!==e))}get(e){Us("get",arguments,1),e+="";for(var n=fe(this,Kn),r=n.length,o=0;o<r;o++)if(n[o][0]===e)return n[o][1];return null}getAll(e,n){return Us("getAll",arguments,1),n=[],e+="",fe(this,Kn).forEach(r=>r[0]===e&&n.push(r[1])),n}has(e){return Us("has",arguments,1),e+="",fe(this,Kn).some(n=>n[0]===e)}forEach(e,n){Us("forEach",arguments,1);for(var[r,o]of this)e.call(n,o,r,this)}set(...e){Us("set",arguments,2);var n=[],r=!0;e=UT(...e),fe(this,Kn).forEach(o=>{o[0]===e[0]?r&&(r=!n.push(e)):n.push(o)}),r&&n.push(e),qe(this,Kn,n)}*entries(){yield*fe(this,Kn)}*keys(){for(var[e]of this)yield e}*values(){for(var[,e]of this)yield e}},Kn=new WeakMap,BT)});var Mo,yh=It(()=>{Mo=class extends Error{constructor(e,n){super(e),Error.captureStackTrace(this,this.constructor),this.type=n}get name(){return this.constructor.name}get[Symbol.toStringTag](){return this.constructor.name}}});var en,p0=It(()=>{yh();en=class extends Mo{constructor(e,n,r){super(e,n),r&&(this.code=this.errno=r.code,this.erroredSysCall=r.syscall)}}});var bh,m0,Ac,HT,qT,$T,vh=It(()=>{bh=Symbol.toStringTag,m0=t=>typeof t=="object"&&typeof t.append=="function"&&typeof t.delete=="function"&&typeof t.get=="function"&&typeof t.getAll=="function"&&typeof t.has=="function"&&typeof t.set=="function"&&typeof t.sort=="function"&&t[bh]==="URLSearchParams",Ac=t=>t&&typeof t=="object"&&typeof t.arrayBuffer=="function"&&typeof t.type=="string"&&typeof t.stream=="function"&&typeof t.constructor=="function"&&/^(Blob|File)$/.test(t[bh]),HT=t=>typeof t=="object"&&(t[bh]==="AbortSignal"||t[bh]==="EventTarget"),qT=(t,e)=>{let n=new URL(e).hostname,r=new URL(t).hostname;return n===r||n.endsWith(`.${r}`)},$T=(t,e)=>{let n=new URL(e).protocol,r=new URL(t).protocol;return n===r}});var jT=te((vye,VT)=>{if(!globalThis.DOMException)try{let{MessageChannel:t}=require("worker_threads"),e=new t().port1,n=new ArrayBuffer;e.postMessage(n,[n,n])}catch(t){t.constructor.name==="DOMException"&&(globalThis.DOMException=t.constructor)}VT.exports=globalThis.DOMException});var Hs,WT,zT,g0,JT,KT,YT,XT,QT,ZT,Bs,Gs,y0,wh,b0=It(()=>{Hs=require("node:fs"),WT=require("node:path"),zT=ht(jT(),1);d0();vc();({stat:g0}=Hs.promises),JT=(t,e)=>QT((0,Hs.statSync)(t),t,e),KT=(t,e)=>g0(t).then(n=>QT(n,t,e)),YT=(t,e)=>g0(t).then(n=>ZT(n,t,e)),XT=(t,e)=>ZT((0,Hs.statSync)(t),t,e),QT=(t,e,n="")=>new gr([new wh({path:e,size:t.size,lastModified:t.mtimeMs,start:0})],{type:n}),ZT=(t,e,n="")=>new Ni([new wh({path:e,size:t.size,lastModified:t.mtimeMs,start:0})],(0,WT.basename)(e),{type:n,lastModified:t.mtimeMs}),y0=class y0{constructor(e){Re(this,Bs);Re(this,Gs);qe(this,Bs,e.path),qe(this,Gs,e.start),this.size=e.size,this.lastModified=e.lastModified}slice(e,n){return new y0({path:fe(this,Bs),lastModified:this.lastModified,size:n-e,start:fe(this,Gs)+e})}async*stream(){let{mtimeMs:e}=await g0(fe(this,Bs));if(e>this.lastModified)throw new zT.default("The requested file could not be read, typically due to permission problems that have occurred after a reference to a file was acquired.","NotReadableError");yield*(0,Hs.createReadStream)(fe(this,Bs),{start:fe(this,Gs),end:fe(this,Gs)+this.size-1})}get[Symbol.toStringTag](){return"Blob"}};Bs=new WeakMap,Gs=new WeakMap;wh=y0});var tS={};Qg(tS,{toFormData:()=>F$});function M$(t){let e=t.match(/\bfilename=("(.*?)"|([^()<>@,;:\\"/[\]?={}\s\t]+))($|;\s)/i);if(!e)return;let n=e[2]||e[3]||"",r=n.slice(n.lastIndexOf("\\")+1);return r=r.replace(/%22/g,'"'),r=r.replace(/&#(\d{4});/g,(o,i)=>String.fromCharCode(i)),r}async function F$(t,e){if(!/multipart/i.test(e))throw new TypeError("Failed to fetch");let n=e.match(/boundary=(?:"([^"]+)"|([^;]+))/i);if(!n)throw new TypeError("no or bad content-type header, no multipart boundary");let r=new v0(n[1]||n[2]),o,i,s,a,l,u,f=[],p=new Oi,m=T=>{s+=_.decode(T,{stream:!0})},b=T=>{f.push(T)},v=()=>{let T=new Ni(f,u,{type:l});p.append(a,T)},w=()=>{p.append(a,s)},_=new TextDecoder("utf-8");_.decode(),r.onPartBegin=function(){r.onPartData=m,r.onPartEnd=w,o="",i="",s="",a="",l="",u=null,f.length=0},r.onHeaderField=function(T){o+=_.decode(T,{stream:!0})},r.onHeaderValue=function(T){i+=_.decode(T,{stream:!0})},r.onHeaderEnd=function(){if(i+=_.decode(),o=o.toLowerCase(),o==="content-disposition"){let T=i.match(/\bname=("([^"]*)"|([^()<>@,;:\\"/[\]?={}\s\t]+))/i);T&&(a=T[2]||T[3]||""),u=M$(i),u&&(r.onPartData=b,r.onPartEnd=v)}else o==="content-type"&&(l=i);i="",o=""};for await(let T of t)r.write(T);return r.end(),p}var Kr,tt,eS,Di,_h,Eh,k$,Cc,R$,N$,O$,D$,qs,v0,nS=It(()=>{b0();gh();Kr=0,tt={START_BOUNDARY:Kr++,HEADER_FIELD_START:Kr++,HEADER_FIELD:Kr++,HEADER_VALUE_START:Kr++,HEADER_VALUE:Kr++,HEADER_VALUE_ALMOST_DONE:Kr++,HEADERS_ALMOST_DONE:Kr++,PART_DATA_START:Kr++,PART_DATA:Kr++,END:Kr++},eS=1,Di={PART_BOUNDARY:eS,LAST_BOUNDARY:eS*=2},_h=10,Eh=13,k$=32,Cc=45,R$=58,N$=97,O$=122,D$=t=>t|32,qs=()=>{},v0=class{constructor(e){this.index=0,this.flags=0,this.onHeaderEnd=qs,this.onHeaderField=qs,this.onHeadersEnd=qs,this.onHeaderValue=qs,this.onPartBegin=qs,this.onPartData=qs,this.onPartEnd=qs,this.boundaryChars={},e=`\r
--`+e;let n=new Uint8Array(e.length);for(let r=0;r<e.length;r++)n[r]=e.charCodeAt(r),this.boundaryChars[n[r]]=!0;this.boundary=n,this.lookbehind=new Uint8Array(this.boundary.length+8),this.state=tt.START_BOUNDARY}write(e){let n=0,r=e.length,o=this.index,{lookbehind:i,boundary:s,boundaryChars:a,index:l,state:u,flags:f}=this,p=this.boundary.length,m=p-1,b=e.length,v,w,_=D=>{this[D+"Mark"]=n},T=D=>{delete this[D+"Mark"]},R=(D,x,P,V)=>{(x===void 0||x!==P)&&this[D](V&&V.subarray(x,P))},L=(D,x)=>{let P=D+"Mark";P in this&&(x?(R(D,this[P],n,e),delete this[P]):(R(D,this[P],e.length,e),this[P]=0))};for(n=0;n<r;n++)switch(v=e[n],u){case tt.START_BOUNDARY:if(l===s.length-2){if(v===Cc)f|=Di.LAST_BOUNDARY;else if(v!==Eh)return;l++;break}else if(l-1===s.length-2){if(f&Di.LAST_BOUNDARY&&v===Cc)u=tt.END,f=0;else if(!(f&Di.LAST_BOUNDARY)&&v===_h)l=0,R("onPartBegin"),u=tt.HEADER_FIELD_START;else return;break}v!==s[l+2]&&(l=-2),v===s[l+2]&&l++;break;case tt.HEADER_FIELD_START:u=tt.HEADER_FIELD,_("onHeaderField"),l=0;case tt.HEADER_FIELD:if(v===Eh){T("onHeaderField"),u=tt.HEADERS_ALMOST_DONE;break}if(l++,v===Cc)break;if(v===R$){if(l===1)return;L("onHeaderField",!0),u=tt.HEADER_VALUE_START;break}if(w=D$(v),w<N$||w>O$)return;break;case tt.HEADER_VALUE_START:if(v===k$)break;_("onHeaderValue"),u=tt.HEADER_VALUE;case tt.HEADER_VALUE:v===Eh&&(L("onHeaderValue",!0),R("onHeaderEnd"),u=tt.HEADER_VALUE_ALMOST_DONE);break;case tt.HEADER_VALUE_ALMOST_DONE:if(v!==_h)return;u=tt.HEADER_FIELD_START;break;case tt.HEADERS_ALMOST_DONE:if(v!==_h)return;R("onHeadersEnd"),u=tt.PART_DATA_START;break;case tt.PART_DATA_START:u=tt.PART_DATA,_("onPartData");case tt.PART_DATA:if(o=l,l===0){for(n+=m;n<b&&!(e[n]in a);)n+=p;n-=m,v=e[n]}if(l<s.length)s[l]===v?(l===0&&L("onPartData",!0),l++):l=0;else if(l===s.length)l++,v===Eh?f|=Di.PART_BOUNDARY:v===Cc?f|=Di.LAST_BOUNDARY:l=0;else if(l-1===s.length)if(f&Di.PART_BOUNDARY){if(l=0,v===_h){f&=~Di.PART_BOUNDARY,R("onPartEnd"),R("onPartBegin"),u=tt.HEADER_FIELD_START;break}}else f&Di.LAST_BOUNDARY&&v===Cc?(R("onPartEnd"),u=tt.END,f=0):l=0;if(l>0)i[l-1]=v;else if(o>0){let D=new Uint8Array(i.buffer,i.byteOffset,i.byteLength);R("onPartData",0,o,D),o=0,_("onPartData"),n--}break;case tt.END:break;default:throw new Error(`Unexpected state entered: ${u}`)}L("onHeaderField"),L("onHeaderValue"),L("onPartData"),this.index=l,this.state=u,this.flags=f}end(){if(this.state===tt.HEADER_FIELD_START&&this.index===0||this.state===tt.PART_DATA&&this.index===this.boundary.length)this.onPartEnd();else if(this.state!==tt.END)throw new Error("MultipartParser.end(): stream ended unexpectedly")}}});async function w0(t){if(t[hn].disturbed)throw new TypeError(`body used already for: ${t.url}`);if(t[hn].disturbed=!0,t[hn].error)throw t[hn].error;let{body:e}=t;if(e===null)return In.Buffer.alloc(0);if(!(e instanceof Yn.default))return In.Buffer.alloc(0);let n=[],r=0;try{for await(let o of e){if(t.size>0&&r+o.length>t.size){let i=new en(`content size at ${t.url} over limit: ${t.size}`,"max-size");throw e.destroy(i),i}r+=o.length,n.push(o)}}catch(o){throw o instanceof Mo?o:new en(`Invalid response body while trying to fetch ${t.url}: ${o.message}`,"system",o)}if(e.readableEnded===!0||e._readableState.ended===!0)try{return n.every(o=>typeof o=="string")?In.Buffer.from(n.join("")):In.Buffer.concat(n,r)}catch(o){throw new en(`Could not create Buffer from response body for ${t.url}: ${o.message}`,"system",o)}else throw new en(`Premature close of server response while trying to fetch ${t.url}`)}var Yn,Fo,In,L$,hn,Yr,Rl,U$,Ah,rS,oS,Ch=It(()=>{Yn=ht(require("node:stream"),1),Fo=require("node:util"),In=require("node:buffer");vc();gh();p0();yh();vh();L$=(0,Fo.promisify)(Yn.default.pipeline),hn=Symbol("Body internals"),Yr=class{constructor(e,{size:n=0}={}){let r=null;e===null?e=null:m0(e)?e=In.Buffer.from(e.toString()):Ac(e)||In.Buffer.isBuffer(e)||(Fo.types.isAnyArrayBuffer(e)?e=In.Buffer.from(e):ArrayBuffer.isView(e)?e=In.Buffer.from(e.buffer,e.byteOffset,e.byteLength):e instanceof Yn.default||(e instanceof Oi?(e=GT(e),r=e.type.split("=")[1]):e=In.Buffer.from(String(e))));let o=e;In.Buffer.isBuffer(e)?o=Yn.default.Readable.from(e):Ac(e)&&(o=Yn.default.Readable.from(e.stream())),this[hn]={body:e,stream:o,boundary:r,disturbed:!1,error:null},this.size=n,e instanceof Yn.default&&e.on("error",i=>{let s=i instanceof Mo?i:new en(`Invalid response body while trying to fetch ${this.url}: ${i.message}`,"system",i);this[hn].error=s})}get body(){return this[hn].stream}get bodyUsed(){return this[hn].disturbed}async arrayBuffer(){let{buffer:e,byteOffset:n,byteLength:r}=await w0(this);return e.slice(n,n+r)}async formData(){let e=this.headers.get("content-type");if(e.startsWith("application/x-www-form-urlencoded")){let r=new Oi,o=new URLSearchParams(await this.text());for(let[i,s]of o)r.append(i,s);return r}let{toFormData:n}=await Promise.resolve().then(()=>(nS(),tS));return n(this.body,e)}async blob(){let e=this.headers&&this.headers.get("content-type")||this[hn].body&&this[hn].body.type||"",n=await this.arrayBuffer();return new gr([n],{type:e})}async json(){let e=await this.text();return JSON.parse(e)}async text(){let e=await w0(this);return new TextDecoder().decode(e)}buffer(){return w0(this)}};Yr.prototype.buffer=(0,Fo.deprecate)(Yr.prototype.buffer,"Please use 'response.arrayBuffer()' instead of 'response.buffer()'","node-fetch#buffer");Object.defineProperties(Yr.prototype,{body:{enumerable:!0},bodyUsed:{enumerable:!0},arrayBuffer:{enumerable:!0},blob:{enumerable:!0},json:{enumerable:!0},text:{enumerable:!0},data:{get:(0,Fo.deprecate)(()=>{},"data doesn't exist, use json(), text(), arrayBuffer(), or body instead","https://github.com/node-fetch/node-fetch/issues/1000 (response)")}});Rl=(t,e)=>{let n,r,{body:o}=t[hn];if(t.bodyUsed)throw new Error("cannot clone body after it is used");return o instanceof Yn.default&&typeof o.getBoundary!="function"&&(n=new Yn.PassThrough({highWaterMark:e}),r=new Yn.PassThrough({highWaterMark:e}),o.pipe(n),o.pipe(r),t[hn].stream=n,o=r),o},U$=(0,Fo.deprecate)(t=>t.getBoundary(),"form-data doesn't follow the spec and requires special treatment. Use alternative package","https://github.com/node-fetch/node-fetch/issues/1167"),Ah=(t,e)=>t===null?null:typeof t=="string"?"text/plain;charset=UTF-8":m0(t)?"application/x-www-form-urlencoded;charset=UTF-8":Ac(t)?t.type||null:In.Buffer.isBuffer(t)||Fo.types.isAnyArrayBuffer(t)||ArrayBuffer.isView(t)?null:t instanceof Oi?`multipart/form-data; boundary=${e[hn].boundary}`:t&&typeof t.getBoundary=="function"?`multipart/form-data;boundary=${U$(t)}`:t instanceof Yn.default?null:"text/plain;charset=UTF-8",rS=t=>{let{body:e}=t[hn];return e===null?0:Ac(e)?e.size:In.Buffer.isBuffer(e)?e.length:e&&typeof e.getLengthSync=="function"&&e.hasKnownLength&&e.hasKnownLength()?e.getLengthSync():null},oS=async(t,{body:e})=>{e===null?t.end():await L$(e,t)}});function iS(t=[]){return new pn(t.reduce((e,n,r,o)=>(r%2===0&&e.push(o.slice(r,r+2)),e),[]).filter(([e,n])=>{try{return Th(e),E0(e,String(n)),!0}catch(r){return!1}}))}var _0,Tc,Th,E0,pn,Sh=It(()=>{_0=require("node:util"),Tc=ht(require("node:http"),1),Th=typeof Tc.default.validateHeaderName=="function"?Tc.default.validateHeaderName:t=>{if(!/^[\^`\-\w!#$%&'*+.|~]+$/.test(t)){let e=new TypeError(`Header name must be a valid HTTP token [${t}]`);throw Object.defineProperty(e,"code",{value:"ERR_INVALID_HTTP_TOKEN"}),e}},E0=typeof Tc.default.validateHeaderValue=="function"?Tc.default.validateHeaderValue:(t,e)=>{if(/[^\t\u0020-\u007E\u0080-\u00FF]/.test(e)){let n=new TypeError(`Invalid character in header content ["${t}"]`);throw Object.defineProperty(n,"code",{value:"ERR_INVALID_CHAR"}),n}},pn=class t extends URLSearchParams{constructor(e){let n=[];if(e instanceof t){let r=e.raw();for(let[o,i]of Object.entries(r))n.push(...i.map(s=>[o,s]))}else if(e!=null)if(typeof e=="object"&&!_0.types.isBoxedPrimitive(e)){let r=e[Symbol.iterator];if(r==null)n.push(...Object.entries(e));else{if(typeof r!="function")throw new TypeError("Header pairs must be iterable");n=[...e].map(o=>{if(typeof o!="object"||_0.types.isBoxedPrimitive(o))throw new TypeError("Each header pair must be an iterable object");return[...o]}).map(o=>{if(o.length!==2)throw new TypeError("Each header pair must be a name/value tuple");return[...o]})}}else throw new TypeError("Failed to construct 'Headers': The provided value is not of type '(sequence<sequence<ByteString>> or record<ByteString, ByteString>)");return n=n.length>0?n.map(([r,o])=>(Th(r),E0(r,String(o)),[String(r).toLowerCase(),String(o)])):void 0,super(n),new Proxy(this,{get(r,o,i){switch(o){case"append":case"set":return(s,a)=>(Th(s),E0(s,String(a)),URLSearchParams.prototype[o].call(r,String(s).toLowerCase(),String(a)));case"delete":case"has":case"getAll":return s=>(Th(s),URLSearchParams.prototype[o].call(r,String(s).toLowerCase()));case"keys":return()=>(r.sort(),new Set(URLSearchParams.prototype.keys.call(r)).keys());default:return Reflect.get(r,o,i)}}})}get[Symbol.toStringTag](){return this.constructor.name}toString(){return Object.prototype.toString.call(this)}get(e){let n=this.getAll(e);if(n.length===0)return null;let r=n.join(", ");return/^content-encoding$/i.test(e)&&(r=r.toLowerCase()),r}forEach(e,n=void 0){for(let r of this.keys())Reflect.apply(e,n,[this.get(r),r,this])}*values(){for(let e of this.keys())yield this.get(e)}*entries(){for(let e of this.keys())yield[e,this.get(e)]}[Symbol.iterator](){return this.entries()}raw(){return[...this.keys()].reduce((e,n)=>(e[n]=this.getAll(n),e),{})}[Symbol.for("nodejs.util.inspect.custom")](){return[...this.keys()].reduce((e,n)=>{let r=this.getAll(n);return n==="host"?e[n]=r[0]:e[n]=r.length>1?r:r[0],e},{})}};Object.defineProperties(pn.prototype,["get","entries","forEach","values"].reduce((t,e)=>(t[e]={enumerable:!0},t),{}))});var B$,Sc,A0=It(()=>{B$=new Set([301,302,303,307,308]),Sc=t=>B$.has(t)});var yr,xn,sS=It(()=>{Sh();Ch();A0();yr=Symbol("Response internals"),xn=class t extends Yr{constructor(e=null,n={}){super(e,n);let r=n.status!=null?n.status:200,o=new pn(n.headers);if(e!==null&&!o.has("Content-Type")){let i=Ah(e,this);i&&o.append("Content-Type",i)}this[yr]={type:"default",url:n.url,status:r,statusText:n.statusText||"",headers:o,counter:n.counter,highWaterMark:n.highWaterMark}}get type(){return this[yr].type}get url(){return this[yr].url||""}get status(){return this[yr].status}get ok(){return this[yr].status>=200&&this[yr].status<300}get redirected(){return this[yr].counter>0}get statusText(){return this[yr].statusText}get headers(){return this[yr].headers}get highWaterMark(){return this[yr].highWaterMark}clone(){return new t(Rl(this,this.highWaterMark),{type:this.type,url:this.url,status:this.status,statusText:this.statusText,headers:this.headers,ok:this.ok,redirected:this.redirected,size:this.size,highWaterMark:this.highWaterMark})}static redirect(e,n=302){if(!Sc(n))throw new RangeError('Failed to execute "redirect" on "response": Invalid status code');return new t(null,{headers:{location:new URL(e).toString()},status:n})}static error(){let e=new t(null,{status:0,statusText:""});return e[yr].type="error",e}static json(e=void 0,n={}){let r=JSON.stringify(e);if(r===void 0)throw new TypeError("data is not JSON serializable");let o=new pn(n&&n.headers);return o.has("content-type")||o.set("content-type","application/json"),new t(r,{...n,headers:o})}get[Symbol.toStringTag](){return"Response"}};Object.defineProperties(xn.prototype,{type:{enumerable:!0},url:{enumerable:!0},status:{enumerable:!0},ok:{enumerable:!0},redirected:{enumerable:!0},statusText:{enumerable:!0},headers:{enumerable:!0},clone:{enumerable:!0}})});var aS,lS=It(()=>{aS=t=>{if(t.search)return t.search;let e=t.href.length-1,n=t.hash||(t.href[e]==="#"?"#":"");return t.href[e-n.length]==="?"?"?":""}});function uS(t,e=!1){return t==null||(t=new URL(t),/^(about|blob|data):$/.test(t.protocol))?"no-referrer":(t.username="",t.password="",t.hash="",e&&(t.pathname="",t.search=""),t)}function hS(t){if(!fS.has(t))throw new TypeError(`Invalid referrerPolicy: ${t}`);return t}function G$(t){if(/^(http|ws)s:$/.test(t.protocol))return!0;let e=t.host.replace(/(^\[)|(]$)/g,""),n=(0,cS.isIP)(e);return n===4&&/^127\./.test(e)||n===6&&/^(((0+:){7})|(::(0+:){0,6}))0*1$/.test(e)?!0:t.host==="localhost"||t.host.endsWith(".localhost")?!1:t.protocol==="file:"}function Nl(t){return/^about:(blank|srcdoc)$/.test(t)||t.protocol==="data:"||/^(blob|filesystem):$/.test(t.protocol)?!0:G$(t)}function pS(t,{referrerURLCallback:e,referrerOriginCallback:n}={}){if(t.referrer==="no-referrer"||t.referrerPolicy==="")return null;let r=t.referrerPolicy;if(t.referrer==="about:client")return"no-referrer";let o=t.referrer,i=uS(o),s=uS(o,!0);i.toString().length>4096&&(i=s),e&&(i=e(i)),n&&(s=n(s));let a=new URL(t.url);switch(r){case"no-referrer":return"no-referrer";case"origin":return s;case"unsafe-url":return i;case"strict-origin":return Nl(i)&&!Nl(a)?"no-referrer":s.toString();case"strict-origin-when-cross-origin":return i.origin===a.origin?i:Nl(i)&&!Nl(a)?"no-referrer":s;case"same-origin":return i.origin===a.origin?i:"no-referrer";case"origin-when-cross-origin":return i.origin===a.origin?i:s;case"no-referrer-when-downgrade":return Nl(i)&&!Nl(a)?"no-referrer":i;default:throw new TypeError(`Invalid referrerPolicy: ${r}`)}}function mS(t){let e=(t.get("referrer-policy")||"").split(/[,\s]+/),n="";for(let r of e)r&&fS.has(r)&&(n=r);return n}var cS,fS,dS,C0=It(()=>{cS=require("node:net");fS=new Set(["","no-referrer","no-referrer-when-downgrade","same-origin","origin","strict-origin","origin-when-cross-origin","strict-origin-when-cross-origin","unsafe-url"]),dS="strict-origin-when-cross-origin"});var gS,yS,Nt,Pc,H$,Mi,bS,vS=It(()=>{gS=require("node:url"),yS=require("node:util");Sh();Ch();vh();lS();C0();Nt=Symbol("Request internals"),Pc=t=>typeof t=="object"&&typeof t[Nt]=="object",H$=(0,yS.deprecate)(()=>{},".data is not a valid RequestInit property, use .body instead","https://github.com/node-fetch/node-fetch/issues/1000 (request)"),Mi=class t extends Yr{constructor(e,n={}){let r;if(Pc(e)?r=new URL(e.url):(r=new URL(e),e={}),r.username!==""||r.password!=="")throw new TypeError(`${r} is an url with embedded credentials.`);let o=n.method||e.method||"GET";if(/^(delete|get|head|options|post|put)$/i.test(o)&&(o=o.toUpperCase()),!Pc(n)&&"data"in n&&H$(),(n.body!=null||Pc(e)&&e.body!==null)&&(o==="GET"||o==="HEAD"))throw new TypeError("Request with GET/HEAD method cannot have body");let i=n.body?n.body:Pc(e)&&e.body!==null?Rl(e):null;super(i,{size:n.size||e.size||0});let s=new pn(n.headers||e.headers||{});if(i!==null&&!s.has("Content-Type")){let u=Ah(i,this);u&&s.set("Content-Type",u)}let a=Pc(e)?e.signal:null;if("signal"in n&&(a=n.signal),a!=null&&!HT(a))throw new TypeError("Expected signal to be an instanceof AbortSignal or EventTarget");let l=n.referrer==null?e.referrer:n.referrer;if(l==="")l="no-referrer";else if(l){let u=new URL(l);l=/^about:(\/\/)?client$/.test(u)?"client":u}else l=void 0;this[Nt]={method:o,redirect:n.redirect||e.redirect||"follow",headers:s,parsedURL:r,signal:a,referrer:l},this.follow=n.follow===void 0?e.follow===void 0?20:e.follow:n.follow,this.compress=n.compress===void 0?e.compress===void 0?!0:e.compress:n.compress,this.counter=n.counter||e.counter||0,this.agent=n.agent||e.agent,this.highWaterMark=n.highWaterMark||e.highWaterMark||16384,this.insecureHTTPParser=n.insecureHTTPParser||e.insecureHTTPParser||!1,this.referrerPolicy=n.referrerPolicy||e.referrerPolicy||""}get method(){return this[Nt].method}get url(){return(0,gS.format)(this[Nt].parsedURL)}get headers(){return this[Nt].headers}get redirect(){return this[Nt].redirect}get signal(){return this[Nt].signal}get referrer(){if(this[Nt].referrer==="no-referrer")return"";if(this[Nt].referrer==="client")return"about:client";if(this[Nt].referrer)return this[Nt].referrer.toString()}get referrerPolicy(){return this[Nt].referrerPolicy}set referrerPolicy(e){this[Nt].referrerPolicy=hS(e)}clone(){return new t(this)}get[Symbol.toStringTag](){return"Request"}};Object.defineProperties(Mi.prototype,{method:{enumerable:!0},url:{enumerable:!0},headers:{enumerable:!0},redirect:{enumerable:!0},clone:{enumerable:!0},signal:{enumerable:!0},referrer:{enumerable:!0},referrerPolicy:{enumerable:!0}});bS=t=>{let{parsedURL:e}=t[Nt],n=new pn(t[Nt].headers);n.has("Accept")||n.set("Accept","*/*");let r=null;if(t.body===null&&/^(post|put)$/i.test(t.method)&&(r="0"),t.body!==null){let a=rS(t);typeof a=="number"&&!Number.isNaN(a)&&(r=String(a))}r&&n.set("Content-Length",r),t.referrerPolicy===""&&(t.referrerPolicy=dS),t.referrer&&t.referrer!=="no-referrer"?t[Nt].referrer=pS(t):t[Nt].referrer="no-referrer",t[Nt].referrer instanceof URL&&n.set("Referer",t.referrer),n.has("User-Agent")||n.set("User-Agent","node-fetch"),t.compress&&!n.has("Accept-Encoding")&&n.set("Accept-Encoding","gzip, deflate, br");let{agent:o}=t;typeof o=="function"&&(o=o(e));let i=aS(e),s={path:e.pathname+i,method:t.method,headers:n[Symbol.for("nodejs.util.inspect.custom")](),insecureHTTPParser:t.insecureHTTPParser,agent:o};return{parsedURL:e,options:s}}});var Ic,wS=It(()=>{yh();Ic=class extends Mo{constructor(e,n="aborted"){super(e,n)}}});var AS={};Qg(AS,{AbortError:()=>Ic,Blob:()=>gr,FetchError:()=>en,File:()=>Ni,FormData:()=>Oi,Headers:()=>pn,Request:()=>Mi,Response:()=>xn,blobFrom:()=>KT,blobFromSync:()=>JT,default:()=>T0,fileFrom:()=>YT,fileFromSync:()=>XT,isRedirect:()=>Sc});async function T0(t,e){return new Promise((n,r)=>{let o=new Mi(t,e),{parsedURL:i,options:s}=bS(o);if(!q$.has(i.protocol))throw new TypeError(`node-fetch cannot load ${t}. URL scheme "${i.protocol.replace(/:$/,"")}" is not supported.`);if(i.protocol==="data:"){let v=xT(o.url),w=new xn(v,{headers:{"Content-Type":v.typeFull}});n(w);return}let a=(i.protocol==="https:"?ES.default:_S.default).request,{signal:l}=o,u=null,f=()=>{let v=new Ic("The operation was aborted.");r(v),o.body&&o.body instanceof kn.default.Readable&&o.body.destroy(v),!(!u||!u.body)&&u.body.emit("error",v)};if(l&&l.aborted){f();return}let p=()=>{f(),b()},m=a(i.toString(),s);l&&l.addEventListener("abort",p);let b=()=>{m.abort(),l&&l.removeEventListener("abort",p)};m.on("error",v=>{r(new en(`request to ${o.url} failed, reason: ${v.message}`,"system",v)),b()}),$$(m,v=>{u&&u.body&&u.body.destroy(v)}),process.version<"v14"&&m.on("socket",v=>{let w;v.prependListener("end",()=>{w=v._eventsCount}),v.prependListener("close",_=>{if(u&&w<v._eventsCount&&!_){let T=new Error("Premature close");T.code="ERR_STREAM_PREMATURE_CLOSE",u.body.emit("error",T)}})}),m.on("response",v=>{m.setTimeout(0);let w=iS(v.rawHeaders);if(Sc(v.statusCode)){let D=w.get("Location"),x=null;try{x=D===null?null:new URL(D,o.url)}catch(P){if(o.redirect!=="manual"){r(new en(`uri requested responds with an invalid redirect URL: ${D}`,"invalid-redirect")),b();return}}switch(o.redirect){case"error":r(new en(`uri requested responds with a redirect, redirect mode is set to error: ${o.url}`,"no-redirect")),b();return;case"manual":break;case"follow":{if(x===null)break;if(o.counter>=o.follow){r(new en(`maximum redirect reached at: ${o.url}`,"max-redirect")),b();return}let P={headers:new pn(o.headers),follow:o.follow,counter:o.counter+1,agent:o.agent,compress:o.compress,method:o.method,body:Rl(o),signal:o.signal,size:o.size,referrer:o.referrer,referrerPolicy:o.referrerPolicy};if(!qT(o.url,x)||!$T(o.url,x))for(let J of["authorization","www-authenticate","cookie","cookie2"])P.headers.delete(J);if(v.statusCode!==303&&o.body&&e.body instanceof kn.default.Readable){r(new en("Cannot follow redirect with body being a readable stream","unsupported-redirect")),b();return}(v.statusCode===303||(v.statusCode===301||v.statusCode===302)&&o.method==="POST")&&(P.method="GET",P.body=void 0,P.headers.delete("content-length"));let V=mS(w);V&&(P.referrerPolicy=V),n(T0(new Mi(x,P))),b();return}default:return r(new TypeError(`Redirect option '${o.redirect}' is not a valid value of RequestRedirect`))}}l&&v.once("end",()=>{l.removeEventListener("abort",p)});let _=(0,kn.pipeline)(v,new kn.PassThrough,D=>{D&&r(D)});process.version<"v12.10"&&v.on("aborted",p);let T={url:o.url,status:v.statusCode,statusText:v.statusMessage,headers:w,size:o.size,counter:o.counter,highWaterMark:o.highWaterMark},R=w.get("Content-Encoding");if(!o.compress||o.method==="HEAD"||R===null||v.statusCode===204||v.statusCode===304){u=new xn(_,T),n(u);return}let L={flush:$s.default.Z_SYNC_FLUSH,finishFlush:$s.default.Z_SYNC_FLUSH};if(R==="gzip"||R==="x-gzip"){_=(0,kn.pipeline)(_,$s.default.createGunzip(L),D=>{D&&r(D)}),u=new xn(_,T),n(u);return}if(R==="deflate"||R==="x-deflate"){let D=(0,kn.pipeline)(v,new kn.PassThrough,x=>{x&&r(x)});D.once("data",x=>{(x[0]&15)===8?_=(0,kn.pipeline)(_,$s.default.createInflate(),P=>{P&&r(P)}):_=(0,kn.pipeline)(_,$s.default.createInflateRaw(),P=>{P&&r(P)}),u=new xn(_,T),n(u)}),D.once("end",()=>{u||(u=new xn(_,T),n(u))});return}if(R==="br"){_=(0,kn.pipeline)(_,$s.default.createBrotliDecompress(),D=>{D&&r(D)}),u=new xn(_,T),n(u);return}u=new xn(_,T),n(u)}),oS(m,o).catch(r)})}function $$(t,e){let n=xc.Buffer.from(`0\r
\r
`),r=!1,o=!1,i;t.on("response",s=>{let{headers:a}=s;r=a["transfer-encoding"]==="chunked"&&!a["content-length"]}),t.on("socket",s=>{let a=()=>{if(r&&!o){let u=new Error("Premature close");u.code="ERR_STREAM_PREMATURE_CLOSE",e(u)}},l=u=>{o=xc.Buffer.compare(u.slice(-5),n)===0,!o&&i&&(o=xc.Buffer.compare(i.slice(-3),n.slice(0,3))===0&&xc.Buffer.compare(u.slice(-2),n.slice(3))===0),i=u};s.prependListener("close",a),s.on("data",l),t.on("close",()=>{s.removeListener("close",a),s.removeListener("data",l)})})}var _S,ES,$s,kn,xc,q$,CS=It(()=>{_S=ht(require("node:http"),1),ES=ht(require("node:https"),1),$s=ht(require("node:zlib"),1),kn=ht(require("node:stream"),1),xc=require("node:buffer");kT();Ch();sS();Sh();vS();p0();wS();A0();gh();vh();C0();b0();q$=new Set(["data:","http:","https:"])});var OS=te(Dl=>{"use strict";var V$=Dl&&Dl.__importDefault||function(t){return t&&t.__esModule?t:{default:t}},Ol;Object.defineProperty(Dl,"__esModule",{value:!0});Dl.Gaxios=void 0;var j$=V$(Qy()),W$=require("https"),Vs=t0(),z$=rT(),TS=require("stream"),SS=o0(),J$=async()=>{var t;return((t=globalThis.crypto)==null?void 0:t.randomUUID())||(await import("crypto")).randomUUID()},K$=204,Rn,PS,IS,xS,kS,S0,kc,Rc,Ml,RS,NS,js=class{constructor(e){Re(this,Rn);F(this,"agentCache",new Map);F(this,"defaults");F(this,"interceptors");this.defaults=e||{},this.interceptors={request:new SS.GaxiosInterceptorManager,response:new SS.GaxiosInterceptorManager}}fetch(...e){let n=e[0],r=e[1],o,i=new Headers;return typeof n=="string"?o=new URL(n):n instanceof URL?o=n:n&&n.url&&(o=new URL(n.url)),n&&typeof n=="object"&&"headers"in n&&Ol.mergeHeaders(i,n.headers),r&&Ol.mergeHeaders(i,new Headers(r.headers)),typeof n=="object"&&!(n instanceof URL)?this.request({...r,...n,headers:i,url:o}):this.request({...r,headers:i,url:o})}async request(e={}){let n=await Le(this,Rn,kS).call(this,e);return n=await Le(this,Rn,IS).call(this,n),Le(this,Rn,xS).call(this,this._request(n))}async _defaultAdapter(e){var s,a;let n=e.fetchImplementation||this.defaults.fetchImplementation||await Le(s=Ol,Ml,NS).call(s),r={...e};delete r.data;let o=await n(e.url,r),i=await this.getResponseData(e,o);return(a=Object.getOwnPropertyDescriptor(o,"data"))!=null&&a.configurable||Object.defineProperties(o,{data:{configurable:!0,writable:!0,enumerable:!0,value:i}}),Object.assign(o,{config:e,data:i})}async _request(e){var n;try{let r;if(e.adapter?r=await e.adapter(e,this._defaultAdapter.bind(this)):r=await this._defaultAdapter(e),!e.validateStatus(r.status)){if(e.responseType==="stream"){let i=[];for await(let s of r.data)i.push(s);r.data=i.toString()}let o=Vs.GaxiosError.extractAPIErrorFromResponse(r,`Request failed with status code ${r.status}`);throw new Vs.GaxiosError(o==null?void 0:o.message,e,r,o)}return r}catch(r){let o;r instanceof Vs.GaxiosError?o=r:r instanceof Error?o=new Vs.GaxiosError(r.message,e,void 0,r):o=new Vs.GaxiosError("Unexpected Gaxios Error",e,void 0,r);let{shouldRetry:i,config:s}=await(0,z$.getRetryConfig)(o);if(i&&s)return o.config.retryConfig.currentRetryAttempt=s.retryConfig.currentRetryAttempt,e.retryConfig=(n=o.config)==null?void 0:n.retryConfig,Le(this,Rn,S0).call(this,e),this._request(e);throw e.errorRedactor&&e.errorRedactor(o),o}}async getResponseData(e,n){var r;if(n.status===K$)return"";if(e.maxContentLength&&n.headers.has("content-length")&&e.maxContentLength<Number.parseInt(((r=n.headers)==null?void 0:r.get("content-length"))||""))throw new Vs.GaxiosError("Response's `Content-Length` is over the limit.",e,Object.assign(n,{config:e}));switch(e.responseType){case"stream":return n.body;case"json":{let o=await n.text();try{return JSON.parse(o)}catch(i){return o}}case"arraybuffer":return n.arrayBuffer();case"blob":return n.blob();case"text":return n.text();default:return this.getResponseDataFromContentType(n)}}validateStatus(e){return e>=200&&e<300}async getResponseDataFromContentType(e){let n=e.headers.get("Content-Type");if(n===null)return e.text();if(n=n.toLowerCase(),n.includes("application/json")){let r=await e.text();try{r=JSON.parse(r)}catch(o){}return r}else return n.match(/^text\//)?e.text():e.blob()}async*getMultipartRequest(e,n){let r=`--${n}--`;for(let o of e){let i=o.headers.get("Content-Type")||"application/octet-stream";yield`--${n}\r
Content-Type: ${i}\r
\r
`,typeof o.content=="string"?yield o.content:yield*o.content,yield`\r
`}yield r}static mergeHeaders(e,...n){e=e instanceof Headers?e:new Headers(e);for(let r of n)(r instanceof Headers?r:new Headers(r)).forEach((i,s)=>{s==="set-cookie"?e.append(s,i):e.set(s,i)});return e}};Rn=new WeakSet,PS=function(e,n=[]){var s,a;let r=new URL(e),o=[...n],i=((a=(s=process.env.NO_PROXY)!=null?s:process.env.no_proxy)==null?void 0:a.split(","))||[];for(let l of i)o.push(l.trim());for(let l of o)if(l instanceof RegExp){if(l.test(r.toString()))return!1}else if(l instanceof URL){if(l.origin===r.origin)return!1}else if(l.startsWith("*.")||l.startsWith(".")){let u=l.replace(/^\*\./,".");if(r.hostname.endsWith(u))return!1}else if(l===r.origin||l===r.hostname||l===r.href)return!1;return!0},IS=async function(e){let n=Promise.resolve(e);for(let r of this.interceptors.request.values())r&&(n=n.then(r.resolved,r.rejected));return n},xS=async function(e){let n=Promise.resolve(e);for(let r of this.interceptors.response.values())r&&(n=n.then(r.resolved,r.rejected));return n},kS=async function(e){var s,a,l,u,f,p,m,b;let n=new Headers(this.defaults.headers);Ol.mergeHeaders(n,e.headers);let r=(0,j$.default)(!0,{},this.defaults,e);if(!r.url)throw new Error("URL is required.");if(r.baseURL&&(r.url=new URL(r.url,r.baseURL)),r.url=new URL(r.url),r.params)if(r.paramsSerializer){let v=r.paramsSerializer(r.params);v.startsWith("?")&&(v=v.slice(1));let w=r.url.toString().includes("?")?"&":"?";r.url=r.url+w+v}else{let v=r.url instanceof URL?r.url:new URL(r.url);for(let[w,_]of new URLSearchParams(r.params))v.searchParams.append(w,_);r.url=v}typeof e.maxContentLength=="number"&&(r.size=e.maxContentLength),typeof e.maxRedirects=="number"&&(r.follow=e.maxRedirects);let o=typeof r.data=="string"||r.data instanceof ArrayBuffer||r.data instanceof Blob||globalThis.File&&r.data instanceof File||r.data instanceof FormData||r.data instanceof TS.Readable||r.data instanceof ReadableStream||r.data instanceof String||r.data instanceof URLSearchParams||ArrayBuffer.isView(r.data)||["Blob","File","FormData"].includes(((a=(s=r.data)==null?void 0:s.constructor)==null?void 0:a.name)||"");if((l=r.multipart)!=null&&l.length){let v=await J$();n.set("content-type",`multipart/related; boundary=${v}`),r.body=TS.Readable.from(this.getMultipartRequest(r.multipart,v))}else o?r.body=r.data:typeof r.data=="object"?n.get("Content-Type")==="application/x-www-form-urlencoded"?r.body=r.paramsSerializer?r.paramsSerializer(r.data):new URLSearchParams(r.data):(n.has("content-type")||n.set("content-type","application/json"),r.body=JSON.stringify(r.data)):r.data&&(r.body=r.data);r.validateStatus=r.validateStatus||this.validateStatus,r.responseType=r.responseType||"unknown",!n.has("accept")&&r.responseType==="json"&&n.set("accept","application/json");let i=r.proxy||((u=process==null?void 0:process.env)==null?void 0:u.HTTPS_PROXY)||((f=process==null?void 0:process.env)==null?void 0:f.https_proxy)||((p=process==null?void 0:process.env)==null?void 0:p.HTTP_PROXY)||((m=process==null?void 0:process.env)==null?void 0:m.http_proxy);if(!r.agent)if(i&&Le(this,Rn,PS).call(this,r.url,r.noProxy)){let v=await Le(b=Ol,Ml,RS).call(b);this.agentCache.has(i)?r.agent=this.agentCache.get(i):(r.agent=new v(i,{cert:r.cert,key:r.key}),this.agentCache.set(i,r.agent))}else r.cert&&r.key&&(this.agentCache.has(r.key)?r.agent=this.agentCache.get(r.key):(r.agent=new W$.Agent({cert:r.cert,key:r.key}),this.agentCache.set(r.key,r.agent)));return typeof r.errorRedactor!="function"&&r.errorRedactor!==!1&&(r.errorRedactor=Vs.defaultErrorRedactor),r.body&&!("duplex"in r)&&(r.duplex="half"),Le(this,Rn,S0).call(this,r),Object.assign(r,{headers:n,url:r.url instanceof URL?r.url:new URL(r.url)})},S0=function(e){if(e.timeout){let n=AbortSignal.timeout(e.timeout);e.signal&&!e.signal.aborted?e.signal=AbortSignal.any([e.signal,n]):e.signal=n}},kc=new WeakMap,Rc=new WeakMap,Ml=new WeakSet,RS=async function(){return fe(this,kc)||qe(this,kc,(await Promise.resolve().then(()=>ht(IT()))).HttpsProxyAgent),fe(this,kc)},NS=async function(){let e=typeof window!="undefined"&&!!window;return fe(this,Rc)||qe(this,Rc,e?window.fetch:(await Promise.resolve().then(()=>(CS(),AS))).default),fe(this,Rc)},Re(js,Ml),Re(js,kc),Re(js,Rc);Dl.Gaxios=js;Ol=js});var Ut=te(tn=>{"use strict";var Y$=tn&&tn.__createBinding||(Object.create?function(t,e,n,r){r===void 0&&(r=n);var o=Object.getOwnPropertyDescriptor(e,n);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[n]}}),Object.defineProperty(t,r,o)}:function(t,e,n,r){r===void 0&&(r=n),t[r]=e[n]}),X$=tn&&tn.__exportStar||function(t,e){for(var n in t)n!=="default"&&!Object.prototype.hasOwnProperty.call(e,n)&&Y$(e,t,n)};Object.defineProperty(tn,"__esModule",{value:!0});tn.instance=tn.Gaxios=tn.GaxiosError=void 0;tn.request=Z$;var DS=OS();Object.defineProperty(tn,"Gaxios",{enumerable:!0,get:function(){return DS.Gaxios}});var Q$=t0();Object.defineProperty(tn,"GaxiosError",{enumerable:!0,get:function(){return Q$.GaxiosError}});X$(o0(),tn);tn.instance=new DS.Gaxios;async function Z$(t){return tn.instance.request(t)}});var P0=te((MS,Ph)=>{(function(t){"use strict";var e,n=/^-?(?:\d+(?:\.\d*)?|\.\d+)(?:e[+-]?\d+)?$/i,r=Math.ceil,o=Math.floor,i="[BigNumber Error] ",s=i+"Number primitive has more than 15 significant digits: ",a=1e14,l=14,u=9007199254740991,f=[1,10,100,1e3,1e4,1e5,1e6,1e7,1e8,1e9,1e10,1e11,1e12,1e13],p=1e7,m=1e9;function b(x){var P,V,J,E=ie.prototype={constructor:ie,toString:null,valueOf:null},O=new ie(1),X=20,ee=4,se=-7,re=21,be=-1e7,Me=1e7,ke=!1,Ie=1,Qe=0,ba={prefix:"",groupSize:3,secondaryGroupSize:0,groupSeparator:",",decimalSeparator:".",fractionGroupSize:0,fractionGroupSeparator:"\xA0",suffix:""},Br="0123456789abcdefghijklmnopqrstuvwxyz",Mu=!0;function ie(A,S){var I,q,M,B,W,N,U,$,H=this;if(!(H instanceof ie))return new ie(A,S);if(S==null){if(A&&A._isBigNumber===!0){H.s=A.s,!A.c||A.e>Me?H.c=H.e=null:A.e<be?H.c=[H.e=0]:(H.e=A.e,H.c=A.c.slice());return}if((N=typeof A=="number")&&A*0==0){if(H.s=1/A<0?(A=-A,-1):1,A===~~A){for(B=0,W=A;W>=10;W/=10,B++);B>Me?H.c=H.e=null:(H.e=B,H.c=[A]);return}$=String(A)}else{if(!n.test($=String(A)))return J(H,$,N);H.s=$.charCodeAt(0)==45?($=$.slice(1),-1):1}(B=$.indexOf("."))>-1&&($=$.replace(".","")),(W=$.search(/e/i))>0?(B<0&&(B=W),B+=+$.slice(W+1),$=$.substring(0,W)):B<0&&(B=$.length)}else{if(T(S,2,Br.length,"Base"),S==10&&Mu)return H=new ie(A),Xt(H,X+H.e+1,ee);if($=String(A),N=typeof A=="number"){if(A*0!=0)return J(H,$,N,S);if(H.s=1/A<0?($=$.slice(1),-1):1,ie.DEBUG&&$.replace(/^0\.0*|\./,"").length>15)throw Error(s+A)}else H.s=$.charCodeAt(0)===45?($=$.slice(1),-1):1;for(I=Br.slice(0,S),B=W=0,U=$.length;W<U;W++)if(I.indexOf(q=$.charAt(W))<0){if(q=="."){if(W>B){B=U;continue}}else if(!M&&($==$.toUpperCase()&&($=$.toLowerCase())||$==$.toLowerCase()&&($=$.toUpperCase()))){M=!0,W=-1,B=0;continue}return J(H,String(A),N,S)}N=!1,$=V($,S,10,H.s),(B=$.indexOf("."))>-1?$=$.replace(".",""):B=$.length}for(W=0;$.charCodeAt(W)===48;W++);for(U=$.length;$.charCodeAt(--U)===48;);if($=$.slice(W,++U)){if(U-=W,N&&ie.DEBUG&&U>15&&(A>u||A!==o(A)))throw Error(s+H.s*A);if((B=B-W-1)>Me)H.c=H.e=null;else if(B<be)H.c=[H.e=0];else{if(H.e=B,H.c=[],W=(B+1)%l,B<0&&(W+=l),W<U){for(W&&H.c.push(+$.slice(0,W)),U-=l;W<U;)H.c.push(+$.slice(W,W+=l));W=l-($=$.slice(W)).length}else W-=U;for(;W--;$+="0");H.c.push(+$)}}else H.c=[H.e=0]}ie.clone=b,ie.ROUND_UP=0,ie.ROUND_DOWN=1,ie.ROUND_CEIL=2,ie.ROUND_FLOOR=3,ie.ROUND_HALF_UP=4,ie.ROUND_HALF_DOWN=5,ie.ROUND_HALF_EVEN=6,ie.ROUND_HALF_CEIL=7,ie.ROUND_HALF_FLOOR=8,ie.EUCLID=9,ie.config=ie.set=function(A){var S,I;if(A!=null)if(typeof A=="object"){if(A.hasOwnProperty(S="DECIMAL_PLACES")&&(I=A[S],T(I,0,m,S),X=I),A.hasOwnProperty(S="ROUNDING_MODE")&&(I=A[S],T(I,0,8,S),ee=I),A.hasOwnProperty(S="EXPONENTIAL_AT")&&(I=A[S],I&&I.pop?(T(I[0],-m,0,S),T(I[1],0,m,S),se=I[0],re=I[1]):(T(I,-m,m,S),se=-(re=I<0?-I:I))),A.hasOwnProperty(S="RANGE"))if(I=A[S],I&&I.pop)T(I[0],-m,-1,S),T(I[1],1,m,S),be=I[0],Me=I[1];else if(T(I,-m,m,S),I)be=-(Me=I<0?-I:I);else throw Error(i+S+" cannot be zero: "+I);if(A.hasOwnProperty(S="CRYPTO"))if(I=A[S],I===!!I)if(I)if(typeof crypto!="undefined"&&crypto&&(crypto.getRandomValues||crypto.randomBytes))ke=I;else throw ke=!I,Error(i+"crypto unavailable");else ke=I;else throw Error(i+S+" not true or false: "+I);if(A.hasOwnProperty(S="MODULO_MODE")&&(I=A[S],T(I,0,9,S),Ie=I),A.hasOwnProperty(S="POW_PRECISION")&&(I=A[S],T(I,0,m,S),Qe=I),A.hasOwnProperty(S="FORMAT"))if(I=A[S],typeof I=="object")ba=I;else throw Error(i+S+" not an object: "+I);if(A.hasOwnProperty(S="ALPHABET"))if(I=A[S],typeof I=="string"&&!/^.?$|[+\-.\s]|(.).*\1/.test(I))Mu=I.slice(0,10)=="0123456789",Br=I;else throw Error(i+S+" invalid: "+I)}else throw Error(i+"Object expected: "+A);return{DECIMAL_PLACES:X,ROUNDING_MODE:ee,EXPONENTIAL_AT:[se,re],RANGE:[be,Me],CRYPTO:ke,MODULO_MODE:Ie,POW_PRECISION:Qe,FORMAT:ba,ALPHABET:Br}},ie.isBigNumber=function(A){if(!A||A._isBigNumber!==!0)return!1;if(!ie.DEBUG)return!0;var S,I,q=A.c,M=A.e,B=A.s;e:if({}.toString.call(q)=="[object Array]"){if((B===1||B===-1)&&M>=-m&&M<=m&&M===o(M)){if(q[0]===0){if(M===0&&q.length===1)return!0;break e}if(S=(M+1)%l,S<1&&(S+=l),String(q[0]).length==S){for(S=0;S<q.length;S++)if(I=q[S],I<0||I>=a||I!==o(I))break e;if(I!==0)return!0}}}else if(q===null&&M===null&&(B===null||B===1||B===-1))return!0;throw Error(i+"Invalid BigNumber: "+A)},ie.maximum=ie.max=function(){return Yt(arguments,-1)},ie.minimum=ie.min=function(){return Yt(arguments,1)},ie.random=function(){var A=9007199254740992,S=Math.random()*A&2097151?function(){return o(Math.random()*A)}:function(){return(Math.random()*1073741824|0)*8388608+(Math.random()*8388608|0)};return function(I){var q,M,B,W,N,U=0,$=[],H=new ie(O);if(I==null?I=X:T(I,0,m),W=r(I/l),ke)if(crypto.getRandomValues){for(q=crypto.getRandomValues(new Uint32Array(W*=2));U<W;)N=q[U]*131072+(q[U+1]>>>11),N>=9e15?(M=crypto.getRandomValues(new Uint32Array(2)),q[U]=M[0],q[U+1]=M[1]):($.push(N%1e14),U+=2);U=W/2}else if(crypto.randomBytes){for(q=crypto.randomBytes(W*=7);U<W;)N=(q[U]&31)*281474976710656+q[U+1]*1099511627776+q[U+2]*4294967296+q[U+3]*16777216+(q[U+4]<<16)+(q[U+5]<<8)+q[U+6],N>=9e15?crypto.randomBytes(7).copy(q,U):($.push(N%1e14),U+=7);U=W/7}else throw ke=!1,Error(i+"crypto unavailable");if(!ke)for(;U<W;)N=S(),N<9e15&&($[U++]=N%1e14);for(W=$[--U],I%=l,W&&I&&(N=f[l-I],$[U]=o(W/N)*N);$[U]===0;$.pop(),U--);if(U<0)$=[B=0];else{for(B=-1;$[0]===0;$.splice(0,1),B-=l);for(U=1,N=$[0];N>=10;N/=10,U++);U<l&&(B-=l-U)}return H.e=B,H.c=$,H}}(),ie.sum=function(){for(var A=1,S=arguments,I=new ie(S[0]);A<S.length;)I=I.plus(S[A++]);return I},V=function(){var A="0123456789";function S(I,q,M,B){for(var W,N=[0],U,$=0,H=I.length;$<H;){for(U=N.length;U--;N[U]*=q);for(N[0]+=B.indexOf(I.charAt($++)),W=0;W<N.length;W++)N[W]>M-1&&(N[W+1]==null&&(N[W+1]=0),N[W+1]+=N[W]/M|0,N[W]%=M)}return N.reverse()}return function(I,q,M,B,W){var N,U,$,H,Z,de,pe,Fe,rt=I.indexOf("."),at=X,De=ee;for(rt>=0&&(H=Qe,Qe=0,I=I.replace(".",""),Fe=new ie(q),de=Fe.pow(I.length-rt),Qe=H,Fe.c=S(D(w(de.c),de.e,"0"),10,M,A),Fe.e=Fe.c.length),pe=S(I,q,M,W?(N=Br,A):(N=A,Br)),$=H=pe.length;pe[--H]==0;pe.pop());if(!pe[0])return N.charAt(0);if(rt<0?--$:(de.c=pe,de.e=$,de.s=B,de=P(de,Fe,at,De,M),pe=de.c,Z=de.r,$=de.e),U=$+at+1,rt=pe[U],H=M/2,Z=Z||U<0||pe[U+1]!=null,Z=De<4?(rt!=null||Z)&&(De==0||De==(de.s<0?3:2)):rt>H||rt==H&&(De==4||Z||De==6&&pe[U-1]&1||De==(de.s<0?8:7)),U<1||!pe[0])I=Z?D(N.charAt(1),-at,N.charAt(0)):N.charAt(0);else{if(pe.length=U,Z)for(--M;++pe[--U]>M;)pe[U]=0,U||(++$,pe=[1].concat(pe));for(H=pe.length;!pe[--H];);for(rt=0,I="";rt<=H;I+=N.charAt(pe[rt++]));I=D(I,$,N.charAt(0))}return I}}(),P=function(){function A(q,M,B){var W,N,U,$,H=0,Z=q.length,de=M%p,pe=M/p|0;for(q=q.slice();Z--;)U=q[Z]%p,$=q[Z]/p|0,W=pe*U+$*de,N=de*U+W%p*p+H,H=(N/B|0)+(W/p|0)+pe*$,q[Z]=N%B;return H&&(q=[H].concat(q)),q}function S(q,M,B,W){var N,U;if(B!=W)U=B>W?1:-1;else for(N=U=0;N<B;N++)if(q[N]!=M[N]){U=q[N]>M[N]?1:-1;break}return U}function I(q,M,B,W){for(var N=0;B--;)q[B]-=N,N=q[B]<M[B]?1:0,q[B]=N*W+q[B]-M[B];for(;!q[0]&&q.length>1;q.splice(0,1));}return function(q,M,B,W,N){var U,$,H,Z,de,pe,Fe,rt,at,De,He,Et,va,wa,_a,_n,mo,Ht=q.s==M.s?1:-1,At=q.c,Je=M.c;if(!At||!At[0]||!Je||!Je[0])return new ie(!q.s||!M.s||(At?Je&&At[0]==Je[0]:!Je)?NaN:At&&At[0]==0||!Je?Ht*0:Ht/0);for(rt=new ie(Ht),at=rt.c=[],$=q.e-M.e,Ht=B+$+1,N||(N=a,$=v(q.e/l)-v(M.e/l),Ht=Ht/l|0),H=0;Je[H]==(At[H]||0);H++);if(Je[H]>(At[H]||0)&&$--,Ht<0)at.push(1),Z=!0;else{for(wa=At.length,_n=Je.length,H=0,Ht+=2,de=o(N/(Je[0]+1)),de>1&&(Je=A(Je,de,N),At=A(At,de,N),_n=Je.length,wa=At.length),va=_n,De=At.slice(0,_n),He=De.length;He<_n;De[He++]=0);mo=Je.slice(),mo=[0].concat(mo),_a=Je[0],Je[1]>=N/2&&_a++;do{if(de=0,U=S(Je,De,_n,He),U<0){if(Et=De[0],_n!=He&&(Et=Et*N+(De[1]||0)),de=o(Et/_a),de>1)for(de>=N&&(de=N-1),pe=A(Je,de,N),Fe=pe.length,He=De.length;S(pe,De,Fe,He)==1;)de--,I(pe,_n<Fe?mo:Je,Fe,N),Fe=pe.length,U=1;else de==0&&(U=de=1),pe=Je.slice(),Fe=pe.length;if(Fe<He&&(pe=[0].concat(pe)),I(De,pe,He,N),He=De.length,U==-1)for(;S(Je,De,_n,He)<1;)de++,I(De,_n<He?mo:Je,He,N),He=De.length}else U===0&&(de++,De=[0]);at[H++]=de,De[0]?De[He++]=At[va]||0:(De=[At[va]],He=1)}while((va++<wa||De[0]!=null)&&Ht--);Z=De[0]!=null,at[0]||at.splice(0,1)}if(N==a){for(H=1,Ht=at[0];Ht>=10;Ht/=10,H++);Xt(rt,B+(rt.e=H+$*l-1)+1,W,Z)}else rt.e=$,rt.r=+Z;return rt}}();function cn(A,S,I,q){var M,B,W,N,U;if(I==null?I=ee:T(I,0,8),!A.c)return A.toString();if(M=A.c[0],W=A.e,S==null)U=w(A.c),U=q==1||q==2&&(W<=se||W>=re)?L(U,W):D(U,W,"0");else if(A=Xt(new ie(A),S,I),B=A.e,U=w(A.c),N=U.length,q==1||q==2&&(S<=B||B<=se)){for(;N<S;U+="0",N++);U=L(U,B)}else if(S-=W+(q===2&&B>W),U=D(U,B,"0"),B+1>N){if(--S>0)for(U+=".";S--;U+="0");}else if(S+=B-N,S>0)for(B+1==N&&(U+=".");S--;U+="0");return A.s<0&&M?"-"+U:U}function Yt(A,S){for(var I,q,M=1,B=new ie(A[0]);M<A.length;M++)q=new ie(A[M]),(!q.s||(I=_(B,q))===S||I===0&&B.s===S)&&(B=q);return B}function Fu(A,S,I){for(var q=1,M=S.length;!S[--M];S.pop());for(M=S[0];M>=10;M/=10,q++);return(I=q+I*l-1)>Me?A.c=A.e=null:I<be?A.c=[A.e=0]:(A.e=I,A.c=S),A}J=function(){var A=/^(-?)0([xbo])(?=\w[\w.]*$)/i,S=/^([^.]+)\.$/,I=/^\.([^.]+)$/,q=/^-?(Infinity|NaN)$/,M=/^\s*\+(?=[\w.])|^\s+|\s+$/g;return function(B,W,N,U){var $,H=N?W:W.replace(M,"");if(q.test(H))B.s=isNaN(H)?null:H<0?-1:1;else{if(!N&&(H=H.replace(A,function(Z,de,pe){return $=(pe=pe.toLowerCase())=="x"?16:pe=="b"?2:8,!U||U==$?de:Z}),U&&($=U,H=H.replace(S,"$1").replace(I,"0.$1")),W!=H))return new ie(H,$);if(ie.DEBUG)throw Error(i+"Not a"+(U?" base "+U:"")+" number: "+W);B.s=null}B.c=B.e=null}}();function Xt(A,S,I,q){var M,B,W,N,U,$,H,Z=A.c,de=f;if(Z){e:{for(M=1,N=Z[0];N>=10;N/=10,M++);if(B=S-M,B<0)B+=l,W=S,U=Z[$=0],H=o(U/de[M-W-1]%10);else if($=r((B+1)/l),$>=Z.length)if(q){for(;Z.length<=$;Z.push(0));U=H=0,M=1,B%=l,W=B-l+1}else break e;else{for(U=N=Z[$],M=1;N>=10;N/=10,M++);B%=l,W=B-l+M,H=W<0?0:o(U/de[M-W-1]%10)}if(q=q||S<0||Z[$+1]!=null||(W<0?U:U%de[M-W-1]),q=I<4?(H||q)&&(I==0||I==(A.s<0?3:2)):H>5||H==5&&(I==4||q||I==6&&(B>0?W>0?U/de[M-W]:0:Z[$-1])%10&1||I==(A.s<0?8:7)),S<1||!Z[0])return Z.length=0,q?(S-=A.e+1,Z[0]=de[(l-S%l)%l],A.e=-S||0):Z[0]=A.e=0,A;if(B==0?(Z.length=$,N=1,$--):(Z.length=$+1,N=de[l-B],Z[$]=W>0?o(U/de[M-W]%de[W])*N:0),q)for(;;)if($==0){for(B=1,W=Z[0];W>=10;W/=10,B++);for(W=Z[0]+=N,N=1;W>=10;W/=10,N++);B!=N&&(A.e++,Z[0]==a&&(Z[0]=1));break}else{if(Z[$]+=N,Z[$]!=a)break;Z[$--]=0,N=1}for(B=Z.length;Z[--B]===0;Z.pop());}A.e>Me?A.c=A.e=null:A.e<be&&(A.c=[A.e=0])}return A}function _t(A){var S,I=A.e;return I===null?A.toString():(S=w(A.c),S=I<=se||I>=re?L(S,I):D(S,I,"0"),A.s<0?"-"+S:S)}return E.absoluteValue=E.abs=function(){var A=new ie(this);return A.s<0&&(A.s=1),A},E.comparedTo=function(A,S){return _(this,new ie(A,S))},E.decimalPlaces=E.dp=function(A,S){var I,q,M,B=this;if(A!=null)return T(A,0,m),S==null?S=ee:T(S,0,8),Xt(new ie(B),A+B.e+1,S);if(!(I=B.c))return null;if(q=((M=I.length-1)-v(this.e/l))*l,M=I[M])for(;M%10==0;M/=10,q--);return q<0&&(q=0),q},E.dividedBy=E.div=function(A,S){return P(this,new ie(A,S),X,ee)},E.dividedToIntegerBy=E.idiv=function(A,S){return P(this,new ie(A,S),0,1)},E.exponentiatedBy=E.pow=function(A,S){var I,q,M,B,W,N,U,$,H,Z=this;if(A=new ie(A),A.c&&!A.isInteger())throw Error(i+"Exponent not an integer: "+_t(A));if(S!=null&&(S=new ie(S)),N=A.e>14,!Z.c||!Z.c[0]||Z.c[0]==1&&!Z.e&&Z.c.length==1||!A.c||!A.c[0])return H=new ie(Math.pow(+_t(Z),N?A.s*(2-R(A)):+_t(A))),S?H.mod(S):H;if(U=A.s<0,S){if(S.c?!S.c[0]:!S.s)return new ie(NaN);q=!U&&Z.isInteger()&&S.isInteger(),q&&(Z=Z.mod(S))}else{if(A.e>9&&(Z.e>0||Z.e<-1||(Z.e==0?Z.c[0]>1||N&&Z.c[1]>=24e7:Z.c[0]<8e13||N&&Z.c[0]<=9999975e7)))return B=Z.s<0&&R(A)?-0:0,Z.e>-1&&(B=1/B),new ie(U?1/B:B);Qe&&(B=r(Qe/l+2))}for(N?(I=new ie(.5),U&&(A.s=1),$=R(A)):(M=Math.abs(+_t(A)),$=M%2),H=new ie(O);;){if($){if(H=H.times(Z),!H.c)break;B?H.c.length>B&&(H.c.length=B):q&&(H=H.mod(S))}if(M){if(M=o(M/2),M===0)break;$=M%2}else if(A=A.times(I),Xt(A,A.e+1,1),A.e>14)$=R(A);else{if(M=+_t(A),M===0)break;$=M%2}Z=Z.times(Z),B?Z.c&&Z.c.length>B&&(Z.c.length=B):q&&(Z=Z.mod(S))}return q?H:(U&&(H=O.div(H)),S?H.mod(S):B?Xt(H,Qe,ee,W):H)},E.integerValue=function(A){var S=new ie(this);return A==null?A=ee:T(A,0,8),Xt(S,S.e+1,A)},E.isEqualTo=E.eq=function(A,S){return _(this,new ie(A,S))===0},E.isFinite=function(){return!!this.c},E.isGreaterThan=E.gt=function(A,S){return _(this,new ie(A,S))>0},E.isGreaterThanOrEqualTo=E.gte=function(A,S){return(S=_(this,new ie(A,S)))===1||S===0},E.isInteger=function(){return!!this.c&&v(this.e/l)>this.c.length-2},E.isLessThan=E.lt=function(A,S){return _(this,new ie(A,S))<0},E.isLessThanOrEqualTo=E.lte=function(A,S){return(S=_(this,new ie(A,S)))===-1||S===0},E.isNaN=function(){return!this.s},E.isNegative=function(){return this.s<0},E.isPositive=function(){return this.s>0},E.isZero=function(){return!!this.c&&this.c[0]==0},E.minus=function(A,S){var I,q,M,B,W=this,N=W.s;if(A=new ie(A,S),S=A.s,!N||!S)return new ie(NaN);if(N!=S)return A.s=-S,W.plus(A);var U=W.e/l,$=A.e/l,H=W.c,Z=A.c;if(!U||!$){if(!H||!Z)return H?(A.s=-S,A):new ie(Z?W:NaN);if(!H[0]||!Z[0])return Z[0]?(A.s=-S,A):new ie(H[0]?W:ee==3?-0:0)}if(U=v(U),$=v($),H=H.slice(),N=U-$){for((B=N<0)?(N=-N,M=H):($=U,M=Z),M.reverse(),S=N;S--;M.push(0));M.reverse()}else for(q=(B=(N=H.length)<(S=Z.length))?N:S,N=S=0;S<q;S++)if(H[S]!=Z[S]){B=H[S]<Z[S];break}if(B&&(M=H,H=Z,Z=M,A.s=-A.s),S=(q=Z.length)-(I=H.length),S>0)for(;S--;H[I++]=0);for(S=a-1;q>N;){if(H[--q]<Z[q]){for(I=q;I&&!H[--I];H[I]=S);--H[I],H[q]+=a}H[q]-=Z[q]}for(;H[0]==0;H.splice(0,1),--$);return H[0]?Fu(A,H,$):(A.s=ee==3?-1:1,A.c=[A.e=0],A)},E.modulo=E.mod=function(A,S){var I,q,M=this;return A=new ie(A,S),!M.c||!A.s||A.c&&!A.c[0]?new ie(NaN):!A.c||M.c&&!M.c[0]?new ie(M):(Ie==9?(q=A.s,A.s=1,I=P(M,A,0,3),A.s=q,I.s*=q):I=P(M,A,0,Ie),A=M.minus(I.times(A)),!A.c[0]&&Ie==1&&(A.s=M.s),A)},E.multipliedBy=E.times=function(A,S){var I,q,M,B,W,N,U,$,H,Z,de,pe,Fe,rt,at,De=this,He=De.c,Et=(A=new ie(A,S)).c;if(!He||!Et||!He[0]||!Et[0])return!De.s||!A.s||He&&!He[0]&&!Et||Et&&!Et[0]&&!He?A.c=A.e=A.s=null:(A.s*=De.s,!He||!Et?A.c=A.e=null:(A.c=[0],A.e=0)),A;for(q=v(De.e/l)+v(A.e/l),A.s*=De.s,U=He.length,Z=Et.length,U<Z&&(Fe=He,He=Et,Et=Fe,M=U,U=Z,Z=M),M=U+Z,Fe=[];M--;Fe.push(0));for(rt=a,at=p,M=Z;--M>=0;){for(I=0,de=Et[M]%at,pe=Et[M]/at|0,W=U,B=M+W;B>M;)$=He[--W]%at,H=He[W]/at|0,N=pe*$+H*de,$=de*$+N%at*at+Fe[B]+I,I=($/rt|0)+(N/at|0)+pe*H,Fe[B--]=$%rt;Fe[B]=I}return I?++q:Fe.splice(0,1),Fu(A,Fe,q)},E.negated=function(){var A=new ie(this);return A.s=-A.s||null,A},E.plus=function(A,S){var I,q=this,M=q.s;if(A=new ie(A,S),S=A.s,!M||!S)return new ie(NaN);if(M!=S)return A.s=-S,q.minus(A);var B=q.e/l,W=A.e/l,N=q.c,U=A.c;if(!B||!W){if(!N||!U)return new ie(M/0);if(!N[0]||!U[0])return U[0]?A:new ie(N[0]?q:M*0)}if(B=v(B),W=v(W),N=N.slice(),M=B-W){for(M>0?(W=B,I=U):(M=-M,I=N),I.reverse();M--;I.push(0));I.reverse()}for(M=N.length,S=U.length,M-S<0&&(I=U,U=N,N=I,S=M),M=0;S;)M=(N[--S]=N[S]+U[S]+M)/a|0,N[S]=a===N[S]?0:N[S]%a;return M&&(N=[M].concat(N),++W),Fu(A,N,W)},E.precision=E.sd=function(A,S){var I,q,M,B=this;if(A!=null&&A!==!!A)return T(A,1,m),S==null?S=ee:T(S,0,8),Xt(new ie(B),A,S);if(!(I=B.c))return null;if(M=I.length-1,q=M*l+1,M=I[M]){for(;M%10==0;M/=10,q--);for(M=I[0];M>=10;M/=10,q++);}return A&&B.e+1>q&&(q=B.e+1),q},E.shiftedBy=function(A){return T(A,-u,u),this.times("1e"+A)},E.squareRoot=E.sqrt=function(){var A,S,I,q,M,B=this,W=B.c,N=B.s,U=B.e,$=X+4,H=new ie("0.5");if(N!==1||!W||!W[0])return new ie(!N||N<0&&(!W||W[0])?NaN:W?B:1/0);if(N=Math.sqrt(+_t(B)),N==0||N==1/0?(S=w(W),(S.length+U)%2==0&&(S+="0"),N=Math.sqrt(+S),U=v((U+1)/2)-(U<0||U%2),N==1/0?S="5e"+U:(S=N.toExponential(),S=S.slice(0,S.indexOf("e")+1)+U),I=new ie(S)):I=new ie(N+""),I.c[0]){for(U=I.e,N=U+$,N<3&&(N=0);;)if(M=I,I=H.times(M.plus(P(B,M,$,1))),w(M.c).slice(0,N)===(S=w(I.c)).slice(0,N))if(I.e<U&&--N,S=S.slice(N-3,N+1),S=="9999"||!q&&S=="4999"){if(!q&&(Xt(M,M.e+X+2,0),M.times(M).eq(B))){I=M;break}$+=4,N+=4,q=1}else{(!+S||!+S.slice(1)&&S.charAt(0)=="5")&&(Xt(I,I.e+X+2,1),A=!I.times(I).eq(B));break}}return Xt(I,I.e+X+1,ee,A)},E.toExponential=function(A,S){return A!=null&&(T(A,0,m),A++),cn(this,A,S,1)},E.toFixed=function(A,S){return A!=null&&(T(A,0,m),A=A+this.e+1),cn(this,A,S)},E.toFormat=function(A,S,I){var q,M=this;if(I==null)A!=null&&S&&typeof S=="object"?(I=S,S=null):A&&typeof A=="object"?(I=A,A=S=null):I=ba;else if(typeof I!="object")throw Error(i+"Argument not an object: "+I);if(q=M.toFixed(A,S),M.c){var B,W=q.split("."),N=+I.groupSize,U=+I.secondaryGroupSize,$=I.groupSeparator||"",H=W[0],Z=W[1],de=M.s<0,pe=de?H.slice(1):H,Fe=pe.length;if(U&&(B=N,N=U,U=B,Fe-=B),N>0&&Fe>0){for(B=Fe%N||N,H=pe.substr(0,B);B<Fe;B+=N)H+=$+pe.substr(B,N);U>0&&(H+=$+pe.slice(B)),de&&(H="-"+H)}q=Z?H+(I.decimalSeparator||"")+((U=+I.fractionGroupSize)?Z.replace(new RegExp("\\d{"+U+"}\\B","g"),"$&"+(I.fractionGroupSeparator||"")):Z):H}return(I.prefix||"")+q+(I.suffix||"")},E.toFraction=function(A){var S,I,q,M,B,W,N,U,$,H,Z,de,pe=this,Fe=pe.c;if(A!=null&&(N=new ie(A),!N.isInteger()&&(N.c||N.s!==1)||N.lt(O)))throw Error(i+"Argument "+(N.isInteger()?"out of range: ":"not an integer: ")+_t(N));if(!Fe)return new ie(pe);for(S=new ie(O),$=I=new ie(O),q=U=new ie(O),de=w(Fe),B=S.e=de.length-pe.e-1,S.c[0]=f[(W=B%l)<0?l+W:W],A=!A||N.comparedTo(S)>0?B>0?S:$:N,W=Me,Me=1/0,N=new ie(de),U.c[0]=0;H=P(N,S,0,1),M=I.plus(H.times(q)),M.comparedTo(A)!=1;)I=q,q=M,$=U.plus(H.times(M=$)),U=M,S=N.minus(H.times(M=S)),N=M;return M=P(A.minus(I),q,0,1),U=U.plus(M.times($)),I=I.plus(M.times(q)),U.s=$.s=pe.s,B=B*2,Z=P($,q,B,ee).minus(pe).abs().comparedTo(P(U,I,B,ee).minus(pe).abs())<1?[$,q]:[U,I],Me=W,Z},E.toNumber=function(){return+_t(this)},E.toPrecision=function(A,S){return A!=null&&T(A,1,m),cn(this,A,S,2)},E.toString=function(A){var S,I=this,q=I.s,M=I.e;return M===null?q?(S="Infinity",q<0&&(S="-"+S)):S="NaN":(A==null?S=M<=se||M>=re?L(w(I.c),M):D(w(I.c),M,"0"):A===10&&Mu?(I=Xt(new ie(I),X+M+1,ee),S=D(w(I.c),I.e,"0")):(T(A,2,Br.length,"Base"),S=V(D(w(I.c),M,"0"),10,A,q,!0)),q<0&&I.c[0]&&(S="-"+S)),S},E.valueOf=E.toJSON=function(){return _t(this)},E._isBigNumber=!0,x!=null&&ie.set(x),ie}function v(x){var P=x|0;return x>0||x===P?P:P-1}function w(x){for(var P,V,J=1,E=x.length,O=x[0]+"";J<E;){for(P=x[J++]+"",V=l-P.length;V--;P="0"+P);O+=P}for(E=O.length;O.charCodeAt(--E)===48;);return O.slice(0,E+1||1)}function _(x,P){var V,J,E=x.c,O=P.c,X=x.s,ee=P.s,se=x.e,re=P.e;if(!X||!ee)return null;if(V=E&&!E[0],J=O&&!O[0],V||J)return V?J?0:-ee:X;if(X!=ee)return X;if(V=X<0,J=se==re,!E||!O)return J?0:!E^V?1:-1;if(!J)return se>re^V?1:-1;for(ee=(se=E.length)<(re=O.length)?se:re,X=0;X<ee;X++)if(E[X]!=O[X])return E[X]>O[X]^V?1:-1;return se==re?0:se>re^V?1:-1}function T(x,P,V,J){if(x<P||x>V||x!==o(x))throw Error(i+(J||"Argument")+(typeof x=="number"?x<P||x>V?" out of range: ":" not an integer: ":" not a primitive number: ")+String(x))}function R(x){var P=x.c.length-1;return v(x.e/l)==P&&x.c[P]%2!=0}function L(x,P){return(x.length>1?x.charAt(0)+"."+x.slice(1):x)+(P<0?"e":"e+")+P}function D(x,P,V){var J,E;if(P<0){for(E=V+".";++P;E+=V);x=E+x}else if(J=x.length,++P>J){for(E=V,P-=J;--P;E+=V);x+=E}else P<J&&(x=x.slice(0,P)+"."+x.slice(P));return x}e=b(),e.default=e.BigNumber=e,typeof define=="function"&&define.amd?define(function(){return e}):typeof Ph!="undefined"&&Ph.exports?Ph.exports=e:(t||(t=typeof self!="undefined"&&self?self:window),t.BigNumber=e)})(MS)});var BS=te((u0e,US)=>{var FS=P0(),LS=US.exports;(function(){"use strict";function t(u){return u<10?"0"+u:u}var e=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,n=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,r,o,i={"\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},s;function a(u){return n.lastIndex=0,n.test(u)?'"'+u.replace(n,function(f){var p=i[f];return typeof p=="string"?p:"\\u"+("0000"+f.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+u+'"'}function l(u,f){var p,m,b,v,w=r,_,T=f[u],R=T!=null&&(T instanceof FS||FS.isBigNumber(T));switch(T&&typeof T=="object"&&typeof T.toJSON=="function"&&(T=T.toJSON(u)),typeof s=="function"&&(T=s.call(f,u,T)),typeof T){case"string":return R?T:a(T);case"number":return isFinite(T)?String(T):"null";case"boolean":case"null":case"bigint":return String(T);case"object":if(!T)return"null";if(r+=o,_=[],Object.prototype.toString.apply(T)==="[object Array]"){for(v=T.length,p=0;p<v;p+=1)_[p]=l(p,T)||"null";return b=_.length===0?"[]":r?`[
`+r+_.join(`,
`+r)+`
`+w+"]":"["+_.join(",")+"]",r=w,b}if(s&&typeof s=="object")for(v=s.length,p=0;p<v;p+=1)typeof s[p]=="string"&&(m=s[p],b=l(m,T),b&&_.push(a(m)+(r?": ":":")+b));else Object.keys(T).forEach(function(L){var D=l(L,T);D&&_.push(a(L)+(r?": ":":")+D)});return b=_.length===0?"{}":r?`{
`+r+_.join(`,
`+r)+`
`+w+"}":"{"+_.join(",")+"}",r=w,b}}typeof LS.stringify!="function"&&(LS.stringify=function(u,f,p){var m;if(r="",o="",typeof p=="number")for(m=0;m<p;m+=1)o+=" ";else typeof p=="string"&&(o=p);if(s=f,f&&typeof f!="function"&&(typeof f!="object"||typeof f.length!="number"))throw new Error("JSON.stringify");return l("",{"":u})})})()});var HS=te((c0e,GS)=>{var Ih=null,eV=/(?:_|\\u005[Ff])(?:_|\\u005[Ff])(?:p|\\u0070)(?:r|\\u0072)(?:o|\\u006[Ff])(?:t|\\u0074)(?:o|\\u006[Ff])(?:_|\\u005[Ff])(?:_|\\u005[Ff])/,tV=/(?:c|\\u0063)(?:o|\\u006[Ff])(?:n|\\u006[Ee])(?:s|\\u0073)(?:t|\\u0074)(?:r|\\u0072)(?:u|\\u0075)(?:c|\\u0063)(?:t|\\u0074)(?:o|\\u006[Ff])(?:r|\\u0072)/,nV=function(t){"use strict";var e={strict:!1,storeAsString:!1,alwaysParseAsBig:!1,useNativeBigInt:!1,protoAction:"error",constructorAction:"error"};if(t!=null){if(t.strict===!0&&(e.strict=!0),t.storeAsString===!0&&(e.storeAsString=!0),e.alwaysParseAsBig=t.alwaysParseAsBig===!0?t.alwaysParseAsBig:!1,e.useNativeBigInt=t.useNativeBigInt===!0?t.useNativeBigInt:!1,typeof t.constructorAction!="undefined")if(t.constructorAction==="error"||t.constructorAction==="ignore"||t.constructorAction==="preserve")e.constructorAction=t.constructorAction;else throw new Error(`Incorrect value for constructorAction option, must be "error", "ignore" or undefined but passed ${t.constructorAction}`);if(typeof t.protoAction!="undefined")if(t.protoAction==="error"||t.protoAction==="ignore"||t.protoAction==="preserve")e.protoAction=t.protoAction;else throw new Error(`Incorrect value for protoAction option, must be "error", "ignore" or undefined but passed ${t.protoAction}`)}var n,r,o={'"':'"',"\\":"\\","/":"/",b:"\b",f:"\f",n:`
`,r:"\r",t:"	"},i,s=function(w){throw{name:"SyntaxError",message:w,at:n,text:i}},a=function(w){return w&&w!==r&&s("Expected '"+w+"' instead of '"+r+"'"),r=i.charAt(n),n+=1,r},l=function(){var w,_="";for(r==="-"&&(_="-",a("-"));r>="0"&&r<="9";)_+=r,a();if(r===".")for(_+=".";a()&&r>="0"&&r<="9";)_+=r;if(r==="e"||r==="E")for(_+=r,a(),(r==="-"||r==="+")&&(_+=r,a());r>="0"&&r<="9";)_+=r,a();if(w=+_,!isFinite(w))s("Bad number");else return Ih==null&&(Ih=P0()),_.length>15?e.storeAsString?_:e.useNativeBigInt?BigInt(_):new Ih(_):e.alwaysParseAsBig?e.useNativeBigInt?BigInt(w):new Ih(w):w},u=function(){var w,_,T="",R;if(r==='"')for(var L=n;a();){if(r==='"')return n-1>L&&(T+=i.substring(L,n-1)),a(),T;if(r==="\\"){if(n-1>L&&(T+=i.substring(L,n-1)),a(),r==="u"){for(R=0,_=0;_<4&&(w=parseInt(a(),16),!!isFinite(w));_+=1)R=R*16+w;T+=String.fromCharCode(R)}else if(typeof o[r]=="string")T+=o[r];else break;L=n}}s("Bad string")},f=function(){for(;r&&r<=" ";)a()},p=function(){switch(r){case"t":return a("t"),a("r"),a("u"),a("e"),!0;case"f":return a("f"),a("a"),a("l"),a("s"),a("e"),!1;case"n":return a("n"),a("u"),a("l"),a("l"),null}s("Unexpected '"+r+"'")},m,b=function(){var w=[];if(r==="["){if(a("["),f(),r==="]")return a("]"),w;for(;r;){if(w.push(m()),f(),r==="]")return a("]"),w;a(","),f()}}s("Bad array")},v=function(){var w,_=Object.create(null);if(r==="{"){if(a("{"),f(),r==="}")return a("}"),_;for(;r;){if(w=u(),f(),a(":"),e.strict===!0&&Object.hasOwnProperty.call(_,w)&&s('Duplicate key "'+w+'"'),eV.test(w)===!0?e.protoAction==="error"?s("Object contains forbidden prototype property"):e.protoAction==="ignore"?m():_[w]=m():tV.test(w)===!0?e.constructorAction==="error"?s("Object contains forbidden constructor property"):e.constructorAction==="ignore"?m():_[w]=m():_[w]=m(),f(),r==="}")return a("}"),_;a(","),f()}}s("Bad object")};return m=function(){switch(f(),r){case"{":return v();case"[":return b();case'"':return u();case"-":return l();default:return r>="0"&&r<="9"?l():p()}},function(w,_){var T;return i=w+"",n=0,r=" ",T=m(),f(),r&&s("Syntax error"),typeof _=="function"?function R(L,D){var x,P,V=L[D];return V&&typeof V=="object"&&Object.keys(V).forEach(function(J){P=R(V,J),P!==void 0?V[J]=P:delete V[J]}),_.call(L,D,V)}({"":T},""):T}};GS.exports=nV});var VS=te((f0e,xh)=>{var qS=BS().stringify,$S=HS();xh.exports=function(t){return{parse:$S(t),stringify:qS}};xh.exports.parse=$S();xh.exports.stringify=qS});var I0=te(br=>{"use strict";Object.defineProperty(br,"__esModule",{value:!0});br.GCE_LINUX_BIOS_PATHS=void 0;br.isGoogleCloudServerless=zS;br.isGoogleComputeEngineLinux=JS;br.isGoogleComputeEngineMACAddress=KS;br.isGoogleComputeEngine=YS;br.detectGCPResidency=oV;var jS=require("fs"),WS=require("os");br.GCE_LINUX_BIOS_PATHS={BIOS_DATE:"/sys/class/dmi/id/bios_date",BIOS_VENDOR:"/sys/class/dmi/id/bios_vendor"};var rV=/^42:01/;function zS(){return!!(process.env.CLOUD_RUN_JOB||process.env.FUNCTION_NAME||process.env.K_SERVICE)}function JS(){if((0,WS.platform)()!=="linux")return!1;try{(0,jS.statSync)(br.GCE_LINUX_BIOS_PATHS.BIOS_DATE);let t=(0,jS.readFileSync)(br.GCE_LINUX_BIOS_PATHS.BIOS_VENDOR,"utf8");return/Google/.test(t)}catch(t){return!1}}function KS(){let t=(0,WS.networkInterfaces)();for(let e of Object.values(t))if(e){for(let{mac:n}of e)if(rV.test(n))return!0}return!1}function YS(){return JS()||KS()}function oV(){return zS()||YS()}});var XS=te(kh=>{"use strict";Object.defineProperty(kh,"__esModule",{value:!0});kh.Colours=void 0;var Vt=class t{static isEnabled(e){return e&&e.isTTY&&(typeof e.getColorDepth=="function"?e.getColorDepth()>2:!0)}static refresh(){t.enabled=t.isEnabled(process==null?void 0:process.stderr),this.enabled?(t.reset="\x1B[0m",t.bright="\x1B[1m",t.dim="\x1B[2m",t.red="\x1B[31m",t.green="\x1B[32m",t.yellow="\x1B[33m",t.blue="\x1B[34m",t.magenta="\x1B[35m",t.cyan="\x1B[36m",t.white="\x1B[37m",t.grey="\x1B[90m"):(t.reset="",t.bright="",t.dim="",t.red="",t.green="",t.yellow="",t.blue="",t.magenta="",t.cyan="",t.white="",t.grey="")}};kh.Colours=Vt;Vt.enabled=!1;Vt.reset="";Vt.bright="";Vt.dim="";Vt.red="";Vt.green="";Vt.yellow="";Vt.blue="";Vt.magenta="";Vt.cyan="";Vt.white="";Vt.grey="";Vt.refresh()});var tP=te(Ke=>{"use strict";var iV=Ke&&Ke.__createBinding||(Object.create?function(t,e,n,r){r===void 0&&(r=n);var o=Object.getOwnPropertyDescriptor(e,n);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[n]}}),Object.defineProperty(t,r,o)}:function(t,e,n,r){r===void 0&&(r=n),t[r]=e[n]}),sV=Ke&&Ke.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),QS=Ke&&Ke.__importStar||function(){var t=function(e){return t=Object.getOwnPropertyNames||function(n){var r=[];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(r[r.length]=o);return r},t(e)};return function(e){if(e&&e.__esModule)return e;var n={};if(e!=null)for(var r=t(e),o=0;o<r.length;o++)r[o]!=="default"&&iV(n,e,r[o]);return sV(n,e),n}}();Object.defineProperty(Ke,"__esModule",{value:!0});Ke.env=Ke.DebugLogBackendBase=Ke.placeholder=Ke.AdhocDebugLogger=Ke.LogSeverity=void 0;Ke.getNodeBackend=k0;Ke.getDebugBackend=lV;Ke.getStructuredBackend=uV;Ke.setBackend=cV;Ke.log=eP;var aV=require("events"),Nc=QS(require("process")),ZS=QS(require("util")),Nn=XS(),vr;(function(t){t.DEFAULT="DEFAULT",t.DEBUG="DEBUG",t.INFO="INFO",t.WARNING="WARNING",t.ERROR="ERROR"})(vr||(Ke.LogSeverity=vr={}));var Oc=class extends aV.EventEmitter{constructor(e,n){super(),this.namespace=e,this.upstream=n,this.func=Object.assign(this.invoke.bind(this),{instance:this,on:(r,o)=>this.on(r,o)}),this.func.debug=(...r)=>this.invokeSeverity(vr.DEBUG,...r),this.func.info=(...r)=>this.invokeSeverity(vr.INFO,...r),this.func.warn=(...r)=>this.invokeSeverity(vr.WARNING,...r),this.func.error=(...r)=>this.invokeSeverity(vr.ERROR,...r),this.func.sublog=r=>eP(r,this.func)}invoke(e,...n){if(this.upstream)try{this.upstream(e,...n)}catch(r){}try{this.emit("log",e,n)}catch(r){}}invokeSeverity(e,...n){this.invoke({severity:e},...n)}};Ke.AdhocDebugLogger=Oc;Ke.placeholder=new Oc("",()=>{}).func;var Fl=class{constructor(){var e;this.cached=new Map,this.filters=[],this.filtersSet=!1;let n=(e=Nc.env[Ke.env.nodeEnables])!==null&&e!==void 0?e:"*";n==="all"&&(n="*"),this.filters=n.split(",")}log(e,n,...r){try{this.filtersSet||(this.setFilters(),this.filtersSet=!0);let o=this.cached.get(e);o||(o=this.makeLogger(e),this.cached.set(e,o)),o(n,...r)}catch(o){console.error(o)}}};Ke.DebugLogBackendBase=Fl;var x0=class extends Fl{constructor(){super(...arguments),this.enabledRegexp=/.*/g}isEnabled(e){return this.enabledRegexp.test(e)}makeLogger(e){return this.enabledRegexp.test(e)?(n,...r)=>{var o;let i=`${Nn.Colours.green}${e}${Nn.Colours.reset}`,s=`${Nn.Colours.yellow}${Nc.pid}${Nn.Colours.reset}`,a;switch(n.severity){case vr.ERROR:a=`${Nn.Colours.red}${n.severity}${Nn.Colours.reset}`;break;case vr.INFO:a=`${Nn.Colours.magenta}${n.severity}${Nn.Colours.reset}`;break;case vr.WARNING:a=`${Nn.Colours.yellow}${n.severity}${Nn.Colours.reset}`;break;default:a=(o=n.severity)!==null&&o!==void 0?o:vr.DEFAULT;break}let l=ZS.formatWithOptions({colors:Nn.Colours.enabled},...r),u=Object.assign({},n);delete u.severity;let f=Object.getOwnPropertyNames(u).length?JSON.stringify(u):"",p=f?`${Nn.Colours.grey}${f}${Nn.Colours.reset}`:"";console.error("%s [%s|%s] %s%s",s,i,a,l,f?` ${p}`:"")}:()=>{}}setFilters(){let n=this.filters.join(",").replace(/[|\\{}()[\]^$+?.]/g,"\\$&").replace(/\*/g,".*").replace(/,/g,"$|^");this.enabledRegexp=new RegExp(`^${n}$`,"i")}};function k0(){return new x0}var R0=class extends Fl{constructor(e){super(),this.debugPkg=e}makeLogger(e){let n=this.debugPkg(e);return(r,...o)=>{n(o[0],...o.slice(1))}}setFilters(){var e;let n=(e=Nc.env.NODE_DEBUG)!==null&&e!==void 0?e:"";Nc.env.NODE_DEBUG=`${n}${n?",":""}${this.filters.join(",")}`}};function lV(t){return new R0(t)}var N0=class extends Fl{constructor(e){var n;super(),this.upstream=(n=e)!==null&&n!==void 0?n:void 0}makeLogger(e){var n;let r=(n=this.upstream)===null||n===void 0?void 0:n.makeLogger(e);return(o,...i)=>{var s;let a=(s=o.severity)!==null&&s!==void 0?s:vr.INFO,l=Object.assign({severity:a,message:ZS.format(...i)},o),u=JSON.stringify(l);r?r(o,u):console.log("%s",u)}}setFilters(){var e;(e=this.upstream)===null||e===void 0||e.setFilters()}};function uV(t){return new N0(t)}Ke.env={nodeEnables:"GOOGLE_SDK_NODE_LOGGING"};var O0=new Map,On;function cV(t){On=t,O0.clear()}function eP(t,e){if(!On&&!Nc.env[Ke.env.nodeEnables]||!t)return Ke.placeholder;e&&(t=`${e.instance.namespace}:${t}`);let n=O0.get(t);if(n)return n.func;if(On===null)return Ke.placeholder;On===void 0&&(On=k0());let r=(()=>{let o;return new Oc(t,(s,...a)=>{if(o!==On){if(On===null)return;On===void 0&&(On=k0()),o=On}On==null||On.log(t,s,...a)})})();return O0.set(t,r),r.func}});var D0=te(Ws=>{"use strict";var fV=Ws&&Ws.__createBinding||(Object.create?function(t,e,n,r){r===void 0&&(r=n);var o=Object.getOwnPropertyDescriptor(e,n);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[n]}}),Object.defineProperty(t,r,o)}:function(t,e,n,r){r===void 0&&(r=n),t[r]=e[n]}),dV=Ws&&Ws.__exportStar||function(t,e){for(var n in t)n!=="default"&&!Object.prototype.hasOwnProperty.call(e,n)&&fV(e,t,n)};Object.defineProperty(Ws,"__esModule",{value:!0});dV(tP(),Ws)});var Mc=te(ve=>{"use strict";var rP=ve&&ve.__createBinding||(Object.create?function(t,e,n,r){r===void 0&&(r=n);var o=Object.getOwnPropertyDescriptor(e,n);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[n]}}),Object.defineProperty(t,r,o)}:function(t,e,n,r){r===void 0&&(r=n),t[r]=e[n]}),hV=ve&&ve.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),pV=ve&&ve.__importStar||function(){var t=function(e){return t=Object.getOwnPropertyNames||function(n){var r=[];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(r[r.length]=o);return r},t(e)};return function(e){if(e&&e.__esModule)return e;var n={};if(e!=null)for(var r=t(e),o=0;o<r.length;o++)r[o]!=="default"&&rP(n,e,r[o]);return hV(n,e),n}}(),mV=ve&&ve.__exportStar||function(t,e){for(var n in t)n!=="default"&&!Object.prototype.hasOwnProperty.call(e,n)&&rP(e,t,n)};Object.defineProperty(ve,"__esModule",{value:!0});ve.gcpResidencyCache=ve.METADATA_SERVER_DETECTION=ve.HEADERS=ve.HEADER_VALUE=ve.HEADER_NAME=ve.SECONDARY_HOST_ADDRESS=ve.HOST_ADDRESS=ve.BASE_PATH=void 0;ve.instance=_V;ve.project=EV;ve.universe=AV;ve.bulk=CV;ve.isAvailable=SV;ve.resetIsAvailableCache=PV;ve.getGCPResidency=L0;ve.setGCPResidency=oP;ve.requestTimeout=iP;var M0=Ut(),gV=VS(),yV=I0(),bV=pV(D0());ve.BASE_PATH="/computeMetadata/v1";ve.HOST_ADDRESS="http://169.254.169.254";ve.SECONDARY_HOST_ADDRESS="http://metadata.google.internal.";ve.HEADER_NAME="Metadata-Flavor";ve.HEADER_VALUE="Google";ve.HEADERS=Object.freeze({[ve.HEADER_NAME]:ve.HEADER_VALUE});var nP=bV.log("gcp-metadata");ve.METADATA_SERVER_DETECTION=Object.freeze({"assume-present":"don't try to ping the metadata server, but assume it's present",none:"don't try to ping the metadata server, but don't try to use it either","bios-only":"treat the result of a BIOS probe as canonical (don't fall back to pinging)","ping-only":"skip the BIOS probe, and go straight to pinging"});function F0(t){return t||(t=process.env.GCE_METADATA_IP||process.env.GCE_METADATA_HOST||ve.HOST_ADDRESS),/^https?:\/\//.test(t)||(t=`http://${t}`),new URL(ve.BASE_PATH,t).href}function vV(t){Object.keys(t).forEach(e=>{switch(e){case"params":case"property":case"headers":break;case"qs":throw new Error("'qs' is not a valid configuration option. Please use 'params' instead.");default:throw new Error(`'${e}' is not a valid configuration option.`)}})}async function Dc(t,e={},n=3,r=!1){let o=new Headers(ve.HEADERS),i="",s={};if(typeof t=="object"){let p=t;new Headers(p.headers).forEach((m,b)=>o.set(b,m)),i=p.metadataKey,s=p.params||s,n=p.noResponseRetries||n,r=p.fastFail||r}else i=t;typeof e=="string"?i+=`/${e}`:(vV(e),e.property&&(i+=`/${e.property}`),new Headers(e.headers).forEach((p,m)=>o.set(m,p)),s=e.params||s);let a=r?wV:M0.request,l={url:`${F0()}/${i}`,headers:o,retryConfig:{noResponseRetries:n},params:s,responseType:"text",timeout:iP()};nP.info("instance request %j",l);let u=await a(l);nP.info("instance metadata is %s",u.data);let f=u.headers.get(ve.HEADER_NAME);if(f!==ve.HEADER_VALUE)throw new RangeError(`Invalid response from metadata service: incorrect ${ve.HEADER_NAME} header. Expected '${ve.HEADER_VALUE}', got ${f?`'${f}'`:"no header"}`);if(typeof u.data=="string")try{return gV.parse(u.data)}catch(p){}return u.data}async function wV(t){var o;let e={...t,url:(o=t.url)==null?void 0:o.toString().replace(F0(),F0(ve.SECONDARY_HOST_ADDRESS))},n=(0,M0.request)(t),r=(0,M0.request)(e);return Promise.any([n,r])}function _V(t){return Dc("instance",t)}function EV(t){return Dc("project",t)}function AV(t){return Dc("universe",t)}async function CV(t){let e={};return await Promise.all(t.map(n=>(async()=>{let r=await Dc(n),o=n.metadataKey;e[o]=r})())),e}function TV(){return process.env.DETECT_GCP_RETRIES?Number(process.env.DETECT_GCP_RETRIES):0}var Rh;async function SV(){if(process.env.METADATA_SERVER_DETECTION){let t=process.env.METADATA_SERVER_DETECTION.trim().toLocaleLowerCase();if(!(t in ve.METADATA_SERVER_DETECTION))throw new RangeError(`Unknown \`METADATA_SERVER_DETECTION\` env variable. Got \`${t}\`, but it should be \`${Object.keys(ve.METADATA_SERVER_DETECTION).join("`, `")}\`, or unset`);switch(t){case"assume-present":return!0;case"none":return!1;case"bios-only":return L0();case"ping-only":}}try{return Rh===void 0&&(Rh=Dc("instance",void 0,TV(),!(process.env.GCE_METADATA_IP||process.env.GCE_METADATA_HOST))),await Rh,!0}catch(t){let e=t;if(process.env.DEBUG_AUTH&&console.info(e),e.type==="request-timeout"||e.response&&e.response.status===404)return!1;if(!(e.response&&e.response.status===404)&&(!e.code||!["EHOSTDOWN","EHOSTUNREACH","ENETUNREACH","ENOENT","ENOTFOUND","ECONNREFUSED"].includes(e.code.toString()))){let n="UNKNOWN";e.code&&(n=e.code.toString()),process.emitWarning(`received unexpected error = ${e.message} code = ${n}`,"MetadataLookupWarning")}return!1}}function PV(){Rh=void 0}ve.gcpResidencyCache=null;function L0(){return ve.gcpResidencyCache===null&&oP(),ve.gcpResidencyCache}function oP(t=null){ve.gcpResidencyCache=t!==null?t:(0,yV.detectGCPResidency)()}function iP(){return L0()?0:3e3}mV(I0(),ve)});var lP=te(Nh=>{"use strict";Nh.byteLength=xV;Nh.toByteArray=RV;Nh.fromByteArray=DV;var Xr=[],Xn=[],IV=typeof Uint8Array!="undefined"?Uint8Array:Array,U0="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(zs=0,sP=U0.length;zs<sP;++zs)Xr[zs]=U0[zs],Xn[U0.charCodeAt(zs)]=zs;var zs,sP;Xn[45]=62;Xn[95]=63;function aP(t){var e=t.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var n=t.indexOf("=");n===-1&&(n=e);var r=n===e?0:4-n%4;return[n,r]}function xV(t){var e=aP(t),n=e[0],r=e[1];return(n+r)*3/4-r}function kV(t,e,n){return(e+n)*3/4-n}function RV(t){var e,n=aP(t),r=n[0],o=n[1],i=new IV(kV(t,r,o)),s=0,a=o>0?r-4:r,l;for(l=0;l<a;l+=4)e=Xn[t.charCodeAt(l)]<<18|Xn[t.charCodeAt(l+1)]<<12|Xn[t.charCodeAt(l+2)]<<6|Xn[t.charCodeAt(l+3)],i[s++]=e>>16&255,i[s++]=e>>8&255,i[s++]=e&255;return o===2&&(e=Xn[t.charCodeAt(l)]<<2|Xn[t.charCodeAt(l+1)]>>4,i[s++]=e&255),o===1&&(e=Xn[t.charCodeAt(l)]<<10|Xn[t.charCodeAt(l+1)]<<4|Xn[t.charCodeAt(l+2)]>>2,i[s++]=e>>8&255,i[s++]=e&255),i}function NV(t){return Xr[t>>18&63]+Xr[t>>12&63]+Xr[t>>6&63]+Xr[t&63]}function OV(t,e,n){for(var r,o=[],i=e;i<n;i+=3)r=(t[i]<<16&16711680)+(t[i+1]<<8&65280)+(t[i+2]&255),o.push(NV(r));return o.join("")}function DV(t){for(var e,n=t.length,r=n%3,o=[],i=16383,s=0,a=n-r;s<a;s+=i)o.push(OV(t,s,s+i>a?a:s+i));return r===1?(e=t[n-1],o.push(Xr[e>>2]+Xr[e<<4&63]+"==")):r===2&&(e=(t[n-2]<<8)+t[n-1],o.push(Xr[e>>10]+Xr[e>>4&63]+Xr[e<<2&63]+"=")),o.join("")}});var G0=te(B0=>{"use strict";Object.defineProperty(B0,"__esModule",{value:!0});B0.fromArrayBufferToHex=MV;function MV(t){return Array.from(new Uint8Array(t)).map(n=>n.toString(16).padStart(2,"0")).join("")}});var uP=te(Oh=>{"use strict";Object.defineProperty(Oh,"__esModule",{value:!0});Oh.BrowserCrypto=void 0;var Ll=lP(),FV=G0(),H0=class t{constructor(){if(typeof window=="undefined"||window.crypto===void 0||window.crypto.subtle===void 0)throw new Error("SubtleCrypto not found. Make sure it's an https:// website.")}async sha256DigestBase64(e){let n=new TextEncoder().encode(e),r=await window.crypto.subtle.digest("SHA-256",n);return Ll.fromByteArray(new Uint8Array(r))}randomBytesBase64(e){let n=new Uint8Array(e);return window.crypto.getRandomValues(n),Ll.fromByteArray(n)}static padBase64(e){for(;e.length%4!==0;)e+="=";return e}async verify(e,n,r){let o={name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}},i=new TextEncoder().encode(n),s=Ll.toByteArray(t.padBase64(r)),a=await window.crypto.subtle.importKey("jwk",e,o,!0,["verify"]);return await window.crypto.subtle.verify(o,a,s,i)}async sign(e,n){let r={name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}},o=new TextEncoder().encode(n),i=await window.crypto.subtle.importKey("jwk",e,r,!0,["sign"]),s=await window.crypto.subtle.sign(r,i,o);return Ll.fromByteArray(new Uint8Array(s))}decodeBase64StringUtf8(e){let n=Ll.toByteArray(t.padBase64(e));return new TextDecoder().decode(n)}encodeBase64StringUtf8(e){let n=new TextEncoder().encode(e);return Ll.fromByteArray(n)}async sha256DigestHex(e){let n=new TextEncoder().encode(e),r=await window.crypto.subtle.digest("SHA-256",n);return(0,FV.fromArrayBufferToHex)(r)}async signWithHmacSha256(e,n){let r=typeof e=="string"?e:String.fromCharCode(...new Uint16Array(e)),o=new TextEncoder,i=await window.crypto.subtle.importKey("raw",o.encode(r),{name:"HMAC",hash:{name:"SHA-256"}},!1,["sign"]);return window.crypto.subtle.sign("HMAC",i,o.encode(n))}};Oh.BrowserCrypto=H0});var cP=te(Dh=>{"use strict";Object.defineProperty(Dh,"__esModule",{value:!0});Dh.NodeCrypto=void 0;var Ul=require("crypto"),q0=class{async sha256DigestBase64(e){return Ul.createHash("sha256").update(e).digest("base64")}randomBytesBase64(e){return Ul.randomBytes(e).toString("base64")}async verify(e,n,r){let o=Ul.createVerify("RSA-SHA256");return o.update(n),o.end(),o.verify(e,r,"base64")}async sign(e,n){let r=Ul.createSign("RSA-SHA256");return r.update(n),r.end(),r.sign(e,"base64")}decodeBase64StringUtf8(e){return Buffer.from(e,"base64").toString("utf-8")}encodeBase64StringUtf8(e){return Buffer.from(e,"utf-8").toString("base64")}async sha256DigestHex(e){return Ul.createHash("sha256").update(e).digest("hex")}async signWithHmacSha256(e,n){let r=typeof e=="string"?e:UV(e);return LV(Ul.createHmac("sha256",r).update(n).digest())}};Dh.NodeCrypto=q0;function LV(t){return t.buffer.slice(t.byteOffset,t.byteOffset+t.byteLength)}function UV(t){return Buffer.from(t)}});var Fc=te(Lo=>{"use strict";var BV=Lo&&Lo.__createBinding||(Object.create?function(t,e,n,r){r===void 0&&(r=n);var o=Object.getOwnPropertyDescriptor(e,n);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[n]}}),Object.defineProperty(t,r,o)}:function(t,e,n,r){r===void 0&&(r=n),t[r]=e[n]}),GV=Lo&&Lo.__exportStar||function(t,e){for(var n in t)n!=="default"&&!Object.prototype.hasOwnProperty.call(e,n)&&BV(e,t,n)};Object.defineProperty(Lo,"__esModule",{value:!0});Lo.createCrypto=$V;Lo.hasBrowserCrypto=fP;var HV=uP(),qV=cP();GV(G0(),Lo);function $V(){return fP()?new HV.BrowserCrypto:new qV.NodeCrypto}function fP(){return typeof window!="undefined"&&typeof window.crypto!="undefined"&&typeof window.crypto.subtle!="undefined"}});var Bl=te(($0,hP)=>{var Mh=require("buffer"),Qr=Mh.Buffer;function dP(t,e){for(var n in t)e[n]=t[n]}Qr.from&&Qr.alloc&&Qr.allocUnsafe&&Qr.allocUnsafeSlow?hP.exports=Mh:(dP(Mh,$0),$0.Buffer=Js);function Js(t,e,n){return Qr(t,e,n)}Js.prototype=Object.create(Qr.prototype);dP(Qr,Js);Js.from=function(t,e,n){if(typeof t=="number")throw new TypeError("Argument must not be a number");return Qr(t,e,n)};Js.alloc=function(t,e,n){if(typeof t!="number")throw new TypeError("Argument must be a number");var r=Qr(t);return e!==void 0?typeof n=="string"?r.fill(e,n):r.fill(e):r.fill(0),r};Js.allocUnsafe=function(t){if(typeof t!="number")throw new TypeError("Argument must be a number");return Qr(t)};Js.allocUnsafeSlow=function(t){if(typeof t!="number")throw new TypeError("Argument must be a number");return Mh.SlowBuffer(t)}});var mP=te((E0e,pP)=>{"use strict";function V0(t){var e=(t/8|0)+(t%8===0?0:1);return e}var VV={ES256:V0(256),ES384:V0(384),ES512:V0(521)};function jV(t){var e=VV[t];if(e)return e;throw new Error('Unknown algorithm "'+t+'"')}pP.exports=jV});var j0=te((A0e,_P)=>{"use strict";var Fh=Bl().Buffer,yP=mP(),Lh=128,bP=0,WV=32,zV=16,JV=2,vP=zV|WV|bP<<6,Uh=JV|bP<<6;function KV(t){return t.replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function wP(t){if(Fh.isBuffer(t))return t;if(typeof t=="string")return Fh.from(t,"base64");throw new TypeError("ECDSA signature must be a Base64 string or a Buffer")}function YV(t,e){t=wP(t);var n=yP(e),r=n+1,o=t.length,i=0;if(t[i++]!==vP)throw new Error('Could not find expected "seq"');var s=t[i++];if(s===(Lh|1)&&(s=t[i++]),o-i<s)throw new Error('"seq" specified length of "'+s+'", only "'+(o-i)+'" remaining');if(t[i++]!==Uh)throw new Error('Could not find expected "int" for "r"');var a=t[i++];if(o-i-2<a)throw new Error('"r" specified length of "'+a+'", only "'+(o-i-2)+'" available');if(r<a)throw new Error('"r" specified length of "'+a+'", max of "'+r+'" is acceptable');var l=i;if(i+=a,t[i++]!==Uh)throw new Error('Could not find expected "int" for "s"');var u=t[i++];if(o-i!==u)throw new Error('"s" specified length of "'+u+'", expected "'+(o-i)+'"');if(r<u)throw new Error('"s" specified length of "'+u+'", max of "'+r+'" is acceptable');var f=i;if(i+=u,i!==o)throw new Error('Expected to consume entire buffer, but "'+(o-i)+'" bytes remain');var p=n-a,m=n-u,b=Fh.allocUnsafe(p+a+m+u);for(i=0;i<p;++i)b[i]=0;t.copy(b,i,l+Math.max(-p,0),l+a),i=n;for(var v=i;i<v+m;++i)b[i]=0;return t.copy(b,i,f+Math.max(-m,0),f+u),b=b.toString("base64"),b=KV(b),b}function gP(t,e,n){for(var r=0;e+r<n&&t[e+r]===0;)++r;var o=t[e+r]>=Lh;return o&&--r,r}function XV(t,e){t=wP(t);var n=yP(e),r=t.length;if(r!==n*2)throw new TypeError('"'+e+'" signatures must be "'+n*2+'" bytes, saw "'+r+'"');var o=gP(t,0,n),i=gP(t,n,t.length),s=n-o,a=n-i,l=2+s+1+1+a,u=l<Lh,f=Fh.allocUnsafe((u?2:3)+l),p=0;return f[p++]=vP,u?f[p++]=l:(f[p++]=Lh|1,f[p++]=l&255),f[p++]=Uh,f[p++]=s,o<0?(f[p++]=0,p+=t.copy(f,p,0,n)):p+=t.copy(f,p,o,n),f[p++]=Uh,f[p++]=a,i<0?(f[p++]=0,t.copy(f,p,n)):t.copy(f,p,n+i),f}_P.exports={derToJose:YV,joseToDer:XV}});var wr=te(Uo=>{"use strict";Object.defineProperty(Uo,"__esModule",{value:!0});Uo.LRUCache=void 0;Uo.snakeToCamel=AP;Uo.originalOrCamelOptions=t4;Uo.removeUndefinedValuesInObject=n4;Uo.isValidFile=r4;Uo.getWellKnownCertificateConfigFileLocation=o4;var QV=require("fs"),ZV=require("os"),W0=require("path"),e4="certificate_config.json",EP="gcloud";function AP(t){return t.replace(/([_][^_])/g,e=>e.slice(1).toUpperCase())}function t4(t){function e(n){var o;let r=t||{};return(o=r[n])!=null?o:r[AP(n)]}return{get:e}}var Zr,Fi,J0,K0,z0=class{constructor(e){Re(this,Fi);F(this,"capacity");Re(this,Zr,new Map);F(this,"maxAge");this.capacity=e.capacity,this.maxAge=e.maxAge}set(e,n){Le(this,Fi,J0).call(this,e,n),Le(this,Fi,K0).call(this)}get(e){let n=fe(this,Zr).get(e);if(n)return Le(this,Fi,J0).call(this,e,n.value),Le(this,Fi,K0).call(this),n.value}};Zr=new WeakMap,Fi=new WeakSet,J0=function(e,n){fe(this,Zr).delete(e),fe(this,Zr).set(e,{value:n,lastAccessed:Date.now()})},K0=function(){let e=this.maxAge?Date.now()-this.maxAge:0,n=fe(this,Zr).entries().next();for(;!n.done&&(fe(this,Zr).size>this.capacity||n.value[1].lastAccessed<e);)fe(this,Zr).delete(n.value[0]),n=fe(this,Zr).entries().next()};Uo.LRUCache=z0;function n4(t){return Object.entries(t).forEach(([e,n])=>{(n===void 0||n==="undefined")&&delete t[e]}),t}async function r4(t){try{return(await QV.promises.lstat(t)).isFile()}catch(e){return!1}}function o4(){let t=process.env.CLOUDSDK_CONFIG||(i4()?W0.join(process.env.APPDATA||"",EP):W0.join(process.env.HOME||"",".config",EP));return W0.join(t,e4)}function i4(){return ZV.platform().startsWith("win")}});var CP=te((S0e,s4)=>{s4.exports={name:"google-auth-library",version:"10.5.0",author:"Google Inc.",description:"Google APIs Authentication Client Library for Node.js",engines:{node:">=18"},main:"./build/src/index.js",types:"./build/src/index.d.ts",repository:"googleapis/google-auth-library-nodejs.git",keywords:["google","api","google apis","client","client library"],dependencies:{"base64-js":"^1.3.0","ecdsa-sig-formatter":"^1.0.11",gaxios:"^7.0.0","gcp-metadata":"^8.0.0","google-logging-utils":"^1.0.0",gtoken:"^8.0.0",jws:"^4.0.0"},devDependencies:{"@types/base64-js":"^1.2.5","@types/jws":"^3.1.0","@types/mocha":"^10.0.10","@types/mv":"^2.1.0","@types/ncp":"^2.0.1","@types/node":"^22.0.0","@types/sinon":"^17.0.0","assert-rejects":"^1.0.0",c8:"^10.0.0",codecov:"^3.0.2",gts:"^6.0.0","is-docker":"^3.0.0",jsdoc:"^4.0.0","jsdoc-fresh":"^5.0.0","jsdoc-region-tag":"^4.0.0",karma:"^6.0.0","karma-chrome-launcher":"^3.0.0","karma-coverage":"^2.0.0","karma-firefox-launcher":"^2.0.0","karma-mocha":"^2.0.0","karma-sourcemap-loader":"^0.4.0","karma-webpack":"^5.0.1",keypair:"^1.0.4",mocha:"^11.1.0",mv:"^2.1.1",ncp:"^2.0.0",nock:"^14.0.5","null-loader":"^4.0.0",puppeteer:"^24.0.0",sinon:"^21.0.0","ts-loader":"^8.0.0",typescript:"5.8.2",webpack:"^5.21.2","webpack-cli":"^4.0.0"},files:["build/src","!build/src/**/*.map"],scripts:{test:"c8 mocha build/test",clean:"gts clean",prepare:"npm run compile",lint:"gts check --no-inline-config",compile:"tsc -p .",fix:"gts fix",pretest:"npm run compile -- --sourceMap",docs:"jsdoc -c .jsdoc.js","samples-setup":"cd samples/ && npm link ../ && npm run setup && cd ../","samples-test":"cd samples/ && npm link ../ && npm test && cd ../","system-test":"mocha build/system-test --timeout 60000","presystem-test":"npm run compile -- --sourceMap",webpack:"webpack","browser-test":"karma start","docs-test":"echo 'disabled until linkinator is fixed'","predocs-test":"npm run docs",prelint:"cd samples; npm link ../; npm install"},license:"Apache-2.0"}});var Y0=te(Li=>{"use strict";Object.defineProperty(Li,"__esModule",{value:!0});Li.USER_AGENT=Li.PRODUCT_NAME=Li.pkg=void 0;var TP=CP();Li.pkg=TP;var SP="google-api-nodejs-client";Li.PRODUCT_NAME=SP;var a4=`${SP}/${TP.version}`;Li.USER_AGENT=a4});var Dn=te(_r=>{"use strict";Object.defineProperty(_r,"__esModule",{value:!0});_r.AuthClient=_r.DEFAULT_EAGER_REFRESH_THRESHOLD_MILLIS=_r.DEFAULT_UNIVERSE=void 0;var l4=require("events"),X0=Ut(),u4=wr(),c4=D0(),Q0=Y0();_r.DEFAULT_UNIVERSE="googleapis.com";_r.DEFAULT_EAGER_REFRESH_THRESHOLD_MILLIS=5*60*1e3;var dt=class dt extends l4.EventEmitter{constructor(n={}){var o,i,s,a,l;super();F(this,"apiKey");F(this,"projectId");F(this,"quotaProjectId");F(this,"transporter");F(this,"credentials",{});F(this,"eagerRefreshThresholdMillis",_r.DEFAULT_EAGER_REFRESH_THRESHOLD_MILLIS);F(this,"forceRefreshOnFailure",!1);F(this,"universeDomain",_r.DEFAULT_UNIVERSE);let r=(0,u4.originalOrCamelOptions)(n);this.apiKey=n.apiKey,this.projectId=(o=r.get("project_id"))!=null?o:null,this.quotaProjectId=r.get("quota_project_id"),this.credentials=(i=r.get("credentials"))!=null?i:{},this.universeDomain=(s=r.get("universe_domain"))!=null?s:_r.DEFAULT_UNIVERSE,this.transporter=(a=n.transporter)!=null?a:new X0.Gaxios(n.transporterOptions),r.get("useAuthRequestParameters")!==!1&&(this.transporter.interceptors.request.add(dt.DEFAULT_REQUEST_INTERCEPTOR),this.transporter.interceptors.response.add(dt.DEFAULT_RESPONSE_INTERCEPTOR)),n.eagerRefreshThresholdMillis&&(this.eagerRefreshThresholdMillis=n.eagerRefreshThresholdMillis),this.forceRefreshOnFailure=(l=n.forceRefreshOnFailure)!=null?l:!1}fetch(...n){let r=n[0],o=n[1],i,s=new Headers;return typeof r=="string"?i=new URL(r):r instanceof URL?i=r:r&&r.url&&(i=new URL(r.url)),r&&typeof r=="object"&&"headers"in r&&X0.Gaxios.mergeHeaders(s,r.headers),o&&X0.Gaxios.mergeHeaders(s,new Headers(o.headers)),typeof r=="object"&&!(r instanceof URL)?this.request({...o,...r,headers:s,url:i}):this.request({...o,headers:s,url:i})}setCredentials(n){this.credentials=n}addSharedMetadataHeaders(n){return!n.has("x-goog-user-project")&&this.quotaProjectId&&n.set("x-goog-user-project",this.quotaProjectId),n}addUserProjectAndAuthHeaders(n,r){let o=r.get("x-goog-user-project"),i=r.get("authorization");return o&&n.set("x-goog-user-project",o),i&&n.set("authorization",i),n}static setMethodName(n,r){try{let o=n;o[dt.RequestMethodNameSymbol]=r}catch(o){}}static get RETRY_CONFIG(){return{retry:!0,retryConfig:{httpMethodsToRetry:["GET","PUT","POST","HEAD","OPTIONS","DELETE"]}}}};F(dt,"RequestMethodNameSymbol",Symbol("request method name")),F(dt,"RequestLogIdSymbol",Symbol("request log id")),F(dt,"log",(0,c4.log)("auth")),F(dt,"DEFAULT_REQUEST_INTERCEPTOR",{resolved:async n=>{if(!n.headers.has("x-goog-api-client")){let o=process.version.replace(/^v/,"");n.headers.set("x-goog-api-client",`gl-node/${o}`)}let r=n.headers.get("User-Agent");r?r.includes(`${Q0.PRODUCT_NAME}/`)||n.headers.set("User-Agent",`${r} ${Q0.USER_AGENT}`):n.headers.set("User-Agent",Q0.USER_AGENT);try{let o=n,i=o[dt.RequestMethodNameSymbol],s=`${Math.floor(Math.random()*1e3)}`;o[dt.RequestLogIdSymbol]=s;let a={url:n.url,headers:n.headers};i?dt.log.info("%s [%s] request %j",i,s,a):dt.log.info("[%s] request %j",s,a)}catch(o){}return n}}),F(dt,"DEFAULT_RESPONSE_INTERCEPTOR",{resolved:async n=>{try{let r=n.config,o=r[dt.RequestMethodNameSymbol],i=r[dt.RequestLogIdSymbol];o?dt.log.info("%s [%s] response %j",o,i,n.data):dt.log.info("[%s] response %j",i,n.data)}catch(r){}return n},rejected:async n=>{var r,o;try{let i=n.config,s=i[dt.RequestMethodNameSymbol],a=i[dt.RequestLogIdSymbol];s?dt.log.info("%s [%s] error %j",s,a,(r=n.response)==null?void 0:r.data):dt.log.error("[%s] error %j",a,(o=n.response)==null?void 0:o.data)}catch(i){}throw n}});var Z0=dt;_r.AuthClient=Z0});var tb=te(Bh=>{"use strict";Object.defineProperty(Bh,"__esModule",{value:!0});Bh.LoginTicket=void 0;var eb=class{constructor(e,n){F(this,"envelope");F(this,"payload");this.envelope=e,this.payload=n}getEnvelope(){return this.envelope}getPayload(){return this.payload}getUserId(){let e=this.getPayload();return e&&e.sub?e.sub:null}getAttributes(){return{envelope:this.getEnvelope(),payload:this.getPayload()}}};Bh.LoginTicket=eb});var Ks=te(eo=>{"use strict";Object.defineProperty(eo,"__esModule",{value:!0});eo.OAuth2Client=eo.ClientAuthentication=eo.CertificateFormat=eo.CodeChallengeMethod=void 0;var PP=Ut(),f4=require("querystring"),d4=require("stream"),h4=j0(),IP=wr(),nb=Fc(),Gl=Dn(),p4=tb(),xP;(function(t){t.Plain="plain",t.S256="S256"})(xP||(eo.CodeChallengeMethod=xP={}));var Bo;(function(t){t.PEM="PEM",t.JWK="JWK"})(Bo||(eo.CertificateFormat=Bo={}));var Lc;(function(t){t.ClientSecretPost="ClientSecretPost",t.ClientSecretBasic="ClientSecretBasic",t.None="None"})(Lc||(eo.ClientAuthentication=Lc={}));var nn=class nn extends Gl.AuthClient{constructor(n={},r,o){var i;super(typeof n=="object"?n:{});F(this,"redirectUri");F(this,"certificateCache",{});F(this,"certificateExpiry",null);F(this,"certificateCacheFormat",Bo.PEM);F(this,"refreshTokenPromises",new Map);F(this,"endpoints");F(this,"issuers");F(this,"clientAuthentication");F(this,"_clientId");F(this,"_clientSecret");F(this,"refreshHandler");typeof n!="object"&&(n={clientId:n,clientSecret:r,redirectUri:o}),this._clientId=n.clientId||n.client_id,this._clientSecret=n.clientSecret||n.client_secret,this.redirectUri=n.redirectUri||((i=n.redirect_uris)==null?void 0:i[0]),this.endpoints={tokenInfoUrl:"https://oauth2.googleapis.com/tokeninfo",oauth2AuthBaseUrl:"https://accounts.google.com/o/oauth2/v2/auth",oauth2TokenUrl:"https://oauth2.googleapis.com/token",oauth2RevokeUrl:"https://oauth2.googleapis.com/revoke",oauth2FederatedSignonPemCertsUrl:"https://www.googleapis.com/oauth2/v1/certs",oauth2FederatedSignonJwkCertsUrl:"https://www.googleapis.com/oauth2/v3/certs",oauth2IapPublicKeyUrl:"https://www.gstatic.com/iap/verify/public_key",...n.endpoints},this.clientAuthentication=n.clientAuthentication||Lc.ClientSecretPost,this.issuers=n.issuers||["accounts.google.com","https://accounts.google.com",this.universeDomain]}generateAuthUrl(n={}){if(n.code_challenge_method&&!n.code_challenge)throw new Error("If a code_challenge_method is provided, code_challenge must be included.");return n.response_type=n.response_type||"code",n.client_id=n.client_id||this._clientId,n.redirect_uri=n.redirect_uri||this.redirectUri,Array.isArray(n.scope)&&(n.scope=n.scope.join(" ")),this.endpoints.oauth2AuthBaseUrl.toString()+"?"+f4.stringify(n)}generateCodeVerifier(){throw new Error("generateCodeVerifier is removed, please use generateCodeVerifierAsync instead.")}async generateCodeVerifierAsync(){let n=(0,nb.createCrypto)(),o=n.randomBytesBase64(96).replace(/\+/g,"~").replace(/=/g,"_").replace(/\//g,"-"),s=(await n.sha256DigestBase64(o)).split("=")[0].replace(/\+/g,"-").replace(/\//g,"_");return{codeVerifier:o,codeChallenge:s}}getToken(n,r){let o=typeof n=="string"?{code:n}:n;if(r)this.getTokenAsync(o).then(i=>r(null,i.tokens,i.res),i=>r(i,null,i.response));else return this.getTokenAsync(o)}async getTokenAsync(n){let r=this.endpoints.oauth2TokenUrl.toString(),o=new Headers,i={client_id:n.client_id||this._clientId,code_verifier:n.codeVerifier,code:n.code,grant_type:"authorization_code",redirect_uri:n.redirect_uri||this.redirectUri};if(this.clientAuthentication===Lc.ClientSecretBasic){let u=Buffer.from(`${this._clientId}:${this._clientSecret}`);o.set("authorization",`Basic ${u.toString("base64")}`)}this.clientAuthentication===Lc.ClientSecretPost&&(i.client_secret=this._clientSecret);let s={...nn.RETRY_CONFIG,method:"POST",url:r,data:new URLSearchParams((0,IP.removeUndefinedValuesInObject)(i)),headers:o};Gl.AuthClient.setMethodName(s,"getTokenAsync");let a=await this.transporter.request(s),l=a.data;return a.data&&a.data.expires_in&&(l.expiry_date=new Date().getTime()+a.data.expires_in*1e3,delete l.expires_in),this.emit("tokens",l),{tokens:l,res:a}}async refreshToken(n){if(!n)return this.refreshTokenNoCache(n);if(this.refreshTokenPromises.has(n))return this.refreshTokenPromises.get(n);let r=this.refreshTokenNoCache(n).then(o=>(this.refreshTokenPromises.delete(n),o),o=>{throw this.refreshTokenPromises.delete(n),o});return this.refreshTokenPromises.set(n,r),r}async refreshTokenNoCache(n){var a;if(!n)throw new Error("No refresh token is set.");let r=this.endpoints.oauth2TokenUrl.toString(),o={refresh_token:n,client_id:this._clientId,client_secret:this._clientSecret,grant_type:"refresh_token"},i;try{let l={...nn.RETRY_CONFIG,method:"POST",url:r,data:new URLSearchParams((0,IP.removeUndefinedValuesInObject)(o))};Gl.AuthClient.setMethodName(l,"refreshTokenNoCache"),i=await this.transporter.request(l)}catch(l){throw l instanceof PP.GaxiosError&&l.message==="invalid_grant"&&((a=l.response)!=null&&a.data)&&/ReAuth/i.test(l.response.data.error_description)&&(l.message=JSON.stringify(l.response.data)),l}let s=i.data;return i.data&&i.data.expires_in&&(s.expiry_date=new Date().getTime()+i.data.expires_in*1e3,delete s.expires_in),this.emit("tokens",s),{tokens:s,res:i}}refreshAccessToken(n){if(n)this.refreshAccessTokenAsync().then(r=>n(null,r.credentials,r.res),n);else return this.refreshAccessTokenAsync()}async refreshAccessTokenAsync(){let n=await this.refreshToken(this.credentials.refresh_token),r=n.tokens;return r.refresh_token=this.credentials.refresh_token,this.credentials=r,{credentials:this.credentials,res:n.res}}getAccessToken(n){if(n)this.getAccessTokenAsync().then(r=>n(null,r.token,r.res),n);else return this.getAccessTokenAsync()}async getAccessTokenAsync(){if(!this.credentials.access_token||this.isTokenExpiring()){if(!this.credentials.refresh_token)if(this.refreshHandler){let o=await this.processAndValidateRefreshHandler();if(o!=null&&o.access_token)return this.setCredentials(o),{token:this.credentials.access_token}}else throw new Error("No refresh token or refresh handler callback is set.");let r=await this.refreshAccessTokenAsync();if(!r.credentials||r.credentials&&!r.credentials.access_token)throw new Error("Could not refresh access token.");return{token:r.credentials.access_token,res:r.res}}else return{token:this.credentials.access_token}}async getRequestHeaders(n){return(await this.getRequestMetadataAsync(n)).headers}async getRequestMetadataAsync(n){let r=this.credentials;if(!r.access_token&&!r.refresh_token&&!this.apiKey&&!this.refreshHandler)throw new Error("No access, refresh token, API key or refresh handler callback is set.");if(r.access_token&&!this.isTokenExpiring()){r.token_type=r.token_type||"Bearer";let l=new Headers({authorization:r.token_type+" "+r.access_token});return{headers:this.addSharedMetadataHeaders(l)}}if(this.refreshHandler){let l=await this.processAndValidateRefreshHandler();if(l!=null&&l.access_token){this.setCredentials(l);let u=new Headers({authorization:"Bearer "+this.credentials.access_token});return{headers:this.addSharedMetadataHeaders(u)}}}if(this.apiKey)return{headers:new Headers({"X-Goog-Api-Key":this.apiKey})};let o=null,i=null;try{o=await this.refreshToken(r.refresh_token),i=o.tokens}catch(l){let u=l;throw u.response&&(u.response.status===403||u.response.status===404)&&(u.message=`Could not refresh access token: ${u.message}`),u}let s=this.credentials;s.token_type=s.token_type||"Bearer",i.refresh_token=s.refresh_token,this.credentials=i;let a=new Headers({authorization:s.token_type+" "+i.access_token});return{headers:this.addSharedMetadataHeaders(a),res:o.res}}static getRevokeTokenUrl(n){return new nn().getRevokeTokenURL(n).toString()}getRevokeTokenURL(n){let r=new URL(this.endpoints.oauth2RevokeUrl);return r.searchParams.append("token",n),r}revokeToken(n,r){let o={...nn.RETRY_CONFIG,url:this.getRevokeTokenURL(n).toString(),method:"POST"};if(Gl.AuthClient.setMethodName(o,"revokeToken"),r)this.transporter.request(o).then(i=>r(null,i),r);else return this.transporter.request(o)}revokeCredentials(n){if(n)this.revokeCredentialsAsync().then(r=>n(null,r),n);else return this.revokeCredentialsAsync()}async revokeCredentialsAsync(){let n=this.credentials.access_token;if(this.credentials={},n)return this.revokeToken(n);throw new Error("No access token to revoke.")}request(n,r){if(r)this.requestAsync(n).then(o=>r(null,o),o=>r(o,o.response));else return this.requestAsync(n)}async requestAsync(n,r=!1){try{let o=await this.getRequestMetadataAsync();return n.headers=PP.Gaxios.mergeHeaders(n.headers),this.addUserProjectAndAuthHeaders(n.headers,o.headers),this.apiKey&&n.headers.set("X-Goog-Api-Key",this.apiKey),await this.transporter.request(n)}catch(o){let i=o.response;if(i){let s=i.status,a=this.credentials&&this.credentials.access_token&&this.credentials.refresh_token&&(!this.credentials.expiry_date||this.forceRefreshOnFailure),l=this.credentials&&this.credentials.access_token&&!this.credentials.refresh_token&&(!this.credentials.expiry_date||this.forceRefreshOnFailure)&&this.refreshHandler,u=i.config.data instanceof d4.Readable,f=s===401||s===403;if(!r&&f&&!u&&a)return await this.refreshAccessTokenAsync(),this.requestAsync(n,!0);if(!r&&f&&!u&&l){let p=await this.processAndValidateRefreshHandler();return p!=null&&p.access_token&&this.setCredentials(p),this.requestAsync(n,!0)}}throw o}}verifyIdToken(n,r){if(r&&typeof r!="function")throw new Error("This method accepts an options object as the first parameter, which includes the idToken, audience, and maxExpiry.");if(r)this.verifyIdTokenAsync(n).then(o=>r(null,o),r);else return this.verifyIdTokenAsync(n)}async verifyIdTokenAsync(n){if(!n.idToken)throw new Error("The verifyIdToken method requires an ID Token");let r=await this.getFederatedSignonCertsAsync();return await this.verifySignedJwtWithCertsAsync(n.idToken,r.certs,n.audience,this.issuers,n.maxExpiry)}async getTokenInfo(n){let{data:r}=await this.transporter.request({...nn.RETRY_CONFIG,method:"POST",headers:{"content-type":"application/x-www-form-urlencoded;charset=UTF-8",authorization:`Bearer ${n}`},url:this.endpoints.tokenInfoUrl.toString()}),o=Object.assign({expiry_date:new Date().getTime()+r.expires_in*1e3,scopes:r.scope.split(" ")},r);return delete o.expires_in,delete o.scope,o}getFederatedSignonCerts(n){if(n)this.getFederatedSignonCertsAsync().then(r=>n(null,r.certs,r.res),n);else return this.getFederatedSignonCertsAsync()}async getFederatedSignonCertsAsync(){var f,p;let n=new Date().getTime(),r=(0,nb.hasBrowserCrypto)()?Bo.JWK:Bo.PEM;if(this.certificateExpiry&&n<this.certificateExpiry.getTime()&&this.certificateCacheFormat===r)return{certs:this.certificateCache,format:r};let o,i;switch(r){case Bo.PEM:i=this.endpoints.oauth2FederatedSignonPemCertsUrl.toString();break;case Bo.JWK:i=this.endpoints.oauth2FederatedSignonJwkCertsUrl.toString();break;default:throw new Error(`Unsupported certificate format ${r}`)}try{let m={...nn.RETRY_CONFIG,url:i};Gl.AuthClient.setMethodName(m,"getFederatedSignonCertsAsync"),o=await this.transporter.request(m)}catch(m){throw m instanceof Error&&(m.message=`Failed to retrieve verification certificates: ${m.message}`),m}let s=o==null?void 0:o.headers.get("cache-control"),a=-1;if(s){let m=(p=(f=/max-age=(?<maxAge>[0-9]+)/.exec(s))==null?void 0:f.groups)==null?void 0:p.maxAge;m&&(a=Number(m)*1e3)}let l={};switch(r){case Bo.PEM:l=o.data;break;case Bo.JWK:for(let m of o.data.keys)l[m.kid]=m;break;default:throw new Error(`Unsupported certificate format ${r}`)}let u=new Date;return this.certificateExpiry=a===-1?null:new Date(u.getTime()+a),this.certificateCache=l,this.certificateCacheFormat=r,{certs:l,format:r,res:o}}getIapPublicKeys(n){if(n)this.getIapPublicKeysAsync().then(r=>n(null,r.pubkeys,r.res),n);else return this.getIapPublicKeysAsync()}async getIapPublicKeysAsync(){let n,r=this.endpoints.oauth2IapPublicKeyUrl.toString();try{let o={...nn.RETRY_CONFIG,url:r};Gl.AuthClient.setMethodName(o,"getIapPublicKeysAsync"),n=await this.transporter.request(o)}catch(o){throw o instanceof Error&&(o.message=`Failed to retrieve verification certificates: ${o.message}`),o}return{pubkeys:n.data,res:n}}verifySignedJwtWithCerts(){throw new Error("verifySignedJwtWithCerts is removed, please use verifySignedJwtWithCertsAsync instead.")}async verifySignedJwtWithCertsAsync(n,r,o,i,s){let a=(0,nb.createCrypto)();s||(s=nn.DEFAULT_MAX_TOKEN_LIFETIME_SECS_);let l=n.split(".");if(l.length!==3)throw new Error("Wrong number of segments in token: "+n);let u=l[0]+"."+l[1],f=l[2],p,m;try{p=JSON.parse(a.decodeBase64StringUtf8(l[0]))}catch(D){throw D instanceof Error&&(D.message=`Can't parse token envelope: ${l[0]}': ${D.message}`),D}if(!p)throw new Error("Can't parse token envelope: "+l[0]);try{m=JSON.parse(a.decodeBase64StringUtf8(l[1]))}catch(D){throw D instanceof Error&&(D.message=`Can't parse token payload '${l[0]}`),D}if(!m)throw new Error("Can't parse token payload: "+l[1]);if(!Object.prototype.hasOwnProperty.call(r,p.kid))throw new Error("No pem found for envelope: "+JSON.stringify(p));let b=r[p.kid];if(p.alg==="ES256"&&(f=h4.joseToDer(f,"ES256").toString("base64")),!await a.verify(b,u,f))throw new Error("Invalid token signature: "+n);if(!m.iat)throw new Error("No issue time in token: "+JSON.stringify(m));if(!m.exp)throw new Error("No expiration time in token: "+JSON.stringify(m));let w=Number(m.iat);if(isNaN(w))throw new Error("iat field using invalid format");let _=Number(m.exp);if(isNaN(_))throw new Error("exp field using invalid format");let T=new Date().getTime()/1e3;if(_>=T+s)throw new Error("Expiration time too far in future: "+JSON.stringify(m));let R=w-nn.CLOCK_SKEW_SECS_,L=_+nn.CLOCK_SKEW_SECS_;if(T<R)throw new Error("Token used too early, "+T+" < "+R+": "+JSON.stringify(m));if(T>L)throw new Error("Token used too late, "+T+" > "+L+": "+JSON.stringify(m));if(i&&i.indexOf(m.iss)<0)throw new Error("Invalid issuer, expected one of ["+i+"], but got "+m.iss);if(typeof o!="undefined"&&o!==null){let D=m.aud,x=!1;if(o.constructor===Array?x=o.indexOf(D)>-1:x=D===o,!x)throw new Error("Wrong recipient, payload audience != requiredAudience")}return new p4.LoginTicket(p,m)}async processAndValidateRefreshHandler(){if(this.refreshHandler){let n=await this.refreshHandler();if(!n.access_token)throw new Error("No access token is returned by the refreshHandler callback.");return n}}isTokenExpiring(){let n=this.credentials.expiry_date;return n?n<=new Date().getTime()+this.eagerRefreshThresholdMillis:!1}};F(nn,"GOOGLE_TOKEN_INFO_URL","https://oauth2.googleapis.com/tokeninfo"),F(nn,"CLOCK_SKEW_SECS_",300),F(nn,"DEFAULT_MAX_TOKEN_LIFETIME_SECS_",86400);var rb=nn;eo.OAuth2Client=rb});var ib=te(Gh=>{"use strict";Object.defineProperty(Gh,"__esModule",{value:!0});Gh.Compute=void 0;var m4=Ut(),kP=Mc(),g4=Ks(),ob=class extends g4.OAuth2Client{constructor(n={}){super(n);F(this,"serviceAccountEmail");F(this,"scopes");this.credentials={expiry_date:1,refresh_token:"compute-placeholder"},this.serviceAccountEmail=n.serviceAccountEmail||"default",this.scopes=Array.isArray(n.scopes)?n.scopes:n.scopes?[n.scopes]:[]}async refreshTokenNoCache(){let n=`service-accounts/${this.serviceAccountEmail}/token`,r;try{let i={property:n};this.scopes.length>0&&(i.params={scopes:this.scopes.join(",")}),r=await kP.instance(i)}catch(i){throw i instanceof m4.GaxiosError&&(i.message=`Could not refresh access token: ${i.message}`,this.wrapError(i)),i}let o=r;return r&&r.expires_in&&(o.expiry_date=new Date().getTime()+r.expires_in*1e3,delete o.expires_in),this.emit("tokens",o),{tokens:o,res:null}}async fetchIdToken(n){let r=`service-accounts/${this.serviceAccountEmail}/identity?format=full&audience=${n}`,o;try{let i={property:r};o=await kP.instance(i)}catch(i){throw i instanceof Error&&(i.message=`Could not fetch ID token: ${i.message}`),i}return o}wrapError(n){let r=n.response;r&&r.status&&(n.status=r.status,r.status===403?n.message="A Forbidden error was returned while attempting to retrieve an access token for the Compute Engine built-in service account. This may be because the Compute Engine instance does not have the correct permission scopes specified: "+n.message:r.status===404&&(n.message="A Not Found error was returned while attempting to retrieve an accesstoken for the Compute Engine built-in service account. This may be because the Compute Engine instance does not have any permission scopes specified: "+n.message))}};Gh.Compute=ob});var ab=te(Hh=>{"use strict";Object.defineProperty(Hh,"__esModule",{value:!0});Hh.IdTokenClient=void 0;var y4=Ks(),sb=class extends y4.OAuth2Client{constructor(n){super(n);F(this,"targetAudience");F(this,"idTokenProvider");this.targetAudience=n.targetAudience,this.idTokenProvider=n.idTokenProvider}async getRequestMetadataAsync(){if(!this.credentials.id_token||!this.credentials.expiry_date||this.isTokenExpiring()){let r=await this.idTokenProvider.fetchIdToken(this.targetAudience);this.credentials={id_token:r,expiry_date:this.getIdTokenExpiryDate(r)}}return{headers:new Headers({authorization:"Bearer "+this.credentials.id_token})}}getIdTokenExpiryDate(n){let r=n.split(".")[1];if(r)return JSON.parse(Buffer.from(r,"base64").toString("ascii")).exp*1e3}};Hh.IdTokenClient=sb});var lb=te(Hl=>{"use strict";Object.defineProperty(Hl,"__esModule",{value:!0});Hl.GCPEnv=void 0;Hl.clear=b4;Hl.getEnv=v4;var RP=Mc(),to;(function(t){t.APP_ENGINE="APP_ENGINE",t.KUBERNETES_ENGINE="KUBERNETES_ENGINE",t.CLOUD_FUNCTIONS="CLOUD_FUNCTIONS",t.COMPUTE_ENGINE="COMPUTE_ENGINE",t.CLOUD_RUN="CLOUD_RUN",t.CLOUD_RUN_JOBS="CLOUD_RUN_JOBS",t.NONE="NONE"})(to||(Hl.GCPEnv=to={}));var Uc;function b4(){Uc=void 0}async function v4(){return Uc||(Uc=w4(),Uc)}async function w4(){let t=to.NONE;return _4()?t=to.APP_ENGINE:E4()?t=to.CLOUD_FUNCTIONS:await S4()?await T4()?t=to.KUBERNETES_ENGINE:A4()?t=to.CLOUD_RUN:C4()?t=to.CLOUD_RUN_JOBS:t=to.COMPUTE_ENGINE:t=to.NONE,t}function _4(){return!!(process.env.GAE_SERVICE||process.env.GAE_MODULE_NAME)}function E4(){return!!(process.env.FUNCTION_NAME||process.env.FUNCTION_TARGET)}function A4(){return!!process.env.K_CONFIGURATION}function C4(){return!!process.env.CLOUD_RUN_JOB}async function T4(){try{return await RP.instance("attributes/cluster-name"),!0}catch(t){return!1}}async function S4(){return RP.isAvailable()}});var ub=te((B0e,NP)=>{var qh=Bl().Buffer,P4=require("stream"),I4=require("util");function $h(t){if(this.buffer=null,this.writable=!0,this.readable=!0,!t)return this.buffer=qh.alloc(0),this;if(typeof t.pipe=="function")return this.buffer=qh.alloc(0),t.pipe(this),this;if(t.length||typeof t=="object")return this.buffer=t,this.writable=!1,process.nextTick(function(){this.emit("end",t),this.readable=!1,this.emit("close")}.bind(this)),this;throw new TypeError("Unexpected data type ("+typeof t+")")}I4.inherits($h,P4);$h.prototype.write=function(e){this.buffer=qh.concat([this.buffer,qh.from(e)]),this.emit("data",e)};$h.prototype.end=function(e){e&&this.write(e),this.emit("end",e),this.emit("close"),this.writable=!1,this.readable=!1};NP.exports=$h});var DP=te((G0e,OP)=>{"use strict";var Bc=require("buffer").Buffer,cb=require("buffer").SlowBuffer;OP.exports=Vh;function Vh(t,e){if(!Bc.isBuffer(t)||!Bc.isBuffer(e)||t.length!==e.length)return!1;for(var n=0,r=0;r<t.length;r++)n|=t[r]^e[r];return n===0}Vh.install=function(){Bc.prototype.equal=cb.prototype.equal=function(e){return Vh(this,e)}};var x4=Bc.prototype.equal,k4=cb.prototype.equal;Vh.restore=function(){Bc.prototype.equal=x4,cb.prototype.equal=k4}});var pb=te((H0e,$P)=>{var $l=Bl().Buffer,Qn=require("crypto"),FP=j0(),MP=require("util"),R4=`"%s" is not a valid algorithm.
  Supported algorithms are:
  "HS256", "HS384", "HS512", "RS256", "RS384", "RS512", "PS256", "PS384", "PS512", "ES256", "ES384", "ES512" and "none".`,Gc="secret must be a string or buffer",ql="key must be a string or a buffer",N4="key must be a string, a buffer or an object",db=typeof Qn.createPublicKey=="function";db&&(ql+=" or a KeyObject",Gc+="or a KeyObject");function LP(t){if(!$l.isBuffer(t)&&typeof t!="string"&&(!db||typeof t!="object"||typeof t.type!="string"||typeof t.asymmetricKeyType!="string"||typeof t.export!="function"))throw Er(ql)}function UP(t){if(!$l.isBuffer(t)&&typeof t!="string"&&typeof t!="object")throw Er(N4)}function O4(t){if(!$l.isBuffer(t)){if(typeof t=="string")return t;if(!db||typeof t!="object"||t.type!=="secret"||typeof t.export!="function")throw Er(Gc)}}function hb(t){return t.replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function BP(t){t=t.toString();var e=4-t.length%4;if(e!==4)for(var n=0;n<e;++n)t+="=";return t.replace(/\-/g,"+").replace(/_/g,"/")}function Er(t){var e=[].slice.call(arguments,1),n=MP.format.bind(MP,t).apply(null,e);return new TypeError(n)}function D4(t){return $l.isBuffer(t)||typeof t=="string"}function Hc(t){return D4(t)||(t=JSON.stringify(t)),t}function GP(t){return function(n,r){O4(r),n=Hc(n);var o=Qn.createHmac("sha"+t,r),i=(o.update(n),o.digest("base64"));return hb(i)}}var fb,M4="timingSafeEqual"in Qn?function(e,n){return e.byteLength!==n.byteLength?!1:Qn.timingSafeEqual(e,n)}:function(e,n){return fb||(fb=DP()),fb(e,n)};function F4(t){return function(n,r,o){var i=GP(t)(n,o);return M4($l.from(r),$l.from(i))}}function HP(t){return function(n,r){UP(r),n=Hc(n);var o=Qn.createSign("RSA-SHA"+t),i=(o.update(n),o.sign(r,"base64"));return hb(i)}}function qP(t){return function(n,r,o){LP(o),n=Hc(n),r=BP(r);var i=Qn.createVerify("RSA-SHA"+t);return i.update(n),i.verify(o,r,"base64")}}function L4(t){return function(n,r){UP(r),n=Hc(n);var o=Qn.createSign("RSA-SHA"+t),i=(o.update(n),o.sign({key:r,padding:Qn.constants.RSA_PKCS1_PSS_PADDING,saltLength:Qn.constants.RSA_PSS_SALTLEN_DIGEST},"base64"));return hb(i)}}function U4(t){return function(n,r,o){LP(o),n=Hc(n),r=BP(r);var i=Qn.createVerify("RSA-SHA"+t);return i.update(n),i.verify({key:o,padding:Qn.constants.RSA_PKCS1_PSS_PADDING,saltLength:Qn.constants.RSA_PSS_SALTLEN_DIGEST},r,"base64")}}function B4(t){var e=HP(t);return function(){var r=e.apply(null,arguments);return r=FP.derToJose(r,"ES"+t),r}}function G4(t){var e=qP(t);return function(r,o,i){o=FP.joseToDer(o,"ES"+t).toString("base64");var s=e(r,o,i);return s}}function H4(){return function(){return""}}function q4(){return function(e,n){return n===""}}$P.exports=function(e){var n={hs:GP,rs:HP,ps:L4,es:B4,none:H4},r={hs:F4,rs:qP,ps:U4,es:G4,none:q4},o=e.match(/^(RS|PS|ES|HS)(256|384|512)$|^(none)$/);if(!o)throw Er(R4,e);var i=(o[1]||o[3]).toLowerCase(),s=o[2];return{sign:n[i](s),verify:r[i](s)}}});var mb=te((q0e,VP)=>{var $4=require("buffer").Buffer;VP.exports=function(e){return typeof e=="string"?e:typeof e=="number"||$4.isBuffer(e)?e.toString():JSON.stringify(e)}});var YP=te(($0e,KP)=>{var V4=Bl().Buffer,jP=ub(),j4=pb(),W4=require("stream"),WP=mb(),gb=require("util");function zP(t,e){return V4.from(t,e).toString("base64").replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function z4(t,e,n){n=n||"utf8";var r=zP(WP(t),"binary"),o=zP(WP(e),n);return gb.format("%s.%s",r,o)}function JP(t){var e=t.header,n=t.payload,r=t.secret||t.privateKey,o=t.encoding,i=j4(e.alg),s=z4(e,n,o),a=i.sign(s,r);return gb.format("%s.%s",s,a)}function jh(t){var e=t.secret;if(e=e==null?t.privateKey:e,e=e==null?t.key:e,/^hs/i.test(t.header.alg)===!0&&e==null)throw new TypeError("secret must be a string or buffer or a KeyObject");var n=new jP(e);this.readable=!0,this.header=t.header,this.encoding=t.encoding,this.secret=this.privateKey=this.key=n,this.payload=new jP(t.payload),this.secret.once("close",function(){!this.payload.writable&&this.readable&&this.sign()}.bind(this)),this.payload.once("close",function(){!this.secret.writable&&this.readable&&this.sign()}.bind(this))}gb.inherits(jh,W4);jh.prototype.sign=function(){try{var e=JP({header:this.header,payload:this.payload.buffer,secret:this.secret.buffer,encoding:this.encoding});return this.emit("done",e),this.emit("data",e),this.emit("end"),this.readable=!1,e}catch(n){this.readable=!1,this.emit("error",n),this.emit("close")}};jh.sign=JP;KP.exports=jh});var sI=te((V0e,iI)=>{var QP=Bl().Buffer,XP=ub(),J4=pb(),K4=require("stream"),ZP=mb(),Y4=require("util"),X4=/^[a-zA-Z0-9\-_]+?\.[a-zA-Z0-9\-_]+?\.([a-zA-Z0-9\-_]+)?$/;function Q4(t){return Object.prototype.toString.call(t)==="[object Object]"}function Z4(t){if(Q4(t))return t;try{return JSON.parse(t)}catch(e){return}}function eI(t){var e=t.split(".",1)[0];return Z4(QP.from(e,"base64").toString("binary"))}function e5(t){return t.split(".",2).join(".")}function tI(t){return t.split(".")[2]}function t5(t,e){e=e||"utf8";var n=t.split(".")[1];return QP.from(n,"base64").toString(e)}function nI(t){return X4.test(t)&&!!eI(t)}function rI(t,e,n){if(!e){var r=new Error("Missing algorithm parameter for jws.verify");throw r.code="MISSING_ALGORITHM",r}t=ZP(t);var o=tI(t),i=e5(t),s=J4(e);return s.verify(i,o,n)}function oI(t,e){if(e=e||{},t=ZP(t),!nI(t))return null;var n=eI(t);if(!n)return null;var r=t5(t);return(n.typ==="JWT"||e.json)&&(r=JSON.parse(r,e.encoding)),{header:n,payload:r,signature:tI(t)}}function Vl(t){t=t||{};var e=t.secret;if(e=e==null?t.publicKey:e,e=e==null?t.key:e,/^hs/i.test(t.algorithm)===!0&&e==null)throw new TypeError("secret must be a string or buffer or a KeyObject");var n=new XP(e);this.readable=!0,this.algorithm=t.algorithm,this.encoding=t.encoding,this.secret=this.publicKey=this.key=n,this.signature=new XP(t.signature),this.secret.once("close",function(){!this.signature.writable&&this.readable&&this.verify()}.bind(this)),this.signature.once("close",function(){!this.secret.writable&&this.readable&&this.verify()}.bind(this))}Y4.inherits(Vl,K4);Vl.prototype.verify=function(){try{var e=rI(this.signature.buffer,this.algorithm,this.key.buffer),n=oI(this.signature.buffer,this.encoding);return this.emit("done",e,n),this.emit("data",e),this.emit("end"),this.readable=!1,e}catch(r){this.readable=!1,this.emit("error",r),this.emit("close")}};Vl.decode=oI;Vl.isValid=nI;Vl.verify=rI;iI.exports=Vl});var yb=te(Ui=>{var aI=YP(),Wh=sI(),n5=["HS256","HS384","HS512","RS256","RS384","RS512","PS256","PS384","PS512","ES256","ES384","ES512"];Ui.ALGORITHMS=n5;Ui.sign=aI.sign;Ui.verify=Wh.verify;Ui.decode=Wh.decode;Ui.isValid=Wh.isValid;Ui.createSign=function(e){return new aI(e)};Ui.createVerify=function(e){return new Wh(e)}});var EI=te(Jh=>{"use strict";Object.defineProperty(Jh,"__esModule",{value:!0});Jh.GoogleToken=void 0;var lI=zh(require("fs")),r5=Ut(),o5=zh(yb()),i5=zh(require("path")),s5=require("util");function zh(t,e){if(typeof WeakMap=="function")var n=new WeakMap,r=new WeakMap;return(zh=function(i,s){if(!s&&i&&i.__esModule)return i;var a,l,u={__proto__:null,default:i};if(i===null||Go(i)!="object"&&typeof i!="function")return u;if(a=s?r:n){if(a.has(i))return a.get(i);a.set(i,u)}for(var f in i)f!=="default"&&{}.hasOwnProperty.call(i,f)&&((l=(a=Object.defineProperty)&&Object.getOwnPropertyDescriptor(i,f))&&(l.get||l.set)?a(u,f,l):u[f]=i[f]);return u})(t,e)}function Go(t){"@babel/helpers - typeof";return Go=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Go(t)}function a5(t,e){yI(t,e),e.add(t)}function l5(t,e,n){yI(t,e),e.set(t,n)}function yI(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}function uI(t,e,n){return t.set(Ar(t,e),n),n}function cI(t,e){return t.get(Ar(t,e))}function Ar(t,e,n){if(typeof t=="function"?t===e:t.has(e))return arguments.length<3?e:n;throw new TypeError("Private element is not present on this object")}function fI(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,wI(r.key),r)}}function bI(t,e,n){return e&&fI(t.prototype,e),n&&fI(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function vI(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function u5(t,e,n){return e=jc(e),c5(t,Ab()?Reflect.construct(e,n||[],jc(t).constructor):e.apply(t,n))}function c5(t,e){if(e&&(Go(e)=="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return f5(t)}function f5(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function d5(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Vc(t,e)}function bb(t){var e=typeof Map=="function"?new Map:void 0;return bb=function(r){if(r===null||!p5(r))return r;if(typeof r!="function")throw new TypeError("Super expression must either be null or a function");if(e!==void 0){if(e.has(r))return e.get(r);e.set(r,o)}function o(){return h5(r,arguments,jc(this).constructor)}return o.prototype=Object.create(r.prototype,{constructor:{value:o,enumerable:!1,writable:!0,configurable:!0}}),Vc(o,r)},bb(t)}function h5(t,e,n){if(Ab())return Reflect.construct.apply(null,arguments);var r=[null];r.push.apply(r,e);var o=new(t.bind.apply(t,r));return n&&Vc(o,n.prototype),o}function Ab(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(Ab=function(){return!!t})()}function p5(t){try{return Function.toString.call(t).indexOf("[native code]")!==-1}catch(e){return typeof t=="function"}}function Vc(t,e){return Vc=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,r){return n.__proto__=r,n},Vc(t,e)}function jc(t){return jc=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},jc(t)}function Mn(t,e,n){return(e=wI(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function wI(t){var e=m5(t,"string");return Go(e)=="symbol"?e:e+""}function m5(t,e){if(Go(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(Go(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Ln(){var t,e,n=typeof Symbol=="function"?Symbol:{},r=n.iterator||"@@iterator",o=n.toStringTag||"@@toStringTag";function i(b,v,w,_){var T=v&&v.prototype instanceof a?v:a,R=Object.create(T.prototype);return Fn(R,"_invoke",function(L,D,x){var P,V,J,E=0,O=x||[],X=!1,ee={p:0,n:0,v:t,a:se,f:se.bind(t,4),d:function(be,Me){return P=be,V=0,J=t,ee.n=Me,s}};function se(re,be){for(V=re,J=be,e=0;!X&&E&&!Me&&e<O.length;e++){var Me,ke=O[e],Ie=ee.p,Qe=ke[2];re>3?(Me=Qe===be)&&(J=ke[(V=ke[4])?5:(V=3,3)],ke[4]=ke[5]=t):ke[0]<=Ie&&((Me=re<2&&Ie<ke[1])?(V=0,ee.v=be,ee.n=ke[1]):Ie<Qe&&(Me=re<3||ke[0]>be||be>Qe)&&(ke[4]=re,ke[5]=be,ee.n=Qe,V=0))}if(Me||re>1)return s;throw X=!0,be}return function(re,be,Me){if(E>1)throw TypeError("Generator is already running");for(X&&be===1&&se(be,Me),V=be,J=Me;(e=V<2?t:J)||!X;){P||(V?V<3?(V>1&&(ee.n=-1),se(V,J)):ee.n=J:ee.v=J);try{if(E=2,P){if(V||(re="next"),e=P[re]){if(!(e=e.call(P,J)))throw TypeError("iterator result is not an object");if(!e.done)return e;J=e.value,V<2&&(V=0)}else V===1&&(e=P.return)&&e.call(P),V<2&&(J=TypeError("The iterator does not provide a '"+re+"' method"),V=1);P=t}else if((e=(X=ee.n<0)?J:L.call(D,ee))!==s)break}catch(ke){P=t,V=1,J=ke}finally{E=1}}return{value:e,done:X}}}(b,w,_),!0),R}var s={};function a(){}function l(){}function u(){}e=Object.getPrototypeOf;var f=[][r]?e(e([][r]())):(Fn(e={},r,function(){return this}),e),p=u.prototype=a.prototype=Object.create(f);function m(b){return Object.setPrototypeOf?Object.setPrototypeOf(b,u):(b.__proto__=u,Fn(b,o,"GeneratorFunction")),b.prototype=Object.create(p),b}return l.prototype=u,Fn(p,"constructor",u),Fn(u,"constructor",l),l.displayName="GeneratorFunction",Fn(u,o,"GeneratorFunction"),Fn(p),Fn(p,o,"Generator"),Fn(p,r,function(){return this}),Fn(p,"toString",function(){return"[object Generator]"}),(Ln=function(){return{w:i,m}})()}function Fn(t,e,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(i){o=0}Fn=function(s,a,l,u){if(a)o?o(s,a,{value:l,enumerable:!u,configurable:!u,writable:!u}):s[a]=l;else{var f=function(m,b){Fn(s,m,function(v){return this._invoke(m,b,v)})};f("next",0),f("throw",1),f("return",2)}},Fn(t,e,n,r)}function dI(t,e,n,r,o,i,s){try{var a=t[i](s),l=a.value}catch(u){return void n(u)}a.done?e(l):Promise.resolve(l).then(r,o)}function jl(t){return function(){var e=this,n=arguments;return new Promise(function(r,o){var i=t.apply(e,n);function s(l){dI(i,r,o,s,a,"next",l)}function a(l){dI(i,r,o,s,a,"throw",l)}s(void 0)})}}var hI=lI.readFile?(0,s5.promisify)(lI.readFile):jl(Ln().m(function t(){return Ln().w(function(e){for(;;)switch(e.n){case 0:throw new $c("use key rather than keyFile.","MISSING_CREDENTIALS");case 1:return e.a(2)}},t)})),pI="https://oauth2.googleapis.com/token",g5="https://oauth2.googleapis.com/revoke?token=",$c=function(t){function e(n,r){var o;return vI(this,e),o=u5(this,e,[n]),Mn(o,"code",void 0),o.code=r,o}return d5(e,t),bI(e)}(bb(Error)),qc=new WeakMap,no=new WeakSet,W0e=Jh.GoogleToken=function(){function t(e){vI(this,t),a5(this,no),Mn(this,"expiresAt",void 0),Mn(this,"key",void 0),Mn(this,"keyFile",void 0),Mn(this,"iss",void 0),Mn(this,"sub",void 0),Mn(this,"scope",void 0),Mn(this,"rawToken",void 0),Mn(this,"tokenExpires",void 0),Mn(this,"email",void 0),Mn(this,"additionalClaims",void 0),Mn(this,"eagerRefreshThresholdMillis",void 0),Mn(this,"transporter",{request:function(r){return(0,r5.request)(r)}}),l5(this,qc,void 0),Ar(no,this,_I).call(this,e)}return bI(t,[{key:"accessToken",get:function(){return this.rawToken?this.rawToken.access_token:void 0}},{key:"idToken",get:function(){return this.rawToken?this.rawToken.id_token:void 0}},{key:"tokenType",get:function(){return this.rawToken?this.rawToken.token_type:void 0}},{key:"refreshToken",get:function(){return this.rawToken?this.rawToken.refresh_token:void 0}},{key:"hasExpired",value:function(){var n=new Date().getTime();return this.rawToken&&this.expiresAt?n>=this.expiresAt:!0}},{key:"isTokenExpiring",value:function(){var n,r=new Date().getTime(),o=(n=this.eagerRefreshThresholdMillis)!==null&&n!==void 0?n:0;return this.rawToken&&this.expiresAt?this.expiresAt<=r+o:!0}},{key:"getToken",value:function(n){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(Go(n)==="object"&&(r=n,n=void 0),r=Object.assign({forceRefresh:!1},r),n){var o=n;Ar(no,this,mI).call(this,r).then(function(i){return o(null,i)},n);return}return Ar(no,this,mI).call(this,r)}},{key:"getCredentials",value:function(){var e=jl(Ln().m(function r(o){var i,s,a,l,u,f,p;return Ln().w(function(m){for(;;)switch(m.n){case 0:i=i5.extname(o),p=i,m.n=p===".json"?1:p===".der"||p===".crt"||p===".pem"?4:p===".p12"||p===".pfx"?6:7;break;case 1:return m.n=2,hI(o,"utf8");case 2:if(s=m.v,a=JSON.parse(s),l=a.private_key,u=a.client_email,!(!l||!u)){m.n=3;break}throw new $c("private_key and client_email are required.","MISSING_CREDENTIALS");case 3:return m.a(2,{privateKey:l,clientEmail:u});case 4:return m.n=5,hI(o,"utf8");case 5:return f=m.v,m.a(2,{privateKey:f});case 6:throw new $c("*.p12 certificates are not supported after v6.1.2. Consider utilizing *.json format or converting *.p12 to *.pem using the OpenSSL CLI.","UNKNOWN_CERTIFICATE_TYPE");case 7:throw new $c("Unknown certificate type. Type is determined based on file extension. Current supported extensions are *.json, and *.pem.","UNKNOWN_CERTIFICATE_TYPE");case 8:return m.a(2)}},r)}));function n(r){return e.apply(this,arguments)}return n}()},{key:"revokeToken",value:function(n){if(n){Ar(no,this,gI).call(this).then(function(){return n()},n);return}return Ar(no,this,gI).call(this)}}])}();function mI(t){return vb.apply(this,arguments)}function vb(){return vb=jl(Ln().m(function t(e){return Ln().w(function(n){for(;;)switch(n.n){case 0:if(!(cI(qc,this)&&!e.forceRefresh)){n.n=1;break}return n.a(2,cI(qc,this));case 1:return n.p=1,n.n=2,uI(qc,this,Ar(no,this,y5).call(this,e));case 2:return n.a(2,n.v);case 3:return n.p=3,uI(qc,this,void 0),n.f(3);case 4:return n.a(2)}},t,this,[[1,,3,4]])})),vb.apply(this,arguments)}function y5(t){return wb.apply(this,arguments)}function wb(){return wb=jl(Ln().m(function t(e){var n;return Ln().w(function(r){for(;;)switch(r.n){case 0:if(!(this.isTokenExpiring()===!1&&e.forceRefresh===!1)){r.n=1;break}return r.a(2,Promise.resolve(this.rawToken));case 1:if(!(!this.key&&!this.keyFile)){r.n=2;break}throw new Error("No key or keyFile set.");case 2:if(!(!this.key&&this.keyFile)){r.n=4;break}return r.n=3,this.getCredentials(this.keyFile);case 3:n=r.v,this.key=n.privateKey,this.iss=n.clientEmail||this.iss,n.clientEmail||Ar(no,this,b5).call(this);case 4:return r.a(2,Ar(no,this,v5).call(this))}},t,this)})),wb.apply(this,arguments)}function b5(){if(!this.iss)throw new $c("email is required.","MISSING_CREDENTIALS")}function gI(){return _b.apply(this,arguments)}function _b(){return _b=jl(Ln().m(function t(){var e;return Ln().w(function(n){for(;;)switch(n.n){case 0:if(this.accessToken){n.n=1;break}throw new Error("No token to revoke.");case 1:return e=g5+this.accessToken,n.n=2,this.transporter.request({url:e,retry:!0});case 2:Ar(no,this,_I).call(this,{email:this.iss,sub:this.sub,key:this.key,keyFile:this.keyFile,scope:this.scope,additionalClaims:this.additionalClaims});case 3:return n.a(2)}},t,this)})),_b.apply(this,arguments)}function _I(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.keyFile=t.keyFile,this.key=t.key,this.rawToken=void 0,this.iss=t.email||t.iss,this.sub=t.sub,this.additionalClaims=t.additionalClaims,Go(t.scope)==="object"?this.scope=t.scope.join(" "):this.scope=t.scope,this.eagerRefreshThresholdMillis=t.eagerRefreshThresholdMillis,t.transporter&&(this.transporter=t.transporter)}function v5(){return Eb.apply(this,arguments)}function Eb(){return Eb=jl(Ln().m(function t(){var e,n,r,o,i,s,a,l,u,f;return Ln().w(function(p){for(;;)switch(p.n){case 0:return e=Math.floor(new Date().getTime()/1e3),n=this.additionalClaims||{},r=Object.assign({iss:this.iss,scope:this.scope,aud:pI,exp:e+3600,iat:e,sub:this.sub},n),o=o5.sign({header:{alg:"RS256"},payload:r,secret:this.key}),p.p=1,p.n=2,this.transporter.request({method:"POST",url:pI,data:new URLSearchParams({grant_type:"urn:ietf:params:oauth:grant-type:jwt-bearer",assertion:o}),responseType:"json",retryConfig:{httpMethodsToRetry:["POST"]}});case 2:return i=p.v,this.rawToken=i.data,this.expiresAt=i.data.expires_in===null||i.data.expires_in===void 0?void 0:(e+i.data.expires_in)*1e3,p.a(2,this.rawToken);case 3:throw p.p=3,f=p.v,this.rawToken=void 0,this.tokenExpires=void 0,l=f.response&&(s=f.response)!==null&&s!==void 0&&s.data?(a=f.response)===null||a===void 0?void 0:a.data:{},l.error&&(u=l.error_description?": ".concat(l.error_description):"",f.message="".concat(l.error).concat(u)),f;case 4:return p.a(2)}},t,this,[[1,3]])})),Eb.apply(this,arguments)}});var Tb=te(Kh=>{"use strict";Object.defineProperty(Kh,"__esModule",{value:!0});Kh.JWTAccess=void 0;var w5=yb(),_5=wr(),AI={alg:"RS256",typ:"JWT"},Cb=class t{constructor(e,n,r,o){F(this,"email");F(this,"key");F(this,"keyId");F(this,"projectId");F(this,"eagerRefreshThresholdMillis");F(this,"cache",new _5.LRUCache({capacity:500,maxAge:60*60*1e3}));this.email=e,this.key=n,this.keyId=r,this.eagerRefreshThresholdMillis=o!=null?o:5*60*1e3}getCachedKey(e,n){let r=e;if(n&&Array.isArray(n)&&n.length?r=e?`${e}_${n.join("_")}`:`${n.join("_")}`:typeof n=="string"&&(r=e?`${e}_${n}`:n),!r)throw Error("Scopes or url must be provided");return r}getRequestHeaders(e,n,r){let o=this.getCachedKey(e,r),i=this.cache.get(o),s=Date.now();if(i&&i.expiration-s>this.eagerRefreshThresholdMillis)return new Headers(i.headers);let a=Math.floor(Date.now()/1e3),l=t.getExpirationTime(a),u;if(Array.isArray(r)&&(r=r.join(" ")),r?u={iss:this.email,sub:this.email,scope:r,exp:l,iat:a}:u={iss:this.email,sub:this.email,aud:e,exp:l,iat:a},n){for(let v in u)if(n[v])throw new Error(`The '${v}' property is not allowed when passing additionalClaims. This claim is included in the JWT by default.`)}let f=this.keyId?{...AI,kid:this.keyId}:AI,p=Object.assign(u,n),m=w5.sign({header:f,payload:p,secret:this.key}),b=new Headers({authorization:`Bearer ${m}`});return this.cache.set(o,{expiration:l*1e3,headers:b}),b}static getExpirationTime(e){return e+3600}fromJSON(e){if(!e)throw new Error("Must pass in a JSON object containing the service account auth settings.");if(!e.client_email)throw new Error("The incoming JSON object does not contain a client_email field");if(!e.private_key)throw new Error("The incoming JSON object does not contain a private_key field");this.email=e.client_email,this.key=e.private_key,this.keyId=e.private_key_id,this.projectId=e.project_id}fromStream(e,n){if(n)this.fromStreamAsync(e).then(()=>n(),n);else return this.fromStreamAsync(e)}fromStreamAsync(e){return new Promise((n,r)=>{e||r(new Error("Must pass in a stream containing the service account auth settings."));let o="";e.setEncoding("utf8").on("data",i=>o+=i).on("error",r).on("end",()=>{try{let i=JSON.parse(o);this.fromJSON(i),n()}catch(i){r(i)}})})}};Kh.JWTAccess=Cb});var Pb=te(Xh=>{"use strict";Object.defineProperty(Xh,"__esModule",{value:!0});Xh.JWT=void 0;var CI=EI(),E5=Tb(),A5=Ks(),Yh=Dn(),Sb=class t extends A5.OAuth2Client{constructor(n={}){super(n);F(this,"email");F(this,"keyFile");F(this,"key");F(this,"keyId");F(this,"defaultScopes");F(this,"scopes");F(this,"scope");F(this,"subject");F(this,"gtoken");F(this,"additionalClaims");F(this,"useJWTAccessWithScope");F(this,"defaultServicePath");F(this,"access");this.email=n.email,this.keyFile=n.keyFile,this.key=n.key,this.keyId=n.keyId,this.scopes=n.scopes,this.subject=n.subject,this.additionalClaims=n.additionalClaims,this.credentials={refresh_token:"jwt-placeholder",expiry_date:1}}createScoped(n){let r=new t(this);return r.scopes=n,r}async getRequestMetadataAsync(n){n=this.defaultServicePath?`https://${this.defaultServicePath}/`:n;let r=!this.hasUserScopes()&&n||this.useJWTAccessWithScope&&this.hasAnyScopes()||this.universeDomain!==Yh.DEFAULT_UNIVERSE;if(this.subject&&this.universeDomain!==Yh.DEFAULT_UNIVERSE)throw new RangeError(`Service Account user is configured for the credential. Domain-wide delegation is not supported in universes other than ${Yh.DEFAULT_UNIVERSE}`);if(!this.apiKey&&r)if(this.additionalClaims&&this.additionalClaims.target_audience){let{tokens:o}=await this.refreshToken();return{headers:this.addSharedMetadataHeaders(new Headers({authorization:`Bearer ${o.id_token}`}))}}else{this.access||(this.access=new E5.JWTAccess(this.email,this.key,this.keyId,this.eagerRefreshThresholdMillis));let o;this.hasUserScopes()?o=this.scopes:n||(o=this.defaultScopes);let i=this.useJWTAccessWithScope||this.universeDomain!==Yh.DEFAULT_UNIVERSE,s=await this.access.getRequestHeaders(n!=null?n:void 0,this.additionalClaims,i?o:void 0);return{headers:this.addSharedMetadataHeaders(s)}}else return this.hasAnyScopes()||this.apiKey?super.getRequestMetadataAsync(n):{headers:new Headers}}async fetchIdToken(n){let r=new CI.GoogleToken({iss:this.email,sub:this.subject,scope:this.scopes||this.defaultScopes,keyFile:this.keyFile,key:this.key,additionalClaims:{target_audience:n},transporter:this.transporter});if(await r.getToken({forceRefresh:!0}),!r.idToken)throw new Error("Unknown error: Failed to fetch ID token");return r.idToken}hasUserScopes(){return this.scopes?this.scopes.length>0:!1}hasAnyScopes(){return!!(this.scopes&&this.scopes.length>0||this.defaultScopes&&this.defaultScopes.length>0)}authorize(n){if(n)this.authorizeAsync().then(r=>n(null,r),n);else return this.authorizeAsync()}async authorizeAsync(){let n=await this.refreshToken();if(!n)throw new Error("No result returned");return this.credentials=n.tokens,this.credentials.refresh_token="jwt-placeholder",this.key=this.gtoken.key,this.email=this.gtoken.iss,n.tokens}async refreshTokenNoCache(){let n=this.createGToken(),o={access_token:(await n.getToken({forceRefresh:this.isTokenExpiring()})).access_token,token_type:"Bearer",expiry_date:n.expiresAt,id_token:n.idToken};return this.emit("tokens",o),{res:null,tokens:o}}createGToken(){return this.gtoken||(this.gtoken=new CI.GoogleToken({iss:this.email,sub:this.subject,scope:this.scopes||this.defaultScopes,keyFile:this.keyFile,key:this.key,additionalClaims:this.additionalClaims,transporter:this.transporter})),this.gtoken}fromJSON(n){if(!n)throw new Error("Must pass in a JSON object containing the service account auth settings.");if(!n.client_email)throw new Error("The incoming JSON object does not contain a client_email field");if(!n.private_key)throw new Error("The incoming JSON object does not contain a private_key field");this.email=n.client_email,this.key=n.private_key,this.keyId=n.private_key_id,this.projectId=n.project_id,this.quotaProjectId=n.quota_project_id,this.universeDomain=n.universe_domain||this.universeDomain}fromStream(n,r){if(r)this.fromStreamAsync(n).then(()=>r(),r);else return this.fromStreamAsync(n)}fromStreamAsync(n){return new Promise((r,o)=>{if(!n)throw new Error("Must pass in a stream containing the service account auth settings.");let i="";n.setEncoding("utf8").on("error",o).on("data",s=>i+=s).on("end",()=>{try{let s=JSON.parse(i);this.fromJSON(s),r()}catch(s){o(s)}})})}fromAPIKey(n){if(typeof n!="string")throw new Error("Must provide an API Key string.");this.apiKey=n}async getCredentials(){if(this.key)return{private_key:this.key,client_email:this.email};if(this.keyFile){let r=await this.createGToken().getCredentials(this.keyFile);return{private_key:r.privateKey,client_email:r.clientEmail}}throw new Error("A key or a keyFile must be provided to getCredentials.")}};Xh.JWT=Sb});var xb=te(Wl=>{"use strict";Object.defineProperty(Wl,"__esModule",{value:!0});Wl.UserRefreshClient=Wl.USER_REFRESH_ACCOUNT_TYPE=void 0;var C5=Ks(),T5=Dn();Wl.USER_REFRESH_ACCOUNT_TYPE="authorized_user";var Ib=class t extends C5.OAuth2Client{constructor(n,r,o,i,s){let a=n&&typeof n=="object"?n:{clientId:n,clientSecret:r,refreshToken:o,eagerRefreshThresholdMillis:i,forceRefreshOnFailure:s};super(a);F(this,"_refreshToken");this._refreshToken=a.refreshToken,this.credentials.refresh_token=a.refreshToken}async refreshTokenNoCache(){return super.refreshTokenNoCache(this._refreshToken)}async fetchIdToken(n){let r={...t.RETRY_CONFIG,url:this.endpoints.oauth2TokenUrl,method:"POST",data:new URLSearchParams({client_id:this._clientId,client_secret:this._clientSecret,grant_type:"refresh_token",refresh_token:this._refreshToken,target_audience:n})};return T5.AuthClient.setMethodName(r,"fetchIdToken"),(await this.transporter.request(r)).data.id_token}fromJSON(n){if(!n)throw new Error("Must pass in a JSON object containing the user refresh token");if(n.type!=="authorized_user")throw new Error('The incoming JSON object does not have the "authorized_user" type');if(!n.client_id)throw new Error("The incoming JSON object does not contain a client_id field");if(!n.client_secret)throw new Error("The incoming JSON object does not contain a client_secret field");if(!n.refresh_token)throw new Error("The incoming JSON object does not contain a refresh_token field");this._clientId=n.client_id,this._clientSecret=n.client_secret,this._refreshToken=n.refresh_token,this.credentials.refresh_token=n.refresh_token,this.quotaProjectId=n.quota_project_id,this.universeDomain=n.universe_domain||this.universeDomain}fromStream(n,r){if(r)this.fromStreamAsync(n).then(()=>r(),r);else return this.fromStreamAsync(n)}async fromStreamAsync(n){return new Promise((r,o)=>{if(!n)return o(new Error("Must pass in a stream containing the user refresh token."));let i="";n.setEncoding("utf8").on("error",o).on("data",s=>i+=s).on("end",()=>{try{let s=JSON.parse(i);return this.fromJSON(s),r()}catch(s){return o(s)}})})}static fromJSON(n){let r=new t;return r.fromJSON(n),r}};Wl.UserRefreshClient=Ib});var Rb=te(zl=>{"use strict";Object.defineProperty(zl,"__esModule",{value:!0});zl.Impersonated=zl.IMPERSONATED_ACCOUNT_TYPE=void 0;var TI=Ks(),S5=Ut(),P5=wr();zl.IMPERSONATED_ACCOUNT_TYPE="impersonated_service_account";var kb=class t extends TI.OAuth2Client{constructor(n={}){var o,i,s,a,l,u;super(n);F(this,"sourceClient");F(this,"targetPrincipal");F(this,"targetScopes");F(this,"delegates");F(this,"lifetime");F(this,"endpoint");if(this.credentials={expiry_date:1,refresh_token:"impersonated-placeholder"},this.sourceClient=(o=n.sourceClient)!=null?o:new TI.OAuth2Client,this.targetPrincipal=(i=n.targetPrincipal)!=null?i:"",this.delegates=(s=n.delegates)!=null?s:[],this.targetScopes=(a=n.targetScopes)!=null?a:[],this.lifetime=(l=n.lifetime)!=null?l:3600,!!!(0,P5.originalOrCamelOptions)(n).get("universe_domain"))this.universeDomain=this.sourceClient.universeDomain;else if(this.sourceClient.universeDomain!==this.universeDomain)throw new RangeError(`Universe domain ${this.sourceClient.universeDomain} in source credentials does not match ${this.universeDomain} universe domain set for impersonated credentials.`);this.endpoint=(u=n.endpoint)!=null?u:`https://iamcredentials.${this.universeDomain}`}async sign(n){await this.sourceClient.getAccessToken();let r=`projects/-/serviceAccounts/${this.targetPrincipal}`,o=`${this.endpoint}/v1/${r}:signBlob`,i={delegates:this.delegates,payload:Buffer.from(n).toString("base64")};return(await this.sourceClient.request({...t.RETRY_CONFIG,url:o,data:i,method:"POST"})).data}getTargetPrincipal(){return this.targetPrincipal}async refreshToken(){var n,r,o,i,s,a;try{await this.sourceClient.getAccessToken();let l="projects/-/serviceAccounts/"+this.targetPrincipal,u=`${this.endpoint}/v1/${l}:generateAccessToken`,f={delegates:this.delegates,scope:this.targetScopes,lifetime:this.lifetime+"s"},p=await this.sourceClient.request({...t.RETRY_CONFIG,url:u,data:f,method:"POST"}),m=p.data;return this.credentials.access_token=m.accessToken,this.credentials.expiry_date=Date.parse(m.expireTime),{tokens:this.credentials,res:p}}catch(l){if(!(l instanceof Error))throw l;let u=0,f="";throw l instanceof S5.GaxiosError&&(u=(o=(r=(n=l==null?void 0:l.response)==null?void 0:n.data)==null?void 0:r.error)==null?void 0:o.status,f=(a=(s=(i=l==null?void 0:l.response)==null?void 0:i.data)==null?void 0:s.error)==null?void 0:a.message),u&&f?(l.message=`${u}: unable to impersonate: ${f}`,l):(l.message=`unable to impersonate: ${l}`,l)}}async fetchIdToken(n,r){var l,u;await this.sourceClient.getAccessToken();let o=`projects/-/serviceAccounts/${this.targetPrincipal}`,i=`${this.endpoint}/v1/${o}:generateIdToken`,s={delegates:this.delegates,audience:n,includeEmail:(l=r==null?void 0:r.includeEmail)!=null?l:!0,useEmailAzp:(u=r==null?void 0:r.includeEmail)!=null?u:!0};return(await this.sourceClient.request({...t.RETRY_CONFIG,url:i,data:s,method:"POST"})).data.token}};zl.Impersonated=kb});var Ob=te(Wc=>{"use strict";Object.defineProperty(Wc,"__esModule",{value:!0});Wc.OAuthClientAuthHandler=void 0;Wc.getErrorFromOAuthErrorResponse=k5;var Jl=Ut(),I5=Fc(),x5=["PUT","POST","PATCH"],Qh,rn,Nb=class{constructor(e){Re(this,Qh,(0,I5.createCrypto)());Re(this,rn);F(this,"transporter");e&&"clientId"in e?(qe(this,rn,e),this.transporter=new Jl.Gaxios):(qe(this,rn,e==null?void 0:e.clientAuthentication),this.transporter=(e==null?void 0:e.transporter)||new Jl.Gaxios)}applyClientAuthenticationOptions(e,n){e.headers=Jl.Gaxios.mergeHeaders(e.headers),this.injectAuthenticatedHeaders(e,n),n||this.injectAuthenticatedRequestBody(e)}injectAuthenticatedHeaders(e,n){var r;if(n)e.headers=Jl.Gaxios.mergeHeaders(e.headers,{authorization:`Bearer ${n}`});else if(((r=fe(this,rn))==null?void 0:r.confidentialClientType)==="basic"){e.headers=Jl.Gaxios.mergeHeaders(e.headers);let o=fe(this,rn).clientId,i=fe(this,rn).clientSecret||"",s=fe(this,Qh).encodeBase64StringUtf8(`${o}:${i}`);Jl.Gaxios.mergeHeaders(e.headers,{authorization:`Basic ${s}`})}}injectAuthenticatedRequestBody(e){var n,r;if(((n=fe(this,rn))==null?void 0:n.confidentialClientType)==="request-body"){let o=(e.method||"GET").toUpperCase();if(!x5.includes(o))throw new Error(`${o} HTTP method does not support ${fe(this,rn).confidentialClientType} client authentication`);let s=new Headers(e.headers).get("content-type");if(s!=null&&s.startsWith("application/x-www-form-urlencoded")||e.data instanceof URLSearchParams){let a=new URLSearchParams((r=e.data)!=null?r:"");a.append("client_id",fe(this,rn).clientId),a.append("client_secret",fe(this,rn).clientSecret||""),e.data=a}else if(s!=null&&s.startsWith("application/json"))e.data=e.data||{},Object.assign(e.data,{client_id:fe(this,rn).clientId,client_secret:fe(this,rn).clientSecret||""});else throw new Error(`${s} content-types are not supported with ${fe(this,rn).confidentialClientType} client authentication`)}}static get RETRY_CONFIG(){return{retry:!0,retryConfig:{httpMethodsToRetry:["GET","PUT","POST","HEAD","OPTIONS","DELETE"]}}}};Qh=new WeakMap,rn=new WeakMap;Wc.OAuthClientAuthHandler=Nb;function k5(t,e){let n=t.error,r=t.error_description,o=t.error_uri,i=`Error code ${n}`;typeof r!="undefined"&&(i+=`: ${r}`),typeof o!="undefined"&&(i+=` - ${o}`);let s=new Error(i);if(e){let a=Object.keys(e);e.stack&&a.push("stack"),a.forEach(l=>{l!=="message"&&Object.defineProperty(s,l,{value:e[l],writable:!1,enumerable:!0})})}return s}});var ep=te(Zh=>{"use strict";Object.defineProperty(Zh,"__esModule",{value:!0});Zh.StsCredentials=void 0;var R5=Ut(),N5=Dn(),SI=Ob(),O5=wr(),zc,Mb=class Mb extends SI.OAuthClientAuthHandler{constructor(n={tokenExchangeEndpoint:""},r){(typeof n!="object"||n instanceof URL)&&(n={tokenExchangeEndpoint:n,clientAuthentication:r});super(n);Re(this,zc);qe(this,zc,n.tokenExchangeEndpoint)}async exchangeToken(n,r,o){var a,l,u;let i={grant_type:n.grantType,resource:n.resource,audience:n.audience,scope:(a=n.scope)==null?void 0:a.join(" "),requested_token_type:n.requestedTokenType,subject_token:n.subjectToken,subject_token_type:n.subjectTokenType,actor_token:(l=n.actingParty)==null?void 0:l.actorToken,actor_token_type:(u=n.actingParty)==null?void 0:u.actorTokenType,options:o&&JSON.stringify(o)},s={...Mb.RETRY_CONFIG,url:fe(this,zc).toString(),method:"POST",headers:r,data:new URLSearchParams((0,O5.removeUndefinedValuesInObject)(i))};N5.AuthClient.setMethodName(s,"exchangeToken"),this.applyClientAuthenticationOptions(s);try{let f=await this.transporter.request(s),p=f.data;return p.res=f,p}catch(f){throw f instanceof R5.GaxiosError&&f.response?(0,SI.getErrorFromOAuthErrorResponse)(f.response.data,f):f}}};zc=new WeakMap;var Db=Mb;Zh.StsCredentials=Db});var Bi=te(Zn=>{"use strict";Object.defineProperty(Zn,"__esModule",{value:!0});Zn.BaseExternalAccountClient=Zn.CLOUD_RESOURCE_MANAGER=Zn.EXTERNAL_ACCOUNT_TYPE=Zn.EXPIRATION_TIME_OFFSET=void 0;var D5=Ut(),M5=require("stream"),Fb=Dn(),F5=ep(),PI=wr(),L5=Y0(),U5="urn:ietf:params:oauth:grant-type:token-exchange",B5="urn:ietf:params:oauth:token-type:access_token",Lb="https://www.googleapis.com/auth/cloud-platform",G5=3600;Zn.EXPIRATION_TIME_OFFSET=5*60*1e3;Zn.EXTERNAL_ACCOUNT_TYPE="external_account";Zn.CLOUD_RESOURCE_MANAGER="https://cloudresourcemanager.googleapis.com/v1/projects/";var H5="//iam\\.googleapis\\.com/locations/[^/]+/workforcePools/[^/]+/providers/.+",q5="https://sts.{universeDomain}/v1/token",Ys,tp,II,np=class np extends Fb.AuthClient{constructor(n){var b;super(n);Re(this,tp);F(this,"scopes");F(this,"projectNumber");F(this,"audience");F(this,"subjectTokenType");F(this,"stsCredential");F(this,"clientAuth");F(this,"credentialSourceType");F(this,"cachedAccessToken");F(this,"serviceAccountImpersonationUrl");F(this,"serviceAccountImpersonationLifetime");F(this,"workforcePoolUserProject");F(this,"configLifetimeRequested");F(this,"tokenUrl");F(this,"cloudResourceManagerURL");F(this,"supplierContext");Re(this,Ys,null);let r=(0,PI.originalOrCamelOptions)(n),o=r.get("type");if(o&&o!==Zn.EXTERNAL_ACCOUNT_TYPE)throw new Error(`Expected "${Zn.EXTERNAL_ACCOUNT_TYPE}" type but received "${n.type}"`);let i=r.get("client_id"),s=r.get("client_secret");this.tokenUrl=(b=r.get("token_url"))!=null?b:q5.replace("{universeDomain}",this.universeDomain);let a=r.get("subject_token_type"),l=r.get("workforce_pool_user_project"),u=r.get("service_account_impersonation_url"),f=r.get("service_account_impersonation"),p=(0,PI.originalOrCamelOptions)(f).get("token_lifetime_seconds");this.cloudResourceManagerURL=new URL(r.get("cloud_resource_manager_url")||`https://cloudresourcemanager.${this.universeDomain}/v1/projects/`),i&&(this.clientAuth={confidentialClientType:"basic",clientId:i,clientSecret:s}),this.stsCredential=new F5.StsCredentials({tokenExchangeEndpoint:this.tokenUrl,clientAuthentication:this.clientAuth}),this.scopes=r.get("scopes")||[Lb],this.cachedAccessToken=null,this.audience=r.get("audience"),this.subjectTokenType=a,this.workforcePoolUserProject=l;let m=new RegExp(H5);if(this.workforcePoolUserProject&&!this.audience.match(m))throw new Error("workforcePoolUserProject should not be set for non-workforce pool credentials.");this.serviceAccountImpersonationUrl=u,this.serviceAccountImpersonationLifetime=p,this.serviceAccountImpersonationLifetime?this.configLifetimeRequested=!0:(this.configLifetimeRequested=!1,this.serviceAccountImpersonationLifetime=G5),this.projectNumber=this.getProjectNumber(this.audience),this.supplierContext={audience:this.audience,subjectTokenType:this.subjectTokenType,transporter:this.transporter}}getServiceAccountEmail(){var n;if(this.serviceAccountImpersonationUrl){if(this.serviceAccountImpersonationUrl.length>256)throw new RangeError(`URL is too long: ${this.serviceAccountImpersonationUrl}`);let o=/serviceAccounts\/(?<email>[^:]+):generateAccessToken$/.exec(this.serviceAccountImpersonationUrl);return((n=o==null?void 0:o.groups)==null?void 0:n.email)||null}return null}setCredentials(n){super.setCredentials(n),this.cachedAccessToken=n}async getAccessToken(){return(!this.cachedAccessToken||this.isExpired(this.cachedAccessToken))&&await this.refreshAccessTokenAsync(),{token:this.cachedAccessToken.access_token,res:this.cachedAccessToken.res}}async getRequestHeaders(){let n=await this.getAccessToken(),r=new Headers({authorization:`Bearer ${n.token}`});return this.addSharedMetadataHeaders(r)}request(n,r){if(r)this.requestAsync(n).then(o=>r(null,o),o=>r(o,o.response));else return this.requestAsync(n)}async getProjectId(){let n=this.projectNumber||this.workforcePoolUserProject;if(this.projectId)return this.projectId;if(n){let r=await this.getRequestHeaders(),o={...np.RETRY_CONFIG,headers:r,url:`${this.cloudResourceManagerURL.toString()}${n}`};Fb.AuthClient.setMethodName(o,"getProjectId");let i=await this.transporter.request(o);return this.projectId=i.data.projectId,this.projectId}return null}async requestAsync(n,r=!1){let o;try{let i=await this.getRequestHeaders();n.headers=D5.Gaxios.mergeHeaders(n.headers),this.addUserProjectAndAuthHeaders(n.headers,i),o=await this.transporter.request(n)}catch(i){let s=i.response;if(s){let a=s.status,l=s.config.data instanceof M5.Readable;if(!r&&(a===401||a===403)&&!l&&this.forceRefreshOnFailure)return await this.refreshAccessTokenAsync(),await this.requestAsync(n,!0)}throw i}return o}async refreshAccessTokenAsync(){qe(this,Ys,fe(this,Ys)||Le(this,tp,II).call(this));try{return await fe(this,Ys)}finally{qe(this,Ys,null)}}getProjectNumber(n){let r=n.match(/\/projects\/([^/]+)/);return r?r[1]:null}async getImpersonatedAccessToken(n){let r={...np.RETRY_CONFIG,url:this.serviceAccountImpersonationUrl,method:"POST",headers:{"content-type":"application/json",authorization:`Bearer ${n}`},data:{scope:this.getScopesArray(),lifetime:this.serviceAccountImpersonationLifetime+"s"}};Fb.AuthClient.setMethodName(r,"getImpersonatedAccessToken");let o=await this.transporter.request(r),i=o.data;return{access_token:i.accessToken,expiry_date:new Date(i.expireTime).getTime(),res:o}}isExpired(n){let r=new Date().getTime();return n.expiry_date?r>=n.expiry_date-this.eagerRefreshThresholdMillis:!1}getScopesArray(){return typeof this.scopes=="string"?[this.scopes]:this.scopes||[Lb]}getMetricsHeaderValue(){let n=process.version.replace(/^v/,""),r=this.serviceAccountImpersonationUrl!==void 0,o=this.credentialSourceType?this.credentialSourceType:"unknown";return`gl-node/${n} auth/${L5.pkg.version} google-byoid-sdk source/${o} sa-impersonation/${r} config-lifetime/${this.configLifetimeRequested}`}getTokenUrl(){return this.tokenUrl}};Ys=new WeakMap,tp=new WeakSet,II=async function(){let n=await this.retrieveSubjectToken(),r={grantType:U5,audience:this.audience,requestedTokenType:B5,subjectToken:n,subjectTokenType:this.subjectTokenType,scope:this.serviceAccountImpersonationUrl?[Lb]:this.getScopesArray()},o=!this.clientAuth&&this.workforcePoolUserProject?{userProject:this.workforcePoolUserProject}:void 0,i=new Headers({"x-goog-api-client":this.getMetricsHeaderValue()}),s=await this.stsCredential.exchangeToken(r,i,o);return this.serviceAccountImpersonationUrl?this.cachedAccessToken=await this.getImpersonatedAccessToken(s.access_token):s.expires_in?this.cachedAccessToken={access_token:s.access_token,expiry_date:new Date().getTime()+s.expires_in*1e3,res:s.res}:this.cachedAccessToken={access_token:s.access_token,res:s.res},this.credentials={},Object.assign(this.credentials,this.cachedAccessToken),delete this.credentials.res,this.emit("tokens",{refresh_token:null,expiry_date:this.cachedAccessToken.expiry_date,access_token:this.cachedAccessToken.access_token,token_type:"Bearer",id_token:null}),this.cachedAccessToken};var Ub=np;Zn.BaseExternalAccountClient=Ub});var NI=te(rp=>{"use strict";Object.defineProperty(rp,"__esModule",{value:!0});rp.FileSubjectTokenSupplier=void 0;var Gb=require("util"),Hb=require("fs"),xI,$5=(0,Gb.promisify)((xI=Hb.readFile)!=null?xI:()=>{}),kI,V5=(0,Gb.promisify)((kI=Hb.realpath)!=null?kI:()=>{}),RI,j5=(0,Gb.promisify)((RI=Hb.lstat)!=null?RI:()=>{}),Bb=class{constructor(e){F(this,"filePath");F(this,"formatType");F(this,"subjectTokenFieldName");this.filePath=e.filePath,this.formatType=e.formatType,this.subjectTokenFieldName=e.subjectTokenFieldName}async getSubjectToken(){let e=this.filePath;try{if(e=await V5(e),!(await j5(e)).isFile())throw new Error}catch(o){throw o instanceof Error&&(o.message=`The file at ${e} does not exist, or it is not a file. ${o.message}`),o}let n,r=await $5(e,{encoding:"utf8"});if(this.formatType==="text"?n=r:this.formatType==="json"&&this.subjectTokenFieldName&&(n=JSON.parse(r)[this.subjectTokenFieldName]),!n)throw new Error("Unable to parse the subject_token from the credential_source file");return n}};rp.FileSubjectTokenSupplier=Bb});var OI=te(op=>{"use strict";Object.defineProperty(op,"__esModule",{value:!0});op.UrlSubjectTokenSupplier=void 0;var W5=Dn(),qb=class{constructor(e){F(this,"url");F(this,"headers");F(this,"formatType");F(this,"subjectTokenFieldName");F(this,"additionalGaxiosOptions");this.url=e.url,this.formatType=e.formatType,this.subjectTokenFieldName=e.subjectTokenFieldName,this.headers=e.headers,this.additionalGaxiosOptions=e.additionalGaxiosOptions}async getSubjectToken(e){let n={...this.additionalGaxiosOptions,url:this.url,method:"GET",headers:this.headers};W5.AuthClient.setMethodName(n,"getSubjectToken");let r;if(this.formatType==="text"?r=(await e.transporter.request(n)).data:this.formatType==="json"&&this.subjectTokenFieldName&&(r=(await e.transporter.request(n)).data[this.subjectTokenFieldName]),!r)throw new Error("Unable to parse the subject_token from the credential_source URL");return r}};op.UrlSubjectTokenSupplier=qb});var UI=te(Un=>{"use strict";Object.defineProperty(Un,"__esModule",{value:!0});Un.CertificateSubjectTokenSupplier=Un.InvalidConfigurationError=Un.CertificateSourceUnavailableError=Un.CERTIFICATE_CONFIGURATION_ENV_VARIABLE=void 0;var ip=wr(),sp=require("fs"),ap=require("crypto"),z5=require("https");Un.CERTIFICATE_CONFIGURATION_ENV_VARIABLE="GOOGLE_API_CERTIFICATE_CONFIG";var ro=class extends Error{constructor(e){super(e),this.name="CertificateSourceUnavailableError"}};Un.CertificateSourceUnavailableError=ro;var er=class extends Error{constructor(e){super(e),this.name="InvalidConfigurationError"}};Un.InvalidConfigurationError=er;var oo,DI,MI,FI,LI,$b=class{constructor(e){Re(this,oo);F(this,"certificateConfigPath");F(this,"trustChainPath");F(this,"cert");F(this,"key");var n;if(!e.useDefaultCertificateConfig&&!e.certificateConfigLocation)throw new er("Either `useDefaultCertificateConfig` must be true or a `certificateConfigLocation` must be provided.");if(e.useDefaultCertificateConfig&&e.certificateConfigLocation)throw new er("Both `useDefaultCertificateConfig` and `certificateConfigLocation` cannot be provided.");this.trustChainPath=e.trustChainPath,this.certificateConfigPath=(n=e.certificateConfigLocation)!=null?n:""}async createMtlsHttpsAgent(){if(!this.key||!this.cert)throw new er("Cannot create mTLS Agent with missing certificate or key");return new z5.Agent({key:this.key,cert:this.cert})}async getSubjectToken(){this.certificateConfigPath=await Le(this,oo,DI).call(this);let{certPath:e,keyPath:n}=await Le(this,oo,MI).call(this);return{cert:this.cert,key:this.key}=await Le(this,oo,FI).call(this,e,n),await Le(this,oo,LI).call(this,this.cert)}};oo=new WeakSet,DI=async function(){let e=this.certificateConfigPath;if(e){if(await(0,ip.isValidFile)(e))return e;throw new ro(`Provided certificate config path is invalid: ${e}`)}let n=process.env[Un.CERTIFICATE_CONFIGURATION_ENV_VARIABLE];if(n){if(await(0,ip.isValidFile)(n))return n;throw new ro(`Path from environment variable "${Un.CERTIFICATE_CONFIGURATION_ENV_VARIABLE}" is invalid: ${n}`)}let r=(0,ip.getWellKnownCertificateConfigFileLocation)();if(await(0,ip.isValidFile)(r))return r;throw new ro(`Could not find certificate configuration file. Searched override path, the "${Un.CERTIFICATE_CONFIGURATION_ENV_VARIABLE}" env var, and the gcloud path (${r}).`)},MI=async function(){var r,o,i,s;let e=this.certificateConfigPath,n;try{n=await sp.promises.readFile(e,"utf8")}catch(a){throw new ro(`Failed to read certificate config file at: ${e}`)}try{let a=JSON.parse(n),l=(o=(r=a==null?void 0:a.cert_configs)==null?void 0:r.workload)==null?void 0:o.cert_path,u=(s=(i=a==null?void 0:a.cert_configs)==null?void 0:i.workload)==null?void 0:s.key_path;if(!l||!u)throw new er(`Certificate config file (${e}) is missing required "cert_path" or "key_path" in the workload config.`);return{certPath:l,keyPath:u}}catch(a){throw a instanceof er?a:new er(`Failed to parse certificate config from ${e}: ${a.message}`)}},FI=async function(e,n){let r,o;try{r=await sp.promises.readFile(e),new ap.X509Certificate(r)}catch(i){let s=i instanceof Error?i.message:String(i);throw new ro(`Failed to read certificate file at ${e}: ${s}`)}try{o=await sp.promises.readFile(n),(0,ap.createPrivateKey)(o)}catch(i){let s=i instanceof Error?i.message:String(i);throw new ro(`Failed to read private key file at ${n}: ${s}`)}return{cert:r,key:o}},LI=async function(e){var r;let n=new ap.X509Certificate(e);if(!this.trustChainPath)return JSON.stringify([n.raw.toString("base64")]);try{let s=((r=(await sp.promises.readFile(this.trustChainPath,"utf8")).match(/-----BEGIN CERTIFICATE-----[^-]+-----END CERTIFICATE-----/g))!=null?r:[]).map((u,f)=>{try{return new ap.X509Certificate(u)}catch(p){let m=p instanceof Error?p.message:String(p);throw new er(`Failed to parse certificate at index ${f} in trust chain file ${this.trustChainPath}: ${m}`)}}),a=s.findIndex(u=>n.raw.equals(u.raw)),l;if(a===-1)l=[n,...s];else if(a===0)l=s;else throw new er(`Leaf certificate exists in the trust chain but is not the first entry (found at index ${a}).`);return JSON.stringify(l.map(u=>u.raw.toString("base64")))}catch(o){if(o instanceof er)throw o;let i=o instanceof Error?o.message:String(o);throw new ro(`Failed to process certificate chain from ${this.trustChainPath}: ${i}`)}};Un.CertificateSubjectTokenSupplier=$b});var Wb=te(lp=>{"use strict";Object.defineProperty(lp,"__esModule",{value:!0});lp.IdentityPoolClient=void 0;var J5=Bi(),Vb=wr(),K5=NI(),Y5=OI(),BI=UI(),X5=ep(),GI=Ut(),jb=class t extends J5.BaseExternalAccountClient{constructor(n){super(n);F(this,"subjectTokenSupplier");let r=(0,Vb.originalOrCamelOptions)(n),o=r.get("credential_source"),i=r.get("subject_token_supplier");if(!o&&!i)throw new Error("A credential source or subject token supplier must be specified.");if(o&&i)throw new Error("Only one of credential source or subject token supplier can be specified.");if(i)this.subjectTokenSupplier=i,this.credentialSourceType="programmatic";else{let s=(0,Vb.originalOrCamelOptions)(o),a=(0,Vb.originalOrCamelOptions)(s.get("format")),l=a.get("type")||"text",u=a.get("subject_token_field_name");if(l!=="json"&&l!=="text")throw new Error(`Invalid credential_source format "${l}"`);if(l==="json"&&!u)throw new Error("Missing subject_token_field_name for JSON credential_source format");let f=s.get("file"),p=s.get("url"),m=s.get("certificate"),b=s.get("headers");if(f&&p||p&&m||f&&m)throw new Error('No valid Identity Pool "credential_source" provided, must be either file, url, or certificate.');if(f)this.credentialSourceType="file",this.subjectTokenSupplier=new K5.FileSubjectTokenSupplier({filePath:f,formatType:l,subjectTokenFieldName:u});else if(p)this.credentialSourceType="url",this.subjectTokenSupplier=new Y5.UrlSubjectTokenSupplier({url:p,formatType:l,subjectTokenFieldName:u,headers:b,additionalGaxiosOptions:t.RETRY_CONFIG});else if(m){this.credentialSourceType="certificate";let v=new BI.CertificateSubjectTokenSupplier({useDefaultCertificateConfig:m.use_default_certificate_config,certificateConfigLocation:m.certificate_config_location,trustChainPath:m.trust_chain_path});this.subjectTokenSupplier=v}else throw new Error('No valid Identity Pool "credential_source" provided, must be either file, url, or certificate.')}}async retrieveSubjectToken(){let n=await this.subjectTokenSupplier.getSubjectToken(this.supplierContext);if(this.subjectTokenSupplier instanceof BI.CertificateSubjectTokenSupplier){let r=await this.subjectTokenSupplier.createMtlsHttpsAgent();this.stsCredential=new X5.StsCredentials({tokenExchangeEndpoint:this.getTokenUrl(),clientAuthentication:this.clientAuth,transporter:new GI.Gaxios({agent:r})}),this.transporter=new GI.Gaxios({...this.transporter.defaults||{},agent:r})}return n}};lp.IdentityPoolClient=jb});var Jb=te(cp=>{"use strict";Object.defineProperty(cp,"__esModule",{value:!0});cp.AwsRequestSigner=void 0;var up=Ut(),qI=Fc(),HI="AWS4-HMAC-SHA256",Q5="aws4_request",zb=class{constructor(e,n){F(this,"getCredentials");F(this,"region");F(this,"crypto");this.getCredentials=e,this.region=n,this.crypto=(0,qI.createCrypto)()}async getRequestOptions(e){if(!e.url)throw new RangeError('"url" is required in "amzOptions"');let n=typeof e.data=="object"?JSON.stringify(e.data):e.data,r=e.url,o=e.method||"GET",i=e.body||n,s=e.headers,a=await this.getCredentials(),l=new URL(r);if(typeof i!="string"&&i!==void 0)throw new TypeError(`'requestPayload' is expected to be a string if provided. Got: ${i}`);let u=await e6({crypto:this.crypto,host:l.host,canonicalUri:l.pathname,canonicalQuerystring:l.search.slice(1),method:o,region:this.region,securityCredentials:a,requestPayload:i,additionalAmzHeaders:s}),f=up.Gaxios.mergeHeaders(u.amzDate?{"x-amz-date":u.amzDate}:{},{authorization:u.authorizationHeader,host:l.host},s||{});a.token&&up.Gaxios.mergeHeaders(f,{"x-amz-security-token":a.token});let p={url:r,method:o,headers:f};return i!==void 0&&(p.body=i),p}};cp.AwsRequestSigner=zb;async function Jc(t,e,n){return await t.signWithHmacSha256(e,n)}async function Z5(t,e,n,r,o){let i=await Jc(t,`AWS4${e}`,n),s=await Jc(t,i,r),a=await Jc(t,s,o);return await Jc(t,a,"aws4_request")}async function e6(t){let e=up.Gaxios.mergeHeaders(t.additionalAmzHeaders),n=t.requestPayload||"",r=t.host.split(".")[0],o=new Date,i=o.toISOString().replace(/[-:]/g,"").replace(/\.[0-9]+/,""),s=o.toISOString().replace(/[-]/g,"").replace(/T.*/,"");t.securityCredentials.token&&e.set("x-amz-security-token",t.securityCredentials.token);let a=up.Gaxios.mergeHeaders({host:t.host},e.has("date")?{}:{"x-amz-date":i},e),l="",u=[...a.keys()].sort();u.forEach(R=>{l+=`${R}:${a.get(R)}
`});let f=u.join(";"),p=await t.crypto.sha256DigestHex(n),m=`${t.method.toUpperCase()}
${t.canonicalUri}
${t.canonicalQuerystring}
${l}
${f}
${p}`,b=`${s}/${t.region}/${r}/${Q5}`,v=`${HI}
${i}
${b}
`+await t.crypto.sha256DigestHex(m),w=await Z5(t.crypto,t.securityCredentials.secretAccessKey,s,t.region,r),_=await Jc(t.crypto,w,v),T=`${HI} Credential=${t.securityCredentials.accessKeyId}/${b}, SignedHeaders=${f}, Signature=${(0,qI.fromArrayBufferToHex)(_)}`;return{amzDate:e.has("date")?void 0:i,authorizationHeader:T,canonicalQuerystring:t.canonicalQuerystring}}});var jI=te(hp=>{"use strict";Object.defineProperty(hp,"__esModule",{value:!0});hp.DefaultAwsSecurityCredentialsSupplier=void 0;var fp=Dn(),jt,Yb,$I,VI,dp,Xb,Kb=class{constructor(e){Re(this,jt);F(this,"regionUrl");F(this,"securityCredentialsUrl");F(this,"imdsV2SessionTokenUrl");F(this,"additionalGaxiosOptions");this.regionUrl=e.regionUrl,this.securityCredentialsUrl=e.securityCredentialsUrl,this.imdsV2SessionTokenUrl=e.imdsV2SessionTokenUrl,this.additionalGaxiosOptions=e.additionalGaxiosOptions}async getAwsRegion(e){if(fe(this,jt,dp))return fe(this,jt,dp);let n=new Headers;if(!fe(this,jt,dp)&&this.imdsV2SessionTokenUrl&&n.set("x-aws-ec2-metadata-token",await Le(this,jt,Yb).call(this,e.transporter)),!this.regionUrl)throw new RangeError('Unable to determine AWS region due to missing "options.credential_source.region_url"');let r={...this.additionalGaxiosOptions,url:this.regionUrl,method:"GET",headers:n};fp.AuthClient.setMethodName(r,"getAwsRegion");let o=await e.transporter.request(r);return o.data.substr(0,o.data.length-1)}async getAwsSecurityCredentials(e){if(fe(this,jt,Xb))return fe(this,jt,Xb);let n=new Headers;this.imdsV2SessionTokenUrl&&n.set("x-aws-ec2-metadata-token",await Le(this,jt,Yb).call(this,e.transporter));let r=await Le(this,jt,$I).call(this,n,e.transporter),o=await Le(this,jt,VI).call(this,r,n,e.transporter);return{accessKeyId:o.AccessKeyId,secretAccessKey:o.SecretAccessKey,token:o.Token}}};jt=new WeakSet,Yb=async function(e){let n={...this.additionalGaxiosOptions,url:this.imdsV2SessionTokenUrl,method:"PUT",headers:{"x-aws-ec2-metadata-token-ttl-seconds":"300"}};return fp.AuthClient.setMethodName(n,"#getImdsV2SessionToken"),(await e.request(n)).data},$I=async function(e,n){if(!this.securityCredentialsUrl)throw new Error('Unable to determine AWS role name due to missing "options.credential_source.url"');let r={...this.additionalGaxiosOptions,url:this.securityCredentialsUrl,method:"GET",headers:e};return fp.AuthClient.setMethodName(r,"#getAwsRoleName"),(await n.request(r)).data},VI=async function(e,n,r){let o={...this.additionalGaxiosOptions,url:`${this.securityCredentialsUrl}/${e}`,headers:n};return fp.AuthClient.setMethodName(o,"#retrieveAwsSecurityCredentials"),(await r.request(o)).data},dp=function(){return process.env.AWS_REGION||process.env.AWS_DEFAULT_REGION||null},Xb=function(){return process.env.AWS_ACCESS_KEY_ID&&process.env.AWS_SECRET_ACCESS_KEY?{accessKeyId:process.env.AWS_ACCESS_KEY_ID,secretAccessKey:process.env.AWS_SECRET_ACCESS_KEY,token:process.env.AWS_SESSION_TOKEN}:null};hp.DefaultAwsSecurityCredentialsSupplier=Kb});var Zb=te(mp=>{"use strict";Object.defineProperty(mp,"__esModule",{value:!0});mp.AwsClient=void 0;var t6=Jb(),n6=Bi(),r6=jI(),WI=wr(),o6=Ut(),pp,Xs=class Xs extends n6.BaseExternalAccountClient{constructor(n){super(n);F(this,"environmentId");F(this,"awsSecurityCredentialsSupplier");F(this,"regionalCredVerificationUrl");F(this,"awsRequestSigner");F(this,"region");let r=(0,WI.originalOrCamelOptions)(n),o=r.get("credential_source"),i=r.get("aws_security_credentials_supplier");if(!o&&!i)throw new Error("A credential source or AWS security credentials supplier must be specified.");if(o&&i)throw new Error("Only one of credential source or AWS security credentials supplier can be specified.");if(i)this.awsSecurityCredentialsSupplier=i,this.regionalCredVerificationUrl=fe(Xs,pp),this.credentialSourceType="programmatic";else{let s=(0,WI.originalOrCamelOptions)(o);this.environmentId=s.get("environment_id");let a=s.get("region_url"),l=s.get("url"),u=s.get("imdsv2_session_token_url");this.awsSecurityCredentialsSupplier=new r6.DefaultAwsSecurityCredentialsSupplier({regionUrl:a,securityCredentialsUrl:l,imdsV2SessionTokenUrl:u}),this.regionalCredVerificationUrl=s.get("regional_cred_verification_url"),this.credentialSourceType="aws",this.validateEnvironmentId()}this.awsRequestSigner=null,this.region=""}validateEnvironmentId(){var r;let n=(r=this.environmentId)==null?void 0:r.match(/^(aws)(\d+)$/);if(!n||!this.regionalCredVerificationUrl)throw new Error('No valid AWS "credential_source" provided');if(parseInt(n[2],10)!==1)throw new Error(`aws version "${n[2]}" is not supported in the current build.`)}async retrieveSubjectToken(){this.awsRequestSigner||(this.region=await this.awsSecurityCredentialsSupplier.getAwsRegion(this.supplierContext),this.awsRequestSigner=new t6.AwsRequestSigner(async()=>this.awsSecurityCredentialsSupplier.getAwsSecurityCredentials(this.supplierContext),this.region));let n=await this.awsRequestSigner.getRequestOptions({...Xs.RETRY_CONFIG,url:this.regionalCredVerificationUrl.replace("{region}",this.region),method:"POST"}),r=[];return o6.Gaxios.mergeHeaders({"x-goog-cloud-target-resource":this.audience},n.headers).forEach((i,s)=>r.push({key:s,value:i})),encodeURIComponent(JSON.stringify({url:n.url,method:n.method,headers:r}))}};pp=new WeakMap,Re(Xs,pp,"https://sts.{region}.amazonaws.com?Action=GetCallerIdentity&Version=2011-06-15"),F(Xs,"AWS_EC2_METADATA_IPV4_ADDRESS","169.254.169.254"),F(Xs,"AWS_EC2_METADATA_IPV6_ADDRESS","fd00:ec2::254");var Qb=Xs;mp.AwsClient=Qb});var ov=te(bt=>{"use strict";Object.defineProperty(bt,"__esModule",{value:!0});bt.InvalidSubjectTokenError=bt.InvalidMessageFieldError=bt.InvalidCodeFieldError=bt.InvalidTokenTypeFieldError=bt.InvalidExpirationTimeFieldError=bt.InvalidSuccessFieldError=bt.InvalidVersionFieldError=bt.ExecutableResponseError=bt.ExecutableResponse=void 0;var gp="urn:ietf:params:oauth:token-type:saml2",ev="urn:ietf:params:oauth:token-type:id_token",tv="urn:ietf:params:oauth:token-type:jwt",nv=class{constructor(e){F(this,"version");F(this,"success");F(this,"expirationTime");F(this,"tokenType");F(this,"errorCode");F(this,"errorMessage");F(this,"subjectToken");if(!e.version)throw new yp("Executable response must contain a 'version' field.");if(e.success===void 0)throw new bp("Executable response must contain a 'success' field.");if(this.version=e.version,this.success=e.success,this.success){if(this.expirationTime=e.expiration_time,this.tokenType=e.token_type,this.tokenType!==gp&&this.tokenType!==ev&&this.tokenType!==tv)throw new vp(`Executable response must contain a 'token_type' field when successful and it must be one of ${ev}, ${tv}, or ${gp}.`);if(this.tokenType===gp){if(!e.saml_response)throw new Kc(`Executable response must contain a 'saml_response' field when token_type=${gp}.`);this.subjectToken=e.saml_response}else{if(!e.id_token)throw new Kc(`Executable response must contain a 'id_token' field when token_type=${ev} or ${tv}.`);this.subjectToken=e.id_token}}else{if(!e.code)throw new wp("Executable response must contain a 'code' field when unsuccessful.");if(!e.message)throw new _p("Executable response must contain a 'message' field when unsuccessful.");this.errorCode=e.code,this.errorMessage=e.message}}isValid(){return!this.isExpired()&&this.success}isExpired(){return this.expirationTime!==void 0&&this.expirationTime<Math.round(Date.now()/1e3)}};bt.ExecutableResponse=nv;var io=class extends Error{constructor(e){super(e),Object.setPrototypeOf(this,new.target.prototype)}};bt.ExecutableResponseError=io;var yp=class extends io{};bt.InvalidVersionFieldError=yp;var bp=class extends io{};bt.InvalidSuccessFieldError=bp;var rv=class extends io{};bt.InvalidExpirationTimeFieldError=rv;var vp=class extends io{};bt.InvalidTokenTypeFieldError=vp;var wp=class extends io{};bt.InvalidCodeFieldError=wp;var _p=class extends io{};bt.InvalidMessageFieldError=_p;var Kc=class extends io{};bt.InvalidSubjectTokenError=Kc});var av=te(Kl=>{"use strict";Object.defineProperty(Kl,"__esModule",{value:!0});Kl.PluggableAuthHandler=Kl.ExecutableError=void 0;var Qs=ov(),i6=require("child_process"),iv=require("fs"),Ep=class extends Error{constructor(n,r){super(`The executable failed with exit code: ${r} and error message: ${n}.`);F(this,"code");this.code=r,Object.setPrototypeOf(this,new.target.prototype)}};Kl.ExecutableError=Ep;var sv=class t{constructor(e){F(this,"commandComponents");F(this,"timeoutMillis");F(this,"outputFile");if(!e.command)throw new Error("No command provided.");if(this.commandComponents=t.parseCommand(e.command),this.timeoutMillis=e.timeoutMillis,!this.timeoutMillis)throw new Error("No timeoutMillis provided.");this.outputFile=e.outputFile}retrieveResponseFromExecutable(e){return new Promise((n,r)=>{let o=i6.spawn(this.commandComponents[0],this.commandComponents.slice(1),{env:{...process.env,...Object.fromEntries(e)}}),i="";o.stdout.on("data",a=>{i+=a}),o.stderr.on("data",a=>{i+=a});let s=setTimeout(()=>(o.removeAllListeners(),o.kill(),r(new Error("The executable failed to finish within the timeout specified."))),this.timeoutMillis);o.on("close",a=>{if(clearTimeout(s),a===0)try{let l=JSON.parse(i),u=new Qs.ExecutableResponse(l);return n(u)}catch(l){return l instanceof Qs.ExecutableResponseError?r(l):r(new Qs.ExecutableResponseError(`The executable returned an invalid response: ${i}`))}else return r(new Ep(i,a.toString()))})})}async retrieveCachedResponse(){if(!this.outputFile||this.outputFile.length===0)return;let e;try{e=await iv.promises.realpath(this.outputFile)}catch(r){return}if(!(await iv.promises.lstat(e)).isFile())return;let n=await iv.promises.readFile(e,{encoding:"utf8"});if(n!=="")try{let r=JSON.parse(n);return new Qs.ExecutableResponse(r).isValid()?new Qs.ExecutableResponse(r):void 0}catch(r){throw r instanceof Qs.ExecutableResponseError?r:new Qs.ExecutableResponseError(`The output file contained an invalid response: ${n}`)}}static parseCommand(e){let n=e.match(/(?:[^\s"]+|"[^"]*")+/g);if(!n)throw new Error(`Provided command: "${e}" could not be parsed.`);for(let r=0;r<n.length;r++)n[r][0]==='"'&&n[r].slice(-1)==='"'&&(n[r]=n[r].slice(1,-1));return n}};Kl.PluggableAuthHandler=sv});var uv=te(Yl=>{"use strict";Object.defineProperty(Yl,"__esModule",{value:!0});Yl.PluggableAuthClient=Yl.ExecutableError=void 0;var s6=Bi(),a6=ov(),zI=av(),l6=av();Object.defineProperty(Yl,"ExecutableError",{enumerable:!0,get:function(){return l6.ExecutableError}});var u6=30*1e3,JI=5*1e3,KI=120*1e3,c6="GOOGLE_EXTERNAL_ACCOUNT_ALLOW_EXECUTABLES",YI=1,lv=class extends s6.BaseExternalAccountClient{constructor(n){super(n);F(this,"command");F(this,"timeoutMillis");F(this,"outputFile");F(this,"handler");if(!n.credential_source.executable)throw new Error('No valid Pluggable Auth "credential_source" provided.');if(this.command=n.credential_source.executable.command,!this.command)throw new Error('No valid Pluggable Auth "credential_source" provided.');if(n.credential_source.executable.timeout_millis===void 0)this.timeoutMillis=u6;else if(this.timeoutMillis=n.credential_source.executable.timeout_millis,this.timeoutMillis<JI||this.timeoutMillis>KI)throw new Error(`Timeout must be between ${JI} and ${KI} milliseconds.`);this.outputFile=n.credential_source.executable.output_file,this.handler=new zI.PluggableAuthHandler({command:this.command,timeoutMillis:this.timeoutMillis,outputFile:this.outputFile}),this.credentialSourceType="executable"}async retrieveSubjectToken(){if(process.env[c6]!=="1")throw new Error("Pluggable Auth executables need to be explicitly allowed to run by setting the GOOGLE_EXTERNAL_ACCOUNT_ALLOW_EXECUTABLES environment Variable to 1.");let n;if(this.outputFile&&(n=await this.handler.retrieveCachedResponse()),!n){let r=new Map;r.set("GOOGLE_EXTERNAL_ACCOUNT_AUDIENCE",this.audience),r.set("GOOGLE_EXTERNAL_ACCOUNT_TOKEN_TYPE",this.subjectTokenType),r.set("GOOGLE_EXTERNAL_ACCOUNT_INTERACTIVE","0"),this.outputFile&&r.set("GOOGLE_EXTERNAL_ACCOUNT_OUTPUT_FILE",this.outputFile);let o=this.getServiceAccountEmail();o&&r.set("GOOGLE_EXTERNAL_ACCOUNT_IMPERSONATED_EMAIL",o),n=await this.handler.retrieveResponseFromExecutable(r)}if(n.version>YI)throw new Error(`Version of executable is not currently supported, maximum supported version is ${YI}.`);if(!n.success)throw new zI.ExecutableError(n.errorMessage,n.errorCode);if(this.outputFile&&!n.expirationTime)throw new a6.InvalidExpirationTimeFieldError("The executable response must contain the `expiration_time` field for successful responses when an output_file has been specified in the configuration.");if(n.isExpired())throw new Error("Executable response is expired.");return n.subjectToken}};Yl.PluggableAuthClient=lv});var fv=te(Ap=>{"use strict";Object.defineProperty(Ap,"__esModule",{value:!0});Ap.ExternalAccountClient=void 0;var f6=Bi(),d6=Wb(),h6=Zb(),p6=uv(),cv=class{constructor(){throw new Error("ExternalAccountClients should be initialized via: ExternalAccountClient.fromJSON(), directly via explicit constructors, eg. new AwsClient(options), new IdentityPoolClient(options), newPluggableAuthClientOptions, or via new GoogleAuth(options).getClient()")}static fromJSON(e){var n,r;return e&&e.type===f6.EXTERNAL_ACCOUNT_TYPE?(n=e.credential_source)!=null&&n.environment_id?new h6.AwsClient(e):(r=e.credential_source)!=null&&r.executable?new p6.PluggableAuthClient(e):new d6.IdentityPoolClient(e):null}};Ap.ExternalAccountClient=cv});var mv=te(Xl=>{"use strict";Object.defineProperty(Xl,"__esModule",{value:!0});Xl.ExternalAccountAuthorizedUserClient=Xl.EXTERNAL_ACCOUNT_AUTHORIZED_USER_TYPE=void 0;var QI=Dn(),XI=Ob(),ZI=Ut(),m6=require("stream"),g6=Bi();Xl.EXTERNAL_ACCOUNT_AUTHORIZED_USER_TYPE="external_account_authorized_user";var y6="https://sts.{universeDomain}/v1/oauthtoken",Yc,pv=class pv extends XI.OAuthClientAuthHandler{constructor(n){super(n);Re(this,Yc);qe(this,Yc,n.tokenRefreshEndpoint)}async refreshToken(n,r){let o={...pv.RETRY_CONFIG,url:fe(this,Yc),method:"POST",headers:r,data:new URLSearchParams({grant_type:"refresh_token",refresh_token:n})};QI.AuthClient.setMethodName(o,"refreshToken"),this.applyClientAuthenticationOptions(o);try{let i=await this.transporter.request(o),s=i.data;return s.res=i,s}catch(i){throw i instanceof ZI.GaxiosError&&i.response?(0,XI.getErrorFromOAuthErrorResponse)(i.response.data,i):i}}};Yc=new WeakMap;var dv=pv,hv=class extends QI.AuthClient{constructor(n){var o;super(n);F(this,"cachedAccessToken");F(this,"externalAccountAuthorizedUserHandler");F(this,"refreshToken");n.universe_domain&&(this.universeDomain=n.universe_domain),this.refreshToken=n.refresh_token;let r={confidentialClientType:"basic",clientId:n.client_id,clientSecret:n.client_secret};this.externalAccountAuthorizedUserHandler=new dv({tokenRefreshEndpoint:(o=n.token_url)!=null?o:y6.replace("{universeDomain}",this.universeDomain),transporter:this.transporter,clientAuthentication:r}),this.cachedAccessToken=null,this.quotaProjectId=n.quota_project_id,typeof(n==null?void 0:n.eagerRefreshThresholdMillis)!="number"?this.eagerRefreshThresholdMillis=g6.EXPIRATION_TIME_OFFSET:this.eagerRefreshThresholdMillis=n.eagerRefreshThresholdMillis,this.forceRefreshOnFailure=!!(n!=null&&n.forceRefreshOnFailure)}async getAccessToken(){return(!this.cachedAccessToken||this.isExpired(this.cachedAccessToken))&&await this.refreshAccessTokenAsync(),{token:this.cachedAccessToken.access_token,res:this.cachedAccessToken.res}}async getRequestHeaders(){let n=await this.getAccessToken(),r=new Headers({authorization:`Bearer ${n.token}`});return this.addSharedMetadataHeaders(r)}request(n,r){if(r)this.requestAsync(n).then(o=>r(null,o),o=>r(o,o.response));else return this.requestAsync(n)}async requestAsync(n,r=!1){let o;try{let i=await this.getRequestHeaders();n.headers=ZI.Gaxios.mergeHeaders(n.headers),this.addUserProjectAndAuthHeaders(n.headers,i),o=await this.transporter.request(n)}catch(i){let s=i.response;if(s){let a=s.status,l=s.config.data instanceof m6.Readable;if(!r&&(a===401||a===403)&&!l&&this.forceRefreshOnFailure)return await this.refreshAccessTokenAsync(),await this.requestAsync(n,!0)}throw i}return o}async refreshAccessTokenAsync(){let n=await this.externalAccountAuthorizedUserHandler.refreshToken(this.refreshToken);return this.cachedAccessToken={access_token:n.access_token,expiry_date:new Date().getTime()+n.expires_in*1e3,res:n.res},n.refresh_token!==void 0&&(this.refreshToken=n.refresh_token),this.cachedAccessToken}isExpired(n){let r=new Date().getTime();return n.expiry_date?r>=n.expiry_date-this.eagerRefreshThresholdMillis:!1}};Xl.ExternalAccountAuthorizedUserClient=hv});var ox=te(Cr=>{"use strict";Object.defineProperty(Cr,"__esModule",{value:!0});Cr.GoogleAuth=Cr.GoogleAuthExceptionMessages=void 0;var b6=require("child_process"),Xc=require("fs"),v6=Ut(),Qc=Mc(),w6=require("os"),gv=require("path"),_6=Fc(),E6=ib(),A6=ab(),C6=lb(),Ql=Pb(),ex=xb(),Zl=Rb(),T6=fv(),Zc=Bi(),yv=Dn(),tx=mv(),nx=wr();Cr.GoogleAuthExceptionMessages={API_KEY_WITH_CREDENTIALS:"API Keys and Credentials are mutually exclusive authentication methods and cannot be used together.",NO_PROJECT_ID_FOUND:`Unable to detect a Project Id in the current environment. 
To learn more about authentication and Google APIs, visit: 
https://cloud.google.com/docs/authentication/getting-started`,NO_CREDENTIALS_FOUND:`Unable to find credentials in current environment. 
To learn more about authentication and Google APIs, visit: 
https://cloud.google.com/docs/authentication/getting-started`,NO_ADC_FOUND:"Could not load the default credentials. Browse to https://cloud.google.com/docs/authentication/getting-started for more information.",NO_UNIVERSE_DOMAIN_FOUND:`Unable to detect a Universe Domain in the current environment.
To learn more about Universe Domain retrieval, visit: 
https://cloud.google.com/compute/docs/metadata/predefined-metadata-keys`};var Zs,so,eu,rx,bv=class{constructor(e={}){Re(this,so);F(this,"checkIsGCE");F(this,"useJWTAccessWithScope");F(this,"defaultServicePath");F(this,"_findProjectIdPromise");F(this,"_cachedProjectId");F(this,"jsonContent",null);F(this,"apiKey");F(this,"cachedCredential",null);Re(this,Zs,null);F(this,"defaultScopes");F(this,"keyFilename");F(this,"scopes");F(this,"clientOptions",{});if(this._cachedProjectId=e.projectId||null,this.cachedCredential=e.authClient||null,this.keyFilename=e.keyFilename||e.keyFile,this.scopes=e.scopes,this.clientOptions=e.clientOptions||{},this.jsonContent=e.credentials||null,this.apiKey=e.apiKey||this.clientOptions.apiKey||null,this.apiKey&&(this.jsonContent||this.clientOptions.credentials))throw new RangeError(Cr.GoogleAuthExceptionMessages.API_KEY_WITH_CREDENTIALS);e.universeDomain&&(this.clientOptions.universeDomain=e.universeDomain)}get isGCE(){return this.checkIsGCE}setGapicJWTValues(e){e.defaultServicePath=this.defaultServicePath,e.useJWTAccessWithScope=this.useJWTAccessWithScope,e.defaultScopes=this.defaultScopes}getProjectId(e){if(e)this.getProjectIdAsync().then(n=>e(null,n),e);else return this.getProjectIdAsync()}async getProjectIdOptional(){try{return await this.getProjectId()}catch(e){if(e instanceof Error&&e.message===Cr.GoogleAuthExceptionMessages.NO_PROJECT_ID_FOUND)return null;throw e}}async findAndCacheProjectId(){let e=null;if(e||(e=await this.getProductionProjectId()),e||(e=await this.getFileProjectId()),e||(e=await this.getDefaultServiceProjectId()),e||(e=await this.getGCEProjectId()),e||(e=await this.getExternalAccountClientProjectId()),e)return this._cachedProjectId=e,e;throw new Error(Cr.GoogleAuthExceptionMessages.NO_PROJECT_ID_FOUND)}async getProjectIdAsync(){return this._cachedProjectId?this._cachedProjectId:(this._findProjectIdPromise||(this._findProjectIdPromise=this.findAndCacheProjectId()),this._findProjectIdPromise)}async getUniverseDomainFromMetadataServer(){var n;let e;try{e=await Qc.universe("universe-domain"),e||(e=yv.DEFAULT_UNIVERSE)}catch(r){if(r&&((n=r==null?void 0:r.response)==null?void 0:n.status)===404)e=yv.DEFAULT_UNIVERSE;else throw r}return e}async getUniverseDomain(){let e=(0,nx.originalOrCamelOptions)(this.clientOptions).get("universe_domain");try{e!=null||(e=(await this.getClient()).universeDomain)}catch(n){e!=null||(e=yv.DEFAULT_UNIVERSE)}return e}getAnyScopes(){return this.scopes||this.defaultScopes}getApplicationDefault(e={},n){let r;if(typeof e=="function"?n=e:r=e,n)this.getApplicationDefaultAsync(r).then(o=>n(null,o.credential,o.projectId),n);else return this.getApplicationDefaultAsync(r)}async getApplicationDefaultAsync(e={}){if(this.cachedCredential)return await Le(this,so,eu).call(this,this.cachedCredential,null);let n;if(n=await this._tryGetApplicationCredentialsFromEnvironmentVariable(e),n)return n instanceof Ql.JWT?n.scopes=this.scopes:n instanceof Zc.BaseExternalAccountClient&&(n.scopes=this.getAnyScopes()),await Le(this,so,eu).call(this,n);if(n=await this._tryGetApplicationCredentialsFromWellKnownFile(e),n)return n instanceof Ql.JWT?n.scopes=this.scopes:n instanceof Zc.BaseExternalAccountClient&&(n.scopes=this.getAnyScopes()),await Le(this,so,eu).call(this,n);if(await this._checkIsGCE())return e.scopes=this.getAnyScopes(),await Le(this,so,eu).call(this,new E6.Compute(e));throw new Error(Cr.GoogleAuthExceptionMessages.NO_ADC_FOUND)}async _checkIsGCE(){return this.checkIsGCE===void 0&&(this.checkIsGCE=Qc.getGCPResidency()||await Qc.isAvailable()),this.checkIsGCE}async _tryGetApplicationCredentialsFromEnvironmentVariable(e){let n=process.env.GOOGLE_APPLICATION_CREDENTIALS||process.env.google_application_credentials;if(!n||n.length===0)return null;try{return this._getApplicationCredentialsFromFilePath(n,e)}catch(r){throw r instanceof Error&&(r.message=`Unable to read the credential file specified by the GOOGLE_APPLICATION_CREDENTIALS environment variable: ${r.message}`),r}}async _tryGetApplicationCredentialsFromWellKnownFile(e){let n=null;if(this._isWindows())n=process.env.APPDATA;else{let o=process.env.HOME;o&&(n=gv.join(o,".config"))}return n&&(n=gv.join(n,"gcloud","application_default_credentials.json"),Xc.existsSync(n)||(n=null)),n?await this._getApplicationCredentialsFromFilePath(n,e):null}async _getApplicationCredentialsFromFilePath(e,n={}){if(!e||e.length===0)throw new Error("The file path is invalid.");try{if(e=Xc.realpathSync(e),!Xc.lstatSync(e).isFile())throw new Error}catch(o){throw o instanceof Error&&(o.message=`The file at ${e} does not exist, or it is not a file. ${o.message}`),o}let r=Xc.createReadStream(e);return this.fromStream(r,n)}fromImpersonatedJSON(e){var i,s,a,l;if(!e)throw new Error("Must pass in a JSON object containing an  impersonated refresh token");if(e.type!==Zl.IMPERSONATED_ACCOUNT_TYPE)throw new Error(`The incoming JSON object does not have the "${Zl.IMPERSONATED_ACCOUNT_TYPE}" type`);if(!e.source_credentials)throw new Error("The incoming JSON object does not contain a source_credentials field");if(!e.service_account_impersonation_url)throw new Error("The incoming JSON object does not contain a service_account_impersonation_url field");let n=this.fromJSON(e.source_credentials);if(((i=e.service_account_impersonation_url)==null?void 0:i.length)>256)throw new RangeError(`Target principal is too long: ${e.service_account_impersonation_url}`);let r=(a=(s=/(?<target>[^/]+):(generateAccessToken|generateIdToken)$/.exec(e.service_account_impersonation_url))==null?void 0:s.groups)==null?void 0:a.target;if(!r)throw new RangeError(`Cannot extract target principal from ${e.service_account_impersonation_url}`);let o=(l=this.scopes||e.scopes||this.defaultScopes)!=null?l:[];return new Zl.Impersonated({...e,sourceClient:n,targetPrincipal:r,targetScopes:Array.isArray(o)?o:[o]})}fromJSON(e,n={}){let r,o=(0,nx.originalOrCamelOptions)(n).get("universe_domain");return e.type===ex.USER_REFRESH_ACCOUNT_TYPE?(r=new ex.UserRefreshClient(n),r.fromJSON(e)):e.type===Zl.IMPERSONATED_ACCOUNT_TYPE?r=this.fromImpersonatedJSON(e):e.type===Zc.EXTERNAL_ACCOUNT_TYPE?(r=T6.ExternalAccountClient.fromJSON({...e,...n}),r.scopes=this.getAnyScopes()):e.type===tx.EXTERNAL_ACCOUNT_AUTHORIZED_USER_TYPE?r=new tx.ExternalAccountAuthorizedUserClient({...e,...n}):(n.scopes=this.scopes,r=new Ql.JWT(n),this.setGapicJWTValues(r),r.fromJSON(e)),o&&(r.universeDomain=o),r}_cacheClientFromJSON(e,n){let r=this.fromJSON(e,n);return this.jsonContent=e,this.cachedCredential=r,r}fromStream(e,n={},r){let o={};if(typeof n=="function"?r=n:o=n,r)this.fromStreamAsync(e,o).then(i=>r(null,i),r);else return this.fromStreamAsync(e,o)}fromStreamAsync(e,n){return new Promise((r,o)=>{if(!e)throw new Error("Must pass in a stream containing the Google auth settings.");let i=[];e.setEncoding("utf8").on("error",o).on("data",s=>i.push(s)).on("end",()=>{try{try{let s=JSON.parse(i.join("")),a=this._cacheClientFromJSON(s,n);return r(a)}catch(s){if(!this.keyFilename)throw s;let a=new Ql.JWT({...this.clientOptions,keyFile:this.keyFilename});return this.cachedCredential=a,this.setGapicJWTValues(a),r(a)}}catch(s){return o(s)}})})}fromAPIKey(e,n={}){return new Ql.JWT({...n,apiKey:e})}_isWindows(){let e=w6.platform();return!!(e&&e.length>=3&&e.substring(0,3).toLowerCase()==="win")}async getDefaultServiceProjectId(){return new Promise(e=>{(0,b6.exec)("gcloud config config-helper --format json",(n,r)=>{if(!n&&r)try{let o=JSON.parse(r).configuration.properties.core.project;e(o);return}catch(o){}e(null)})})}getProductionProjectId(){return process.env.GCLOUD_PROJECT||process.env.GOOGLE_CLOUD_PROJECT||process.env.gcloud_project||process.env.google_cloud_project}async getFileProjectId(){if(this.cachedCredential)return this.cachedCredential.projectId;if(this.keyFilename){let n=await this.getClient();if(n&&n.projectId)return n.projectId}let e=await this._tryGetApplicationCredentialsFromEnvironmentVariable();return e?e.projectId:null}async getExternalAccountClientProjectId(){return!this.jsonContent||this.jsonContent.type!==Zc.EXTERNAL_ACCOUNT_TYPE?null:await(await this.getClient()).getProjectId()}async getGCEProjectId(){try{return await Qc.project("project-id")}catch(e){return null}}getCredentials(e){if(e)this.getCredentialsAsync().then(n=>e(null,n),e);else return this.getCredentialsAsync()}async getCredentialsAsync(){let e=await this.getClient();if(e instanceof Zl.Impersonated)return{client_email:e.getTargetPrincipal()};if(e instanceof Zc.BaseExternalAccountClient){let n=e.getServiceAccountEmail();if(n)return{client_email:n,universe_domain:e.universeDomain}}if(this.jsonContent)return{client_email:this.jsonContent.client_email,private_key:this.jsonContent.private_key,universe_domain:this.jsonContent.universe_domain};if(await this._checkIsGCE()){let[n,r]=await Promise.all([Qc.instance("service-accounts/default/email"),this.getUniverseDomain()]);return{client_email:n,universe_domain:r}}throw new Error(Cr.GoogleAuthExceptionMessages.NO_CREDENTIALS_FOUND)}async getClient(){if(this.cachedCredential)return this.cachedCredential;qe(this,Zs,fe(this,Zs)||Le(this,so,rx).call(this));try{return await fe(this,Zs)}finally{qe(this,Zs,null)}}async getIdTokenClient(e){let n=await this.getClient();if(!("fetchIdToken"in n))throw new Error("Cannot fetch ID token in this environment, use GCE or set the GOOGLE_APPLICATION_CREDENTIALS environment variable to a service account credentials JSON file.");return new A6.IdTokenClient({targetAudience:e,idTokenProvider:n})}async getAccessToken(){return(await(await this.getClient()).getAccessToken()).token}async getRequestHeaders(e){return(await this.getClient()).getRequestHeaders(e)}async authorizeRequest(e={}){let n=e.url,o=await(await this.getClient()).getRequestHeaders(n);return e.headers=v6.Gaxios.mergeHeaders(e.headers,o),e}async fetch(...e){return(await this.getClient()).fetch(...e)}async request(e){return(await this.getClient()).request(e)}getEnv(){return(0,C6.getEnv)()}async sign(e,n){let r=await this.getClient(),o=await this.getUniverseDomain();if(n=n||`https://iamcredentials.${o}/v1/projects/-/serviceAccounts/`,r instanceof Zl.Impersonated)return(await r.sign(e)).signedBlob;let i=(0,_6.createCrypto)();if(r instanceof Ql.JWT&&r.key)return await i.sign(r.key,e);let s=await this.getCredentials();if(!s.client_email)throw new Error("Cannot sign data without `client_email`.");return this.signBlob(i,s.client_email,e,n)}async signBlob(e,n,r,o){let i=new URL(o+`${n}:signBlob`);return(await this.request({method:"POST",url:i.href,data:{payload:e.encodeBase64StringUtf8(r)},retry:!0,retryConfig:{httpMethodsToRetry:["POST"]}})).data.signedBlob}};Zs=new WeakMap,so=new WeakSet,eu=async function(e,n=process.env.GOOGLE_CLOUD_QUOTA_PROJECT||null){let r=await this.getProjectIdOptional();return n&&(e.quotaProjectId=n),this.cachedCredential=e,{credential:e,projectId:r}},rx=async function(){if(this.jsonContent)return this._cacheClientFromJSON(this.jsonContent,this.clientOptions);if(this.keyFilename){let e=gv.resolve(this.keyFilename),n=Xc.createReadStream(e);return await this.fromStreamAsync(n,this.clientOptions)}else if(this.apiKey){let e=await this.fromAPIKey(this.apiKey,this.clientOptions);e.scopes=this.scopes;let{credential:n}=await Le(this,so,eu).call(this,e);return n}else{let{credential:e}=await this.getApplicationDefaultAsync(this.clientOptions);return e}};Cr.GoogleAuth=bv});var ix=te(Cp=>{"use strict";Object.defineProperty(Cp,"__esModule",{value:!0});Cp.IAMAuth=void 0;var vv=class{constructor(e,n){F(this,"selector");F(this,"token");this.selector=e,this.token=n,this.selector=e,this.token=n}getRequestHeaders(){return{"x-goog-iam-authority-selector":this.selector,"x-goog-iam-authorization-token":this.token}}};Cp.IAMAuth=vv});var sx=te(ao=>{"use strict";Object.defineProperty(ao,"__esModule",{value:!0});ao.DownscopedClient=ao.EXPIRATION_TIME_OFFSET=ao.MAX_ACCESS_BOUNDARY_RULES_COUNT=void 0;var S6=Ut(),P6=require("stream"),wv=Dn(),I6=ep(),x6="urn:ietf:params:oauth:grant-type:token-exchange",k6="urn:ietf:params:oauth:token-type:access_token",R6="urn:ietf:params:oauth:token-type:access_token";ao.MAX_ACCESS_BOUNDARY_RULES_COUNT=10;ao.EXPIRATION_TIME_OFFSET=5*60*1e3;var _v=class extends wv.AuthClient{constructor(n,r={accessBoundary:{accessBoundaryRules:[]}}){super(n instanceof wv.AuthClient?{}:n);F(this,"authClient");F(this,"credentialAccessBoundary");F(this,"cachedDownscopedAccessToken");F(this,"stsCredential");if(n instanceof wv.AuthClient?(this.authClient=n,this.credentialAccessBoundary=r):(this.authClient=n.authClient,this.credentialAccessBoundary=n.credentialAccessBoundary),this.credentialAccessBoundary.accessBoundary.accessBoundaryRules.length===0)throw new Error("At least one access boundary rule needs to be defined.");if(this.credentialAccessBoundary.accessBoundary.accessBoundaryRules.length>ao.MAX_ACCESS_BOUNDARY_RULES_COUNT)throw new Error(`The provided access boundary has more than ${ao.MAX_ACCESS_BOUNDARY_RULES_COUNT} access boundary rules.`);for(let o of this.credentialAccessBoundary.accessBoundary.accessBoundaryRules)if(o.availablePermissions.length===0)throw new Error("At least one permission should be defined in access boundary rules.");this.stsCredential=new I6.StsCredentials({tokenExchangeEndpoint:`https://sts.${this.universeDomain}/v1/token`}),this.cachedDownscopedAccessToken=null}setCredentials(n){if(!n.expiry_date)throw new Error("The access token expiry_date field is missing in the provided credentials.");super.setCredentials(n),this.cachedDownscopedAccessToken=n}async getAccessToken(){return(!this.cachedDownscopedAccessToken||this.isExpired(this.cachedDownscopedAccessToken))&&await this.refreshAccessTokenAsync(),{token:this.cachedDownscopedAccessToken.access_token,expirationTime:this.cachedDownscopedAccessToken.expiry_date,res:this.cachedDownscopedAccessToken.res}}async getRequestHeaders(){let n=await this.getAccessToken(),r=new Headers({authorization:`Bearer ${n.token}`});return this.addSharedMetadataHeaders(r)}request(n,r){if(r)this.requestAsync(n).then(o=>r(null,o),o=>r(o,o.response));else return this.requestAsync(n)}async requestAsync(n,r=!1){let o;try{let i=await this.getRequestHeaders();n.headers=S6.Gaxios.mergeHeaders(n.headers),this.addUserProjectAndAuthHeaders(n.headers,i),o=await this.transporter.request(n)}catch(i){let s=i.response;if(s){let a=s.status,l=s.config.data instanceof P6.Readable;if(!r&&(a===401||a===403)&&!l&&this.forceRefreshOnFailure)return await this.refreshAccessTokenAsync(),await this.requestAsync(n,!0)}throw i}return o}async refreshAccessTokenAsync(){var a;let n=(await this.authClient.getAccessToken()).token,r={grantType:x6,requestedTokenType:k6,subjectToken:n,subjectTokenType:R6},o=await this.stsCredential.exchangeToken(r,void 0,this.credentialAccessBoundary),i=((a=this.authClient.credentials)==null?void 0:a.expiry_date)||null,s=o.expires_in?new Date().getTime()+o.expires_in*1e3:i;return this.cachedDownscopedAccessToken={access_token:o.access_token,expiry_date:s,res:o.res},this.credentials={},Object.assign(this.credentials,this.cachedDownscopedAccessToken),delete this.credentials.res,this.emit("tokens",{refresh_token:null,expiry_date:this.cachedDownscopedAccessToken.expiry_date,access_token:this.cachedDownscopedAccessToken.access_token,token_type:"Bearer",id_token:null}),this.cachedDownscopedAccessToken}isExpired(n){let r=new Date().getTime();return n.expiry_date?r>=n.expiry_date-this.eagerRefreshThresholdMillis:!1}};ao.DownscopedClient=_v});var ax=te(Tp=>{"use strict";Object.defineProperty(Tp,"__esModule",{value:!0});Tp.PassThroughClient=void 0;var N6=Dn(),Ev=class extends N6.AuthClient{async request(e){return this.transporter.request(e)}async getAccessToken(){return{}}async getRequestHeaders(){return new Headers}};Tp.PassThroughClient=Ev});var dx=te(he=>{"use strict";Object.defineProperty(he,"__esModule",{value:!0});he.GoogleAuth=he.auth=he.PassThroughClient=he.ExternalAccountAuthorizedUserClient=he.EXTERNAL_ACCOUNT_AUTHORIZED_USER_TYPE=he.ExecutableError=he.PluggableAuthClient=he.DownscopedClient=he.BaseExternalAccountClient=he.ExternalAccountClient=he.IdentityPoolClient=he.AwsRequestSigner=he.AwsClient=he.UserRefreshClient=he.LoginTicket=he.ClientAuthentication=he.OAuth2Client=he.CodeChallengeMethod=he.Impersonated=he.JWT=he.JWTAccess=he.IdTokenClient=he.IAMAuth=he.GCPEnv=he.Compute=he.DEFAULT_UNIVERSE=he.AuthClient=he.gaxios=he.gcpMetadata=void 0;var lx=ox();Object.defineProperty(he,"GoogleAuth",{enumerable:!0,get:function(){return lx.GoogleAuth}});he.gcpMetadata=Mc();he.gaxios=Ut();var ux=Dn();Object.defineProperty(he,"AuthClient",{enumerable:!0,get:function(){return ux.AuthClient}});Object.defineProperty(he,"DEFAULT_UNIVERSE",{enumerable:!0,get:function(){return ux.DEFAULT_UNIVERSE}});var O6=ib();Object.defineProperty(he,"Compute",{enumerable:!0,get:function(){return O6.Compute}});var D6=lb();Object.defineProperty(he,"GCPEnv",{enumerable:!0,get:function(){return D6.GCPEnv}});var M6=ix();Object.defineProperty(he,"IAMAuth",{enumerable:!0,get:function(){return M6.IAMAuth}});var F6=ab();Object.defineProperty(he,"IdTokenClient",{enumerable:!0,get:function(){return F6.IdTokenClient}});var L6=Tb();Object.defineProperty(he,"JWTAccess",{enumerable:!0,get:function(){return L6.JWTAccess}});var U6=Pb();Object.defineProperty(he,"JWT",{enumerable:!0,get:function(){return U6.JWT}});var B6=Rb();Object.defineProperty(he,"Impersonated",{enumerable:!0,get:function(){return B6.Impersonated}});var Av=Ks();Object.defineProperty(he,"CodeChallengeMethod",{enumerable:!0,get:function(){return Av.CodeChallengeMethod}});Object.defineProperty(he,"OAuth2Client",{enumerable:!0,get:function(){return Av.OAuth2Client}});Object.defineProperty(he,"ClientAuthentication",{enumerable:!0,get:function(){return Av.ClientAuthentication}});var G6=tb();Object.defineProperty(he,"LoginTicket",{enumerable:!0,get:function(){return G6.LoginTicket}});var H6=xb();Object.defineProperty(he,"UserRefreshClient",{enumerable:!0,get:function(){return H6.UserRefreshClient}});var q6=Zb();Object.defineProperty(he,"AwsClient",{enumerable:!0,get:function(){return q6.AwsClient}});var $6=Jb();Object.defineProperty(he,"AwsRequestSigner",{enumerable:!0,get:function(){return $6.AwsRequestSigner}});var V6=Wb();Object.defineProperty(he,"IdentityPoolClient",{enumerable:!0,get:function(){return V6.IdentityPoolClient}});var j6=fv();Object.defineProperty(he,"ExternalAccountClient",{enumerable:!0,get:function(){return j6.ExternalAccountClient}});var W6=Bi();Object.defineProperty(he,"BaseExternalAccountClient",{enumerable:!0,get:function(){return W6.BaseExternalAccountClient}});var z6=sx();Object.defineProperty(he,"DownscopedClient",{enumerable:!0,get:function(){return z6.DownscopedClient}});var cx=uv();Object.defineProperty(he,"PluggableAuthClient",{enumerable:!0,get:function(){return cx.PluggableAuthClient}});Object.defineProperty(he,"ExecutableError",{enumerable:!0,get:function(){return cx.ExecutableError}});var fx=mv();Object.defineProperty(he,"EXTERNAL_ACCOUNT_AUTHORIZED_USER_TYPE",{enumerable:!0,get:function(){return fx.EXTERNAL_ACCOUNT_AUTHORIZED_USER_TYPE}});Object.defineProperty(he,"ExternalAccountAuthorizedUserClient",{enumerable:!0,get:function(){return fx.ExternalAccountAuthorizedUserClient}});var J6=ax();Object.defineProperty(he,"PassThroughClient",{enumerable:!0,get:function(){return J6.PassThroughClient}});var K6=new lx.GoogleAuth;he.auth=K6});var Ho=te((Bbe,mx)=>{"use strict";var hx=["nodebuffer","arraybuffer","fragments"],px=typeof Blob!="undefined";px&&hx.push("blob");mx.exports={BINARY_TYPES:hx,EMPTY_BUFFER:Buffer.alloc(0),GUID:"258EAFA5-E914-47DA-95CA-C5AB0DC85B11",hasBlob:px,kForOnEventAttribute:Symbol("kIsForOnEventAttribute"),kListener:Symbol("kListener"),kStatusCode:Symbol("status-code"),kWebSocket:Symbol("websocket"),NOOP:()=>{}}});var ef=te((Gbe,Sp)=>{"use strict";var{EMPTY_BUFFER:Y6}=Ho(),Cv=Buffer[Symbol.species];function X6(t,e){if(t.length===0)return Y6;if(t.length===1)return t[0];let n=Buffer.allocUnsafe(e),r=0;for(let o=0;o<t.length;o++){let i=t[o];n.set(i,r),r+=i.length}return r<e?new Cv(n.buffer,n.byteOffset,r):n}function gx(t,e,n,r,o){for(let i=0;i<o;i++)n[r+i]=t[i]^e[i&3]}function yx(t,e){for(let n=0;n<t.length;n++)t[n]^=e[n&3]}function Q6(t){return t.length===t.buffer.byteLength?t.buffer:t.buffer.slice(t.byteOffset,t.byteOffset+t.length)}function Tv(t){if(Tv.readOnly=!0,Buffer.isBuffer(t))return t;let e;return t instanceof ArrayBuffer?e=new Cv(t):ArrayBuffer.isView(t)?e=new Cv(t.buffer,t.byteOffset,t.byteLength):(e=Buffer.from(t),Tv.readOnly=!1),e}Sp.exports={concat:X6,mask:gx,toArrayBuffer:Q6,toBuffer:Tv,unmask:yx};if(!process.env.WS_NO_BUFFER_UTIL)try{let t=require("bufferutil");Sp.exports.mask=function(e,n,r,o,i){i<48?gx(e,n,r,o,i):t.mask(e,n,r,o,i)},Sp.exports.unmask=function(e,n){e.length<32?yx(e,n):t.unmask(e,n)}}catch(t){}});var wx=te((Hbe,vx)=>{"use strict";var bx=Symbol("kDone"),Sv=Symbol("kRun"),Pv=class{constructor(e){this[bx]=()=>{this.pending--,this[Sv]()},this.concurrency=e||1/0,this.jobs=[],this.pending=0}add(e){this.jobs.push(e),this[Sv]()}[Sv](){if(this.pending!==this.concurrency&&this.jobs.length){let e=this.jobs.shift();this.pending++,e(this[bx])}}};vx.exports=Pv});var rf=te((qbe,Cx)=>{"use strict";var tf=require("zlib"),_x=ef(),Z6=wx(),{kStatusCode:Ex}=Ho(),ej=Buffer[Symbol.species],tj=Buffer.from([0,0,255,255]),xp=Symbol("permessage-deflate"),qo=Symbol("total-length"),nf=Symbol("callback"),Gi=Symbol("buffers"),Ip=Symbol("error"),Pp,Iv=class{constructor(e,n,r){if(this._maxPayload=r|0,this._options=e||{},this._threshold=this._options.threshold!==void 0?this._options.threshold:1024,this._isServer=!!n,this._deflate=null,this._inflate=null,this.params=null,!Pp){let o=this._options.concurrencyLimit!==void 0?this._options.concurrencyLimit:10;Pp=new Z6(o)}}static get extensionName(){return"permessage-deflate"}offer(){let e={};return this._options.serverNoContextTakeover&&(e.server_no_context_takeover=!0),this._options.clientNoContextTakeover&&(e.client_no_context_takeover=!0),this._options.serverMaxWindowBits&&(e.server_max_window_bits=this._options.serverMaxWindowBits),this._options.clientMaxWindowBits?e.client_max_window_bits=this._options.clientMaxWindowBits:this._options.clientMaxWindowBits==null&&(e.client_max_window_bits=!0),e}accept(e){return e=this.normalizeParams(e),this.params=this._isServer?this.acceptAsServer(e):this.acceptAsClient(e),this.params}cleanup(){if(this._inflate&&(this._inflate.close(),this._inflate=null),this._deflate){let e=this._deflate[nf];this._deflate.close(),this._deflate=null,e&&e(new Error("The deflate stream was closed while data was being processed"))}}acceptAsServer(e){let n=this._options,r=e.find(o=>!(n.serverNoContextTakeover===!1&&o.server_no_context_takeover||o.server_max_window_bits&&(n.serverMaxWindowBits===!1||typeof n.serverMaxWindowBits=="number"&&n.serverMaxWindowBits>o.server_max_window_bits)||typeof n.clientMaxWindowBits=="number"&&!o.client_max_window_bits));if(!r)throw new Error("None of the extension offers can be accepted");return n.serverNoContextTakeover&&(r.server_no_context_takeover=!0),n.clientNoContextTakeover&&(r.client_no_context_takeover=!0),typeof n.serverMaxWindowBits=="number"&&(r.server_max_window_bits=n.serverMaxWindowBits),typeof n.clientMaxWindowBits=="number"?r.client_max_window_bits=n.clientMaxWindowBits:(r.client_max_window_bits===!0||n.clientMaxWindowBits===!1)&&delete r.client_max_window_bits,r}acceptAsClient(e){let n=e[0];if(this._options.clientNoContextTakeover===!1&&n.client_no_context_takeover)throw new Error('Unexpected parameter "client_no_context_takeover"');if(!n.client_max_window_bits)typeof this._options.clientMaxWindowBits=="number"&&(n.client_max_window_bits=this._options.clientMaxWindowBits);else if(this._options.clientMaxWindowBits===!1||typeof this._options.clientMaxWindowBits=="number"&&n.client_max_window_bits>this._options.clientMaxWindowBits)throw new Error('Unexpected or invalid parameter "client_max_window_bits"');return n}normalizeParams(e){return e.forEach(n=>{Object.keys(n).forEach(r=>{let o=n[r];if(o.length>1)throw new Error(`Parameter "${r}" must have only a single value`);if(o=o[0],r==="client_max_window_bits"){if(o!==!0){let i=+o;if(!Number.isInteger(i)||i<8||i>15)throw new TypeError(`Invalid value for parameter "${r}": ${o}`);o=i}else if(!this._isServer)throw new TypeError(`Invalid value for parameter "${r}": ${o}`)}else if(r==="server_max_window_bits"){let i=+o;if(!Number.isInteger(i)||i<8||i>15)throw new TypeError(`Invalid value for parameter "${r}": ${o}`);o=i}else if(r==="client_no_context_takeover"||r==="server_no_context_takeover"){if(o!==!0)throw new TypeError(`Invalid value for parameter "${r}": ${o}`)}else throw new Error(`Unknown parameter "${r}"`);n[r]=o})}),e}decompress(e,n,r){Pp.add(o=>{this._decompress(e,n,(i,s)=>{o(),r(i,s)})})}compress(e,n,r){Pp.add(o=>{this._compress(e,n,(i,s)=>{o(),r(i,s)})})}_decompress(e,n,r){let o=this._isServer?"client":"server";if(!this._inflate){let i=`${o}_max_window_bits`,s=typeof this.params[i]!="number"?tf.Z_DEFAULT_WINDOWBITS:this.params[i];this._inflate=tf.createInflateRaw({...this._options.zlibInflateOptions,windowBits:s}),this._inflate[xp]=this,this._inflate[qo]=0,this._inflate[Gi]=[],this._inflate.on("error",rj),this._inflate.on("data",Ax)}this._inflate[nf]=r,this._inflate.write(e),n&&this._inflate.write(tj),this._inflate.flush(()=>{let i=this._inflate[Ip];if(i){this._inflate.close(),this._inflate=null,r(i);return}let s=_x.concat(this._inflate[Gi],this._inflate[qo]);this._inflate._readableState.endEmitted?(this._inflate.close(),this._inflate=null):(this._inflate[qo]=0,this._inflate[Gi]=[],n&&this.params[`${o}_no_context_takeover`]&&this._inflate.reset()),r(null,s)})}_compress(e,n,r){let o=this._isServer?"server":"client";if(!this._deflate){let i=`${o}_max_window_bits`,s=typeof this.params[i]!="number"?tf.Z_DEFAULT_WINDOWBITS:this.params[i];this._deflate=tf.createDeflateRaw({...this._options.zlibDeflateOptions,windowBits:s}),this._deflate[qo]=0,this._deflate[Gi]=[],this._deflate.on("data",nj)}this._deflate[nf]=r,this._deflate.write(e),this._deflate.flush(tf.Z_SYNC_FLUSH,()=>{if(!this._deflate)return;let i=_x.concat(this._deflate[Gi],this._deflate[qo]);n&&(i=new ej(i.buffer,i.byteOffset,i.length-4)),this._deflate[nf]=null,this._deflate[qo]=0,this._deflate[Gi]=[],n&&this.params[`${o}_no_context_takeover`]&&this._deflate.reset(),r(null,i)})}};Cx.exports=Iv;function nj(t){this[Gi].push(t),this[qo]+=t.length}function Ax(t){if(this[qo]+=t.length,this[xp]._maxPayload<1||this[qo]<=this[xp]._maxPayload){this[Gi].push(t);return}this[Ip]=new RangeError("Max payload size exceeded"),this[Ip].code="WS_ERR_UNSUPPORTED_MESSAGE_LENGTH",this[Ip][Ex]=1009,this.removeListener("data",Ax),this.reset()}function rj(t){this[xp]._inflate=null,t[Ex]=1007,this[nf](t)}});var tu=te(($be,kp)=>{"use strict";var{isUtf8:Tx}=require("buffer"),{hasBlob:oj}=Ho(),ij=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,1,1,1,1,1,0,0,1,1,0,1,1,0,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,1,0,1,0];function sj(t){return t>=1e3&&t<=1014&&t!==1004&&t!==1005&&t!==1006||t>=3e3&&t<=4999}function xv(t){let e=t.length,n=0;for(;n<e;)if((t[n]&128)===0)n++;else if((t[n]&224)===192){if(n+1===e||(t[n+1]&192)!==128||(t[n]&254)===192)return!1;n+=2}else if((t[n]&240)===224){if(n+2>=e||(t[n+1]&192)!==128||(t[n+2]&192)!==128||t[n]===224&&(t[n+1]&224)===128||t[n]===237&&(t[n+1]&224)===160)return!1;n+=3}else if((t[n]&248)===240){if(n+3>=e||(t[n+1]&192)!==128||(t[n+2]&192)!==128||(t[n+3]&192)!==128||t[n]===240&&(t[n+1]&240)===128||t[n]===244&&t[n+1]>143||t[n]>244)return!1;n+=4}else return!1;return!0}function aj(t){return oj&&typeof t=="object"&&typeof t.arrayBuffer=="function"&&typeof t.type=="string"&&typeof t.stream=="function"&&(t[Symbol.toStringTag]==="Blob"||t[Symbol.toStringTag]==="File")}kp.exports={isBlob:aj,isValidStatusCode:sj,isValidUTF8:xv,tokenChars:ij};if(Tx)kp.exports.isValidUTF8=function(t){return t.length<24?xv(t):Tx(t)};else if(!process.env.WS_NO_UTF_8_VALIDATE)try{let t=require("utf-8-validate");kp.exports.isValidUTF8=function(e){return e.length<32?xv(e):t(e)}}catch(t){}});var Dv=te((Vbe,Nx)=>{"use strict";var{Writable:lj}=require("stream"),Sx=rf(),{BINARY_TYPES:uj,EMPTY_BUFFER:Px,kStatusCode:cj,kWebSocket:fj}=Ho(),{concat:kv,toArrayBuffer:dj,unmask:hj}=ef(),{isValidStatusCode:pj,isValidUTF8:Ix}=tu(),Rp=Buffer[Symbol.species],tr=0,xx=1,kx=2,Rx=3,Rv=4,Nv=5,Np=6,Ov=class extends lj{constructor(e={}){super(),this._allowSynchronousEvents=e.allowSynchronousEvents!==void 0?e.allowSynchronousEvents:!0,this._binaryType=e.binaryType||uj[0],this._extensions=e.extensions||{},this._isServer=!!e.isServer,this._maxPayload=e.maxPayload|0,this._skipUTF8Validation=!!e.skipUTF8Validation,this[fj]=void 0,this._bufferedBytes=0,this._buffers=[],this._compressed=!1,this._payloadLength=0,this._mask=void 0,this._fragmented=0,this._masked=!1,this._fin=!1,this._opcode=0,this._totalPayloadLength=0,this._messageLength=0,this._fragments=[],this._errored=!1,this._loop=!1,this._state=tr}_write(e,n,r){if(this._opcode===8&&this._state==tr)return r();this._bufferedBytes+=e.length,this._buffers.push(e),this.startLoop(r)}consume(e){if(this._bufferedBytes-=e,e===this._buffers[0].length)return this._buffers.shift();if(e<this._buffers[0].length){let r=this._buffers[0];return this._buffers[0]=new Rp(r.buffer,r.byteOffset+e,r.length-e),new Rp(r.buffer,r.byteOffset,e)}let n=Buffer.allocUnsafe(e);do{let r=this._buffers[0],o=n.length-e;e>=r.length?n.set(this._buffers.shift(),o):(n.set(new Uint8Array(r.buffer,r.byteOffset,e),o),this._buffers[0]=new Rp(r.buffer,r.byteOffset+e,r.length-e)),e-=r.length}while(e>0);return n}startLoop(e){this._loop=!0;do switch(this._state){case tr:this.getInfo(e);break;case xx:this.getPayloadLength16(e);break;case kx:this.getPayloadLength64(e);break;case Rx:this.getMask();break;case Rv:this.getData(e);break;case Nv:case Np:this._loop=!1;return}while(this._loop);this._errored||e()}getInfo(e){if(this._bufferedBytes<2){this._loop=!1;return}let n=this.consume(2);if((n[0]&48)!==0){let o=this.createError(RangeError,"RSV2 and RSV3 must be clear",!0,1002,"WS_ERR_UNEXPECTED_RSV_2_3");e(o);return}let r=(n[0]&64)===64;if(r&&!this._extensions[Sx.extensionName]){let o=this.createError(RangeError,"RSV1 must be clear",!0,1002,"WS_ERR_UNEXPECTED_RSV_1");e(o);return}if(this._fin=(n[0]&128)===128,this._opcode=n[0]&15,this._payloadLength=n[1]&127,this._opcode===0){if(r){let o=this.createError(RangeError,"RSV1 must be clear",!0,1002,"WS_ERR_UNEXPECTED_RSV_1");e(o);return}if(!this._fragmented){let o=this.createError(RangeError,"invalid opcode 0",!0,1002,"WS_ERR_INVALID_OPCODE");e(o);return}this._opcode=this._fragmented}else if(this._opcode===1||this._opcode===2){if(this._fragmented){let o=this.createError(RangeError,`invalid opcode ${this._opcode}`,!0,1002,"WS_ERR_INVALID_OPCODE");e(o);return}this._compressed=r}else if(this._opcode>7&&this._opcode<11){if(!this._fin){let o=this.createError(RangeError,"FIN must be set",!0,1002,"WS_ERR_EXPECTED_FIN");e(o);return}if(r){let o=this.createError(RangeError,"RSV1 must be clear",!0,1002,"WS_ERR_UNEXPECTED_RSV_1");e(o);return}if(this._payloadLength>125||this._opcode===8&&this._payloadLength===1){let o=this.createError(RangeError,`invalid payload length ${this._payloadLength}`,!0,1002,"WS_ERR_INVALID_CONTROL_PAYLOAD_LENGTH");e(o);return}}else{let o=this.createError(RangeError,`invalid opcode ${this._opcode}`,!0,1002,"WS_ERR_INVALID_OPCODE");e(o);return}if(!this._fin&&!this._fragmented&&(this._fragmented=this._opcode),this._masked=(n[1]&128)===128,this._isServer){if(!this._masked){let o=this.createError(RangeError,"MASK must be set",!0,1002,"WS_ERR_EXPECTED_MASK");e(o);return}}else if(this._masked){let o=this.createError(RangeError,"MASK must be clear",!0,1002,"WS_ERR_UNEXPECTED_MASK");e(o);return}this._payloadLength===126?this._state=xx:this._payloadLength===127?this._state=kx:this.haveLength(e)}getPayloadLength16(e){if(this._bufferedBytes<2){this._loop=!1;return}this._payloadLength=this.consume(2).readUInt16BE(0),this.haveLength(e)}getPayloadLength64(e){if(this._bufferedBytes<8){this._loop=!1;return}let n=this.consume(8),r=n.readUInt32BE(0);if(r>Math.pow(2,21)-1){let o=this.createError(RangeError,"Unsupported WebSocket frame: payload length > 2^53 - 1",!1,1009,"WS_ERR_UNSUPPORTED_DATA_PAYLOAD_LENGTH");e(o);return}this._payloadLength=r*Math.pow(2,32)+n.readUInt32BE(4),this.haveLength(e)}haveLength(e){if(this._payloadLength&&this._opcode<8&&(this._totalPayloadLength+=this._payloadLength,this._totalPayloadLength>this._maxPayload&&this._maxPayload>0)){let n=this.createError(RangeError,"Max payload size exceeded",!1,1009,"WS_ERR_UNSUPPORTED_MESSAGE_LENGTH");e(n);return}this._masked?this._state=Rx:this._state=Rv}getMask(){if(this._bufferedBytes<4){this._loop=!1;return}this._mask=this.consume(4),this._state=Rv}getData(e){let n=Px;if(this._payloadLength){if(this._bufferedBytes<this._payloadLength){this._loop=!1;return}n=this.consume(this._payloadLength),this._masked&&(this._mask[0]|this._mask[1]|this._mask[2]|this._mask[3])!==0&&hj(n,this._mask)}if(this._opcode>7){this.controlMessage(n,e);return}if(this._compressed){this._state=Nv,this.decompress(n,e);return}n.length&&(this._messageLength=this._totalPayloadLength,this._fragments.push(n)),this.dataMessage(e)}decompress(e,n){this._extensions[Sx.extensionName].decompress(e,this._fin,(o,i)=>{if(o)return n(o);if(i.length){if(this._messageLength+=i.length,this._messageLength>this._maxPayload&&this._maxPayload>0){let s=this.createError(RangeError,"Max payload size exceeded",!1,1009,"WS_ERR_UNSUPPORTED_MESSAGE_LENGTH");n(s);return}this._fragments.push(i)}this.dataMessage(n),this._state===tr&&this.startLoop(n)})}dataMessage(e){if(!this._fin){this._state=tr;return}let n=this._messageLength,r=this._fragments;if(this._totalPayloadLength=0,this._messageLength=0,this._fragmented=0,this._fragments=[],this._opcode===2){let o;this._binaryType==="nodebuffer"?o=kv(r,n):this._binaryType==="arraybuffer"?o=dj(kv(r,n)):this._binaryType==="blob"?o=new Blob(r):o=r,this._allowSynchronousEvents?(this.emit("message",o,!0),this._state=tr):(this._state=Np,setImmediate(()=>{this.emit("message",o,!0),this._state=tr,this.startLoop(e)}))}else{let o=kv(r,n);if(!this._skipUTF8Validation&&!Ix(o)){let i=this.createError(Error,"invalid UTF-8 sequence",!0,1007,"WS_ERR_INVALID_UTF8");e(i);return}this._state===Nv||this._allowSynchronousEvents?(this.emit("message",o,!1),this._state=tr):(this._state=Np,setImmediate(()=>{this.emit("message",o,!1),this._state=tr,this.startLoop(e)}))}}controlMessage(e,n){if(this._opcode===8){if(e.length===0)this._loop=!1,this.emit("conclude",1005,Px),this.end();else{let r=e.readUInt16BE(0);if(!pj(r)){let i=this.createError(RangeError,`invalid status code ${r}`,!0,1002,"WS_ERR_INVALID_CLOSE_CODE");n(i);return}let o=new Rp(e.buffer,e.byteOffset+2,e.length-2);if(!this._skipUTF8Validation&&!Ix(o)){let i=this.createError(Error,"invalid UTF-8 sequence",!0,1007,"WS_ERR_INVALID_UTF8");n(i);return}this._loop=!1,this.emit("conclude",r,o),this.end()}this._state=tr;return}this._allowSynchronousEvents?(this.emit(this._opcode===9?"ping":"pong",e),this._state=tr):(this._state=Np,setImmediate(()=>{this.emit(this._opcode===9?"ping":"pong",e),this._state=tr,this.startLoop(n)}))}createError(e,n,r,o,i){this._loop=!1,this._errored=!0;let s=new e(r?`Invalid WebSocket frame: ${n}`:n);return Error.captureStackTrace(s,this.createError),s.code=i,s[cj]=o,s}};Nx.exports=Ov});var Lv=te((Wbe,Mx)=>{"use strict";var{Duplex:jbe}=require("stream"),{randomFillSync:mj}=require("crypto"),Ox=rf(),{EMPTY_BUFFER:gj,kWebSocket:yj,NOOP:bj}=Ho(),{isBlob:nu,isValidStatusCode:vj}=tu(),{mask:Dx,toBuffer:ea}=ef(),nr=Symbol("kByteLength"),wj=Buffer.alloc(4),Op=8*1024,ta,ru=Op,Tr=0,_j=1,Ej=2,Mv=class t{constructor(e,n,r){this._extensions=n||{},r&&(this._generateMask=r,this._maskBuffer=Buffer.alloc(4)),this._socket=e,this._firstFragment=!0,this._compress=!1,this._bufferedBytes=0,this._queue=[],this._state=Tr,this.onerror=bj,this[yj]=void 0}static frame(e,n){let r,o=!1,i=2,s=!1;n.mask&&(r=n.maskBuffer||wj,n.generateMask?n.generateMask(r):(ru===Op&&(ta===void 0&&(ta=Buffer.alloc(Op)),mj(ta,0,Op),ru=0),r[0]=ta[ru++],r[1]=ta[ru++],r[2]=ta[ru++],r[3]=ta[ru++]),s=(r[0]|r[1]|r[2]|r[3])===0,i=6);let a;typeof e=="string"?(!n.mask||s)&&n[nr]!==void 0?a=n[nr]:(e=Buffer.from(e),a=e.length):(a=e.length,o=n.mask&&n.readOnly&&!s);let l=a;a>=65536?(i+=8,l=127):a>125&&(i+=2,l=126);let u=Buffer.allocUnsafe(o?a+i:i);return u[0]=n.fin?n.opcode|128:n.opcode,n.rsv1&&(u[0]|=64),u[1]=l,l===126?u.writeUInt16BE(a,2):l===127&&(u[2]=u[3]=0,u.writeUIntBE(a,4,6)),n.mask?(u[1]|=128,u[i-4]=r[0],u[i-3]=r[1],u[i-2]=r[2],u[i-1]=r[3],s?[u,e]:o?(Dx(e,r,u,i,a),[u]):(Dx(e,r,e,0,a),[u,e])):[u,e]}close(e,n,r,o){let i;if(e===void 0)i=gj;else{if(typeof e!="number"||!vj(e))throw new TypeError("First argument must be a valid error code number");if(n===void 0||!n.length)i=Buffer.allocUnsafe(2),i.writeUInt16BE(e,0);else{let a=Buffer.byteLength(n);if(a>123)throw new RangeError("The message must not be greater than 123 bytes");i=Buffer.allocUnsafe(2+a),i.writeUInt16BE(e,0),typeof n=="string"?i.write(n,2):i.set(n,2)}}let s={[nr]:i.length,fin:!0,generateMask:this._generateMask,mask:r,maskBuffer:this._maskBuffer,opcode:8,readOnly:!1,rsv1:!1};this._state!==Tr?this.enqueue([this.dispatch,i,!1,s,o]):this.sendFrame(t.frame(i,s),o)}ping(e,n,r){let o,i;if(typeof e=="string"?(o=Buffer.byteLength(e),i=!1):nu(e)?(o=e.size,i=!1):(e=ea(e),o=e.length,i=ea.readOnly),o>125)throw new RangeError("The data size must not be greater than 125 bytes");let s={[nr]:o,fin:!0,generateMask:this._generateMask,mask:n,maskBuffer:this._maskBuffer,opcode:9,readOnly:i,rsv1:!1};nu(e)?this._state!==Tr?this.enqueue([this.getBlobData,e,!1,s,r]):this.getBlobData(e,!1,s,r):this._state!==Tr?this.enqueue([this.dispatch,e,!1,s,r]):this.sendFrame(t.frame(e,s),r)}pong(e,n,r){let o,i;if(typeof e=="string"?(o=Buffer.byteLength(e),i=!1):nu(e)?(o=e.size,i=!1):(e=ea(e),o=e.length,i=ea.readOnly),o>125)throw new RangeError("The data size must not be greater than 125 bytes");let s={[nr]:o,fin:!0,generateMask:this._generateMask,mask:n,maskBuffer:this._maskBuffer,opcode:10,readOnly:i,rsv1:!1};nu(e)?this._state!==Tr?this.enqueue([this.getBlobData,e,!1,s,r]):this.getBlobData(e,!1,s,r):this._state!==Tr?this.enqueue([this.dispatch,e,!1,s,r]):this.sendFrame(t.frame(e,s),r)}send(e,n,r){let o=this._extensions[Ox.extensionName],i=n.binary?2:1,s=n.compress,a,l;typeof e=="string"?(a=Buffer.byteLength(e),l=!1):nu(e)?(a=e.size,l=!1):(e=ea(e),a=e.length,l=ea.readOnly),this._firstFragment?(this._firstFragment=!1,s&&o&&o.params[o._isServer?"server_no_context_takeover":"client_no_context_takeover"]&&(s=a>=o._threshold),this._compress=s):(s=!1,i=0),n.fin&&(this._firstFragment=!0);let u={[nr]:a,fin:n.fin,generateMask:this._generateMask,mask:n.mask,maskBuffer:this._maskBuffer,opcode:i,readOnly:l,rsv1:s};nu(e)?this._state!==Tr?this.enqueue([this.getBlobData,e,this._compress,u,r]):this.getBlobData(e,this._compress,u,r):this._state!==Tr?this.enqueue([this.dispatch,e,this._compress,u,r]):this.dispatch(e,this._compress,u,r)}getBlobData(e,n,r,o){this._bufferedBytes+=r[nr],this._state=Ej,e.arrayBuffer().then(i=>{if(this._socket.destroyed){let a=new Error("The socket was closed while the blob was being read");process.nextTick(Fv,this,a,o);return}this._bufferedBytes-=r[nr];let s=ea(i);n?this.dispatch(s,n,r,o):(this._state=Tr,this.sendFrame(t.frame(s,r),o),this.dequeue())}).catch(i=>{process.nextTick(Aj,this,i,o)})}dispatch(e,n,r,o){if(!n){this.sendFrame(t.frame(e,r),o);return}let i=this._extensions[Ox.extensionName];this._bufferedBytes+=r[nr],this._state=_j,i.compress(e,r.fin,(s,a)=>{if(this._socket.destroyed){let l=new Error("The socket was closed while data was being compressed");Fv(this,l,o);return}this._bufferedBytes-=r[nr],this._state=Tr,r.readOnly=!1,this.sendFrame(t.frame(a,r),o),this.dequeue()})}dequeue(){for(;this._state===Tr&&this._queue.length;){let e=this._queue.shift();this._bufferedBytes-=e[3][nr],Reflect.apply(e[0],this,e.slice(1))}}enqueue(e){this._bufferedBytes+=e[3][nr],this._queue.push(e)}sendFrame(e,n){e.length===2?(this._socket.cork(),this._socket.write(e[0]),this._socket.write(e[1],n),this._socket.uncork()):this._socket.write(e[0],n)}};Mx.exports=Mv;function Fv(t,e,n){typeof n=="function"&&n(e);for(let r=0;r<t._queue.length;r++){let o=t._queue[r],i=o[o.length-1];typeof i=="function"&&i(e)}}function Aj(t,e,n){Fv(t,e,n),t.onerror(e)}});var Vx=te((zbe,$x)=>{"use strict";var{kForOnEventAttribute:of,kListener:Uv}=Ho(),Fx=Symbol("kCode"),Lx=Symbol("kData"),Ux=Symbol("kError"),Bx=Symbol("kMessage"),Gx=Symbol("kReason"),ou=Symbol("kTarget"),Hx=Symbol("kType"),qx=Symbol("kWasClean"),$o=class{constructor(e){this[ou]=null,this[Hx]=e}get target(){return this[ou]}get type(){return this[Hx]}};Object.defineProperty($o.prototype,"target",{enumerable:!0});Object.defineProperty($o.prototype,"type",{enumerable:!0});var na=class extends $o{constructor(e,n={}){super(e),this[Fx]=n.code===void 0?0:n.code,this[Gx]=n.reason===void 0?"":n.reason,this[qx]=n.wasClean===void 0?!1:n.wasClean}get code(){return this[Fx]}get reason(){return this[Gx]}get wasClean(){return this[qx]}};Object.defineProperty(na.prototype,"code",{enumerable:!0});Object.defineProperty(na.prototype,"reason",{enumerable:!0});Object.defineProperty(na.prototype,"wasClean",{enumerable:!0});var iu=class extends $o{constructor(e,n={}){super(e),this[Ux]=n.error===void 0?null:n.error,this[Bx]=n.message===void 0?"":n.message}get error(){return this[Ux]}get message(){return this[Bx]}};Object.defineProperty(iu.prototype,"error",{enumerable:!0});Object.defineProperty(iu.prototype,"message",{enumerable:!0});var sf=class extends $o{constructor(e,n={}){super(e),this[Lx]=n.data===void 0?null:n.data}get data(){return this[Lx]}};Object.defineProperty(sf.prototype,"data",{enumerable:!0});var Cj={addEventListener(t,e,n={}){for(let o of this.listeners(t))if(!n[of]&&o[Uv]===e&&!o[of])return;let r;if(t==="message")r=function(i,s){let a=new sf("message",{data:s?i:i.toString()});a[ou]=this,Dp(e,this,a)};else if(t==="close")r=function(i,s){let a=new na("close",{code:i,reason:s.toString(),wasClean:this._closeFrameReceived&&this._closeFrameSent});a[ou]=this,Dp(e,this,a)};else if(t==="error")r=function(i){let s=new iu("error",{error:i,message:i.message});s[ou]=this,Dp(e,this,s)};else if(t==="open")r=function(){let i=new $o("open");i[ou]=this,Dp(e,this,i)};else return;r[of]=!!n[of],r[Uv]=e,n.once?this.once(t,r):this.on(t,r)},removeEventListener(t,e){for(let n of this.listeners(t))if(n[Uv]===e&&!n[of]){this.removeListener(t,n);break}}};$x.exports={CloseEvent:na,ErrorEvent:iu,Event:$o,EventTarget:Cj,MessageEvent:sf};function Dp(t,e,n){typeof t=="object"&&t.handleEvent?t.handleEvent.call(t,n):t.call(e,n)}});var Bv=te((Jbe,jx)=>{"use strict";var{tokenChars:af}=tu();function lo(t,e,n){t[e]===void 0?t[e]=[n]:t[e].push(n)}function Tj(t){let e=Object.create(null),n=Object.create(null),r=!1,o=!1,i=!1,s,a,l=-1,u=-1,f=-1,p=0;for(;p<t.length;p++)if(u=t.charCodeAt(p),s===void 0)if(f===-1&&af[u]===1)l===-1&&(l=p);else if(p!==0&&(u===32||u===9))f===-1&&l!==-1&&(f=p);else if(u===59||u===44){if(l===-1)throw new SyntaxError(`Unexpected character at index ${p}`);f===-1&&(f=p);let b=t.slice(l,f);u===44?(lo(e,b,n),n=Object.create(null)):s=b,l=f=-1}else throw new SyntaxError(`Unexpected character at index ${p}`);else if(a===void 0)if(f===-1&&af[u]===1)l===-1&&(l=p);else if(u===32||u===9)f===-1&&l!==-1&&(f=p);else if(u===59||u===44){if(l===-1)throw new SyntaxError(`Unexpected character at index ${p}`);f===-1&&(f=p),lo(n,t.slice(l,f),!0),u===44&&(lo(e,s,n),n=Object.create(null),s=void 0),l=f=-1}else if(u===61&&l!==-1&&f===-1)a=t.slice(l,p),l=f=-1;else throw new SyntaxError(`Unexpected character at index ${p}`);else if(o){if(af[u]!==1)throw new SyntaxError(`Unexpected character at index ${p}`);l===-1?l=p:r||(r=!0),o=!1}else if(i)if(af[u]===1)l===-1&&(l=p);else if(u===34&&l!==-1)i=!1,f=p;else if(u===92)o=!0;else throw new SyntaxError(`Unexpected character at index ${p}`);else if(u===34&&t.charCodeAt(p-1)===61)i=!0;else if(f===-1&&af[u]===1)l===-1&&(l=p);else if(l!==-1&&(u===32||u===9))f===-1&&(f=p);else if(u===59||u===44){if(l===-1)throw new SyntaxError(`Unexpected character at index ${p}`);f===-1&&(f=p);let b=t.slice(l,f);r&&(b=b.replace(/\\/g,""),r=!1),lo(n,a,b),u===44&&(lo(e,s,n),n=Object.create(null),s=void 0),a=void 0,l=f=-1}else throw new SyntaxError(`Unexpected character at index ${p}`);if(l===-1||i||u===32||u===9)throw new SyntaxError("Unexpected end of input");f===-1&&(f=p);let m=t.slice(l,f);return s===void 0?lo(e,m,n):(a===void 0?lo(n,m,!0):r?lo(n,a,m.replace(/\\/g,"")):lo(n,a,m),lo(e,s,n)),e}function Sj(t){return Object.keys(t).map(e=>{let n=t[e];return Array.isArray(n)||(n=[n]),n.map(r=>[e].concat(Object.keys(r).map(o=>{let i=r[o];return Array.isArray(i)||(i=[i]),i.map(s=>s===!0?o:`${o}=${s}`).join("; ")})).join("; ")).join(", ")}).join(", ")}jx.exports={format:Sj,parse:Tj}});var Up=te((Xbe,r1)=>{"use strict";var Pj=require("events"),Ij=require("https"),xj=require("http"),Jx=require("net"),kj=require("tls"),{randomBytes:Rj,createHash:Nj}=require("crypto"),{Duplex:Kbe,Readable:Ybe}=require("stream"),{URL:Gv}=require("url"),Hi=rf(),Oj=Dv(),Dj=Lv(),{isBlob:Mj}=tu(),{BINARY_TYPES:Wx,EMPTY_BUFFER:Mp,GUID:Fj,kForOnEventAttribute:Hv,kListener:Lj,kStatusCode:Uj,kWebSocket:Ot,NOOP:Kx}=Ho(),{EventTarget:{addEventListener:Bj,removeEventListener:Gj}}=Vx(),{format:Hj,parse:qj}=Bv(),{toBuffer:$j}=ef(),Vj=30*1e3,Yx=Symbol("kAborted"),qv=[8,13],Vo=["CONNECTING","OPEN","CLOSING","CLOSED"],jj=/^[!#$%&'*+\-.0-9A-Z^_`|a-z~]+$/,lt=class t extends Pj{constructor(e,n,r){super(),this._binaryType=Wx[0],this._closeCode=1006,this._closeFrameReceived=!1,this._closeFrameSent=!1,this._closeMessage=Mp,this._closeTimer=null,this._errorEmitted=!1,this._extensions={},this._paused=!1,this._protocol="",this._readyState=t.CONNECTING,this._receiver=null,this._sender=null,this._socket=null,e!==null?(this._bufferedAmount=0,this._isServer=!1,this._redirects=0,n===void 0?n=[]:Array.isArray(n)||(typeof n=="object"&&n!==null?(r=n,n=[]):n=[n]),Xx(this,e,n,r)):(this._autoPong=r.autoPong,this._isServer=!0)}get binaryType(){return this._binaryType}set binaryType(e){Wx.includes(e)&&(this._binaryType=e,this._receiver&&(this._receiver._binaryType=e))}get bufferedAmount(){return this._socket?this._socket._writableState.length+this._sender._bufferedBytes:this._bufferedAmount}get extensions(){return Object.keys(this._extensions).join()}get isPaused(){return this._paused}get onclose(){return null}get onerror(){return null}get onopen(){return null}get onmessage(){return null}get protocol(){return this._protocol}get readyState(){return this._readyState}get url(){return this._url}setSocket(e,n,r){let o=new Oj({allowSynchronousEvents:r.allowSynchronousEvents,binaryType:this.binaryType,extensions:this._extensions,isServer:this._isServer,maxPayload:r.maxPayload,skipUTF8Validation:r.skipUTF8Validation}),i=new Dj(e,this._extensions,r.generateMask);this._receiver=o,this._sender=i,this._socket=e,o[Ot]=this,i[Ot]=this,e[Ot]=this,o.on("conclude",Jj),o.on("drain",Kj),o.on("error",Yj),o.on("message",Xj),o.on("ping",Qj),o.on("pong",Zj),i.onerror=eW,e.setTimeout&&e.setTimeout(0),e.setNoDelay&&e.setNoDelay(),n.length>0&&e.unshift(n),e.on("close",e1),e.on("data",Lp),e.on("end",t1),e.on("error",n1),this._readyState=t.OPEN,this.emit("open")}emitClose(){if(!this._socket){this._readyState=t.CLOSED,this.emit("close",this._closeCode,this._closeMessage);return}this._extensions[Hi.extensionName]&&this._extensions[Hi.extensionName].cleanup(),this._receiver.removeAllListeners(),this._readyState=t.CLOSED,this.emit("close",this._closeCode,this._closeMessage)}close(e,n){if(this.readyState!==t.CLOSED){if(this.readyState===t.CONNECTING){Bn(this,this._req,"WebSocket was closed before the connection was established");return}if(this.readyState===t.CLOSING){this._closeFrameSent&&(this._closeFrameReceived||this._receiver._writableState.errorEmitted)&&this._socket.end();return}this._readyState=t.CLOSING,this._sender.close(e,n,!this._isServer,r=>{r||(this._closeFrameSent=!0,(this._closeFrameReceived||this._receiver._writableState.errorEmitted)&&this._socket.end())}),Zx(this)}}pause(){this.readyState===t.CONNECTING||this.readyState===t.CLOSED||(this._paused=!0,this._socket.pause())}ping(e,n,r){if(this.readyState===t.CONNECTING)throw new Error("WebSocket is not open: readyState 0 (CONNECTING)");if(typeof e=="function"?(r=e,e=n=void 0):typeof n=="function"&&(r=n,n=void 0),typeof e=="number"&&(e=e.toString()),this.readyState!==t.OPEN){$v(this,e,r);return}n===void 0&&(n=!this._isServer),this._sender.ping(e||Mp,n,r)}pong(e,n,r){if(this.readyState===t.CONNECTING)throw new Error("WebSocket is not open: readyState 0 (CONNECTING)");if(typeof e=="function"?(r=e,e=n=void 0):typeof n=="function"&&(r=n,n=void 0),typeof e=="number"&&(e=e.toString()),this.readyState!==t.OPEN){$v(this,e,r);return}n===void 0&&(n=!this._isServer),this._sender.pong(e||Mp,n,r)}resume(){this.readyState===t.CONNECTING||this.readyState===t.CLOSED||(this._paused=!1,this._receiver._writableState.needDrain||this._socket.resume())}send(e,n,r){if(this.readyState===t.CONNECTING)throw new Error("WebSocket is not open: readyState 0 (CONNECTING)");if(typeof n=="function"&&(r=n,n={}),typeof e=="number"&&(e=e.toString()),this.readyState!==t.OPEN){$v(this,e,r);return}let o={binary:typeof e!="string",mask:!this._isServer,compress:!0,fin:!0,...n};this._extensions[Hi.extensionName]||(o.compress=!1),this._sender.send(e||Mp,o,r)}terminate(){if(this.readyState!==t.CLOSED){if(this.readyState===t.CONNECTING){Bn(this,this._req,"WebSocket was closed before the connection was established");return}this._socket&&(this._readyState=t.CLOSING,this._socket.destroy())}}};Object.defineProperty(lt,"CONNECTING",{enumerable:!0,value:Vo.indexOf("CONNECTING")});Object.defineProperty(lt.prototype,"CONNECTING",{enumerable:!0,value:Vo.indexOf("CONNECTING")});Object.defineProperty(lt,"OPEN",{enumerable:!0,value:Vo.indexOf("OPEN")});Object.defineProperty(lt.prototype,"OPEN",{enumerable:!0,value:Vo.indexOf("OPEN")});Object.defineProperty(lt,"CLOSING",{enumerable:!0,value:Vo.indexOf("CLOSING")});Object.defineProperty(lt.prototype,"CLOSING",{enumerable:!0,value:Vo.indexOf("CLOSING")});Object.defineProperty(lt,"CLOSED",{enumerable:!0,value:Vo.indexOf("CLOSED")});Object.defineProperty(lt.prototype,"CLOSED",{enumerable:!0,value:Vo.indexOf("CLOSED")});["binaryType","bufferedAmount","extensions","isPaused","protocol","readyState","url"].forEach(t=>{Object.defineProperty(lt.prototype,t,{enumerable:!0})});["open","error","close","message"].forEach(t=>{Object.defineProperty(lt.prototype,`on${t}`,{enumerable:!0,get(){for(let e of this.listeners(t))if(e[Hv])return e[Lj];return null},set(e){for(let n of this.listeners(t))if(n[Hv]){this.removeListener(t,n);break}typeof e=="function"&&this.addEventListener(t,e,{[Hv]:!0})}})});lt.prototype.addEventListener=Bj;lt.prototype.removeEventListener=Gj;r1.exports=lt;function Xx(t,e,n,r){let o={allowSynchronousEvents:!0,autoPong:!0,protocolVersion:qv[1],maxPayload:104857600,skipUTF8Validation:!1,perMessageDeflate:!0,followRedirects:!1,maxRedirects:10,...r,socketPath:void 0,hostname:void 0,protocol:void 0,timeout:void 0,method:"GET",host:void 0,path:void 0,port:void 0};if(t._autoPong=o.autoPong,!qv.includes(o.protocolVersion))throw new RangeError(`Unsupported protocol version: ${o.protocolVersion} (supported versions: ${qv.join(", ")})`);let i;if(e instanceof Gv)i=e;else try{i=new Gv(e)}catch(w){throw new SyntaxError(`Invalid URL: ${e}`)}i.protocol==="http:"?i.protocol="ws:":i.protocol==="https:"&&(i.protocol="wss:"),t._url=i.href;let s=i.protocol==="wss:",a=i.protocol==="ws+unix:",l;if(i.protocol!=="ws:"&&!s&&!a?l=`The URL's protocol must be one of "ws:", "wss:", "http:", "https", or "ws+unix:"`:a&&!i.pathname?l="The URL's pathname is empty":i.hash&&(l="The URL contains a fragment identifier"),l){let w=new SyntaxError(l);if(t._redirects===0)throw w;Fp(t,w);return}let u=s?443:80,f=Rj(16).toString("base64"),p=s?Ij.request:xj.request,m=new Set,b;if(o.createConnection=o.createConnection||(s?zj:Wj),o.defaultPort=o.defaultPort||u,o.port=i.port||u,o.host=i.hostname.startsWith("[")?i.hostname.slice(1,-1):i.hostname,o.headers={...o.headers,"Sec-WebSocket-Version":o.protocolVersion,"Sec-WebSocket-Key":f,Connection:"Upgrade",Upgrade:"websocket"},o.path=i.pathname+i.search,o.timeout=o.handshakeTimeout,o.perMessageDeflate&&(b=new Hi(o.perMessageDeflate!==!0?o.perMessageDeflate:{},!1,o.maxPayload),o.headers["Sec-WebSocket-Extensions"]=Hj({[Hi.extensionName]:b.offer()})),n.length){for(let w of n){if(typeof w!="string"||!jj.test(w)||m.has(w))throw new SyntaxError("An invalid or duplicated subprotocol was specified");m.add(w)}o.headers["Sec-WebSocket-Protocol"]=n.join(",")}if(o.origin&&(o.protocolVersion<13?o.headers["Sec-WebSocket-Origin"]=o.origin:o.headers.Origin=o.origin),(i.username||i.password)&&(o.auth=`${i.username}:${i.password}`),a){let w=o.path.split(":");o.socketPath=w[0],o.path=w[1]}let v;if(o.followRedirects){if(t._redirects===0){t._originalIpc=a,t._originalSecure=s,t._originalHostOrSocketPath=a?o.socketPath:i.host;let w=r&&r.headers;if(r={...r,headers:{}},w)for(let[_,T]of Object.entries(w))r.headers[_.toLowerCase()]=T}else if(t.listenerCount("redirect")===0){let w=a?t._originalIpc?o.socketPath===t._originalHostOrSocketPath:!1:t._originalIpc?!1:i.host===t._originalHostOrSocketPath;(!w||t._originalSecure&&!s)&&(delete o.headers.authorization,delete o.headers.cookie,w||delete o.headers.host,o.auth=void 0)}o.auth&&!r.headers.authorization&&(r.headers.authorization="Basic "+Buffer.from(o.auth).toString("base64")),v=t._req=p(o),t._redirects&&t.emit("redirect",t.url,v)}else v=t._req=p(o);o.timeout&&v.on("timeout",()=>{Bn(t,v,"Opening handshake has timed out")}),v.on("error",w=>{v===null||v[Yx]||(v=t._req=null,Fp(t,w))}),v.on("response",w=>{let _=w.headers.location,T=w.statusCode;if(_&&o.followRedirects&&T>=300&&T<400){if(++t._redirects>o.maxRedirects){Bn(t,v,"Maximum redirects exceeded");return}v.abort();let R;try{R=new Gv(_,e)}catch(L){let D=new SyntaxError(`Invalid URL: ${_}`);Fp(t,D);return}Xx(t,R,n,r)}else t.emit("unexpected-response",v,w)||Bn(t,v,`Unexpected server response: ${w.statusCode}`)}),v.on("upgrade",(w,_,T)=>{if(t.emit("upgrade",w),t.readyState!==lt.CONNECTING)return;v=t._req=null;let R=w.headers.upgrade;if(R===void 0||R.toLowerCase()!=="websocket"){Bn(t,_,"Invalid Upgrade header");return}let L=Nj("sha1").update(f+Fj).digest("base64");if(w.headers["sec-websocket-accept"]!==L){Bn(t,_,"Invalid Sec-WebSocket-Accept header");return}let D=w.headers["sec-websocket-protocol"],x;if(D!==void 0?m.size?m.has(D)||(x="Server sent an invalid subprotocol"):x="Server sent a subprotocol but none was requested":m.size&&(x="Server sent no subprotocol"),x){Bn(t,_,x);return}D&&(t._protocol=D);let P=w.headers["sec-websocket-extensions"];if(P!==void 0){if(!b){Bn(t,_,"Server sent a Sec-WebSocket-Extensions header but no extension was requested");return}let V;try{V=qj(P)}catch(E){Bn(t,_,"Invalid Sec-WebSocket-Extensions header");return}let J=Object.keys(V);if(J.length!==1||J[0]!==Hi.extensionName){Bn(t,_,"Server indicated an extension that was not requested");return}try{b.accept(V[Hi.extensionName])}catch(E){Bn(t,_,"Invalid Sec-WebSocket-Extensions header");return}t._extensions[Hi.extensionName]=b}t.setSocket(_,T,{allowSynchronousEvents:o.allowSynchronousEvents,generateMask:o.generateMask,maxPayload:o.maxPayload,skipUTF8Validation:o.skipUTF8Validation})}),o.finishRequest?o.finishRequest(v,t):v.end()}function Fp(t,e){t._readyState=lt.CLOSING,t._errorEmitted=!0,t.emit("error",e),t.emitClose()}function Wj(t){return t.path=t.socketPath,Jx.connect(t)}function zj(t){return t.path=void 0,!t.servername&&t.servername!==""&&(t.servername=Jx.isIP(t.host)?"":t.host),kj.connect(t)}function Bn(t,e,n){t._readyState=lt.CLOSING;let r=new Error(n);Error.captureStackTrace(r,Bn),e.setHeader?(e[Yx]=!0,e.abort(),e.socket&&!e.socket.destroyed&&e.socket.destroy(),process.nextTick(Fp,t,r)):(e.destroy(r),e.once("error",t.emit.bind(t,"error")),e.once("close",t.emitClose.bind(t)))}function $v(t,e,n){if(e){let r=Mj(e)?e.size:$j(e).length;t._socket?t._sender._bufferedBytes+=r:t._bufferedAmount+=r}if(n){let r=new Error(`WebSocket is not open: readyState ${t.readyState} (${Vo[t.readyState]})`);process.nextTick(n,r)}}function Jj(t,e){let n=this[Ot];n._closeFrameReceived=!0,n._closeMessage=e,n._closeCode=t,n._socket[Ot]!==void 0&&(n._socket.removeListener("data",Lp),process.nextTick(Qx,n._socket),t===1005?n.close():n.close(t,e))}function Kj(){let t=this[Ot];t.isPaused||t._socket.resume()}function Yj(t){let e=this[Ot];e._socket[Ot]!==void 0&&(e._socket.removeListener("data",Lp),process.nextTick(Qx,e._socket),e.close(t[Uj])),e._errorEmitted||(e._errorEmitted=!0,e.emit("error",t))}function zx(){this[Ot].emitClose()}function Xj(t,e){this[Ot].emit("message",t,e)}function Qj(t){let e=this[Ot];e._autoPong&&e.pong(t,!this._isServer,Kx),e.emit("ping",t)}function Zj(t){this[Ot].emit("pong",t)}function Qx(t){t.resume()}function eW(t){let e=this[Ot];e.readyState!==lt.CLOSED&&(e.readyState===lt.OPEN&&(e._readyState=lt.CLOSING,Zx(e)),this._socket.end(),e._errorEmitted||(e._errorEmitted=!0,e.emit("error",t)))}function Zx(t){t._closeTimer=setTimeout(t._socket.destroy.bind(t._socket),Vj)}function e1(){let t=this[Ot];this.removeListener("close",e1),this.removeListener("data",Lp),this.removeListener("end",t1),t._readyState=lt.CLOSING;let e;!this._readableState.endEmitted&&!t._closeFrameReceived&&!t._receiver._writableState.errorEmitted&&(e=t._socket.read())!==null&&t._receiver.write(e),t._receiver.end(),this[Ot]=void 0,clearTimeout(t._closeTimer),t._receiver._writableState.finished||t._receiver._writableState.errorEmitted?t.emitClose():(t._receiver.on("error",zx),t._receiver.on("finish",zx))}function Lp(t){this[Ot]._receiver.write(t)||this.pause()}function t1(){let t=this[Ot];t._readyState=lt.CLOSING,t._receiver.end(),this.end()}function n1(){let t=this[Ot];this.removeListener("error",n1),this.on("error",Kx),t&&(t._readyState=lt.CLOSING,this.destroy())}});var a1=te((Zbe,s1)=>{"use strict";var Qbe=Up(),{Duplex:tW}=require("stream");function o1(t){t.emit("close")}function nW(){!this.destroyed&&this._writableState.finished&&this.destroy()}function i1(t){this.removeListener("error",i1),this.destroy(),this.listenerCount("error")===0&&this.emit("error",t)}function rW(t,e){let n=!0,r=new tW({...e,autoDestroy:!1,emitClose:!1,objectMode:!1,writableObjectMode:!1});return t.on("message",function(i,s){let a=!s&&r._readableState.objectMode?i.toString():i;r.push(a)||t.pause()}),t.once("error",function(i){r.destroyed||(n=!1,r.destroy(i))}),t.once("close",function(){r.destroyed||r.push(null)}),r._destroy=function(o,i){if(t.readyState===t.CLOSED){i(o),process.nextTick(o1,r);return}let s=!1;t.once("error",function(l){s=!0,i(l)}),t.once("close",function(){s||i(o),process.nextTick(o1,r)}),n&&t.terminate()},r._final=function(o){if(t.readyState===t.CONNECTING){t.once("open",function(){r._final(o)});return}t._socket!==null&&(t._socket._writableState.finished?(o(),r._readableState.endEmitted&&r.destroy()):(t._socket.once("finish",function(){o()}),t.close()))},r._read=function(){t.isPaused&&t.resume()},r._write=function(o,i,s){if(t.readyState===t.CONNECTING){t.once("open",function(){r._write(o,i,s)});return}t.send(o,s)},r.on("end",nW),r.on("error",i1),r}s1.exports=rW});var u1=te((eve,l1)=>{"use strict";var{tokenChars:oW}=tu();function iW(t){let e=new Set,n=-1,r=-1,o=0;for(o;o<t.length;o++){let s=t.charCodeAt(o);if(r===-1&&oW[s]===1)n===-1&&(n=o);else if(o!==0&&(s===32||s===9))r===-1&&n!==-1&&(r=o);else if(s===44){if(n===-1)throw new SyntaxError(`Unexpected character at index ${o}`);r===-1&&(r=o);let a=t.slice(n,r);if(e.has(a))throw new SyntaxError(`The "${a}" subprotocol is duplicated`);e.add(a),n=r=-1}else throw new SyntaxError(`Unexpected character at index ${o}`)}if(n===-1||r!==-1)throw new SyntaxError("Unexpected end of input");let i=t.slice(n,o);if(e.has(i))throw new SyntaxError(`The "${i}" subprotocol is duplicated`);return e.add(i),e}l1.exports={parse:iW}});var g1=te((nve,m1)=>{"use strict";var sW=require("events"),Bp=require("http"),{Duplex:tve}=require("stream"),{createHash:aW}=require("crypto"),c1=Bv(),ra=rf(),lW=u1(),uW=Up(),{GUID:cW,kWebSocket:fW}=Ho(),dW=/^[+/0-9A-Za-z]{22}==$/,f1=0,d1=1,p1=2,Vv=class extends sW{constructor(e,n){if(super(),e={allowSynchronousEvents:!0,autoPong:!0,maxPayload:100*1024*1024,skipUTF8Validation:!1,perMessageDeflate:!1,handleProtocols:null,clientTracking:!0,verifyClient:null,noServer:!1,backlog:null,server:null,host:null,path:null,port:null,WebSocket:uW,...e},e.port==null&&!e.server&&!e.noServer||e.port!=null&&(e.server||e.noServer)||e.server&&e.noServer)throw new TypeError('One and only one of the "port", "server", or "noServer" options must be specified');if(e.port!=null?(this._server=Bp.createServer((r,o)=>{let i=Bp.STATUS_CODES[426];o.writeHead(426,{"Content-Length":i.length,"Content-Type":"text/plain"}),o.end(i)}),this._server.listen(e.port,e.host,e.backlog,n)):e.server&&(this._server=e.server),this._server){let r=this.emit.bind(this,"connection");this._removeListeners=hW(this._server,{listening:this.emit.bind(this,"listening"),error:this.emit.bind(this,"error"),upgrade:(o,i,s)=>{this.handleUpgrade(o,i,s,r)}})}e.perMessageDeflate===!0&&(e.perMessageDeflate={}),e.clientTracking&&(this.clients=new Set,this._shouldEmitClose=!1),this.options=e,this._state=f1}address(){if(this.options.noServer)throw new Error('The server is operating in "noServer" mode');return this._server?this._server.address():null}close(e){if(this._state===p1){e&&this.once("close",()=>{e(new Error("The server is not running"))}),process.nextTick(lf,this);return}if(e&&this.once("close",e),this._state!==d1)if(this._state=d1,this.options.noServer||this.options.server)this._server&&(this._removeListeners(),this._removeListeners=this._server=null),this.clients?this.clients.size?this._shouldEmitClose=!0:process.nextTick(lf,this):process.nextTick(lf,this);else{let n=this._server;this._removeListeners(),this._removeListeners=this._server=null,n.close(()=>{lf(this)})}}shouldHandle(e){if(this.options.path){let n=e.url.indexOf("?");if((n!==-1?e.url.slice(0,n):e.url)!==this.options.path)return!1}return!0}handleUpgrade(e,n,r,o){n.on("error",h1);let i=e.headers["sec-websocket-key"],s=e.headers.upgrade,a=+e.headers["sec-websocket-version"];if(e.method!=="GET"){oa(this,e,n,405,"Invalid HTTP method");return}if(s===void 0||s.toLowerCase()!=="websocket"){oa(this,e,n,400,"Invalid Upgrade header");return}if(i===void 0||!dW.test(i)){oa(this,e,n,400,"Missing or invalid Sec-WebSocket-Key header");return}if(a!==8&&a!==13){oa(this,e,n,400,"Missing or invalid Sec-WebSocket-Version header");return}if(!this.shouldHandle(e)){uf(n,400);return}let l=e.headers["sec-websocket-protocol"],u=new Set;if(l!==void 0)try{u=lW.parse(l)}catch(m){oa(this,e,n,400,"Invalid Sec-WebSocket-Protocol header");return}let f=e.headers["sec-websocket-extensions"],p={};if(this.options.perMessageDeflate&&f!==void 0){let m=new ra(this.options.perMessageDeflate,!0,this.options.maxPayload);try{let b=c1.parse(f);b[ra.extensionName]&&(m.accept(b[ra.extensionName]),p[ra.extensionName]=m)}catch(b){oa(this,e,n,400,"Invalid or unacceptable Sec-WebSocket-Extensions header");return}}if(this.options.verifyClient){let m={origin:e.headers[`${a===8?"sec-websocket-origin":"origin"}`],secure:!!(e.socket.authorized||e.socket.encrypted),req:e};if(this.options.verifyClient.length===2){this.options.verifyClient(m,(b,v,w,_)=>{if(!b)return uf(n,v||401,w,_);this.completeUpgrade(p,i,u,e,n,r,o)});return}if(!this.options.verifyClient(m))return uf(n,401)}this.completeUpgrade(p,i,u,e,n,r,o)}completeUpgrade(e,n,r,o,i,s,a){if(!i.readable||!i.writable)return i.destroy();if(i[fW])throw new Error("server.handleUpgrade() was called more than once with the same socket, possibly due to a misconfiguration");if(this._state>f1)return uf(i,503);let u=["HTTP/1.1 101 Switching Protocols","Upgrade: websocket","Connection: Upgrade",`Sec-WebSocket-Accept: ${aW("sha1").update(n+cW).digest("base64")}`],f=new this.options.WebSocket(null,void 0,this.options);if(r.size){let p=this.options.handleProtocols?this.options.handleProtocols(r,o):r.values().next().value;p&&(u.push(`Sec-WebSocket-Protocol: ${p}`),f._protocol=p)}if(e[ra.extensionName]){let p=e[ra.extensionName].params,m=c1.format({[ra.extensionName]:[p]});u.push(`Sec-WebSocket-Extensions: ${m}`),f._extensions=e}this.emit("headers",u,o),i.write(u.concat(`\r
`).join(`\r
`)),i.removeListener("error",h1),f.setSocket(i,s,{allowSynchronousEvents:this.options.allowSynchronousEvents,maxPayload:this.options.maxPayload,skipUTF8Validation:this.options.skipUTF8Validation}),this.clients&&(this.clients.add(f),f.on("close",()=>{this.clients.delete(f),this._shouldEmitClose&&!this.clients.size&&process.nextTick(lf,this)})),a(f,o)}};m1.exports=Vv;function hW(t,e){for(let n of Object.keys(e))t.on(n,e[n]);return function(){for(let r of Object.keys(e))t.removeListener(r,e[r])}}function lf(t){t._state=p1,t.emit("close")}function h1(){this.destroy()}function uf(t,e,n,r){n=n||Bp.STATUS_CODES[e],r={Connection:"close","Content-Type":"text/html","Content-Length":Buffer.byteLength(n),...r},t.once("finish",t.destroy),t.end(`HTTP/1.1 ${e} ${Bp.STATUS_CODES[e]}\r
`+Object.keys(r).map(o=>`${o}: ${r[o]}`).join(`\r
`)+`\r
\r
`+n)}function oa(t,e,n,r,o){if(t.listenerCount("wsClientError")){let i=new Error(o);Error.captureStackTrace(i,oa),t.emit("wsClientError",i,n,e)}else uf(n,r,o)}});var Oae={};Qg(Oae,{default:()=>Cg});module.exports=M3(Oae);var zB=require("obsidian");var Eo=require("@codemirror/view");var vd=require("@codemirror/state"),fs=vd.StateEffect.define();function kA(){return{fullText:null,remainingText:null,baselineDocument:null,anchorPosition:null}}function F3(t){return t.content===null?kA():L3(t)}function L3(t){return{fullText:t.content,remainingText:t.content,baselineDocument:t.document,anchorPosition:t.anchor}}function U3(t,e){return{...t,remainingText:t.remainingText.slice(e).length>0?t.remainingText.slice(e):null,anchorPosition:t.anchorPosition+e}}function ey(t){return{...t,remainingText:null,anchorPosition:null}}function B3(t,e){let n="",r=!1;return e.changes.iterChanges((o,i,s,a,l)=>{o===t.anchorPosition&&i===o&&(n=l.toString(),r=!0)}),!r||!t.remainingText?ey(t):t.remainingText.startsWith(n)?U3(t,n.length):ey(t)}function G3(t,e){return e.state.selection.main.head!==t.anchorPosition?ey(t):t}var pi=vd.StateField.define({create:()=>kA(),update(t,e){let n=e.effects.find(r=>r.is(fs));return n?F3(n.value):e.docChanged&&t.remainingText&&t.anchorPosition!==null?B3(t,e):t.remainingText!==null&&t.anchorPosition!==null?G3(t,e):t}});var wd=class wd extends Eo.WidgetType{constructor(n){super();this.content=n}toDOM(){let n=document.createElement("span");return n.classList.add(...wd.CSS_CLASSES),n.textContent=this.content,n}};wd.CSS_CLASSES=["cm-inline-prediction","inscribe-inline-prediction"];var ty=wd,RA=Eo.ViewPlugin.fromClass(class{constructor(){this.decorations=Eo.Decoration.none}update(t){let e=t.state.field(pi);this.decorations=e.remainingText?this.createDecoration(t.view,e.remainingText):Eo.Decoration.none}createDecoration(t,e){let n=t.state.selection.main.head;return Eo.Decoration.set([Eo.Decoration.widget({widget:new ty(e),side:1}).range(n)])}},{decorations:t=>t.decorations});var NA=require("@codemirror/view");var OA=(t,e,n=!0)=>{let r=!0,o,i=async function*(l){clearTimeout(o),r=!0,await new Promise(u=>{o=setTimeout(u,e())}),r&&(yield*t(l))},s=async function*(l){r=!0,r&&(yield*t(l))};return{fetcherPlugin:NA.ViewPlugin.fromClass(class{constructor(){this.currentRequestId=0}async update(l){let u=l.state;if(!n||!l.docChanged||u.field(pi).remainingText)return;let f=++this.currentRequestId;for await(let p of i(u)){if(f!==this.currentRequestId)return;l.view.dispatch({effects:fs.of({content:p.text,document:u.doc,anchor:u.selection.main.head})})}}async triggerSuggestion(l){let u=l.state;l.dispatch({effects:fs.of({content:null,document:null,anchor:null})});let f=++this.currentRequestId;for await(let p of s(u)){if(f!==this.currentRequestId)return;l.dispatch({effects:fs.of({content:p.text,document:u.doc,anchor:u.selection.main.head})})}}}),terminate:()=>{r=!1,clearTimeout(o)}}};var Wu=require("@codemirror/state"),ny=require("@codemirror/view");var DA={word:t=>{let e=t.indexOf(" ");return e===-1?{accepted:t,remaining:""}:{accepted:t.slice(0,e+1),remaining:t.slice(e+1)}},sentence:t=>{let e=t.match(/[.!?]\s+/);return e&&e.index!==void 0?{accepted:t.slice(0,e.index+1),remaining:t.slice(e.index+1)}:{accepted:t,remaining:""}},paragraph:t=>{let e=t.indexOf(`

`);return e===-1?{accepted:t,remaining:""}:{accepted:t.slice(0,e+2),remaining:t.slice(e+2)}},full:t=>({accepted:t,remaining:""})};var H3=(t,e)=>{let n=t.selection.main.head;return{...t.changeByRange(()=>({changes:{from:n,insert:e},range:Wu.EditorSelection.cursor(n+e.length)})),userEvent:"completion.accept"}},MA=(t,e,n)=>Wu.Prec.highest(ny.keymap.of([{key:e,run:r=>{var u;let o=r.state.field(pi);if(!o.remainingText)return!1;let s=(u=n().splitStrategy)!=null?u:"word",{accepted:a,remaining:l}=DA[s](o.remainingText);return a?(r.dispatch({...H3(r.state,a),effects:fs.of({content:l||null,document:l?o.baselineDocument:null,anchor:l?o.anchorPosition+a.length:null})}),l||t(),!0):!1}}])),FA=(t,e)=>Wu.Prec.highest(ny.keymap.of([{key:e,run:n=>{let r=n.plugin(t);return r&&"triggerSuggestion"in r?(r.triggerSuggestion(n),!0):!1}}]));function LA(t){let{fetchFunc:e,getOptions:n}=t,r=t.acceptanceHotkey||"Tab",o=!t.triggerHotkey,i=async function*(p){let m=await e(p);Symbol.asyncIterator in m?yield*m:yield m},s=()=>{var p;return(p=n().delayMs)!=null?p:300},{fetcherPlugin:a,terminate:l}=OA(i,s,o),u=MA(l,r,n),f=[pi,a,RA,u];if(t.triggerHotkey){let p=FA(a,t.triggerHotkey);f.push(p)}return f}var zu=ht(require("node:fs"),1),fy=require("node:path");var ale=ht(ry(),1),q3="0.5.14",GA="11434",HA=`http://127.0.0.1:${GA}`,$3=Object.defineProperty,V3=(t,e,n)=>e in t?$3(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,oy=(t,e,n)=>(V3(t,typeof e!="symbol"?e+"":e,n),n),sy=class t extends Error{constructor(e,n){super(e),this.error=e,this.status_code=n,this.name="ResponseError",Error.captureStackTrace&&Error.captureStackTrace(this,t)}},ay=class{constructor(e,n,r){oy(this,"abortController"),oy(this,"itr"),oy(this,"doneCallback"),this.abortController=e,this.itr=n,this.doneCallback=r}abort(){this.abortController.abort()}async*[Symbol.asyncIterator](){for await(let e of this.itr){if("error"in e)throw new Error(e.error);if(yield e,e.done||e.status==="success"){this.doneCallback();return}}throw new Error("Did not receive done or success response in stream.")}},ly=async t=>{var r;if(t.ok)return;let e=`Error ${t.status}: ${t.statusText}`,n=null;if((r=t.headers.get("content-type"))!=null&&r.includes("application/json"))try{n=await t.json(),e=n.error||e}catch(o){console.log("Failed to parse error response as JSON")}else try{console.log("Getting text from response"),e=await t.text()||e}catch(o){console.log("Failed to get text from error response")}throw new sy(e,t.status)};function j3(){var t;if(typeof window!="undefined"&&window.navigator){let e=navigator;return"userAgentData"in e&&((t=e.userAgentData)!=null&&t.platform)?`${e.userAgentData.platform.toLowerCase()} Browser/${navigator.userAgent};`:navigator.platform?`${navigator.platform.toLowerCase()} Browser/${navigator.userAgent};`:`unknown Browser/${navigator.userAgent};`}else if(typeof process!="undefined")return`${process.arch} ${process.platform} Node.js/${process.version}`;return""}function W3(t){if(t instanceof Headers){let e={};return t.forEach((n,r)=>{e[r]=n}),e}else return Array.isArray(t)?Object.fromEntries(t):t||{}}var uy=async(t,e,n={})=>{let r={"Content-Type":"application/json",Accept:"application/json","User-Agent":`ollama-js/${q3} (${j3()})`};n.headers=W3(n.headers);let o=Object.fromEntries(Object.entries(n.headers).filter(([i])=>!Object.keys(r).some(s=>s.toLowerCase()===i.toLowerCase())));return n.headers={...r,...o},t(e,n)},BA=async(t,e,n)=>{let r=await uy(t,e,{headers:n==null?void 0:n.headers});return await ly(r),r},Oa=async(t,e,n,r)=>{let i=(a=>a!==null&&typeof a=="object"&&!Array.isArray(a))(n)?JSON.stringify(n):n,s=await uy(t,e,{method:"POST",body:i,signal:r==null?void 0:r.signal,headers:r==null?void 0:r.headers});return await ly(s),s},z3=async(t,e,n,r)=>{let o=await uy(t,e,{method:"DELETE",body:JSON.stringify(n),headers:r==null?void 0:r.headers});return await ly(o),o},J3=async function*(t){var o;let e=new TextDecoder("utf-8"),n="",r=t.getReader();for(;;){let{done:i,value:s}=await r.read();if(i)break;n+=e.decode(s);let a=n.split(`
`);n=(o=a.pop())!=null?o:"";for(let l of a)try{yield JSON.parse(l)}catch(u){console.warn("invalid json: ",l)}}for(let i of n.split(`
`).filter(s=>s!==""))try{yield JSON.parse(i)}catch(s){console.warn("invalid json: ",i)}},K3=t=>{if(!t)return HA;let e=t.includes("://");t.startsWith(":")&&(t=`http://127.0.0.1${t}`,e=!0),e||(t=`http://${t}`);let n=new URL(t),r=n.port;r||(e?r=n.protocol==="https:"?"443":"80":r=GA);let o=`${n.protocol}//${n.hostname}:${r}${n.pathname}`;return o.endsWith("/")&&(o=o.slice(0,-1)),o},Y3=Object.defineProperty,X3=(t,e,n)=>e in t?Y3(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,iy=(t,e,n)=>(X3(t,typeof e!="symbol"?e+"":e,n),n),cy=class{constructor(e){var n,r;iy(this,"config"),iy(this,"fetch"),iy(this,"ongoingStreamedRequests",[]),this.config={host:"",headers:e==null?void 0:e.headers},e!=null&&e.proxy||(this.config.host=K3((n=e==null?void 0:e.host)!=null?n:HA)),this.fetch=(r=e==null?void 0:e.fetch)!=null?r:fetch}abort(){for(let e of this.ongoingStreamedRequests)e.abort();this.ongoingStreamedRequests.length=0}async processStreamableRequest(e,n){var i;n.stream=(i=n.stream)!=null?i:!1;let r=`${this.config.host}/api/${e}`;if(n.stream){let s=new AbortController,a=await Oa(this.fetch,r,n,{signal:s.signal,headers:this.config.headers});if(!a.body)throw new Error("Missing body");let l=J3(a.body),u=new ay(s,l,()=>{let f=this.ongoingStreamedRequests.indexOf(u);f>-1&&this.ongoingStreamedRequests.splice(f,1)});return this.ongoingStreamedRequests.push(u),u}return await(await Oa(this.fetch,r,n,{headers:this.config.headers})).json()}async encodeImage(e){if(typeof e!="string"){let n=new Uint8Array(e),r="",o=n.byteLength;for(let i=0;i<o;i++)r+=String.fromCharCode(n[i]);return btoa(r)}return e}async generate(e){return e.images&&(e.images=await Promise.all(e.images.map(this.encodeImage.bind(this)))),this.processStreamableRequest("generate",e)}async chat(e){if(e.messages)for(let n of e.messages)n.images&&(n.images=await Promise.all(n.images.map(this.encodeImage.bind(this))));return this.processStreamableRequest("chat",e)}async create(e){return this.processStreamableRequest("create",{...e})}async pull(e){return this.processStreamableRequest("pull",{name:e.model,stream:e.stream,insecure:e.insecure})}async push(e){return this.processStreamableRequest("push",{name:e.model,stream:e.stream,insecure:e.insecure})}async delete(e){return await z3(this.fetch,`${this.config.host}/api/delete`,{name:e.model},{headers:this.config.headers}),{status:"success"}}async copy(e){return await Oa(this.fetch,`${this.config.host}/api/copy`,{...e},{headers:this.config.headers}),{status:"success"}}async list(){return await(await BA(this.fetch,`${this.config.host}/api/tags`,{headers:this.config.headers})).json()}async show(e){return await(await Oa(this.fetch,`${this.config.host}/api/show`,{...e},{headers:this.config.headers})).json()}async embed(e){return await(await Oa(this.fetch,`${this.config.host}/api/embed`,{...e},{headers:this.config.headers})).json()}async embeddings(e){return await(await Oa(this.fetch,`${this.config.host}/api/embeddings`,{...e},{headers:this.config.headers})).json()}async ps(){return await(await BA(this.fetch,`${this.config.host}/api/ps`,{headers:this.config.headers})).json()}},ule=new cy;var dle=ht(ry(),1),Ju=class extends cy{async encodeImage(e){if(typeof e!="string")return Buffer.from(e).toString("base64");try{if(zu.default.existsSync(e)){let n=await zu.promises.readFile((0,fy.resolve)(e));return Buffer.from(n).toString("base64")}}catch(n){}return e}async fileExists(e){try{return await zu.promises.access(e),!0}catch(n){return!1}}async create(e){if(e.from&&await this.fileExists((0,fy.resolve)(e.from)))throw Error("Creating with a local path is not currently supported from ollama-js");return e.stream?super.create(e):super.create(e)}},hle=new Ju;var Ed=class{constructor(e){this.aborted=!1;this.settings=e,this.client=new Ju({host:this.settings.host})}async*generate(e,n,r){this.aborted=!1;let o=await this.client.generate({model:r.model,prompt:n,system:r.systemPrompt,stream:!0,options:{temperature:r.temperature}}),i=e.getCursor(),s="";for await(let a of o){if(this.aborted)return;if(this.cursorMoved(e,i)){this.abort();return}s+=a.response,yield s}}cursorMoved(e,n){let r=e.getCursor();return r.line!==n.line||r.ch!==n.ch}async abort(){this.aborted||(this.client.abort(),this.aborted=!0)}async fetchModels(){return(await this.client.list()).models.map(n=>n.name)}async connectionTest(){try{return await this.client.list(),!0}catch(e){return console.error("Error testing connection:",e),!1}}};function me(t,e,n,r,o){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!o)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!o:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?o.call(t,n):o?o.value=n:e.set(t,n),n}function G(t,e,n,r){if(n==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!r:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?r:n==="a"?r.call(t):r?r.value:e.get(t)}var dy=function(){let{crypto:t}=globalThis;if(t!=null&&t.randomUUID)return dy=t.randomUUID.bind(t),t.randomUUID();let e=new Uint8Array(1),n=t?()=>t.getRandomValues(e)[0]:()=>Math.random()*255&255;return"10000000-1000-4000-8000-100000000000".replace(/[018]/g,r=>(+r^n()&15>>+r/4).toString(16))};function Ku(t){return typeof t=="object"&&t!==null&&("name"in t&&t.name==="AbortError"||"message"in t&&String(t.message).includes("FetchRequestCanceledException"))}var Yu=t=>{if(t instanceof Error)return t;if(typeof t=="object"&&t!==null){try{if(Object.prototype.toString.call(t)==="[object Error]"){let e=new Error(t.message,t.cause?{cause:t.cause}:{});return t.stack&&(e.stack=t.stack),t.cause&&!e.cause&&(e.cause=t.cause),t.name&&(e.name=t.name),e}}catch(e){}try{return new Error(JSON.stringify(t))}catch(e){}}return new Error(t)};var ue=class extends Error{},Ct=class t extends ue{constructor(e,n,r,o){super(`${t.makeMessage(e,n,r)}`),this.status=e,this.headers=o,this.requestID=o==null?void 0:o.get("x-request-id"),this.error=n;let i=n;this.code=i==null?void 0:i.code,this.param=i==null?void 0:i.param,this.type=i==null?void 0:i.type}static makeMessage(e,n,r){let o=n!=null&&n.message?typeof n.message=="string"?n.message:JSON.stringify(n.message):n?JSON.stringify(n):r;return e&&o?`${e} ${o}`:e?`${e} status code (no body)`:o||"(no status code or body)"}static generate(e,n,r,o){if(!e||!o)return new mi({message:r,cause:Yu(n)});let i=n==null?void 0:n.error;return e===400?new Da(e,i,r,o):e===401?new Ma(e,i,r,o):e===403?new Fa(e,i,r,o):e===404?new La(e,i,r,o):e===409?new Ua(e,i,r,o):e===422?new Ba(e,i,r,o):e===429?new Ga(e,i,r,o):e>=500?new Ha(e,i,r,o):new t(e,i,r,o)}},yt=class extends Ct{constructor({message:e}={}){super(void 0,void 0,e||"Request was aborted.",void 0)}},mi=class extends Ct{constructor({message:e,cause:n}){super(void 0,void 0,e||"Connection error.",void 0),n&&(this.cause=n)}},gi=class extends mi{constructor({message:e}={}){super({message:e!=null?e:"Request timed out."})}},Da=class extends Ct{},Ma=class extends Ct{},Fa=class extends Ct{},La=class extends Ct{},Ua=class extends Ct{},Ba=class extends Ct{},Ga=class extends Ct{},Ha=class extends Ct{},qa=class extends ue{constructor(){super("Could not parse response content as the length limit was reached")}},$a=class extends ue{constructor(){super("Could not parse response content as the request was rejected by the content filter")}},Hr=class extends Error{constructor(e){super(e)}};var Z3=/^[a-z][a-z0-9+.-]*:/i,qA=t=>Z3.test(t),$t=t=>($t=Array.isArray,$t(t)),hy=$t;function py(t){return typeof t!="object"?{}:t!=null?t:{}}function $A(t){if(!t)return!0;for(let e in t)return!1;return!0}function VA(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function Xu(t){return t!=null&&typeof t=="object"&&!Array.isArray(t)}var jA=(t,e)=>{if(typeof e!="number"||!Number.isInteger(e))throw new ue(`${t} must be an integer`);if(e<0)throw new ue(`${t} must be a positive integer`);return e};var WA=t=>{try{return JSON.parse(t)}catch(e){return}};var qr=t=>new Promise(e=>setTimeout(e,t));var yi="6.22.0";var KA=()=>typeof window!="undefined"&&typeof window.document!="undefined"&&typeof navigator!="undefined";function eH(){return typeof Deno!="undefined"&&Deno.build!=null?"deno":typeof EdgeRuntime!="undefined"?"edge":Object.prototype.toString.call(typeof globalThis.process!="undefined"?globalThis.process:0)==="[object process]"?"node":"unknown"}var tH=()=>{var n,r,o,i,s;let t=eH();if(t==="deno")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":yi,"X-Stainless-OS":JA(Deno.build.os),"X-Stainless-Arch":zA(Deno.build.arch),"X-Stainless-Runtime":"deno","X-Stainless-Runtime-Version":typeof Deno.version=="string"?Deno.version:(r=(n=Deno.version)==null?void 0:n.deno)!=null?r:"unknown"};if(typeof EdgeRuntime!="undefined")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":yi,"X-Stainless-OS":"Unknown","X-Stainless-Arch":`other:${EdgeRuntime}`,"X-Stainless-Runtime":"edge","X-Stainless-Runtime-Version":globalThis.process.version};if(t==="node")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":yi,"X-Stainless-OS":JA((o=globalThis.process.platform)!=null?o:"unknown"),"X-Stainless-Arch":zA((i=globalThis.process.arch)!=null?i:"unknown"),"X-Stainless-Runtime":"node","X-Stainless-Runtime-Version":(s=globalThis.process.version)!=null?s:"unknown"};let e=nH();return e?{"X-Stainless-Lang":"js","X-Stainless-Package-Version":yi,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":`browser:${e.browser}`,"X-Stainless-Runtime-Version":e.version}:{"X-Stainless-Lang":"js","X-Stainless-Package-Version":yi,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":"unknown","X-Stainless-Runtime-Version":"unknown"}};function nH(){if(typeof navigator=="undefined"||!navigator)return null;let t=[{key:"edge",pattern:/Edge(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/MSIE(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/Trident(?:.*rv\:(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"chrome",pattern:/Chrome(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"firefox",pattern:/Firefox(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"safari",pattern:/(?:Version\W+(\d+)\.(\d+)(?:\.(\d+))?)?(?:\W+Mobile\S*)?\W+Safari/}];for(let{key:e,pattern:n}of t){let r=n.exec(navigator.userAgent);if(r){let o=r[1]||0,i=r[2]||0,s=r[3]||0;return{browser:e,version:`${o}.${i}.${s}`}}}return null}var zA=t=>t==="x32"?"x32":t==="x86_64"||t==="x64"?"x64":t==="arm"?"arm":t==="aarch64"||t==="arm64"?"arm64":t?`other:${t}`:"unknown",JA=t=>(t=t.toLowerCase(),t.includes("ios")?"iOS":t==="android"?"Android":t==="darwin"?"MacOS":t==="win32"?"Windows":t==="freebsd"?"FreeBSD":t==="openbsd"?"OpenBSD":t==="linux"?"Linux":t?`Other:${t}`:"Unknown"),Ad,YA=()=>Ad!=null?Ad:Ad=tH();function XA(){if(typeof fetch!="undefined")return fetch;throw new Error("`fetch` is not defined as a global; Either pass `fetch` to the client, `new OpenAI({ fetch })` or polyfill the global, `globalThis.fetch = fetch`")}function my(...t){let e=globalThis.ReadableStream;if(typeof e=="undefined")throw new Error("`ReadableStream` is not defined as a global; You will need to polyfill it, `globalThis.ReadableStream = ReadableStream`");return new e(...t)}function Cd(t){let e=Symbol.asyncIterator in t?t[Symbol.asyncIterator]():t[Symbol.iterator]();return my({start(){},async pull(n){let{done:r,value:o}=await e.next();r?n.close():n.enqueue(o)},async cancel(){var n;await((n=e.return)==null?void 0:n.call(e))}})}function gy(t){if(t[Symbol.asyncIterator])return t;let e=t.getReader();return{async next(){try{let n=await e.read();return n!=null&&n.done&&e.releaseLock(),n}catch(n){throw e.releaseLock(),n}},async return(){let n=e.cancel();return e.releaseLock(),await n,{done:!0,value:void 0}},[Symbol.asyncIterator](){return this}}}async function QA(t){var r,o;if(t===null||typeof t!="object")return;if(t[Symbol.asyncIterator]){await((o=(r=t[Symbol.asyncIterator]()).return)==null?void 0:o.call(r));return}let e=t.getReader(),n=e.cancel();e.releaseLock(),await n}var ZA=({headers:t,body:e})=>({bodyHeaders:{"content-type":"application/json"},body:JSON.stringify(e)});var Td="RFC3986",yy=t=>String(t),Sd={RFC1738:t=>String(t).replace(/%20/g,"+"),RFC3986:yy},by="RFC1738";var Pd=(t,e)=>{var n;return Pd=(n=Object.hasOwn)!=null?n:Function.prototype.call.bind(Object.prototype.hasOwnProperty),Pd(t,e)},$r=(()=>{let t=[];for(let e=0;e<256;++e)t.push("%"+((e<16?"0":"")+e.toString(16)).toUpperCase());return t})();var vy=1024,eC=(t,e,n,r,o)=>{if(t.length===0)return t;let i=t;if(typeof t=="symbol"?i=Symbol.prototype.toString.call(t):typeof t!="string"&&(i=String(t)),n==="iso-8859-1")return escape(i).replace(/%u[0-9a-f]{4}/gi,function(a){return"%26%23"+parseInt(a.slice(2),16)+"%3B"});let s="";for(let a=0;a<i.length;a+=vy){let l=i.length>=vy?i.slice(a,a+vy):i,u=[];for(let f=0;f<l.length;++f){let p=l.charCodeAt(f);if(p===45||p===46||p===95||p===126||p>=48&&p<=57||p>=65&&p<=90||p>=97&&p<=122||o===by&&(p===40||p===41)){u[u.length]=l.charAt(f);continue}if(p<128){u[u.length]=$r[p];continue}if(p<2048){u[u.length]=$r[192|p>>6]+$r[128|p&63];continue}if(p<55296||p>=57344){u[u.length]=$r[224|p>>12]+$r[128|p>>6&63]+$r[128|p&63];continue}f+=1,p=65536+((p&1023)<<10|l.charCodeAt(f)&1023),u[u.length]=$r[240|p>>18]+$r[128|p>>12&63]+$r[128|p>>6&63]+$r[128|p&63]}s+=u.join("")}return s};function tC(t){return!t||typeof t!="object"?!1:!!(t.constructor&&t.constructor.isBuffer&&t.constructor.isBuffer(t))}function wy(t,e){if($t(t)){let n=[];for(let r=0;r<t.length;r+=1)n.push(e(t[r]));return n}return e(t)}var nC={brackets(t){return String(t)+"[]"},comma:"comma",indices(t,e){return String(t)+"["+e+"]"},repeat(t){return String(t)}},rC=function(t,e){Array.prototype.push.apply(t,$t(e)?e:[e])},Id,Tt={addQueryPrefix:!1,allowDots:!1,allowEmptyArrays:!1,arrayFormat:"indices",charset:"utf-8",charsetSentinel:!1,delimiter:"&",encode:!0,encodeDotInKeys:!1,encoder:eC,encodeValuesOnly:!1,format:Td,formatter:yy,indices:!1,serializeDate(t){return(Id!=null?Id:Id=Function.prototype.call.bind(Date.prototype.toISOString))(t)},skipNulls:!1,strictNullHandling:!1};function iH(t){return typeof t=="string"||typeof t=="number"||typeof t=="boolean"||typeof t=="symbol"||typeof t=="bigint"}var _y={};function oC(t,e,n,r,o,i,s,a,l,u,f,p,m,b,v,w,_,T){let R=t,L=T,D=0,x=!1;for(;(L=L.get(_y))!==void 0&&!x;){let O=L.get(t);if(D+=1,typeof O!="undefined"){if(O===D)throw new RangeError("Cyclic object value");x=!0}typeof L.get(_y)=="undefined"&&(D=0)}if(typeof u=="function"?R=u(e,R):R instanceof Date?R=m==null?void 0:m(R):n==="comma"&&$t(R)&&(R=wy(R,function(O){return O instanceof Date?m==null?void 0:m(O):O})),R===null){if(i)return l&&!w?l(e,Tt.encoder,_,"key",b):e;R=""}if(iH(R)||tC(R)){if(l){let O=w?e:l(e,Tt.encoder,_,"key",b);return[(v==null?void 0:v(O))+"="+(v==null?void 0:v(l(R,Tt.encoder,_,"value",b)))]}return[(v==null?void 0:v(e))+"="+(v==null?void 0:v(String(R)))]}let P=[];if(typeof R=="undefined")return P;let V;if(n==="comma"&&$t(R))w&&l&&(R=wy(R,l)),V=[{value:R.length>0?R.join(",")||null:void 0}];else if($t(u))V=u;else{let O=Object.keys(R);V=f?O.sort(f):O}let J=a?String(e).replace(/\./g,"%2E"):String(e),E=r&&$t(R)&&R.length===1?J+"[]":J;if(o&&$t(R)&&R.length===0)return E+"[]";for(let O=0;O<V.length;++O){let X=V[O],ee=typeof X=="object"&&typeof X.value!="undefined"?X.value:R[X];if(s&&ee===null)continue;let se=p&&a?X.replace(/\./g,"%2E"):X,re=$t(R)?typeof n=="function"?n(E,se):E:E+(p?"."+se:"["+se+"]");T.set(t,D);let be=new WeakMap;be.set(_y,T),rC(P,oC(ee,re,n,r,o,i,s,a,n==="comma"&&w&&$t(R)?null:l,u,f,p,m,b,v,w,_,be))}return P}function sH(t=Tt){if(typeof t.allowEmptyArrays!="undefined"&&typeof t.allowEmptyArrays!="boolean")throw new TypeError("`allowEmptyArrays` option can only be `true` or `false`, when provided");if(typeof t.encodeDotInKeys!="undefined"&&typeof t.encodeDotInKeys!="boolean")throw new TypeError("`encodeDotInKeys` option can only be `true` or `false`, when provided");if(t.encoder!==null&&typeof t.encoder!="undefined"&&typeof t.encoder!="function")throw new TypeError("Encoder has to be a function.");let e=t.charset||Tt.charset;if(typeof t.charset!="undefined"&&t.charset!=="utf-8"&&t.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");let n=Td;if(typeof t.format!="undefined"){if(!Pd(Sd,t.format))throw new TypeError("Unknown format option provided.");n=t.format}let r=Sd[n],o=Tt.filter;(typeof t.filter=="function"||$t(t.filter))&&(o=t.filter);let i;if(t.arrayFormat&&t.arrayFormat in nC?i=t.arrayFormat:"indices"in t?i=t.indices?"indices":"repeat":i=Tt.arrayFormat,"commaRoundTrip"in t&&typeof t.commaRoundTrip!="boolean")throw new TypeError("`commaRoundTrip` must be a boolean, or absent");let s=typeof t.allowDots=="undefined"?t.encodeDotInKeys?!0:Tt.allowDots:!!t.allowDots;return{addQueryPrefix:typeof t.addQueryPrefix=="boolean"?t.addQueryPrefix:Tt.addQueryPrefix,allowDots:s,allowEmptyArrays:typeof t.allowEmptyArrays=="boolean"?!!t.allowEmptyArrays:Tt.allowEmptyArrays,arrayFormat:i,charset:e,charsetSentinel:typeof t.charsetSentinel=="boolean"?t.charsetSentinel:Tt.charsetSentinel,commaRoundTrip:!!t.commaRoundTrip,delimiter:typeof t.delimiter=="undefined"?Tt.delimiter:t.delimiter,encode:typeof t.encode=="boolean"?t.encode:Tt.encode,encodeDotInKeys:typeof t.encodeDotInKeys=="boolean"?t.encodeDotInKeys:Tt.encodeDotInKeys,encoder:typeof t.encoder=="function"?t.encoder:Tt.encoder,encodeValuesOnly:typeof t.encodeValuesOnly=="boolean"?t.encodeValuesOnly:Tt.encodeValuesOnly,filter:o,format:n,formatter:r,serializeDate:typeof t.serializeDate=="function"?t.serializeDate:Tt.serializeDate,skipNulls:typeof t.skipNulls=="boolean"?t.skipNulls:Tt.skipNulls,sort:typeof t.sort=="function"?t.sort:null,strictNullHandling:typeof t.strictNullHandling=="boolean"?t.strictNullHandling:Tt.strictNullHandling}}function Ey(t,e={}){let n=t,r=sH(e),o,i;typeof r.filter=="function"?(i=r.filter,n=i("",n)):$t(r.filter)&&(i=r.filter,o=i);let s=[];if(typeof n!="object"||n===null)return"";let a=nC[r.arrayFormat],l=a==="comma"&&r.commaRoundTrip;o||(o=Object.keys(n)),r.sort&&o.sort(r.sort);let u=new WeakMap;for(let m=0;m<o.length;++m){let b=o[m];r.skipNulls&&n[b]===null||rC(s,oC(n[b],b,a,l,r.allowEmptyArrays,r.strictNullHandling,r.skipNulls,r.encodeDotInKeys,r.encode?r.encoder:null,r.filter,r.sort,r.allowDots,r.serializeDate,r.format,r.formatter,r.encodeValuesOnly,r.charset,u))}let f=s.join(r.delimiter),p=r.addQueryPrefix===!0?"?":"";return r.charsetSentinel&&(r.charset==="iso-8859-1"?p+="utf8=%26%2310003%3B&":p+="utf8=%E2%9C%93&"),f.length>0?p+f:""}function iC(t){let e=0;for(let o of t)e+=o.length;let n=new Uint8Array(e),r=0;for(let o of t)n.set(o,r),r+=o.length;return n}var xd;function Va(t){let e;return(xd!=null?xd:(e=new globalThis.TextEncoder,xd=e.encode.bind(e)))(t)}var kd;function Ay(t){let e;return(kd!=null?kd:(e=new globalThis.TextDecoder,kd=e.decode.bind(e)))(t)}var An,Cn,ds=class{constructor(){An.set(this,void 0),Cn.set(this,void 0),me(this,An,new Uint8Array,"f"),me(this,Cn,null,"f")}decode(e){if(e==null)return[];let n=e instanceof ArrayBuffer?new Uint8Array(e):typeof e=="string"?Va(e):e;me(this,An,iC([G(this,An,"f"),n]),"f");let r=[],o;for(;(o=lH(G(this,An,"f"),G(this,Cn,"f")))!=null;){if(o.carriage&&G(this,Cn,"f")==null){me(this,Cn,o.index,"f");continue}if(G(this,Cn,"f")!=null&&(o.index!==G(this,Cn,"f")+1||o.carriage)){r.push(Ay(G(this,An,"f").subarray(0,G(this,Cn,"f")-1))),me(this,An,G(this,An,"f").subarray(G(this,Cn,"f")),"f"),me(this,Cn,null,"f");continue}let i=G(this,Cn,"f")!==null?o.preceding-1:o.preceding,s=Ay(G(this,An,"f").subarray(0,i));r.push(s),me(this,An,G(this,An,"f").subarray(o.index),"f"),me(this,Cn,null,"f")}return r}flush(){return G(this,An,"f").length?this.decode(`
`):[]}};An=new WeakMap,Cn=new WeakMap;ds.NEWLINE_CHARS=new Set([`
`,"\r"]);ds.NEWLINE_REGEXP=/\r\n|[\n\r]/g;function lH(t,e){for(let o=e!=null?e:0;o<t.length;o++){if(t[o]===10)return{preceding:o,index:o+1,carriage:!1};if(t[o]===13)return{preceding:o,index:o+1,carriage:!0}}return null}function sC(t){for(let r=0;r<t.length-1;r++){if(t[r]===10&&t[r+1]===10||t[r]===13&&t[r+1]===13)return r+2;if(t[r]===13&&t[r+1]===10&&r+3<t.length&&t[r+2]===13&&t[r+3]===10)return r+4}return-1}var Nd={off:0,error:200,warn:300,info:400,debug:500},Cy=(t,e,n)=>{if(t){if(VA(Nd,t))return t;pt(n).warn(`${e} was set to ${JSON.stringify(t)}, expected one of ${JSON.stringify(Object.keys(Nd))}`)}};function Qu(){}function Rd(t,e,n){return!e||Nd[t]>Nd[n]?Qu:e[t].bind(e)}var uH={error:Qu,warn:Qu,info:Qu,debug:Qu},aC=new WeakMap;function pt(t){var i;let e=t.logger,n=(i=t.logLevel)!=null?i:"off";if(!e)return uH;let r=aC.get(e);if(r&&r[0]===n)return r[1];let o={error:Rd("error",e,n),warn:Rd("warn",e,n),info:Rd("info",e,n),debug:Rd("debug",e,n)};return aC.set(e,[n,o]),o}var Ao=t=>(t.options&&(t.options={...t.options},delete t.options.headers),t.headers&&(t.headers=Object.fromEntries((t.headers instanceof Headers?[...t.headers]:Object.entries(t.headers)).map(([e,n])=>[e,e.toLowerCase()==="authorization"||e.toLowerCase()==="cookie"||e.toLowerCase()==="set-cookie"?"***":n]))),"retryOfRequestLogID"in t&&(t.retryOfRequestLogID&&(t.retryOf=t.retryOfRequestLogID),delete t.retryOfRequestLogID),t);var Zu,Vr=class t{constructor(e,n,r){this.iterator=e,Zu.set(this,void 0),this.controller=n,me(this,Zu,r,"f")}static fromSSEResponse(e,n,r){let o=!1,i=r?pt(r):console;async function*s(){if(o)throw new ue("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");o=!0;let a=!1;try{for await(let l of cH(e,n))if(!a){if(l.data.startsWith("[DONE]")){a=!0;continue}if(l.event===null||!l.event.startsWith("thread.")){let u;try{u=JSON.parse(l.data)}catch(f){throw i.error("Could not parse message into JSON:",l.data),i.error("From chunk:",l.raw),f}if(u&&u.error)throw new Ct(void 0,u.error,void 0,e.headers);yield u}else{let u;try{u=JSON.parse(l.data)}catch(f){throw console.error("Could not parse message into JSON:",l.data),console.error("From chunk:",l.raw),f}if(l.event=="error")throw new Ct(void 0,u.error,u.message,void 0);yield{event:l.event,data:u}}}a=!0}catch(l){if(Ku(l))return;throw l}finally{a||n.abort()}}return new t(s,n,r)}static fromReadableStream(e,n,r){let o=!1;async function*i(){let a=new ds,l=gy(e);for await(let u of l)for(let f of a.decode(u))yield f;for(let u of a.flush())yield u}async function*s(){if(o)throw new ue("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");o=!0;let a=!1;try{for await(let l of i())a||l&&(yield JSON.parse(l));a=!0}catch(l){if(Ku(l))return;throw l}finally{a||n.abort()}}return new t(s,n,r)}[(Zu=new WeakMap,Symbol.asyncIterator)](){return this.iterator()}tee(){let e=[],n=[],r=this.iterator(),o=i=>({next:()=>{if(i.length===0){let s=r.next();e.push(s),n.push(s)}return i.shift()}});return[new t(()=>o(e),this.controller,G(this,Zu,"f")),new t(()=>o(n),this.controller,G(this,Zu,"f"))]}toReadableStream(){let e=this,n;return my({async start(){n=e[Symbol.asyncIterator]()},async pull(r){try{let{value:o,done:i}=await n.next();if(i)return r.close();let s=Va(JSON.stringify(o)+`
`);r.enqueue(s)}catch(o){r.error(o)}},async cancel(){var r;await((r=n.return)==null?void 0:r.call(n))}})}};async function*cH(t,e){if(!t.body)throw e.abort(),typeof globalThis.navigator!="undefined"&&globalThis.navigator.product==="ReactNative"?new ue("The default react-native fetch implementation does not support streaming. Please use expo/fetch: https://docs.expo.dev/versions/latest/sdk/expo/#expofetch-api"):new ue("Attempted to iterate over a response with no body");let n=new Ty,r=new ds,o=gy(t.body);for await(let i of fH(o))for(let s of r.decode(i)){let a=n.decode(s);a&&(yield a)}for(let i of r.flush()){let s=n.decode(i);s&&(yield s)}}async function*fH(t){let e=new Uint8Array;for await(let n of t){if(n==null)continue;let r=n instanceof ArrayBuffer?new Uint8Array(n):typeof n=="string"?Va(n):n,o=new Uint8Array(e.length+r.length);o.set(e),o.set(r,e.length),e=o;let i;for(;(i=sC(e))!==-1;)yield e.slice(0,i),e=e.slice(i)}e.length>0&&(yield e)}var Ty=class{constructor(){this.event=null,this.data=[],this.chunks=[]}decode(e){if(e.endsWith("\r")&&(e=e.substring(0,e.length-1)),!e){if(!this.event&&!this.data.length)return null;let i={event:this.event,data:this.data.join(`
`),raw:this.chunks};return this.event=null,this.data=[],this.chunks=[],i}if(this.chunks.push(e),e.startsWith(":"))return null;let[n,r,o]=dH(e,":");return o.startsWith(" ")&&(o=o.substring(1)),n==="event"?this.event=o:n==="data"&&this.data.push(o),null}};function dH(t,e){let n=t.indexOf(e);return n!==-1?[t.substring(0,n),e,t.substring(n+e.length)]:[t,"",""]}async function Od(t,e){let{response:n,requestLogID:r,retryOfRequestLogID:o,startTime:i}=e,s=await(async()=>{var p;if(e.options.stream)return pt(t).debug("response",n.status,n.url,n.headers,n.body),e.options.__streamClass?e.options.__streamClass.fromSSEResponse(n,e.controller,t):Vr.fromSSEResponse(n,e.controller,t);if(n.status===204)return null;if(e.options.__binaryResponse)return n;let a=n.headers.get("content-type"),l=(p=a==null?void 0:a.split(";")[0])==null?void 0:p.trim();if((l==null?void 0:l.includes("application/json"))||(l==null?void 0:l.endsWith("+json"))){if(n.headers.get("content-length")==="0")return;let b=await n.json();return Sy(b,n)}return await n.text()})();return pt(t).debug(`[${r}] response parsed`,Ao({retryOfRequestLogID:o,url:n.url,status:n.status,body:s,durationMs:Date.now()-i})),s}function Sy(t,e){return!t||typeof t!="object"||Array.isArray(t)?t:Object.defineProperty(t,"_request_id",{value:e.headers.get("x-request-id"),enumerable:!1})}var ec,hs=class t extends Promise{constructor(e,n,r=Od){super(o=>{o(null)}),this.responsePromise=n,this.parseResponse=r,ec.set(this,void 0),me(this,ec,e,"f")}_thenUnwrap(e){return new t(G(this,ec,"f"),this.responsePromise,async(n,r)=>Sy(e(await this.parseResponse(n,r),r),r.response))}asResponse(){return this.responsePromise.then(e=>e.response)}async withResponse(){let[e,n]=await Promise.all([this.parse(),this.asResponse()]);return{data:e,response:n,request_id:n.headers.get("x-request-id")}}parse(){return this.parsedPromise||(this.parsedPromise=this.responsePromise.then(e=>this.parseResponse(G(this,ec,"f"),e))),this.parsedPromise}then(e,n){return this.parse().then(e,n)}catch(e){return this.parse().catch(e)}finally(e){return this.parse().finally(e)}};ec=new WeakMap;var Dd,tc=class{constructor(e,n,r,o){Dd.set(this,void 0),me(this,Dd,e,"f"),this.options=o,this.response=n,this.body=r}hasNextPage(){return this.getPaginatedItems().length?this.nextPageRequestOptions()!=null:!1}async getNextPage(){let e=this.nextPageRequestOptions();if(!e)throw new ue("No next page expected; please check `.hasNextPage()` before calling `.getNextPage()`.");return await G(this,Dd,"f").requestAPIList(this.constructor,e)}async*iterPages(){let e=this;for(yield e;e.hasNextPage();)e=await e.getNextPage(),yield e}async*[(Dd=new WeakMap,Symbol.asyncIterator)](){for await(let e of this.iterPages())for(let n of e.getPaginatedItems())yield n}},nc=class extends hs{constructor(e,n,r){super(e,n,async(o,i)=>new r(o,i.response,await Od(o,i),i.options))}async*[Symbol.asyncIterator](){let e=await this;for await(let n of e)yield n}},jr=class extends tc{constructor(e,n,r,o){super(e,n,r,o),this.data=r.data||[],this.object=r.object}getPaginatedItems(){var e;return(e=this.data)!=null?e:[]}nextPageRequestOptions(){return null}},Ae=class extends tc{constructor(e,n,r,o){super(e,n,r,o),this.data=r.data||[],this.has_more=r.has_more||!1}getPaginatedItems(){var e;return(e=this.data)!=null?e:[]}hasNextPage(){return this.has_more===!1?!1:super.hasNextPage()}nextPageRequestOptions(){var r;let e=this.getPaginatedItems(),n=(r=e[e.length-1])==null?void 0:r.id;return n?{...this.options,query:{...py(this.options.query),after:n}}:null}},Co=class extends tc{constructor(e,n,r,o){super(e,n,r,o),this.data=r.data||[],this.has_more=r.has_more||!1,this.last_id=r.last_id||""}getPaginatedItems(){var e;return(e=this.data)!=null?e:[]}hasNextPage(){return this.has_more===!1?!1:super.hasNextPage()}nextPageRequestOptions(){let e=this.last_id;return e?{...this.options,query:{...py(this.options.query),after:e}}:null}};var xy=()=>{var t;if(typeof File=="undefined"){let{process:e}=globalThis,n=typeof((t=e==null?void 0:e.versions)==null?void 0:t.node)=="string"&&parseInt(e.versions.node.split("."))<20;throw new Error("`File` is not defined as a global, which is required for file uploads."+(n?" Update to Node 20 LTS or newer, or set `globalThis.File` to `import('node:buffer').File`.":""))}};function ja(t,e,n){return xy(),new File(t,e!=null?e:"unknown_file",n)}function rc(t){return(typeof t=="object"&&t!==null&&("name"in t&&t.name&&String(t.name)||"url"in t&&t.url&&String(t.url)||"filename"in t&&t.filename&&String(t.filename)||"path"in t&&t.path&&String(t.path))||"").split(/[\\/]/).pop()||void 0}var Md=t=>t!=null&&typeof t=="object"&&typeof t[Symbol.asyncIterator]=="function",To=async(t,e)=>Py(t.body)?{...t,body:await uC(t.body,e)}:t,dr=async(t,e)=>({...t,body:await uC(t.body,e)}),lC=new WeakMap;function pH(t){let e=typeof t=="function"?t:t.fetch,n=lC.get(e);if(n)return n;let r=(async()=>{try{let o="Response"in e?e.Response:(await e("data:,")).constructor,i=new FormData;return i.toString()!==await new o(i).text()}catch(o){return!0}})();return lC.set(e,r),r}var uC=async(t,e)=>{if(!await pH(e))throw new TypeError("The provided fetch function does not support file uploads with the current global FormData class.");let n=new FormData;return await Promise.all(Object.entries(t||{}).map(([r,o])=>Iy(n,r,o))),n},cC=t=>t instanceof Blob&&"name"in t,mH=t=>typeof t=="object"&&t!==null&&(t instanceof Response||Md(t)||cC(t)),Py=t=>{if(mH(t))return!0;if(Array.isArray(t))return t.some(Py);if(t&&typeof t=="object"){for(let e in t)if(Py(t[e]))return!0}return!1},Iy=async(t,e,n)=>{if(n!==void 0){if(n==null)throw new TypeError(`Received null for "${e}"; to pass null in FormData, you must use the string 'null'`);if(typeof n=="string"||typeof n=="number"||typeof n=="boolean")t.append(e,String(n));else if(n instanceof Response)t.append(e,ja([await n.blob()],rc(n)));else if(Md(n))t.append(e,ja([await new Response(Cd(n)).blob()],rc(n)));else if(cC(n))t.append(e,n,rc(n));else if(Array.isArray(n))await Promise.all(n.map(r=>Iy(t,e+"[]",r)));else if(typeof n=="object")await Promise.all(Object.entries(n).map(([r,o])=>Iy(t,`${e}[${r}]`,o)));else throw new TypeError(`Invalid value given to form, expected a string, number, boolean, object, Array, File or Blob but got ${n} instead`)}};var fC=t=>t!=null&&typeof t=="object"&&typeof t.size=="number"&&typeof t.type=="string"&&typeof t.text=="function"&&typeof t.slice=="function"&&typeof t.arrayBuffer=="function",gH=t=>t!=null&&typeof t=="object"&&typeof t.name=="string"&&typeof t.lastModified=="number"&&fC(t),yH=t=>t!=null&&typeof t=="object"&&typeof t.url=="string"&&typeof t.blob=="function";async function Fd(t,e,n){if(xy(),t=await t,gH(t))return t instanceof File?t:ja([await t.arrayBuffer()],t.name);if(yH(t)){let o=await t.blob();return e||(e=new URL(t.url).pathname.split(/[\\/]/).pop()),ja(await ky(o),e,n)}let r=await ky(t);if(e||(e=rc(t)),!(n!=null&&n.type)){let o=r.find(i=>typeof i=="object"&&"type"in i&&i.type);typeof o=="string"&&(n={...n,type:o})}return ja(r,e,n)}async function ky(t){var n;let e=[];if(typeof t=="string"||ArrayBuffer.isView(t)||t instanceof ArrayBuffer)e.push(t);else if(fC(t))e.push(t instanceof Blob?t:await t.arrayBuffer());else if(Md(t))for await(let r of t)e.push(...await ky(r));else{let r=(n=t==null?void 0:t.constructor)==null?void 0:n.name;throw new Error(`Unexpected data type: ${typeof t}${r?`; constructor: ${r}`:""}${bH(t)}`)}return e}function bH(t){return typeof t!="object"||t===null?"":`; props: [${Object.getOwnPropertyNames(t).map(n=>`"${n}"`).join(", ")}]`}var Y=class{constructor(e){this._client=e}};function hC(t){return t.replace(/[^A-Za-z0-9\-._~!$&'()*+,;=:@]+/g,encodeURIComponent)}var dC=Object.freeze(Object.create(null)),wH=(t=hC)=>function(n,...r){if(n.length===1)return n[0];let o=!1,i=[],s=n.reduce((f,p,m)=>{var w,_,T;/[?#]/.test(p)&&(o=!0);let b=r[m],v=(o?encodeURIComponent:t)(""+b);return m!==r.length&&(b==null||typeof b=="object"&&b.toString===((T=Object.getPrototypeOf((_=Object.getPrototypeOf((w=b.hasOwnProperty)!=null?w:dC))!=null?_:dC))==null?void 0:T.toString))&&(v=b+"",i.push({start:f.length+p.length,length:v.length,error:`Value of type ${Object.prototype.toString.call(b).slice(8,-1)} is not a valid path parameter`})),f+p+(m===r.length?"":v)},""),a=s.split(/[?#]/,1)[0],l=/(?<=^|\/)(?:\.|%2e){1,2}(?=\/|$)/gi,u;for(;(u=l.exec(a))!==null;)i.push({start:u.index,length:u[0].length,error:`Value "${u[0]}" can't be safely passed as a path parameter`});if(i.sort((f,p)=>f.start-p.start),i.length>0){let f=0,p=i.reduce((m,b)=>{let v=" ".repeat(b.start-f),w="^".repeat(b.length);return f=b.start+b.length,m+v+w},"");throw new ue(`Path parameters result in path with invalid segments:
${i.map(m=>m.error).join(`
`)}
${s}
${p}`)}return s},z=wH(hC);var ps=class extends Y{list(e,n={},r){return this._client.getAPIList(z`/chat/completions/${e}/messages`,Ae,{query:n,...r})}};function oc(t){return t!==void 0&&"function"in t&&t.function!==void 0}function ic(t){return(t==null?void 0:t.$brand)==="auto-parseable-response-format"}function ms(t){return(t==null?void 0:t.$brand)==="auto-parseable-tool"}function pC(t,e){return!e||!Ry(e)?{...t,choices:t.choices.map(n=>(gC(n.message.tool_calls),{...n,message:{...n.message,parsed:null,...n.message.tool_calls?{tool_calls:n.message.tool_calls}:void 0}}))}:sc(t,e)}function sc(t,e){let n=t.choices.map(r=>{var o,i;if(r.finish_reason==="length")throw new qa;if(r.finish_reason==="content_filter")throw new $a;return gC(r.message.tool_calls),{...r,message:{...r.message,...r.message.tool_calls?{tool_calls:(i=(o=r.message.tool_calls)==null?void 0:o.map(s=>CH(e,s)))!=null?i:void 0}:void 0,parsed:r.message.content&&!r.message.refusal?AH(e,r.message.content):null}}});return{...t,choices:n}}function AH(t,e){var n,r;return((n=t.response_format)==null?void 0:n.type)!=="json_schema"?null:((r=t.response_format)==null?void 0:r.type)==="json_schema"?"$parseRaw"in t.response_format?t.response_format.$parseRaw(e):JSON.parse(e):null}function CH(t,e){var r;let n=(r=t.tools)==null?void 0:r.find(o=>{var i;return oc(o)&&((i=o.function)==null?void 0:i.name)===e.function.name});return{...e,function:{...e.function,parsed_arguments:ms(n)?n.$parseRaw(e.function.arguments):n!=null&&n.function.strict?JSON.parse(e.function.arguments):null}}}function mC(t,e){var r;if(!t||!("tools"in t)||!t.tools)return!1;let n=(r=t.tools)==null?void 0:r.find(o=>{var i;return oc(o)&&((i=o.function)==null?void 0:i.name)===e.function.name});return oc(n)&&(ms(n)||(n==null?void 0:n.function.strict)||!1)}function Ry(t){var e,n;return ic(t.response_format)?!0:(n=(e=t.tools)==null?void 0:e.some(r=>ms(r)||r.type==="function"&&r.function.strict===!0))!=null?n:!1}function gC(t){for(let e of t||[])if(e.type!=="function")throw new ue(`Currently only \`function\` tool calls are supported; Received \`${e.type}\``)}function yC(t){for(let e of t!=null?t:[]){if(e.type!=="function")throw new ue(`Currently only \`function\` tool types support auto-parsing; Received \`${e.type}\``);if(e.function.strict!==!0)throw new ue(`The \`${e.function.name}\` tool is not marked with \`strict: true\`. Only strict function tools can be auto-parsed`)}}var Wa=t=>(t==null?void 0:t.role)==="assistant",Ny=t=>(t==null?void 0:t.role)==="tool";var Oy,Ld,Ud,ac,lc,Bd,uc,So,cc,Gd,Hd,za,bC,bi=class{constructor(){Oy.add(this),this.controller=new AbortController,Ld.set(this,void 0),Ud.set(this,()=>{}),ac.set(this,()=>{}),lc.set(this,void 0),Bd.set(this,()=>{}),uc.set(this,()=>{}),So.set(this,{}),cc.set(this,!1),Gd.set(this,!1),Hd.set(this,!1),za.set(this,!1),me(this,Ld,new Promise((e,n)=>{me(this,Ud,e,"f"),me(this,ac,n,"f")}),"f"),me(this,lc,new Promise((e,n)=>{me(this,Bd,e,"f"),me(this,uc,n,"f")}),"f"),G(this,Ld,"f").catch(()=>{}),G(this,lc,"f").catch(()=>{})}_run(e){setTimeout(()=>{e().then(()=>{this._emitFinal(),this._emit("end")},G(this,Oy,"m",bC).bind(this))},0)}_connected(){this.ended||(G(this,Ud,"f").call(this),this._emit("connect"))}get ended(){return G(this,cc,"f")}get errored(){return G(this,Gd,"f")}get aborted(){return G(this,Hd,"f")}abort(){this.controller.abort()}on(e,n){return(G(this,So,"f")[e]||(G(this,So,"f")[e]=[])).push({listener:n}),this}off(e,n){let r=G(this,So,"f")[e];if(!r)return this;let o=r.findIndex(i=>i.listener===n);return o>=0&&r.splice(o,1),this}once(e,n){return(G(this,So,"f")[e]||(G(this,So,"f")[e]=[])).push({listener:n,once:!0}),this}emitted(e){return new Promise((n,r)=>{me(this,za,!0,"f"),e!=="error"&&this.once("error",r),this.once(e,n)})}async done(){me(this,za,!0,"f"),await G(this,lc,"f")}_emit(e,...n){if(G(this,cc,"f"))return;e==="end"&&(me(this,cc,!0,"f"),G(this,Bd,"f").call(this));let r=G(this,So,"f")[e];if(r&&(G(this,So,"f")[e]=r.filter(o=>!o.once),r.forEach(({listener:o})=>o(...n))),e==="abort"){let o=n[0];!G(this,za,"f")&&!(r!=null&&r.length)&&Promise.reject(o),G(this,ac,"f").call(this,o),G(this,uc,"f").call(this,o),this._emit("end");return}if(e==="error"){let o=n[0];!G(this,za,"f")&&!(r!=null&&r.length)&&Promise.reject(o),G(this,ac,"f").call(this,o),G(this,uc,"f").call(this,o),this._emit("end")}}_emitFinal(){}};Ld=new WeakMap,Ud=new WeakMap,ac=new WeakMap,lc=new WeakMap,Bd=new WeakMap,uc=new WeakMap,So=new WeakMap,cc=new WeakMap,Gd=new WeakMap,Hd=new WeakMap,za=new WeakMap,Oy=new WeakSet,bC=function(e){if(me(this,Gd,!0,"f"),e instanceof Error&&e.name==="AbortError"&&(e=new yt),e instanceof yt)return me(this,Hd,!0,"f"),this._emit("abort",e);if(e instanceof ue)return this._emit("error",e);if(e instanceof Error){let n=new ue(e.message);return n.cause=e,this._emit("error",n)}return this._emit("error",new ue(String(e)))};function vC(t){return typeof t.parse=="function"}var Zt,Dy,qd,My,Fy,Ly,wC,_C,TH=10,Ja=class extends bi{constructor(){super(...arguments),Zt.add(this),this._chatCompletions=[],this.messages=[]}_addChatCompletion(e){var r;this._chatCompletions.push(e),this._emit("chatCompletion",e);let n=(r=e.choices[0])==null?void 0:r.message;return n&&this._addMessage(n),e}_addMessage(e,n=!0){if("content"in e||(e.content=null),this.messages.push(e),n){if(this._emit("message",e),Ny(e)&&e.content)this._emit("functionToolCallResult",e.content);else if(Wa(e)&&e.tool_calls)for(let r of e.tool_calls)r.type==="function"&&this._emit("functionToolCall",r.function)}}async finalChatCompletion(){await this.done();let e=this._chatCompletions[this._chatCompletions.length-1];if(!e)throw new ue("stream ended without producing a ChatCompletion");return e}async finalContent(){return await this.done(),G(this,Zt,"m",Dy).call(this)}async finalMessage(){return await this.done(),G(this,Zt,"m",qd).call(this)}async finalFunctionToolCall(){return await this.done(),G(this,Zt,"m",My).call(this)}async finalFunctionToolCallResult(){return await this.done(),G(this,Zt,"m",Fy).call(this)}async totalUsage(){return await this.done(),G(this,Zt,"m",Ly).call(this)}allChatCompletions(){return[...this._chatCompletions]}_emitFinal(){let e=this._chatCompletions[this._chatCompletions.length-1];e&&this._emit("finalChatCompletion",e);let n=G(this,Zt,"m",qd).call(this);n&&this._emit("finalMessage",n);let r=G(this,Zt,"m",Dy).call(this);r&&this._emit("finalContent",r);let o=G(this,Zt,"m",My).call(this);o&&this._emit("finalFunctionToolCall",o);let i=G(this,Zt,"m",Fy).call(this);i!=null&&this._emit("finalFunctionToolCallResult",i),this._chatCompletions.some(s=>s.usage)&&this._emit("totalUsage",G(this,Zt,"m",Ly).call(this))}async _createChatCompletion(e,n,r){let o=r==null?void 0:r.signal;o&&(o.aborted&&this.controller.abort(),o.addEventListener("abort",()=>this.controller.abort())),G(this,Zt,"m",wC).call(this,n);let i=await e.chat.completions.create({...n,stream:!1},{...r,signal:this.controller.signal});return this._connected(),this._addChatCompletion(sc(i,n))}async _runChatCompletion(e,n,r){for(let o of n.messages)this._addMessage(o,!1);return await this._createChatCompletion(e,n,r)}async _runTools(e,n,r){var b,v,w;let o="tool",{tool_choice:i="auto",stream:s,...a}=n,l=typeof i!="string"&&i.type==="function"&&((b=i==null?void 0:i.function)==null?void 0:b.name),{maxChatCompletions:u=TH}=r||{},f=n.tools.map(_=>{if(ms(_)){if(!_.$callback)throw new ue("Tool given to `.runTools()` that does not have an associated function");return{type:"function",function:{function:_.$callback,name:_.function.name,description:_.function.description||"",parameters:_.function.parameters,parse:_.$parseRaw,strict:!0}}}return _}),p={};for(let _ of f)_.type==="function"&&(p[_.function.name||_.function.function.name]=_.function);let m="tools"in n?f.map(_=>_.type==="function"?{type:"function",function:{name:_.function.name||_.function.function.name,parameters:_.function.parameters,description:_.function.description,strict:_.function.strict}}:_):void 0;for(let _ of n.messages)this._addMessage(_,!1);for(let _=0;_<u;++_){let R=(v=(await this._createChatCompletion(e,{...a,tool_choice:i,tools:m,messages:[...this.messages]},r)).choices[0])==null?void 0:v.message;if(!R)throw new ue("missing message in ChatCompletion response");if(!((w=R.tool_calls)!=null&&w.length))return;for(let L of R.tool_calls){if(L.type!=="function")continue;let D=L.id,{name:x,arguments:P}=L.function,V=p[x];if(V){if(l&&l!==x){let X=`Invalid tool_call: ${JSON.stringify(x)}. ${JSON.stringify(l)} requested. Please try again`;this._addMessage({role:o,tool_call_id:D,content:X});continue}}else{let X=`Invalid tool_call: ${JSON.stringify(x)}. Available options are: ${Object.keys(p).map(ee=>JSON.stringify(ee)).join(", ")}. Please try again`;this._addMessage({role:o,tool_call_id:D,content:X});continue}let J;try{J=vC(V)?await V.parse(P):P}catch(X){let ee=X instanceof Error?X.message:String(X);this._addMessage({role:o,tool_call_id:D,content:ee});continue}let E=await V.function(J,this),O=G(this,Zt,"m",_C).call(this,E);if(this._addMessage({role:o,tool_call_id:D,content:O}),l)return}}}};Zt=new WeakSet,Dy=function(){var e;return(e=G(this,Zt,"m",qd).call(this).content)!=null?e:null},qd=function(){var n,r;let e=this.messages.length;for(;e-- >0;){let o=this.messages[e];if(Wa(o))return{...o,content:(n=o.content)!=null?n:null,refusal:(r=o.refusal)!=null?r:null}}throw new ue("stream ended without producing a ChatCompletionMessage with role=assistant")},My=function(){var e,n;for(let r=this.messages.length-1;r>=0;r--){let o=this.messages[r];if(Wa(o)&&((e=o==null?void 0:o.tool_calls)!=null&&e.length))return(n=o.tool_calls.filter(i=>i.type==="function").at(-1))==null?void 0:n.function}},Fy=function(){for(let e=this.messages.length-1;e>=0;e--){let n=this.messages[e];if(Ny(n)&&n.content!=null&&typeof n.content=="string"&&this.messages.some(r=>{var o;return r.role==="assistant"&&((o=r.tool_calls)==null?void 0:o.some(i=>i.type==="function"&&i.id===n.tool_call_id))}))return n.content}},Ly=function(){let e={completion_tokens:0,prompt_tokens:0,total_tokens:0};for(let{usage:n}of this._chatCompletions)n&&(e.completion_tokens+=n.completion_tokens,e.prompt_tokens+=n.prompt_tokens,e.total_tokens+=n.total_tokens);return e},wC=function(e){if(e.n!=null&&e.n>1)throw new ue("ChatCompletion convenience helpers only support n=1 at this time. To use n>1, please use chat.completions.create() directly.")},_C=function(e){return typeof e=="string"?e:e===void 0?"undefined":JSON.stringify(e)};var fc=class t extends Ja{static runTools(e,n,r){let o=new t,i={...r,headers:{...r==null?void 0:r.headers,"X-Stainless-Helper-Method":"runTools"}};return o._run(()=>o._runTools(e,n,i)),o}_addMessage(e,n=!0){super._addMessage(e,n),Wa(e)&&e.content&&this._emit("content",e.content)}};var xt={STR:1,NUM:2,ARR:4,OBJ:8,NULL:16,BOOL:32,NAN:64,INFINITY:128,MINUS_INFINITY:256,INF:384,SPECIAL:496,ATOM:499,COLLECTION:12,ALL:511},Uy=class extends Error{},By=class extends Error{};function SH(t,e=xt.ALL){if(typeof t!="string")throw new TypeError(`expecting str, got ${typeof t}`);if(!t.trim())throw new Error(`${t} is empty`);return PH(t.trim(),e)}var PH=(t,e)=>{let n=t.length,r=0,o=m=>{throw new Uy(`${m} at position ${r}`)},i=m=>{throw new By(`${m} at position ${r}`)},s=()=>(p(),r>=n&&o("Unexpected end of input"),t[r]==='"'?a():t[r]==="{"?l():t[r]==="["?u():t.substring(r,r+4)==="null"||xt.NULL&e&&n-r<4&&"null".startsWith(t.substring(r))?(r+=4,null):t.substring(r,r+4)==="true"||xt.BOOL&e&&n-r<4&&"true".startsWith(t.substring(r))?(r+=4,!0):t.substring(r,r+5)==="false"||xt.BOOL&e&&n-r<5&&"false".startsWith(t.substring(r))?(r+=5,!1):t.substring(r,r+8)==="Infinity"||xt.INFINITY&e&&n-r<8&&"Infinity".startsWith(t.substring(r))?(r+=8,1/0):t.substring(r,r+9)==="-Infinity"||xt.MINUS_INFINITY&e&&1<n-r&&n-r<9&&"-Infinity".startsWith(t.substring(r))?(r+=9,-1/0):t.substring(r,r+3)==="NaN"||xt.NAN&e&&n-r<3&&"NaN".startsWith(t.substring(r))?(r+=3,NaN):f()),a=()=>{let m=r,b=!1;for(r++;r<n&&(t[r]!=='"'||b&&t[r-1]==="\\");)b=t[r]==="\\"?!b:!1,r++;if(t.charAt(r)=='"')try{return JSON.parse(t.substring(m,++r-Number(b)))}catch(v){i(String(v))}else if(xt.STR&e)try{return JSON.parse(t.substring(m,r-Number(b))+'"')}catch(v){return JSON.parse(t.substring(m,t.lastIndexOf("\\"))+'"')}o("Unterminated string literal")},l=()=>{r++,p();let m={};try{for(;t[r]!=="}";){if(p(),r>=n&&xt.OBJ&e)return m;let b=a();p(),r++;try{let v=s();Object.defineProperty(m,b,{value:v,writable:!0,enumerable:!0,configurable:!0})}catch(v){if(xt.OBJ&e)return m;throw v}p(),t[r]===","&&r++}}catch(b){if(xt.OBJ&e)return m;o("Expected '}' at end of object")}return r++,m},u=()=>{r++;let m=[];try{for(;t[r]!=="]";)m.push(s()),p(),t[r]===","&&r++}catch(b){if(xt.ARR&e)return m;o("Expected ']' at end of array")}return r++,m},f=()=>{if(r===0){t==="-"&&xt.NUM&e&&o("Not sure what '-' is");try{return JSON.parse(t)}catch(b){if(xt.NUM&e)try{return t[t.length-1]==="."?JSON.parse(t.substring(0,t.lastIndexOf("."))):JSON.parse(t.substring(0,t.lastIndexOf("e")))}catch(v){}i(String(b))}}let m=r;for(t[r]==="-"&&r++;t[r]&&!",]}".includes(t[r]);)r++;r==n&&!(xt.NUM&e)&&o("Unterminated number literal");try{return JSON.parse(t.substring(m,r))}catch(b){t.substring(m,r)==="-"&&xt.NUM&e&&o("Not sure what '-' is");try{return JSON.parse(t.substring(m,t.lastIndexOf("e")))}catch(v){i(String(v))}}},p=()=>{for(;r<n&&` 
\r	`.includes(t[r]);)r++};return s()},Gy=t=>SH(t,xt.ALL^xt.NUM);var St,Po,Ka,vi,Hy,$d,qy,$y,Vy,Vd,jy,EC,gs=class t extends Ja{constructor(e){super(),St.add(this),Po.set(this,void 0),Ka.set(this,void 0),vi.set(this,void 0),me(this,Po,e,"f"),me(this,Ka,[],"f")}get currentChatCompletionSnapshot(){return G(this,vi,"f")}static fromReadableStream(e){let n=new t(null);return n._run(()=>n._fromReadableStream(e)),n}static createChatCompletion(e,n,r){let o=new t(n);return o._run(()=>o._runChatCompletion(e,{...n,stream:!0},{...r,headers:{...r==null?void 0:r.headers,"X-Stainless-Helper-Method":"stream"}})),o}async _createChatCompletion(e,n,r){var s;super._createChatCompletion;let o=r==null?void 0:r.signal;o&&(o.aborted&&this.controller.abort(),o.addEventListener("abort",()=>this.controller.abort())),G(this,St,"m",Hy).call(this);let i=await e.chat.completions.create({...n,stream:!0},{...r,signal:this.controller.signal});this._connected();for await(let a of i)G(this,St,"m",qy).call(this,a);if((s=i.controller.signal)!=null&&s.aborted)throw new yt;return this._addChatCompletion(G(this,St,"m",Vd).call(this))}async _fromReadableStream(e,n){var s;let r=n==null?void 0:n.signal;r&&(r.aborted&&this.controller.abort(),r.addEventListener("abort",()=>this.controller.abort())),G(this,St,"m",Hy).call(this),this._connected();let o=Vr.fromReadableStream(e,this.controller),i;for await(let a of o)i&&i!==a.id&&this._addChatCompletion(G(this,St,"m",Vd).call(this)),G(this,St,"m",qy).call(this,a),i=a.id;if((s=o.controller.signal)!=null&&s.aborted)throw new yt;return this._addChatCompletion(G(this,St,"m",Vd).call(this))}[(Po=new WeakMap,Ka=new WeakMap,vi=new WeakMap,St=new WeakSet,Hy=function(){this.ended||me(this,vi,void 0,"f")},$d=function(n){let r=G(this,Ka,"f")[n.index];return r||(r={content_done:!1,refusal_done:!1,logprobs_content_done:!1,logprobs_refusal_done:!1,done_tool_calls:new Set,current_tool_call_index:null},G(this,Ka,"f")[n.index]=r,r)},qy=function(n){var o,i,s,a,l,u,f,p,m,b,v,w,_,T,R,L,D,x,P,V;if(this.ended)return;let r=G(this,St,"m",EC).call(this,n);this._emit("chunk",n,r);for(let J of n.choices){let E=r.choices[J.index];J.delta.content!=null&&((o=E.message)==null?void 0:o.role)==="assistant"&&((i=E.message)!=null&&i.content)&&(this._emit("content",J.delta.content,E.message.content),this._emit("content.delta",{delta:J.delta.content,snapshot:E.message.content,parsed:E.message.parsed})),J.delta.refusal!=null&&((s=E.message)==null?void 0:s.role)==="assistant"&&((a=E.message)!=null&&a.refusal)&&this._emit("refusal.delta",{delta:J.delta.refusal,snapshot:E.message.refusal}),((l=J.logprobs)==null?void 0:l.content)!=null&&((u=E.message)==null?void 0:u.role)==="assistant"&&this._emit("logprobs.content.delta",{content:(f=J.logprobs)==null?void 0:f.content,snapshot:(m=(p=E.logprobs)==null?void 0:p.content)!=null?m:[]}),((b=J.logprobs)==null?void 0:b.refusal)!=null&&((v=E.message)==null?void 0:v.role)==="assistant"&&this._emit("logprobs.refusal.delta",{refusal:(w=J.logprobs)==null?void 0:w.refusal,snapshot:(T=(_=E.logprobs)==null?void 0:_.refusal)!=null?T:[]});let O=G(this,St,"m",$d).call(this,E);E.finish_reason&&(G(this,St,"m",Vy).call(this,E),O.current_tool_call_index!=null&&G(this,St,"m",$y).call(this,E,O.current_tool_call_index));for(let X of(R=J.delta.tool_calls)!=null?R:[])O.current_tool_call_index!==X.index&&(G(this,St,"m",Vy).call(this,E),O.current_tool_call_index!=null&&G(this,St,"m",$y).call(this,E,O.current_tool_call_index)),O.current_tool_call_index=X.index;for(let X of(L=J.delta.tool_calls)!=null?L:[]){let ee=(D=E.message.tool_calls)==null?void 0:D[X.index];ee!=null&&ee.type&&((ee==null?void 0:ee.type)==="function"?this._emit("tool_calls.function.arguments.delta",{name:(x=ee.function)==null?void 0:x.name,index:X.index,arguments:ee.function.arguments,parsed_arguments:ee.function.parsed_arguments,arguments_delta:(V=(P=X.function)==null?void 0:P.arguments)!=null?V:""}):(ee==null||ee.type,void 0))}}},$y=function(n,r){var s,a,l;if(G(this,St,"m",$d).call(this,n).done_tool_calls.has(r))return;let i=(s=n.message.tool_calls)==null?void 0:s[r];if(!i)throw new Error("no tool call snapshot");if(!i.type)throw new Error("tool call snapshot missing `type`");if(i.type==="function"){let u=(l=(a=G(this,Po,"f"))==null?void 0:a.tools)==null?void 0:l.find(f=>oc(f)&&f.function.name===i.function.name);this._emit("tool_calls.function.arguments.done",{name:i.function.name,index:r,arguments:i.function.arguments,parsed_arguments:ms(u)?u.$parseRaw(i.function.arguments):u!=null&&u.function.strict?JSON.parse(i.function.arguments):null})}else i.type},Vy=function(n){var o,i;let r=G(this,St,"m",$d).call(this,n);if(n.message.content&&!r.content_done){r.content_done=!0;let s=G(this,St,"m",jy).call(this);this._emit("content.done",{content:n.message.content,parsed:s?s.$parseRaw(n.message.content):null})}n.message.refusal&&!r.refusal_done&&(r.refusal_done=!0,this._emit("refusal.done",{refusal:n.message.refusal})),(o=n.logprobs)!=null&&o.content&&!r.logprobs_content_done&&(r.logprobs_content_done=!0,this._emit("logprobs.content.done",{content:n.logprobs.content})),(i=n.logprobs)!=null&&i.refusal&&!r.logprobs_refusal_done&&(r.logprobs_refusal_done=!0,this._emit("logprobs.refusal.done",{refusal:n.logprobs.refusal}))},Vd=function(){if(this.ended)throw new ue("stream has ended, this shouldn't happen");let n=G(this,vi,"f");if(!n)throw new ue("request ended without sending any chunks");return me(this,vi,void 0,"f"),me(this,Ka,[],"f"),IH(n,G(this,Po,"f"))},jy=function(){var r;let n=(r=G(this,Po,"f"))==null?void 0:r.response_format;return ic(n)?n:null},EC=function(n){var f,p,m,b,v,w;var r,o,i,s;let a=G(this,vi,"f"),{choices:l,...u}=n;a?Object.assign(a,u):a=me(this,vi,{...u,choices:[]},"f");for(let{delta:_,finish_reason:T,index:R,logprobs:L=null,...D}of n.choices){let x=a.choices[R];if(x||(x=a.choices[R]={finish_reason:T,index:R,message:{},logprobs:L,...D}),L)if(!x.logprobs)x.logprobs=Object.assign({},L);else{let{content:ee,refusal:se,...re}=L;Object.assign(x.logprobs,re),ee&&((f=(r=x.logprobs).content)!=null||(r.content=[]),x.logprobs.content.push(...ee)),se&&((p=(o=x.logprobs).refusal)!=null||(o.refusal=[]),x.logprobs.refusal.push(...se))}if(T&&(x.finish_reason=T,G(this,Po,"f")&&Ry(G(this,Po,"f")))){if(T==="length")throw new qa;if(T==="content_filter")throw new $a}if(Object.assign(x,D),!_)continue;let{content:P,refusal:V,function_call:J,role:E,tool_calls:O,...X}=_;if(Object.assign(x.message,X),V&&(x.message.refusal=(x.message.refusal||"")+V),E&&(x.message.role=E),J&&(x.message.function_call?(J.name&&(x.message.function_call.name=J.name),J.arguments&&((m=(i=x.message.function_call).arguments)!=null||(i.arguments=""),x.message.function_call.arguments+=J.arguments)):x.message.function_call=J),P&&(x.message.content=(x.message.content||"")+P,!x.message.refusal&&G(this,St,"m",jy).call(this)&&(x.message.parsed=Gy(x.message.content))),O){x.message.tool_calls||(x.message.tool_calls=[]);for(let{index:ee,id:se,type:re,function:be,...Me}of O){let ke=(b=(s=x.message.tool_calls)[ee])!=null?b:s[ee]={};Object.assign(ke,Me),se&&(ke.id=se),re&&(ke.type=re),be&&((w=ke.function)!=null||(ke.function={name:(v=be.name)!=null?v:"",arguments:""})),be!=null&&be.name&&(ke.function.name=be.name),be!=null&&be.arguments&&(ke.function.arguments+=be.arguments,mC(G(this,Po,"f"),ke)&&(ke.function.parsed_arguments=Gy(ke.function.arguments)))}}}return a},Symbol.asyncIterator)](){let e=[],n=[],r=!1;return this.on("chunk",o=>{let i=n.shift();i?i.resolve(o):e.push(o)}),this.on("end",()=>{r=!0;for(let o of n)o.resolve(void 0);n.length=0}),this.on("abort",o=>{r=!0;for(let i of n)i.reject(o);n.length=0}),this.on("error",o=>{r=!0;for(let i of n)i.reject(o);n.length=0}),{next:async()=>e.length?{value:e.shift(),done:!1}:r?{value:void 0,done:!0}:new Promise((i,s)=>n.push({resolve:i,reject:s})).then(i=>i?{value:i,done:!1}:{value:void 0,done:!0}),return:async()=>(this.abort(),{value:void 0,done:!0})}}toReadableStream(){return new Vr(this[Symbol.asyncIterator].bind(this),this.controller).toReadableStream()}};function IH(t,e){let{id:n,choices:r,created:o,model:i,system_fingerprint:s,...a}=t,l={...a,id:n,choices:r.map(({message:u,finish_reason:f,index:p,logprobs:m,...b})=>{var L,D,x;if(!f)throw new ue(`missing finish_reason for choice ${p}`);let{content:v=null,function_call:w,tool_calls:_,...T}=u,R=u.role;if(!R)throw new ue(`missing role for choice ${p}`);if(w){let{arguments:P,name:V}=w;if(P==null)throw new ue(`missing function_call.arguments for choice ${p}`);if(!V)throw new ue(`missing function_call.name for choice ${p}`);return{...b,message:{content:v,function_call:{arguments:P,name:V},role:R,refusal:(L=u.refusal)!=null?L:null},finish_reason:f,index:p,logprobs:m}}return _?{...b,index:p,finish_reason:f,logprobs:m,message:{...T,role:R,content:v,refusal:(D=u.refusal)!=null?D:null,tool_calls:_.map((P,V)=>{let{function:J,type:E,id:O,...X}=P,{arguments:ee,name:se,...re}=J||{};if(O==null)throw new ue(`missing choices[${p}].tool_calls[${V}].id
${jd(t)}`);if(E==null)throw new ue(`missing choices[${p}].tool_calls[${V}].type
${jd(t)}`);if(se==null)throw new ue(`missing choices[${p}].tool_calls[${V}].function.name
${jd(t)}`);if(ee==null)throw new ue(`missing choices[${p}].tool_calls[${V}].function.arguments
${jd(t)}`);return{...X,id:O,type:E,function:{...re,name:se,arguments:ee}}})}}:{...b,message:{...T,content:v,role:R,refusal:(x=u.refusal)!=null?x:null},finish_reason:f,index:p,logprobs:m}}),created:o,model:i,object:"chat.completion",...s?{system_fingerprint:s}:{}};return pC(l,e)}function jd(t){return JSON.stringify(t)}var dc=class t extends gs{static fromReadableStream(e){let n=new t(null);return n._run(()=>n._fromReadableStream(e)),n}static runTools(e,n,r){let o=new t(n),i={...r,headers:{...r==null?void 0:r.headers,"X-Stainless-Helper-Method":"runTools"}};return o._run(()=>o._runTools(e,n,i)),o}};var Io=class extends Y{constructor(){super(...arguments),this.messages=new ps(this._client)}create(e,n){var r;return this._client.post("/chat/completions",{body:e,...n,stream:(r=e.stream)!=null?r:!1})}retrieve(e,n){return this._client.get(z`/chat/completions/${e}`,n)}update(e,n,r){return this._client.post(z`/chat/completions/${e}`,{body:n,...r})}list(e={},n){return this._client.getAPIList("/chat/completions",Ae,{query:e,...n})}delete(e,n){return this._client.delete(z`/chat/completions/${e}`,n)}parse(e,n){return yC(e.tools),this._client.chat.completions.create(e,{...n,headers:{...n==null?void 0:n.headers,"X-Stainless-Helper-Method":"chat.completions.parse"}})._thenUnwrap(r=>sc(r,e))}runTools(e,n){return e.stream?dc.runTools(this._client,e,n):fc.runTools(this._client,e,n)}stream(e,n){return gs.createChatCompletion(this._client,e,n)}};Io.Messages=ps;var wi=class extends Y{constructor(){super(...arguments),this.completions=new Io(this._client)}};wi.Completions=Io;var AC=Symbol("brand.privateNullableHeaders");function*kH(t){if(!t)return;if(AC in t){let{values:r,nulls:o}=t;yield*r.entries();for(let i of o)yield[i,null];return}let e=!1,n;t instanceof Headers?n=t.entries():hy(t)?n=t:(e=!0,n=Object.entries(t!=null?t:{}));for(let r of n){let o=r[0];if(typeof o!="string")throw new TypeError("expected header name to be a string");let i=hy(r[1])?r[1]:[r[1]],s=!1;for(let a of i)a!==void 0&&(e&&!s&&(s=!0,yield[o,null]),yield[o,a])}}var oe=t=>{let e=new Headers,n=new Set;for(let r of t){let o=new Set;for(let[i,s]of kH(r)){let a=i.toLowerCase();o.has(a)||(e.delete(i),o.add(a)),s===null?(e.delete(i),n.add(a)):(e.append(i,s),n.delete(a))}}return{[AC]:!0,values:e,nulls:n}};var Ya=class extends Y{create(e,n){return this._client.post("/audio/speech",{body:e,...n,headers:oe([{Accept:"application/octet-stream"},n==null?void 0:n.headers]),__binaryResponse:!0})}};var Xa=class extends Y{create(e,n){var r;return this._client.post("/audio/transcriptions",dr({body:e,...n,stream:(r=e.stream)!=null?r:!1,__metadata:{model:e.model}},this._client))}};var Qa=class extends Y{create(e,n){return this._client.post("/audio/translations",dr({body:e,...n,__metadata:{model:e.model}},this._client))}};var Wr=class extends Y{constructor(){super(...arguments),this.transcriptions=new Xa(this._client),this.translations=new Qa(this._client),this.speech=new Ya(this._client)}};Wr.Transcriptions=Xa;Wr.Translations=Qa;Wr.Speech=Ya;var ys=class extends Y{create(e,n){return this._client.post("/batches",{body:e,...n})}retrieve(e,n){return this._client.get(z`/batches/${e}`,n)}list(e={},n){return this._client.getAPIList("/batches",Ae,{query:e,...n})}cancel(e,n){return this._client.post(z`/batches/${e}/cancel`,n)}};var Za=class extends Y{create(e,n){return this._client.post("/assistants",{body:e,...n,headers:oe([{"OpenAI-Beta":"assistants=v2"},n==null?void 0:n.headers])})}retrieve(e,n){return this._client.get(z`/assistants/${e}`,{...n,headers:oe([{"OpenAI-Beta":"assistants=v2"},n==null?void 0:n.headers])})}update(e,n,r){return this._client.post(z`/assistants/${e}`,{body:n,...r,headers:oe([{"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers])})}list(e={},n){return this._client.getAPIList("/assistants",Ae,{query:e,...n,headers:oe([{"OpenAI-Beta":"assistants=v2"},n==null?void 0:n.headers])})}delete(e,n){return this._client.delete(z`/assistants/${e}`,{...n,headers:oe([{"OpenAI-Beta":"assistants=v2"},n==null?void 0:n.headers])})}};var el=class extends Y{create(e,n){return this._client.post("/realtime/sessions",{body:e,...n,headers:oe([{"OpenAI-Beta":"assistants=v2"},n==null?void 0:n.headers])})}};var tl=class extends Y{create(e,n){return this._client.post("/realtime/transcription_sessions",{body:e,...n,headers:oe([{"OpenAI-Beta":"assistants=v2"},n==null?void 0:n.headers])})}};var _i=class extends Y{constructor(){super(...arguments),this.sessions=new el(this._client),this.transcriptionSessions=new tl(this._client)}};_i.Sessions=el;_i.TranscriptionSessions=tl;var nl=class extends Y{create(e,n){return this._client.post("/chatkit/sessions",{body:e,...n,headers:oe([{"OpenAI-Beta":"chatkit_beta=v1"},n==null?void 0:n.headers])})}cancel(e,n){return this._client.post(z`/chatkit/sessions/${e}/cancel`,{...n,headers:oe([{"OpenAI-Beta":"chatkit_beta=v1"},n==null?void 0:n.headers])})}};var rl=class extends Y{retrieve(e,n){return this._client.get(z`/chatkit/threads/${e}`,{...n,headers:oe([{"OpenAI-Beta":"chatkit_beta=v1"},n==null?void 0:n.headers])})}list(e={},n){return this._client.getAPIList("/chatkit/threads",Co,{query:e,...n,headers:oe([{"OpenAI-Beta":"chatkit_beta=v1"},n==null?void 0:n.headers])})}delete(e,n){return this._client.delete(z`/chatkit/threads/${e}`,{...n,headers:oe([{"OpenAI-Beta":"chatkit_beta=v1"},n==null?void 0:n.headers])})}listItems(e,n={},r){return this._client.getAPIList(z`/chatkit/threads/${e}/items`,Co,{query:n,...r,headers:oe([{"OpenAI-Beta":"chatkit_beta=v1"},r==null?void 0:r.headers])})}};var Ei=class extends Y{constructor(){super(...arguments),this.sessions=new nl(this._client),this.threads=new rl(this._client)}};Ei.Sessions=nl;Ei.Threads=rl;var ol=class extends Y{create(e,n,r){return this._client.post(z`/threads/${e}/messages`,{body:n,...r,headers:oe([{"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers])})}retrieve(e,n,r){let{thread_id:o}=n;return this._client.get(z`/threads/${o}/messages/${e}`,{...r,headers:oe([{"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers])})}update(e,n,r){let{thread_id:o,...i}=n;return this._client.post(z`/threads/${o}/messages/${e}`,{body:i,...r,headers:oe([{"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers])})}list(e,n={},r){return this._client.getAPIList(z`/threads/${e}/messages`,Ae,{query:n,...r,headers:oe([{"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers])})}delete(e,n,r){let{thread_id:o}=n;return this._client.delete(z`/threads/${o}/messages/${e}`,{...r,headers:oe([{"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers])})}};var il=class extends Y{retrieve(e,n,r){let{thread_id:o,run_id:i,...s}=n;return this._client.get(z`/threads/${o}/runs/${i}/steps/${e}`,{query:s,...r,headers:oe([{"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers])})}list(e,n,r){let{thread_id:o,...i}=n;return this._client.getAPIList(z`/threads/${o}/runs/${e}/steps`,Ae,{query:i,...r,headers:oe([{"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers])})}};var CC=t=>{if(typeof Buffer!="undefined"){let e=Buffer.from(t,"base64");return Array.from(new Float32Array(e.buffer,e.byteOffset,e.length/Float32Array.BYTES_PER_ELEMENT))}else{let e=atob(t),n=e.length,r=new Uint8Array(n);for(let o=0;o<n;o++)r[o]=e.charCodeAt(o);return Array.from(new Float32Array(r.buffer))}};var Ai=t=>{var e,n,r,o,i,s;if(typeof globalThis.process!="undefined")return(r=(n=(e=globalThis.process.env)==null?void 0:e[t])==null?void 0:n.trim())!=null?r:void 0;if(typeof globalThis.Deno!="undefined")return(s=(i=(o=globalThis.Deno.env)==null?void 0:o.get)==null?void 0:i.call(o,t))==null?void 0:s.trim()};var Lt,vs,Wy,zr,Wd,hr,ws,sl,bs,Kd,Tn,zd,Jd,mc,hc,pc,TC,SC,PC,IC,xC,kC,RC,xo=class extends bi{constructor(){super(...arguments),Lt.add(this),Wy.set(this,[]),zr.set(this,{}),Wd.set(this,{}),hr.set(this,void 0),ws.set(this,void 0),sl.set(this,void 0),bs.set(this,void 0),Kd.set(this,void 0),Tn.set(this,void 0),zd.set(this,void 0),Jd.set(this,void 0),mc.set(this,void 0)}[(Wy=new WeakMap,zr=new WeakMap,Wd=new WeakMap,hr=new WeakMap,ws=new WeakMap,sl=new WeakMap,bs=new WeakMap,Kd=new WeakMap,Tn=new WeakMap,zd=new WeakMap,Jd=new WeakMap,mc=new WeakMap,Lt=new WeakSet,Symbol.asyncIterator)](){let e=[],n=[],r=!1;return this.on("event",o=>{let i=n.shift();i?i.resolve(o):e.push(o)}),this.on("end",()=>{r=!0;for(let o of n)o.resolve(void 0);n.length=0}),this.on("abort",o=>{r=!0;for(let i of n)i.reject(o);n.length=0}),this.on("error",o=>{r=!0;for(let i of n)i.reject(o);n.length=0}),{next:async()=>e.length?{value:e.shift(),done:!1}:r?{value:void 0,done:!0}:new Promise((i,s)=>n.push({resolve:i,reject:s})).then(i=>i?{value:i,done:!1}:{value:void 0,done:!0}),return:async()=>(this.abort(),{value:void 0,done:!0})}}static fromReadableStream(e){let n=new vs;return n._run(()=>n._fromReadableStream(e)),n}async _fromReadableStream(e,n){var i;let r=n==null?void 0:n.signal;r&&(r.aborted&&this.controller.abort(),r.addEventListener("abort",()=>this.controller.abort())),this._connected();let o=Vr.fromReadableStream(e,this.controller);for await(let s of o)G(this,Lt,"m",hc).call(this,s);if((i=o.controller.signal)!=null&&i.aborted)throw new yt;return this._addRun(G(this,Lt,"m",pc).call(this))}toReadableStream(){return new Vr(this[Symbol.asyncIterator].bind(this),this.controller).toReadableStream()}static createToolAssistantStream(e,n,r,o){let i=new vs;return i._run(()=>i._runToolAssistantStream(e,n,r,{...o,headers:{...o==null?void 0:o.headers,"X-Stainless-Helper-Method":"stream"}})),i}async _createToolAssistantStream(e,n,r,o){var l;let i=o==null?void 0:o.signal;i&&(i.aborted&&this.controller.abort(),i.addEventListener("abort",()=>this.controller.abort()));let s={...r,stream:!0},a=await e.submitToolOutputs(n,s,{...o,signal:this.controller.signal});this._connected();for await(let u of a)G(this,Lt,"m",hc).call(this,u);if((l=a.controller.signal)!=null&&l.aborted)throw new yt;return this._addRun(G(this,Lt,"m",pc).call(this))}static createThreadAssistantStream(e,n,r){let o=new vs;return o._run(()=>o._threadAssistantStream(e,n,{...r,headers:{...r==null?void 0:r.headers,"X-Stainless-Helper-Method":"stream"}})),o}static createAssistantStream(e,n,r,o){let i=new vs;return i._run(()=>i._runAssistantStream(e,n,r,{...o,headers:{...o==null?void 0:o.headers,"X-Stainless-Helper-Method":"stream"}})),i}currentEvent(){return G(this,zd,"f")}currentRun(){return G(this,Jd,"f")}currentMessageSnapshot(){return G(this,hr,"f")}currentRunStepSnapshot(){return G(this,mc,"f")}async finalRunSteps(){return await this.done(),Object.values(G(this,zr,"f"))}async finalMessages(){return await this.done(),Object.values(G(this,Wd,"f"))}async finalRun(){if(await this.done(),!G(this,ws,"f"))throw Error("Final run was not received.");return G(this,ws,"f")}async _createThreadAssistantStream(e,n,r){var a;let o=r==null?void 0:r.signal;o&&(o.aborted&&this.controller.abort(),o.addEventListener("abort",()=>this.controller.abort()));let i={...n,stream:!0},s=await e.createAndRun(i,{...r,signal:this.controller.signal});this._connected();for await(let l of s)G(this,Lt,"m",hc).call(this,l);if((a=s.controller.signal)!=null&&a.aborted)throw new yt;return this._addRun(G(this,Lt,"m",pc).call(this))}async _createAssistantStream(e,n,r,o){var l;let i=o==null?void 0:o.signal;i&&(i.aborted&&this.controller.abort(),i.addEventListener("abort",()=>this.controller.abort()));let s={...r,stream:!0},a=await e.create(n,s,{...o,signal:this.controller.signal});this._connected();for await(let u of a)G(this,Lt,"m",hc).call(this,u);if((l=a.controller.signal)!=null&&l.aborted)throw new yt;return this._addRun(G(this,Lt,"m",pc).call(this))}static accumulateDelta(e,n){for(let[r,o]of Object.entries(n)){if(!e.hasOwnProperty(r)){e[r]=o;continue}let i=e[r];if(i==null){e[r]=o;continue}if(r==="index"||r==="type"){e[r]=o;continue}if(typeof i=="string"&&typeof o=="string")i+=o;else if(typeof i=="number"&&typeof o=="number")i+=o;else if(Xu(i)&&Xu(o))i=this.accumulateDelta(i,o);else if(Array.isArray(i)&&Array.isArray(o)){if(i.every(s=>typeof s=="string"||typeof s=="number")){i.push(...o);continue}for(let s of o){if(!Xu(s))throw new Error(`Expected array delta entry to be an object but got: ${s}`);let a=s.index;if(a==null)throw console.error(s),new Error("Expected array delta entry to have an `index` property");if(typeof a!="number")throw new Error(`Expected array delta entry \`index\` property to be a number but got ${a}`);let l=i[a];l==null?i.push(s):i[a]=this.accumulateDelta(l,s)}continue}else throw Error(`Unhandled record type: ${r}, deltaValue: ${o}, accValue: ${i}`);e[r]=i}return e}_addRun(e){return e}async _threadAssistantStream(e,n,r){return await this._createThreadAssistantStream(n,e,r)}async _runAssistantStream(e,n,r,o){return await this._createAssistantStream(n,e,r,o)}async _runToolAssistantStream(e,n,r,o){return await this._createToolAssistantStream(n,e,r,o)}};vs=xo,hc=function(e){if(!this.ended)switch(me(this,zd,e,"f"),G(this,Lt,"m",PC).call(this,e),e.event){case"thread.created":break;case"thread.run.created":case"thread.run.queued":case"thread.run.in_progress":case"thread.run.requires_action":case"thread.run.completed":case"thread.run.incomplete":case"thread.run.failed":case"thread.run.cancelling":case"thread.run.cancelled":case"thread.run.expired":G(this,Lt,"m",RC).call(this,e);break;case"thread.run.step.created":case"thread.run.step.in_progress":case"thread.run.step.delta":case"thread.run.step.completed":case"thread.run.step.failed":case"thread.run.step.cancelled":case"thread.run.step.expired":G(this,Lt,"m",SC).call(this,e);break;case"thread.message.created":case"thread.message.in_progress":case"thread.message.delta":case"thread.message.completed":case"thread.message.incomplete":G(this,Lt,"m",TC).call(this,e);break;case"error":throw new Error("Encountered an error event in event processing - errors should be processed earlier");default:}},pc=function(){if(this.ended)throw new ue("stream has ended, this shouldn't happen");if(!G(this,ws,"f"))throw Error("Final run has not been received");return G(this,ws,"f")},TC=function(e){let[n,r]=G(this,Lt,"m",xC).call(this,e,G(this,hr,"f"));me(this,hr,n,"f"),G(this,Wd,"f")[n.id]=n;for(let o of r){let i=n.content[o.index];(i==null?void 0:i.type)=="text"&&this._emit("textCreated",i.text)}switch(e.event){case"thread.message.created":this._emit("messageCreated",e.data);break;case"thread.message.in_progress":break;case"thread.message.delta":if(this._emit("messageDelta",e.data.delta,n),e.data.delta.content)for(let o of e.data.delta.content){if(o.type=="text"&&o.text){let i=o.text,s=n.content[o.index];if(s&&s.type=="text")this._emit("textDelta",i,s.text);else throw Error("The snapshot associated with this text delta is not text or missing")}if(o.index!=G(this,sl,"f")){if(G(this,bs,"f"))switch(G(this,bs,"f").type){case"text":this._emit("textDone",G(this,bs,"f").text,G(this,hr,"f"));break;case"image_file":this._emit("imageFileDone",G(this,bs,"f").image_file,G(this,hr,"f"));break}me(this,sl,o.index,"f")}me(this,bs,n.content[o.index],"f")}break;case"thread.message.completed":case"thread.message.incomplete":if(G(this,sl,"f")!==void 0){let o=e.data.content[G(this,sl,"f")];if(o)switch(o.type){case"image_file":this._emit("imageFileDone",o.image_file,G(this,hr,"f"));break;case"text":this._emit("textDone",o.text,G(this,hr,"f"));break}}G(this,hr,"f")&&this._emit("messageDone",e.data),me(this,hr,void 0,"f")}},SC=function(e){let n=G(this,Lt,"m",IC).call(this,e);switch(me(this,mc,n,"f"),e.event){case"thread.run.step.created":this._emit("runStepCreated",e.data);break;case"thread.run.step.delta":let r=e.data.delta;if(r.step_details&&r.step_details.type=="tool_calls"&&r.step_details.tool_calls&&n.step_details.type=="tool_calls")for(let i of r.step_details.tool_calls)i.index==G(this,Kd,"f")?this._emit("toolCallDelta",i,n.step_details.tool_calls[i.index]):(G(this,Tn,"f")&&this._emit("toolCallDone",G(this,Tn,"f")),me(this,Kd,i.index,"f"),me(this,Tn,n.step_details.tool_calls[i.index],"f"),G(this,Tn,"f")&&this._emit("toolCallCreated",G(this,Tn,"f")));this._emit("runStepDelta",e.data.delta,n);break;case"thread.run.step.completed":case"thread.run.step.failed":case"thread.run.step.cancelled":case"thread.run.step.expired":me(this,mc,void 0,"f"),e.data.step_details.type=="tool_calls"&&G(this,Tn,"f")&&(this._emit("toolCallDone",G(this,Tn,"f")),me(this,Tn,void 0,"f")),this._emit("runStepDone",e.data,n);break;case"thread.run.step.in_progress":break}},PC=function(e){G(this,Wy,"f").push(e),this._emit("event",e)},IC=function(e){switch(e.event){case"thread.run.step.created":return G(this,zr,"f")[e.data.id]=e.data,e.data;case"thread.run.step.delta":let n=G(this,zr,"f")[e.data.id];if(!n)throw Error("Received a RunStepDelta before creation of a snapshot");let r=e.data;if(r.delta){let o=vs.accumulateDelta(n,r.delta);G(this,zr,"f")[e.data.id]=o}return G(this,zr,"f")[e.data.id];case"thread.run.step.completed":case"thread.run.step.failed":case"thread.run.step.cancelled":case"thread.run.step.expired":case"thread.run.step.in_progress":G(this,zr,"f")[e.data.id]=e.data;break}if(G(this,zr,"f")[e.data.id])return G(this,zr,"f")[e.data.id];throw new Error("No snapshot available")},xC=function(e,n){let r=[];switch(e.event){case"thread.message.created":return[e.data,r];case"thread.message.delta":if(!n)throw Error("Received a delta with no existing snapshot (there should be one from message creation)");let o=e.data;if(o.delta.content)for(let i of o.delta.content)if(i.index in n.content){let s=n.content[i.index];n.content[i.index]=G(this,Lt,"m",kC).call(this,i,s)}else n.content[i.index]=i,r.push(i);return[n,r];case"thread.message.in_progress":case"thread.message.completed":case"thread.message.incomplete":if(n)return[n,r];throw Error("Received thread message event with no existing snapshot")}throw Error("Tried to accumulate a non-message event")},kC=function(e,n){return vs.accumulateDelta(n,e)},RC=function(e){switch(me(this,Jd,e.data,"f"),e.event){case"thread.run.created":break;case"thread.run.queued":break;case"thread.run.in_progress":break;case"thread.run.requires_action":case"thread.run.cancelled":case"thread.run.failed":case"thread.run.completed":case"thread.run.expired":case"thread.run.incomplete":me(this,ws,e.data,"f"),G(this,Tn,"f")&&(this._emit("toolCallDone",G(this,Tn,"f")),me(this,Tn,void 0,"f"));break;case"thread.run.cancelling":break}};var _s=class extends Y{constructor(){super(...arguments),this.steps=new il(this._client)}create(e,n,r){var s;let{include:o,...i}=n;return this._client.post(z`/threads/${e}/runs`,{query:{include:o},body:i,...r,headers:oe([{"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers]),stream:(s=n.stream)!=null?s:!1})}retrieve(e,n,r){let{thread_id:o}=n;return this._client.get(z`/threads/${o}/runs/${e}`,{...r,headers:oe([{"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers])})}update(e,n,r){let{thread_id:o,...i}=n;return this._client.post(z`/threads/${o}/runs/${e}`,{body:i,...r,headers:oe([{"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers])})}list(e,n={},r){return this._client.getAPIList(z`/threads/${e}/runs`,Ae,{query:n,...r,headers:oe([{"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers])})}cancel(e,n,r){let{thread_id:o}=n;return this._client.post(z`/threads/${o}/runs/${e}/cancel`,{...r,headers:oe([{"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers])})}async createAndPoll(e,n,r){let o=await this.create(e,n,r);return await this.poll(o.id,{thread_id:e},r)}createAndStream(e,n,r){return xo.createAssistantStream(e,this._client.beta.threads.runs,n,r)}async poll(e,n,r){var i,s;let o=oe([r==null?void 0:r.headers,{"X-Stainless-Poll-Helper":"true","X-Stainless-Custom-Poll-Interval":(s=(i=r==null?void 0:r.pollIntervalMs)==null?void 0:i.toString())!=null?s:void 0}]);for(;;){let{data:a,response:l}=await this.retrieve(e,n,{...r,headers:{...r==null?void 0:r.headers,...o}}).withResponse();switch(a.status){case"queued":case"in_progress":case"cancelling":let u=5e3;if(r!=null&&r.pollIntervalMs)u=r.pollIntervalMs;else{let f=l.headers.get("openai-poll-after-ms");if(f){let p=parseInt(f);isNaN(p)||(u=p)}}await qr(u);break;case"requires_action":case"incomplete":case"cancelled":case"completed":case"failed":case"expired":return a}}}stream(e,n,r){return xo.createAssistantStream(e,this._client.beta.threads.runs,n,r)}submitToolOutputs(e,n,r){var s;let{thread_id:o,...i}=n;return this._client.post(z`/threads/${o}/runs/${e}/submit_tool_outputs`,{body:i,...r,headers:oe([{"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers]),stream:(s=n.stream)!=null?s:!1})}async submitToolOutputsAndPoll(e,n,r){let o=await this.submitToolOutputs(e,n,r);return await this.poll(o.id,n,r)}submitToolOutputsStream(e,n,r){return xo.createToolAssistantStream(e,this._client.beta.threads.runs,n,r)}};_s.Steps=il;var Ci=class extends Y{constructor(){super(...arguments),this.runs=new _s(this._client),this.messages=new ol(this._client)}create(e={},n){return this._client.post("/threads",{body:e,...n,headers:oe([{"OpenAI-Beta":"assistants=v2"},n==null?void 0:n.headers])})}retrieve(e,n){return this._client.get(z`/threads/${e}`,{...n,headers:oe([{"OpenAI-Beta":"assistants=v2"},n==null?void 0:n.headers])})}update(e,n,r){return this._client.post(z`/threads/${e}`,{body:n,...r,headers:oe([{"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers])})}delete(e,n){return this._client.delete(z`/threads/${e}`,{...n,headers:oe([{"OpenAI-Beta":"assistants=v2"},n==null?void 0:n.headers])})}createAndRun(e,n){var r;return this._client.post("/threads/runs",{body:e,...n,headers:oe([{"OpenAI-Beta":"assistants=v2"},n==null?void 0:n.headers]),stream:(r=e.stream)!=null?r:!1})}async createAndRunPoll(e,n){let r=await this.createAndRun(e,n);return await this.runs.poll(r.id,{thread_id:r.thread_id},n)}createAndRunStream(e,n){return xo.createThreadAssistantStream(e,this._client.beta.threads,n)}};Ci.Runs=_s;Ci.Messages=ol;var pr=class extends Y{constructor(){super(...arguments),this.realtime=new _i(this._client),this.chatkit=new Ei(this._client),this.assistants=new Za(this._client),this.threads=new Ci(this._client)}};pr.Realtime=_i;pr.ChatKit=Ei;pr.Assistants=Za;pr.Threads=Ci;var Es=class extends Y{create(e,n){var r;return this._client.post("/completions",{body:e,...n,stream:(r=e.stream)!=null?r:!1})}};var al=class extends Y{retrieve(e,n,r){let{container_id:o}=n;return this._client.get(z`/containers/${o}/files/${e}/content`,{...r,headers:oe([{Accept:"application/binary"},r==null?void 0:r.headers]),__binaryResponse:!0})}};var As=class extends Y{constructor(){super(...arguments),this.content=new al(this._client)}create(e,n,r){return this._client.post(z`/containers/${e}/files`,To({body:n,...r},this._client))}retrieve(e,n,r){let{container_id:o}=n;return this._client.get(z`/containers/${o}/files/${e}`,r)}list(e,n={},r){return this._client.getAPIList(z`/containers/${e}/files`,Ae,{query:n,...r})}delete(e,n,r){let{container_id:o}=n;return this._client.delete(z`/containers/${o}/files/${e}`,{...r,headers:oe([{Accept:"*/*"},r==null?void 0:r.headers])})}};As.Content=al;var Ti=class extends Y{constructor(){super(...arguments),this.files=new As(this._client)}create(e,n){return this._client.post("/containers",{body:e,...n})}retrieve(e,n){return this._client.get(z`/containers/${e}`,n)}list(e={},n){return this._client.getAPIList("/containers",Ae,{query:e,...n})}delete(e,n){return this._client.delete(z`/containers/${e}`,{...n,headers:oe([{Accept:"*/*"},n==null?void 0:n.headers])})}};Ti.Files=As;var ll=class extends Y{create(e,n,r){let{include:o,...i}=n;return this._client.post(z`/conversations/${e}/items`,{query:{include:o},body:i,...r})}retrieve(e,n,r){let{conversation_id:o,...i}=n;return this._client.get(z`/conversations/${o}/items/${e}`,{query:i,...r})}list(e,n={},r){return this._client.getAPIList(z`/conversations/${e}/items`,Co,{query:n,...r})}delete(e,n,r){let{conversation_id:o}=n;return this._client.delete(z`/conversations/${o}/items/${e}`,r)}};var Si=class extends Y{constructor(){super(...arguments),this.items=new ll(this._client)}create(e={},n){return this._client.post("/conversations",{body:e,...n})}retrieve(e,n){return this._client.get(z`/conversations/${e}`,n)}update(e,n,r){return this._client.post(z`/conversations/${e}`,{body:n,...r})}delete(e,n){return this._client.delete(z`/conversations/${e}`,n)}};Si.Items=ll;var Cs=class extends Y{create(e,n){let r=!!e.encoding_format,o=r?e.encoding_format:"base64";r&&pt(this._client).debug("embeddings/user defined encoding_format:",e.encoding_format);let i=this._client.post("/embeddings",{body:{...e,encoding_format:o},...n});return r?i:(pt(this._client).debug("embeddings/decoding base64 embeddings from base64"),i._thenUnwrap(s=>(s&&s.data&&s.data.forEach(a=>{let l=a.embedding;a.embedding=CC(l)}),s)))}};var ul=class extends Y{retrieve(e,n,r){let{eval_id:o,run_id:i}=n;return this._client.get(z`/evals/${o}/runs/${i}/output_items/${e}`,r)}list(e,n,r){let{eval_id:o,...i}=n;return this._client.getAPIList(z`/evals/${o}/runs/${e}/output_items`,Ae,{query:i,...r})}};var Ts=class extends Y{constructor(){super(...arguments),this.outputItems=new ul(this._client)}create(e,n,r){return this._client.post(z`/evals/${e}/runs`,{body:n,...r})}retrieve(e,n,r){let{eval_id:o}=n;return this._client.get(z`/evals/${o}/runs/${e}`,r)}list(e,n={},r){return this._client.getAPIList(z`/evals/${e}/runs`,Ae,{query:n,...r})}delete(e,n,r){let{eval_id:o}=n;return this._client.delete(z`/evals/${o}/runs/${e}`,r)}cancel(e,n,r){let{eval_id:o}=n;return this._client.post(z`/evals/${o}/runs/${e}`,r)}};Ts.OutputItems=ul;var Pi=class extends Y{constructor(){super(...arguments),this.runs=new Ts(this._client)}create(e,n){return this._client.post("/evals",{body:e,...n})}retrieve(e,n){return this._client.get(z`/evals/${e}`,n)}update(e,n,r){return this._client.post(z`/evals/${e}`,{body:n,...r})}list(e={},n){return this._client.getAPIList("/evals",Ae,{query:e,...n})}delete(e,n){return this._client.delete(z`/evals/${e}`,n)}};Pi.Runs=Ts;var Ss=class extends Y{create(e,n){return this._client.post("/files",dr({body:e,...n},this._client))}retrieve(e,n){return this._client.get(z`/files/${e}`,n)}list(e={},n){return this._client.getAPIList("/files",Ae,{query:e,...n})}delete(e,n){return this._client.delete(z`/files/${e}`,n)}content(e,n){return this._client.get(z`/files/${e}/content`,{...n,headers:oe([{Accept:"application/binary"},n==null?void 0:n.headers]),__binaryResponse:!0})}async waitForProcessing(e,{pollInterval:n=5e3,maxWait:r=30*60*1e3}={}){let o=new Set(["processed","error","deleted"]),i=Date.now(),s=await this.retrieve(e);for(;!s.status||!o.has(s.status);)if(await qr(n),s=await this.retrieve(e),Date.now()-i>r)throw new gi({message:`Giving up on waiting for file ${e} to finish processing after ${r} milliseconds.`});return s}};var cl=class extends Y{};var fl=class extends Y{run(e,n){return this._client.post("/fine_tuning/alpha/graders/run",{body:e,...n})}validate(e,n){return this._client.post("/fine_tuning/alpha/graders/validate",{body:e,...n})}};var Ps=class extends Y{constructor(){super(...arguments),this.graders=new fl(this._client)}};Ps.Graders=fl;var dl=class extends Y{create(e,n,r){return this._client.getAPIList(z`/fine_tuning/checkpoints/${e}/permissions`,jr,{body:n,method:"post",...r})}retrieve(e,n={},r){return this._client.get(z`/fine_tuning/checkpoints/${e}/permissions`,{query:n,...r})}delete(e,n,r){let{fine_tuned_model_checkpoint:o}=n;return this._client.delete(z`/fine_tuning/checkpoints/${o}/permissions/${e}`,r)}};var Is=class extends Y{constructor(){super(...arguments),this.permissions=new dl(this._client)}};Is.Permissions=dl;var hl=class extends Y{list(e,n={},r){return this._client.getAPIList(z`/fine_tuning/jobs/${e}/checkpoints`,Ae,{query:n,...r})}};var xs=class extends Y{constructor(){super(...arguments),this.checkpoints=new hl(this._client)}create(e,n){return this._client.post("/fine_tuning/jobs",{body:e,...n})}retrieve(e,n){return this._client.get(z`/fine_tuning/jobs/${e}`,n)}list(e={},n){return this._client.getAPIList("/fine_tuning/jobs",Ae,{query:e,...n})}cancel(e,n){return this._client.post(z`/fine_tuning/jobs/${e}/cancel`,n)}listEvents(e,n={},r){return this._client.getAPIList(z`/fine_tuning/jobs/${e}/events`,Ae,{query:n,...r})}pause(e,n){return this._client.post(z`/fine_tuning/jobs/${e}/pause`,n)}resume(e,n){return this._client.post(z`/fine_tuning/jobs/${e}/resume`,n)}};xs.Checkpoints=hl;var mr=class extends Y{constructor(){super(...arguments),this.methods=new cl(this._client),this.jobs=new xs(this._client),this.checkpoints=new Is(this._client),this.alpha=new Ps(this._client)}};mr.Methods=cl;mr.Jobs=xs;mr.Checkpoints=Is;mr.Alpha=Ps;var pl=class extends Y{};var Ii=class extends Y{constructor(){super(...arguments),this.graderModels=new pl(this._client)}};Ii.GraderModels=pl;var ks=class extends Y{createVariation(e,n){return this._client.post("/images/variations",dr({body:e,...n},this._client))}edit(e,n){var r;return this._client.post("/images/edits",dr({body:e,...n,stream:(r=e.stream)!=null?r:!1},this._client))}generate(e,n){var r;return this._client.post("/images/generations",{body:e,...n,stream:(r=e.stream)!=null?r:!1})}};var Rs=class extends Y{retrieve(e,n){return this._client.get(z`/models/${e}`,n)}list(e){return this._client.getAPIList("/models",jr,e)}delete(e,n){return this._client.delete(z`/models/${e}`,n)}};var Ns=class extends Y{create(e,n){return this._client.post("/moderations",{body:e,...n})}};var ml=class extends Y{accept(e,n,r){return this._client.post(z`/realtime/calls/${e}/accept`,{body:n,...r,headers:oe([{Accept:"*/*"},r==null?void 0:r.headers])})}hangup(e,n){return this._client.post(z`/realtime/calls/${e}/hangup`,{...n,headers:oe([{Accept:"*/*"},n==null?void 0:n.headers])})}refer(e,n,r){return this._client.post(z`/realtime/calls/${e}/refer`,{body:n,...r,headers:oe([{Accept:"*/*"},r==null?void 0:r.headers])})}reject(e,n={},r){return this._client.post(z`/realtime/calls/${e}/reject`,{body:n,...r,headers:oe([{Accept:"*/*"},r==null?void 0:r.headers])})}};var gl=class extends Y{create(e,n){return this._client.post("/realtime/client_secrets",{body:e,...n})}};var ko=class extends Y{constructor(){super(...arguments),this.clientSecrets=new gl(this._client),this.calls=new ml(this._client)}};ko.ClientSecrets=gl;ko.Calls=ml;function NC(t,e){return!e||!aq(e)?{...t,output_parsed:null,output:t.output.map(n=>n.type==="function_call"?{...n,parsed_arguments:null}:n.type==="message"?{...n,content:n.content.map(r=>({...r,parsed:null}))}:n)}:zy(t,e)}function zy(t,e){let n=t.output.map(o=>{if(o.type==="function_call")return{...o,parsed_arguments:cq(e,o)};if(o.type==="message"){let i=o.content.map(s=>s.type==="output_text"?{...s,parsed:sq(e,s.text)}:s);return{...o,content:i}}return o}),r=Object.assign({},t,{output:n});return Object.getOwnPropertyDescriptor(t,"output_text")||Yd(r),Object.defineProperty(r,"output_parsed",{enumerable:!0,get(){for(let o of r.output)if(o.type==="message"){for(let i of o.content)if(i.type==="output_text"&&i.parsed!==null)return i.parsed}return null}}),r}function sq(t,e){var n,r,o,i;return((r=(n=t.text)==null?void 0:n.format)==null?void 0:r.type)!=="json_schema"?null:"$parseRaw"in((o=t.text)==null?void 0:o.format)?((i=t.text)==null?void 0:i.format).$parseRaw(e):JSON.parse(e)}function aq(t){var e;return!!ic((e=t.text)==null?void 0:e.format)}function lq(t){return(t==null?void 0:t.$brand)==="auto-parseable-tool"}function uq(t,e){return t.find(n=>n.type==="function"&&n.name===e)}function cq(t,e){var r;let n=uq((r=t.tools)!=null?r:[],e.name);return{...e,...e,parsed_arguments:lq(n)?n.$parseRaw(e.arguments):n!=null&&n.strict?JSON.parse(e.arguments):null}}function Yd(t){let e=[];for(let n of t.output)if(n.type==="message")for(let r of n.content)r.type==="output_text"&&e.push(r.text);t.output_text=e.join("")}var yl,Xd,xi,Qd,OC,DC,MC,FC,Zd=class t extends bi{constructor(e){super(),yl.add(this),Xd.set(this,void 0),xi.set(this,void 0),Qd.set(this,void 0),me(this,Xd,e,"f")}static createResponse(e,n,r){let o=new t(n);return o._run(()=>o._createOrRetrieveResponse(e,n,{...r,headers:{...r==null?void 0:r.headers,"X-Stainless-Helper-Method":"stream"}})),o}async _createOrRetrieveResponse(e,n,r){var a,l;let o=r==null?void 0:r.signal;o&&(o.aborted&&this.controller.abort(),o.addEventListener("abort",()=>this.controller.abort())),G(this,yl,"m",OC).call(this);let i,s=null;"response_id"in n?(i=await e.responses.retrieve(n.response_id,{stream:!0},{...r,signal:this.controller.signal,stream:!0}),s=(a=n.starting_after)!=null?a:null):i=await e.responses.create({...n,stream:!0},{...r,signal:this.controller.signal}),this._connected();for await(let u of i)G(this,yl,"m",DC).call(this,u,s);if((l=i.controller.signal)!=null&&l.aborted)throw new yt;return G(this,yl,"m",MC).call(this)}[(Xd=new WeakMap,xi=new WeakMap,Qd=new WeakMap,yl=new WeakSet,OC=function(){this.ended||me(this,xi,void 0,"f")},DC=function(n,r){if(this.ended)return;let o=(s,a)=>{(r==null||a.sequence_number>r)&&this._emit(s,a)},i=G(this,yl,"m",FC).call(this,n);switch(o("event",n),n.type){case"response.output_text.delta":{let s=i.output[n.output_index];if(!s)throw new ue(`missing output at index ${n.output_index}`);if(s.type==="message"){let a=s.content[n.content_index];if(!a)throw new ue(`missing content at index ${n.content_index}`);if(a.type!=="output_text")throw new ue(`expected content to be 'output_text', got ${a.type}`);o("response.output_text.delta",{...n,snapshot:a.text})}break}case"response.function_call_arguments.delta":{let s=i.output[n.output_index];if(!s)throw new ue(`missing output at index ${n.output_index}`);s.type==="function_call"&&o("response.function_call_arguments.delta",{...n,snapshot:s.arguments});break}default:o(n.type,n);break}},MC=function(){if(this.ended)throw new ue("stream has ended, this shouldn't happen");let n=G(this,xi,"f");if(!n)throw new ue("request ended without sending any events");me(this,xi,void 0,"f");let r=fq(n,G(this,Xd,"f"));return me(this,Qd,r,"f"),r},FC=function(n){var o;let r=G(this,xi,"f");if(!r){if(n.type!=="response.created")throw new ue(`When snapshot hasn't been set yet, expected 'response.created' event, got ${n.type}`);return r=me(this,xi,n.response,"f"),r}switch(n.type){case"response.output_item.added":{r.output.push(n.item);break}case"response.content_part.added":{let i=r.output[n.output_index];if(!i)throw new ue(`missing output at index ${n.output_index}`);let s=i.type,a=n.part;s==="message"&&a.type!=="reasoning_text"?i.content.push(a):s==="reasoning"&&a.type==="reasoning_text"&&(i.content||(i.content=[]),i.content.push(a));break}case"response.output_text.delta":{let i=r.output[n.output_index];if(!i)throw new ue(`missing output at index ${n.output_index}`);if(i.type==="message"){let s=i.content[n.content_index];if(!s)throw new ue(`missing content at index ${n.content_index}`);if(s.type!=="output_text")throw new ue(`expected content to be 'output_text', got ${s.type}`);s.text+=n.delta}break}case"response.function_call_arguments.delta":{let i=r.output[n.output_index];if(!i)throw new ue(`missing output at index ${n.output_index}`);i.type==="function_call"&&(i.arguments+=n.delta);break}case"response.reasoning_text.delta":{let i=r.output[n.output_index];if(!i)throw new ue(`missing output at index ${n.output_index}`);if(i.type==="reasoning"){let s=(o=i.content)==null?void 0:o[n.content_index];if(!s)throw new ue(`missing content at index ${n.content_index}`);if(s.type!=="reasoning_text")throw new ue(`expected content to be 'reasoning_text', got ${s.type}`);s.text+=n.delta}break}case"response.completed":{me(this,xi,n.response,"f");break}}return r},Symbol.asyncIterator)](){let e=[],n=[],r=!1;return this.on("event",o=>{let i=n.shift();i?i.resolve(o):e.push(o)}),this.on("end",()=>{r=!0;for(let o of n)o.resolve(void 0);n.length=0}),this.on("abort",o=>{r=!0;for(let i of n)i.reject(o);n.length=0}),this.on("error",o=>{r=!0;for(let i of n)i.reject(o);n.length=0}),{next:async()=>e.length?{value:e.shift(),done:!1}:r?{value:void 0,done:!0}:new Promise((i,s)=>n.push({resolve:i,reject:s})).then(i=>i?{value:i,done:!1}:{value:void 0,done:!0}),return:async()=>(this.abort(),{value:void 0,done:!0})}}async finalResponse(){await this.done();let e=G(this,Qd,"f");if(!e)throw new ue("stream ended without producing a ChatCompletion");return e}};function fq(t,e){return NC(t,e)}var bl=class extends Y{list(e,n={},r){return this._client.getAPIList(z`/responses/${e}/input_items`,Ae,{query:n,...r})}};var vl=class extends Y{count(e={},n){return this._client.post("/responses/input_tokens",{body:e,...n})}};var Ro=class extends Y{constructor(){super(...arguments),this.inputItems=new bl(this._client),this.inputTokens=new vl(this._client)}create(e,n){var r;return this._client.post("/responses",{body:e,...n,stream:(r=e.stream)!=null?r:!1})._thenUnwrap(o=>("object"in o&&o.object==="response"&&Yd(o),o))}retrieve(e,n={},r){var o;return this._client.get(z`/responses/${e}`,{query:n,...r,stream:(o=n==null?void 0:n.stream)!=null?o:!1})._thenUnwrap(i=>("object"in i&&i.object==="response"&&Yd(i),i))}delete(e,n){return this._client.delete(z`/responses/${e}`,{...n,headers:oe([{Accept:"*/*"},n==null?void 0:n.headers])})}parse(e,n){return this._client.responses.create(e,n)._thenUnwrap(r=>zy(r,e))}stream(e,n){return Zd.createResponse(this._client,e,n)}cancel(e,n){return this._client.post(z`/responses/${e}/cancel`,n)}compact(e,n){return this._client.post("/responses/compact",{body:e,...n})}};Ro.InputItems=bl;Ro.InputTokens=vl;var wl=class extends Y{retrieve(e,n){return this._client.get(z`/skills/${e}/content`,{...n,headers:oe([{Accept:"application/binary"},n==null?void 0:n.headers]),__binaryResponse:!0})}};var _l=class extends Y{retrieve(e,n,r){let{skill_id:o}=n;return this._client.get(z`/skills/${o}/versions/${e}/content`,{...r,headers:oe([{Accept:"application/binary"},r==null?void 0:r.headers]),__binaryResponse:!0})}};var Os=class extends Y{constructor(){super(...arguments),this.content=new _l(this._client)}create(e,n={},r){return this._client.post(z`/skills/${e}/versions`,To({body:n,...r},this._client))}retrieve(e,n,r){let{skill_id:o}=n;return this._client.get(z`/skills/${o}/versions/${e}`,r)}list(e,n={},r){return this._client.getAPIList(z`/skills/${e}/versions`,Ae,{query:n,...r})}delete(e,n,r){let{skill_id:o}=n;return this._client.delete(z`/skills/${o}/versions/${e}`,r)}};Os.Content=_l;var No=class extends Y{constructor(){super(...arguments),this.content=new wl(this._client),this.versions=new Os(this._client)}create(e={},n){return this._client.post("/skills",To({body:e,...n},this._client))}retrieve(e,n){return this._client.get(z`/skills/${e}`,n)}update(e,n,r){return this._client.post(z`/skills/${e}`,{body:n,...r})}list(e={},n){return this._client.getAPIList("/skills",Ae,{query:e,...n})}delete(e,n){return this._client.delete(z`/skills/${e}`,n)}};No.Content=wl;No.Versions=Os;var El=class extends Y{create(e,n,r){return this._client.post(z`/uploads/${e}/parts`,dr({body:n,...r},this._client))}};var ki=class extends Y{constructor(){super(...arguments),this.parts=new El(this._client)}create(e,n){return this._client.post("/uploads",{body:e,...n})}cancel(e,n){return this._client.post(z`/uploads/${e}/cancel`,n)}complete(e,n,r){return this._client.post(z`/uploads/${e}/complete`,{body:n,...r})}};ki.Parts=El;var LC=async t=>{let e=await Promise.allSettled(t),n=e.filter(o=>o.status==="rejected");if(n.length){for(let o of n)console.error(o.reason);throw new Error(`${n.length} promise(s) failed - see the above errors`)}let r=[];for(let o of e)o.status==="fulfilled"&&r.push(o.value);return r};var Al=class extends Y{create(e,n,r){return this._client.post(z`/vector_stores/${e}/file_batches`,{body:n,...r,headers:oe([{"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers])})}retrieve(e,n,r){let{vector_store_id:o}=n;return this._client.get(z`/vector_stores/${o}/file_batches/${e}`,{...r,headers:oe([{"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers])})}cancel(e,n,r){let{vector_store_id:o}=n;return this._client.post(z`/vector_stores/${o}/file_batches/${e}/cancel`,{...r,headers:oe([{"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers])})}async createAndPoll(e,n,r){let o=await this.create(e,n);return await this.poll(e,o.id,r)}listFiles(e,n,r){let{vector_store_id:o,...i}=n;return this._client.getAPIList(z`/vector_stores/${o}/file_batches/${e}/files`,Ae,{query:i,...r,headers:oe([{"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers])})}async poll(e,n,r){var i,s;let o=oe([r==null?void 0:r.headers,{"X-Stainless-Poll-Helper":"true","X-Stainless-Custom-Poll-Interval":(s=(i=r==null?void 0:r.pollIntervalMs)==null?void 0:i.toString())!=null?s:void 0}]);for(;;){let{data:a,response:l}=await this.retrieve(n,{vector_store_id:e},{...r,headers:o}).withResponse();switch(a.status){case"in_progress":let u=5e3;if(r!=null&&r.pollIntervalMs)u=r.pollIntervalMs;else{let f=l.headers.get("openai-poll-after-ms");if(f){let p=parseInt(f);isNaN(p)||(u=p)}}await qr(u);break;case"failed":case"cancelled":case"completed":return a}}}async uploadAndPoll(e,{files:n,fileIds:r=[]},o){var m;if(n==null||n.length==0)throw new Error("No `files` provided to process. If you've already uploaded files you should use `.createAndPoll()` instead");let i=(m=o==null?void 0:o.maxConcurrency)!=null?m:5,s=Math.min(i,n.length),a=this._client,l=n.values(),u=[...r];async function f(b){for(let v of b){let w=await a.files.create({file:v,purpose:"assistants"},o);u.push(w.id)}}let p=Array(s).fill(l).map(f);return await LC(p),await this.createAndPoll(e,{file_ids:u})}};var Cl=class extends Y{create(e,n,r){return this._client.post(z`/vector_stores/${e}/files`,{body:n,...r,headers:oe([{"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers])})}retrieve(e,n,r){let{vector_store_id:o}=n;return this._client.get(z`/vector_stores/${o}/files/${e}`,{...r,headers:oe([{"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers])})}update(e,n,r){let{vector_store_id:o,...i}=n;return this._client.post(z`/vector_stores/${o}/files/${e}`,{body:i,...r,headers:oe([{"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers])})}list(e,n={},r){return this._client.getAPIList(z`/vector_stores/${e}/files`,Ae,{query:n,...r,headers:oe([{"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers])})}delete(e,n,r){let{vector_store_id:o}=n;return this._client.delete(z`/vector_stores/${o}/files/${e}`,{...r,headers:oe([{"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers])})}async createAndPoll(e,n,r){let o=await this.create(e,n,r);return await this.poll(e,o.id,r)}async poll(e,n,r){var i,s;let o=oe([r==null?void 0:r.headers,{"X-Stainless-Poll-Helper":"true","X-Stainless-Custom-Poll-Interval":(s=(i=r==null?void 0:r.pollIntervalMs)==null?void 0:i.toString())!=null?s:void 0}]);for(;;){let a=await this.retrieve(n,{vector_store_id:e},{...r,headers:o}).withResponse(),l=a.data;switch(l.status){case"in_progress":let u=5e3;if(r!=null&&r.pollIntervalMs)u=r.pollIntervalMs;else{let f=a.response.headers.get("openai-poll-after-ms");if(f){let p=parseInt(f);isNaN(p)||(u=p)}}await qr(u);break;case"failed":case"completed":return l}}}async upload(e,n,r){let o=await this._client.files.create({file:n,purpose:"assistants"},r);return this.create(e,{file_id:o.id},r)}async uploadAndPoll(e,n,r){let o=await this.upload(e,n,r);return await this.poll(e,o.id,r)}content(e,n,r){let{vector_store_id:o}=n;return this._client.getAPIList(z`/vector_stores/${o}/files/${e}/content`,jr,{...r,headers:oe([{"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers])})}};var Oo=class extends Y{constructor(){super(...arguments),this.files=new Cl(this._client),this.fileBatches=new Al(this._client)}create(e,n){return this._client.post("/vector_stores",{body:e,...n,headers:oe([{"OpenAI-Beta":"assistants=v2"},n==null?void 0:n.headers])})}retrieve(e,n){return this._client.get(z`/vector_stores/${e}`,{...n,headers:oe([{"OpenAI-Beta":"assistants=v2"},n==null?void 0:n.headers])})}update(e,n,r){return this._client.post(z`/vector_stores/${e}`,{body:n,...r,headers:oe([{"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers])})}list(e={},n){return this._client.getAPIList("/vector_stores",Ae,{query:e,...n,headers:oe([{"OpenAI-Beta":"assistants=v2"},n==null?void 0:n.headers])})}delete(e,n){return this._client.delete(z`/vector_stores/${e}`,{...n,headers:oe([{"OpenAI-Beta":"assistants=v2"},n==null?void 0:n.headers])})}search(e,n,r){return this._client.getAPIList(z`/vector_stores/${e}/search`,jr,{body:n,method:"post",...r,headers:oe([{"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers])})}};Oo.Files=Cl;Oo.FileBatches=Al;var Ds=class extends Y{create(e,n){return this._client.post("/videos",To({body:e,...n},this._client))}retrieve(e,n){return this._client.get(z`/videos/${e}`,n)}list(e={},n){return this._client.getAPIList("/videos",Co,{query:e,...n})}delete(e,n){return this._client.delete(z`/videos/${e}`,n)}downloadContent(e,n={},r){return this._client.get(z`/videos/${e}/content`,{query:n,...r,headers:oe([{Accept:"application/binary"},r==null?void 0:r.headers]),__binaryResponse:!0})}remix(e,n,r){return this._client.post(z`/videos/${e}/remix`,To({body:n,...r},this._client))}};var Tl,UC,eh,Ms=class extends Y{constructor(){super(...arguments),Tl.add(this)}async unwrap(e,n,r=this._client.webhookSecret,o=300){return await this.verifySignature(e,n,r,o),JSON.parse(e)}async verifySignature(e,n,r=this._client.webhookSecret,o=300){if(typeof crypto=="undefined"||typeof crypto.subtle.importKey!="function"||typeof crypto.subtle.verify!="function")throw new Error("Webhook signature verification is only supported when the `crypto` global is defined");G(this,Tl,"m",UC).call(this,r);let i=oe([n]).values,s=G(this,Tl,"m",eh).call(this,i,"webhook-signature"),a=G(this,Tl,"m",eh).call(this,i,"webhook-timestamp"),l=G(this,Tl,"m",eh).call(this,i,"webhook-id"),u=parseInt(a,10);if(isNaN(u))throw new Hr("Invalid webhook timestamp format");let f=Math.floor(Date.now()/1e3);if(f-u>o)throw new Hr("Webhook timestamp is too old");if(u>f+o)throw new Hr("Webhook timestamp is too new");let p=s.split(" ").map(w=>w.startsWith("v1,")?w.substring(3):w),m=r.startsWith("whsec_")?Buffer.from(r.replace("whsec_",""),"base64"):Buffer.from(r,"utf-8"),b=l?`${l}.${a}.${e}`:`${a}.${e}`,v=await crypto.subtle.importKey("raw",m,{name:"HMAC",hash:"SHA-256"},!1,["verify"]);for(let w of p)try{let _=Buffer.from(w,"base64");if(await crypto.subtle.verify("HMAC",v,_,new TextEncoder().encode(b)))return}catch(_){continue}throw new Hr("The given webhook signature does not match the expected signature")}};Tl=new WeakSet,UC=function(e){if(typeof e!="string"||e.length===0)throw new Error("The webhook secret must either be set using the env var, OPENAI_WEBHOOK_SECRET, on the client class, OpenAI({ webhookSecret: '123' }), or passed to this function")},eh=function(e,n){if(!e)throw new Error("Headers are required");let r=e.get(n);if(r==null)throw new Error(`Missing required header: ${n}`);return r};var Jy,Ky,th,BC,_e=class{constructor({baseURL:e=Ai("OPENAI_BASE_URL"),apiKey:n=Ai("OPENAI_API_KEY"),organization:r=(a=>(a=Ai("OPENAI_ORG_ID"))!=null?a:null)(),project:o=(l=>(l=Ai("OPENAI_PROJECT_ID"))!=null?l:null)(),webhookSecret:i=(u=>(u=Ai("OPENAI_WEBHOOK_SECRET"))!=null?u:null)(),...s}={}){var m,b,v,w,_,T;if(Jy.add(this),th.set(this,void 0),this.completions=new Es(this),this.chat=new wi(this),this.embeddings=new Cs(this),this.files=new Ss(this),this.images=new ks(this),this.audio=new Wr(this),this.moderations=new Ns(this),this.models=new Rs(this),this.fineTuning=new mr(this),this.graders=new Ii(this),this.vectorStores=new Oo(this),this.webhooks=new Ms(this),this.beta=new pr(this),this.batches=new ys(this),this.uploads=new ki(this),this.responses=new Ro(this),this.realtime=new ko(this),this.conversations=new Si(this),this.evals=new Pi(this),this.containers=new Ti(this),this.skills=new No(this),this.videos=new Ds(this),n===void 0)throw new ue("Missing credentials. Please pass an `apiKey`, or set the `OPENAI_API_KEY` environment variable.");let f={apiKey:n,organization:r,project:o,webhookSecret:i,...s,baseURL:e||"https://api.openai.com/v1"};if(!f.dangerouslyAllowBrowser&&KA())throw new ue(`It looks like you're running in a browser-like environment.

This is disabled by default, as it risks exposing your secret API credentials to attackers.
If you understand the risks and have appropriate mitigations in place,
you can set the \`dangerouslyAllowBrowser\` option to \`true\`, e.g.,

new OpenAI({ apiKey, dangerouslyAllowBrowser: true });

https://help.openai.com/en/articles/5112595-best-practices-for-api-key-safety
`);this.baseURL=f.baseURL,this.timeout=(m=f.timeout)!=null?m:Ky.DEFAULT_TIMEOUT,this.logger=(b=f.logger)!=null?b:console;let p="warn";this.logLevel=p,this.logLevel=(w=(v=Cy(f.logLevel,"ClientOptions.logLevel",this))!=null?v:Cy(Ai("OPENAI_LOG"),"process.env['OPENAI_LOG']",this))!=null?w:p,this.fetchOptions=f.fetchOptions,this.maxRetries=(_=f.maxRetries)!=null?_:2,this.fetch=(T=f.fetch)!=null?T:XA(),me(this,th,ZA,"f"),this._options=f,this.apiKey=typeof n=="string"?n:"Missing Key",this.organization=r,this.project=o,this.webhookSecret=i}withOptions(e){return new this.constructor({...this._options,baseURL:this.baseURL,maxRetries:this.maxRetries,timeout:this.timeout,logger:this.logger,logLevel:this.logLevel,fetch:this.fetch,fetchOptions:this.fetchOptions,apiKey:this.apiKey,organization:this.organization,project:this.project,webhookSecret:this.webhookSecret,...e})}defaultQuery(){return this._options.defaultQuery}validateHeaders({values:e,nulls:n}){}async authHeaders(e){return oe([{Authorization:`Bearer ${this.apiKey}`}])}stringifyQuery(e){return Ey(e,{arrayFormat:"brackets"})}getUserAgent(){return`${this.constructor.name}/JS ${yi}`}defaultIdempotencyKey(){return`stainless-node-retry-${dy()}`}makeStatusError(e,n,r,o){return Ct.generate(e,n,r,o)}async _callApiKey(){let e=this._options.apiKey;if(typeof e!="function")return!1;let n;try{n=await e()}catch(r){throw r instanceof ue?r:new ue(`Failed to get token from 'apiKey' function: ${r.message}`,{cause:r})}if(typeof n!="string"||!n)throw new ue(`Expected 'apiKey' function argument to return a string but it returned ${n}`);return this.apiKey=n,!0}buildURL(e,n,r){let o=!G(this,Jy,"m",BC).call(this)&&r||this.baseURL,i=qA(e)?new URL(e):new URL(o+(o.endsWith("/")&&e.startsWith("/")?e.slice(1):e)),s=this.defaultQuery();return $A(s)||(n={...s,...n}),typeof n=="object"&&n&&!Array.isArray(n)&&(i.search=this.stringifyQuery(n)),i.toString()}async prepareOptions(e){await this._callApiKey()}async prepareRequest(e,{url:n,options:r}){}get(e,n){return this.methodRequest("get",e,n)}post(e,n){return this.methodRequest("post",e,n)}patch(e,n){return this.methodRequest("patch",e,n)}put(e,n){return this.methodRequest("put",e,n)}delete(e,n){return this.methodRequest("delete",e,n)}methodRequest(e,n,r){return this.request(Promise.resolve(r).then(o=>({method:e,path:n,...o})))}request(e,n=null){return new hs(this,this.makeRequest(e,n,void 0))}async makeRequest(e,n,r){var T,R,L;let o=await e,i=(T=o.maxRetries)!=null?T:this.maxRetries;n==null&&(n=i),await this.prepareOptions(o);let{req:s,url:a,timeout:l}=await this.buildRequest(o,{retryCount:i-n});await this.prepareRequest(s,{url:a,options:o});let u="log_"+(Math.random()*(1<<24)|0).toString(16).padStart(6,"0"),f=r===void 0?"":`, retryOf: ${r}`,p=Date.now();if(pt(this).debug(`[${u}] sending request`,Ao({retryOfRequestLogID:r,method:o.method,url:a,options:o,headers:s.headers})),(R=o.signal)!=null&&R.aborted)throw new yt;let m=new AbortController,b=await this.fetchWithTimeout(a,s,l,m).catch(Yu),v=Date.now();if(b instanceof globalThis.Error){let D=`retrying, ${n} attempts remaining`;if((L=o.signal)!=null&&L.aborted)throw new yt;let x=Ku(b)||/timed? ?out/i.test(String(b)+("cause"in b?String(b.cause):""));if(n)return pt(this).info(`[${u}] connection ${x?"timed out":"failed"} - ${D}`),pt(this).debug(`[${u}] connection ${x?"timed out":"failed"} (${D})`,Ao({retryOfRequestLogID:r,url:a,durationMs:v-p,message:b.message})),this.retryRequest(o,n,r!=null?r:u);throw pt(this).info(`[${u}] connection ${x?"timed out":"failed"} - error; no more retries left`),pt(this).debug(`[${u}] connection ${x?"timed out":"failed"} (error; no more retries left)`,Ao({retryOfRequestLogID:r,url:a,durationMs:v-p,message:b.message})),x?new gi:new mi({cause:b})}let w=[...b.headers.entries()].filter(([D])=>D==="x-request-id").map(([D,x])=>", "+D+": "+JSON.stringify(x)).join(""),_=`[${u}${f}${w}] ${s.method} ${a} ${b.ok?"succeeded":"failed"} with status ${b.status} in ${v-p}ms`;if(!b.ok){let D=await this.shouldRetry(b);if(n&&D){let O=`retrying, ${n} attempts remaining`;return await QA(b.body),pt(this).info(`${_} - ${O}`),pt(this).debug(`[${u}] response error (${O})`,Ao({retryOfRequestLogID:r,url:b.url,status:b.status,headers:b.headers,durationMs:v-p})),this.retryRequest(o,n,r!=null?r:u,b.headers)}let x=D?"error; no more retries left":"error; not retryable";pt(this).info(`${_} - ${x}`);let P=await b.text().catch(O=>Yu(O).message),V=WA(P),J=V?void 0:P;throw pt(this).debug(`[${u}] response error (${x})`,Ao({retryOfRequestLogID:r,url:b.url,status:b.status,headers:b.headers,message:J,durationMs:Date.now()-p})),this.makeStatusError(b.status,V,J,b.headers)}return pt(this).info(_),pt(this).debug(`[${u}] response start`,Ao({retryOfRequestLogID:r,url:b.url,status:b.status,headers:b.headers,durationMs:v-p})),{response:b,options:o,controller:m,requestLogID:u,retryOfRequestLogID:r,startTime:p}}getAPIList(e,n,r){return this.requestAPIList(n,r&&"then"in r?r.then(o=>({method:"get",path:e,...o})):{method:"get",path:e,...r})}requestAPIList(e,n){let r=this.makeRequest(n,null,void 0);return new nc(this,r,e)}async fetchWithTimeout(e,n,r,o){let{signal:i,method:s,...a}=n||{},l=this._makeAbort(o);i&&i.addEventListener("abort",l,{once:!0});let u=setTimeout(l,r),f=globalThis.ReadableStream&&a.body instanceof globalThis.ReadableStream||typeof a.body=="object"&&a.body!==null&&Symbol.asyncIterator in a.body,p={signal:o.signal,...f?{duplex:"half"}:{},method:"GET",...a};s&&(p.method=s.toUpperCase());try{return await this.fetch.call(void 0,e,p)}finally{clearTimeout(u)}}async shouldRetry(e){let n=e.headers.get("x-should-retry");return n==="true"?!0:n==="false"?!1:e.status===408||e.status===409||e.status===429||e.status>=500}async retryRequest(e,n,r,o){var l;let i,s=o==null?void 0:o.get("retry-after-ms");if(s){let u=parseFloat(s);Number.isNaN(u)||(i=u)}let a=o==null?void 0:o.get("retry-after");if(a&&!i){let u=parseFloat(a);Number.isNaN(u)?i=Date.parse(a)-Date.now():i=u*1e3}if(!(i&&0<=i&&i<60*1e3)){let u=(l=e.maxRetries)!=null?l:this.maxRetries;i=this.calculateDefaultRetryTimeoutMillis(n,u)}return await qr(i),this.makeRequest(e,n-1,r)}calculateDefaultRetryTimeoutMillis(e,n){let i=n-e,s=Math.min(.5*Math.pow(2,i),8),a=1-Math.random()*.25;return s*a*1e3}async buildRequest(e,{retryCount:n=0}={}){var b,v,w;let r={...e},{method:o,path:i,query:s,defaultBaseURL:a}=r,l=this.buildURL(i,s,a);"timeout"in r&&jA("timeout",r.timeout),r.timeout=(b=r.timeout)!=null?b:this.timeout;let{bodyHeaders:u,body:f}=this.buildBody({options:r}),p=await this.buildHeaders({options:e,method:o,bodyHeaders:u,retryCount:n});return{req:{method:o,headers:p,...r.signal&&{signal:r.signal},...globalThis.ReadableStream&&f instanceof globalThis.ReadableStream&&{duplex:"half"},...f&&{body:f},...(v=this.fetchOptions)!=null?v:{},...(w=r.fetchOptions)!=null?w:{}},url:l,timeout:r.timeout}}async buildHeaders({options:e,method:n,bodyHeaders:r,retryCount:o}){let i={};this.idempotencyHeader&&n!=="get"&&(e.idempotencyKey||(e.idempotencyKey=this.defaultIdempotencyKey()),i[this.idempotencyHeader]=e.idempotencyKey);let s=oe([i,{Accept:"application/json","User-Agent":this.getUserAgent(),"X-Stainless-Retry-Count":String(o),...e.timeout?{"X-Stainless-Timeout":String(Math.trunc(e.timeout/1e3))}:{},...YA(),"OpenAI-Organization":this.organization,"OpenAI-Project":this.project},await this.authHeaders(e),this._options.defaultHeaders,r,e.headers]);return this.validateHeaders(s),s.values}_makeAbort(e){return()=>e.abort()}buildBody({options:{body:e,headers:n}}){if(!e)return{bodyHeaders:void 0,body:void 0};let r=oe([n]);return ArrayBuffer.isView(e)||e instanceof ArrayBuffer||e instanceof DataView||typeof e=="string"&&r.values.has("content-type")||globalThis.Blob&&e instanceof globalThis.Blob||e instanceof FormData||e instanceof URLSearchParams||globalThis.ReadableStream&&e instanceof globalThis.ReadableStream?{bodyHeaders:void 0,body:e}:typeof e=="object"&&(Symbol.asyncIterator in e||Symbol.iterator in e&&"next"in e&&typeof e.next=="function")?{bodyHeaders:void 0,body:Cd(e)}:G(this,th,"f").call(this,{body:e,headers:r})}};Ky=_e,th=new WeakMap,Jy=new WeakSet,BC=function(){return this.baseURL!=="https://api.openai.com/v1"};_e.OpenAI=Ky;_e.DEFAULT_TIMEOUT=6e5;_e.OpenAIError=ue;_e.APIError=Ct;_e.APIConnectionError=mi;_e.APIConnectionTimeoutError=gi;_e.APIUserAbortError=yt;_e.NotFoundError=La;_e.ConflictError=Ua;_e.RateLimitError=Ga;_e.BadRequestError=Da;_e.AuthenticationError=Ma;_e.InternalServerError=Ha;_e.PermissionDeniedError=Fa;_e.UnprocessableEntityError=Ba;_e.InvalidWebhookSignatureError=Hr;_e.toFile=Fd;_e.Completions=Es;_e.Chat=wi;_e.Embeddings=Cs;_e.Files=Ss;_e.Images=ks;_e.Audio=Wr;_e.Moderations=Ns;_e.Models=Rs;_e.FineTuning=mr;_e.Graders=Ii;_e.VectorStores=Oo;_e.Webhooks=Ms;_e.Beta=pr;_e.Batches=ys;_e.Uploads=ki;_e.Responses=Ro;_e.Realtime=ko;_e.Conversations=Si;_e.Evals=Pi;_e.Containers=Ti;_e.Skills=No;_e.Videos=Ds;var nh=class{constructor(e){this.aborted=!1;this.settings=e,this.client=new _e({apiKey:this.settings.apiKey,dangerouslyAllowBrowser:!0})}async*generate(e,n,r){this.aborted=!1,this.abortcontroller=new AbortController;let o=e.getCursor(),i=await this.client.responses.create({model:r.model,instructions:r.systemPrompt,input:n,temperature:r.temperature,stream:!0},{signal:this.abortcontroller.signal}),s="";for await(let a of i){if(this.aborted)return;if(this.cursorMoved(e,o)){this.abort();return}if(a.type!=="response.output_text.delta")continue;let l=a.delta||"";s+=l,yield s}}async abort(){this.aborted||(this.aborted=!0,this.abortcontroller.abort())}async fetchModels(){return this.client?(await this.client.models.list()).data.filter(r=>r.id.includes("gpt")).map(r=>r.id):this.settings.models}async connectionTest(){try{return await this.client.models.list(),!0}catch(e){return console.error("Error testing connection:",e),!1}}cursorMoved(e,n){let r=e.getCursor();return r.line!==n.line||r.ch!==n.ch}};var rh=class{constructor(e){this.aborted=!1;this.settings=e,this.client=new _e({baseURL:this.settings.baseUrl,apiKey:this.settings.apiKey,dangerouslyAllowBrowser:!0})}async*generate(e,n,r){var a,l;this.aborted=!1,this.abortcontroller=new AbortController;let o=e.getCursor(),i=await this.client.chat.completions.create({model:r.model,messages:[{role:"system",content:r.systemPrompt},{role:"user",content:n}],temperature:r.temperature,stream:!0},{signal:this.abortcontroller.signal}),s="";for await(let u of i){if(this.aborted)return;if(this.cursorMoved(e,o)){this.abort();return}let f=((l=(a=u.choices[0])==null?void 0:a.delta)==null?void 0:l.content)||"";s+=f,yield s}}async abort(){this.aborted||(this.aborted=!0,this.abortcontroller.abort())}async fetchModels(){return this.client?(await this.client.models.list()).data.map(n=>n.id):this.settings.models}async connectionTest(){try{return await this.client.models.list(),!0}catch(e){return console.error("Error testing connection:",e),!1}}cursorMoved(e,n){let r=e.getCursor();return r.line!==n.line||r.ch!==n.ch}};var _q=Object.prototype.toString,Eq=t=>_q.call(t)==="[object Error]",Aq=new Set(["network error","Failed to fetch","NetworkError when attempting to fetch resource.","The Internet connection appears to be offline.","Network request failed","fetch failed","terminated"," A network error occurred.","Network connection lost"]);function Yy(t){if(!(t&&Eq(t)&&t.name==="TypeError"&&typeof t.message=="string"))return!1;let{message:n,stack:r}=t;return n==="Load failed"?r===void 0||"__sentry_captured__"in t:n.startsWith("error sending request for url")?!0:Aq.has(n)}function Cq(t){if(typeof t=="number"){if(t<0)throw new TypeError("Expected `retries` to be a non-negative number.");if(Number.isNaN(t))throw new TypeError("Expected `retries` to be a valid number or Infinity, got NaN.")}else if(t!==void 0)throw new TypeError("Expected `retries` to be a number or Infinity.")}function oh(t,e,{min:n=0,allowInfinity:r=!1}={}){if(e!==void 0){if(typeof e!="number"||Number.isNaN(e))throw new TypeError(`Expected \`${t}\` to be a number${r?" or Infinity":""}.`);if(!r&&!Number.isFinite(e))throw new TypeError(`Expected \`${t}\` to be a finite number.`);if(e<n)throw new TypeError(`Expected \`${t}\` to be \u2265 ${n}.`)}}var gc=class extends Error{constructor(e){super(),e instanceof Error?(this.originalError=e,{message:e}=e):(this.originalError=new Error(e),this.originalError.stack=this.stack),this.name="AbortError",this.message=e}};function Tq(t,e){let n=Math.max(1,t+1),r=e.randomize?Math.random()+1:1,o=Math.round(r*e.minTimeout*e.factor**(n-1));return o=Math.min(o,e.maxTimeout),o}function GC(t,e){return Number.isFinite(e)?e-(performance.now()-t):e}async function Sq({error:t,attemptNumber:e,retriesConsumed:n,startTime:r,options:o}){var b,v,w,_,T;let i=t instanceof Error?t:new TypeError(`Non-error was thrown: "${t}". You should only throw errors.`);if(i instanceof gc)throw i.originalError;let s=Number.isFinite(o.retries)?Math.max(0,o.retries-n):o.retries,a=(b=o.maxRetryTime)!=null?b:Number.POSITIVE_INFINITY,l=Object.freeze({error:i,attemptNumber:e,retriesLeft:s,retriesConsumed:n});if(await o.onFailedAttempt(l),GC(r,a)<=0)throw i;let u=await o.shouldConsumeRetry(l),f=GC(r,a);if(f<=0||s<=0)throw i;if(i instanceof TypeError&&!Yy(i)){if(u)throw i;return(v=o.signal)==null||v.throwIfAborted(),!1}if(!await o.shouldRetry(l))throw i;if(!u)return(w=o.signal)==null||w.throwIfAborted(),!1;let p=Tq(n,o),m=Math.min(p,f);return(_=o.signal)==null||_.throwIfAborted(),m>0&&await new Promise((R,L)=>{var P,V;let D=()=>{var J;clearTimeout(x),(J=o.signal)==null||J.removeEventListener("abort",D),L(o.signal.reason)},x=setTimeout(()=>{var J;(J=o.signal)==null||J.removeEventListener("abort",D),R()},m);o.unref&&((P=x.unref)==null||P.call(x)),(V=o.signal)==null||V.addEventListener("abort",D,{once:!0})}),(T=o.signal)==null||T.throwIfAborted(),!0}async function Xy(t,e={}){var i,s,a,l,u,f,p,m,b,v,w,_;if(e={...e},Cq(e.retries),Object.hasOwn(e,"forever"))throw new Error("The `forever` option is no longer supported. For many use-cases, you can set `retries: Infinity` instead.");(i=e.retries)!=null||(e.retries=10),(s=e.factor)!=null||(e.factor=2),(a=e.minTimeout)!=null||(e.minTimeout=1e3),(l=e.maxTimeout)!=null||(e.maxTimeout=Number.POSITIVE_INFINITY),(u=e.maxRetryTime)!=null||(e.maxRetryTime=Number.POSITIVE_INFINITY),(f=e.randomize)!=null||(e.randomize=!1),(p=e.onFailedAttempt)!=null||(e.onFailedAttempt=()=>{}),(m=e.shouldRetry)!=null||(e.shouldRetry=()=>!0),(b=e.shouldConsumeRetry)!=null||(e.shouldConsumeRetry=()=>!0),oh("factor",e.factor,{min:0,allowInfinity:!1}),oh("minTimeout",e.minTimeout,{min:0,allowInfinity:!1}),oh("maxTimeout",e.maxTimeout,{min:0,allowInfinity:!0}),oh("maxRetryTime",e.maxRetryTime,{min:0,allowInfinity:!0}),e.factor>0||(e.factor=1),(v=e.signal)==null||v.throwIfAborted();let n=0,r=0,o=performance.now();for(;!Number.isFinite(e.retries)||r<=e.retries;){n++;try{(w=e.signal)==null||w.throwIfAborted();let T=await t(n);return(_=e.signal)==null||_.throwIfAborted(),T}catch(T){await Sq({error:T,attemptNumber:n,retriesConsumed:r,startTime:o,options:e})&&r++}}throw new Error("Retry attempts exhausted without throwing an error.")}var Bk=ht(dx(),1),Gk=require("fs"),Am=ht(require("fs/promises"),1),Hk=require("fs/promises"),qk=require("node:stream"),$k=require("node:stream/promises");var pW=ht(a1(),1),mW=ht(Dv(),1),gW=ht(Lv(),1),jv=ht(Up(),1),yW=ht(g1(),1);var Vk=ht(require("path"),1);var vW,wW;function _W(){return{geminiUrl:vW,vertexUrl:wW}}function EW(t,e,n,r){var o,i;if(!(t!=null&&t.baseUrl)){let s=_W();return e?(o=s.vertexUrl)!==null&&o!==void 0?o:n:(i=s.geminiUrl)!==null&&i!==void 0?i:r}return t.baseUrl}var Ir=class{};function le(t,e){let n=/\{([^}]+)\}/g;return t.replace(n,(r,o)=>{if(Object.prototype.hasOwnProperty.call(e,o)){let i=e[o];return i!=null?String(i):""}else throw new Error(`Key '${o}' not found in valueMap.`)})}function d(t,e,n){for(let i=0;i<e.length-1;i++){let s=e[i];if(s.endsWith("[]")){let a=s.slice(0,-2);if(!(a in t))if(Array.isArray(n))t[a]=Array.from({length:n.length},()=>({}));else throw new Error(`Value must be a list given an array path ${s}`);if(Array.isArray(t[a])){let l=t[a];if(Array.isArray(n))for(let u=0;u<l.length;u++){let f=l[u];d(f,e.slice(i+1),n[u])}else for(let u of l)d(u,e.slice(i+1),n)}return}else if(s.endsWith("[0]")){let a=s.slice(0,-3);a in t||(t[a]=[{}]);let l=t[a];d(l[0],e.slice(i+1),n);return}(!t[s]||typeof t[s]!="object")&&(t[s]={}),t=t[s]}let r=e[e.length-1],o=t[r];if(o!==void 0){if(!n||typeof n=="object"&&Object.keys(n).length===0||n===o)return;if(typeof o=="object"&&typeof n=="object"&&o!==null&&n!==null)Object.assign(o,n);else throw new Error(`Cannot set value for an existing key. Key: ${r}`)}else r==="_self"&&typeof n=="object"&&n!==null&&!Array.isArray(n)?Object.assign(t,n):t[r]=n}function c(t,e,n=void 0){try{if(e.length===1&&e[0]==="_self")return t;for(let r=0;r<e.length;r++){if(typeof t!="object"||t===null)return n;let o=e[r];if(o.endsWith("[]")){let i=o.slice(0,-2);if(i in t){let s=t[i];return Array.isArray(s)?s.map(a=>c(a,e.slice(r+1),n)):n}else return n}else t=t[o]}return t}catch(r){if(r instanceof TypeError)return n;throw r}}function AW(t,e){for(let[n,r]of Object.entries(e)){let o=n.split("."),i=r.split("."),s=new Set,a=-1;for(let l=0;l<o.length;l++)if(o[l]==="*"){a=l;break}if(a!==-1&&i.length>a)for(let l=a;l<i.length;l++){let u=i[l];u!=="*"&&!u.endsWith("[]")&&!u.endsWith("[0]")&&s.add(u)}Kv(t,o,i,0,s)}}function Kv(t,e,n,r,o){if(r>=e.length||typeof t!="object"||t===null)return;let i=e[r];if(i.endsWith("[]")){let s=i.slice(0,-2),a=t;if(s in a&&Array.isArray(a[s]))for(let l of a[s])Kv(l,e,n,r+1,o)}else if(i==="*"){if(typeof t=="object"&&t!==null&&!Array.isArray(t)){let s=t,a=Object.keys(s).filter(u=>!u.startsWith("_")&&!o.has(u)),l={};for(let u of a)l[u]=s[u];for(let[u,f]of Object.entries(l)){let p=[];for(let m of n.slice(r))m==="*"?p.push(u):p.push(m);d(s,p,f)}for(let u of a)delete s[u]}}else{let s=t;i in s&&Kv(s[i],e,n,r+1,o)}}function Kw(t){if(typeof t!="string")throw new Error("fromImageBytes must be a string");return t}function CW(t){let e={},n=c(t,["operationName"]);n!=null&&d(e,["operationName"],n);let r=c(t,["resourceName"]);return r!=null&&d(e,["_url","resourceName"],r),e}function TW(t){let e={},n=c(t,["name"]);n!=null&&d(e,["name"],n);let r=c(t,["metadata"]);r!=null&&d(e,["metadata"],r);let o=c(t,["done"]);o!=null&&d(e,["done"],o);let i=c(t,["error"]);i!=null&&d(e,["error"],i);let s=c(t,["response","generateVideoResponse"]);return s!=null&&d(e,["response"],PW(s)),e}function SW(t){let e={},n=c(t,["name"]);n!=null&&d(e,["name"],n);let r=c(t,["metadata"]);r!=null&&d(e,["metadata"],r);let o=c(t,["done"]);o!=null&&d(e,["done"],o);let i=c(t,["error"]);i!=null&&d(e,["error"],i);let s=c(t,["response"]);return s!=null&&d(e,["response"],IW(s)),e}function PW(t){let e={},n=c(t,["generatedSamples"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(s=>xW(s))),d(e,["generatedVideos"],i)}let r=c(t,["raiMediaFilteredCount"]);r!=null&&d(e,["raiMediaFilteredCount"],r);let o=c(t,["raiMediaFilteredReasons"]);return o!=null&&d(e,["raiMediaFilteredReasons"],o),e}function IW(t){let e={},n=c(t,["videos"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(s=>kW(s))),d(e,["generatedVideos"],i)}let r=c(t,["raiMediaFilteredCount"]);r!=null&&d(e,["raiMediaFilteredCount"],r);let o=c(t,["raiMediaFilteredReasons"]);return o!=null&&d(e,["raiMediaFilteredReasons"],o),e}function xW(t){let e={},n=c(t,["video"]);return n!=null&&d(e,["video"],FW(n)),e}function kW(t){let e={},n=c(t,["_self"]);return n!=null&&d(e,["video"],LW(n)),e}function RW(t){let e={},n=c(t,["operationName"]);return n!=null&&d(e,["_url","operationName"],n),e}function NW(t){let e={},n=c(t,["operationName"]);return n!=null&&d(e,["_url","operationName"],n),e}function OW(t){let e={},n=c(t,["name"]);n!=null&&d(e,["name"],n);let r=c(t,["metadata"]);r!=null&&d(e,["metadata"],r);let o=c(t,["done"]);o!=null&&d(e,["done"],o);let i=c(t,["error"]);i!=null&&d(e,["error"],i);let s=c(t,["response"]);return s!=null&&d(e,["response"],DW(s)),e}function DW(t){let e={},n=c(t,["sdkHttpResponse"]);n!=null&&d(e,["sdkHttpResponse"],n);let r=c(t,["parent"]);r!=null&&d(e,["parent"],r);let o=c(t,["documentName"]);return o!=null&&d(e,["documentName"],o),e}function Yw(t){let e={},n=c(t,["name"]);n!=null&&d(e,["name"],n);let r=c(t,["metadata"]);r!=null&&d(e,["metadata"],r);let o=c(t,["done"]);o!=null&&d(e,["done"],o);let i=c(t,["error"]);i!=null&&d(e,["error"],i);let s=c(t,["response"]);return s!=null&&d(e,["response"],MW(s)),e}function MW(t){let e={},n=c(t,["sdkHttpResponse"]);n!=null&&d(e,["sdkHttpResponse"],n);let r=c(t,["parent"]);r!=null&&d(e,["parent"],r);let o=c(t,["documentName"]);return o!=null&&d(e,["documentName"],o),e}function FW(t){let e={},n=c(t,["uri"]);n!=null&&d(e,["uri"],n);let r=c(t,["encodedVideo"]);r!=null&&d(e,["videoBytes"],Kw(r));let o=c(t,["encoding"]);return o!=null&&d(e,["mimeType"],o),e}function LW(t){let e={},n=c(t,["gcsUri"]);n!=null&&d(e,["uri"],n);let r=c(t,["bytesBase64Encoded"]);r!=null&&d(e,["videoBytes"],Kw(r));let o=c(t,["mimeType"]);return o!=null&&d(e,["mimeType"],o),e}var y1;(function(t){t.OUTCOME_UNSPECIFIED="OUTCOME_UNSPECIFIED",t.OUTCOME_OK="OUTCOME_OK",t.OUTCOME_FAILED="OUTCOME_FAILED",t.OUTCOME_DEADLINE_EXCEEDED="OUTCOME_DEADLINE_EXCEEDED"})(y1||(y1={}));var b1;(function(t){t.LANGUAGE_UNSPECIFIED="LANGUAGE_UNSPECIFIED",t.PYTHON="PYTHON"})(b1||(b1={}));var v1;(function(t){t.SCHEDULING_UNSPECIFIED="SCHEDULING_UNSPECIFIED",t.SILENT="SILENT",t.WHEN_IDLE="WHEN_IDLE",t.INTERRUPT="INTERRUPT"})(v1||(v1={}));var qi;(function(t){t.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",t.STRING="STRING",t.NUMBER="NUMBER",t.INTEGER="INTEGER",t.BOOLEAN="BOOLEAN",t.ARRAY="ARRAY",t.OBJECT="OBJECT",t.NULL="NULL"})(qi||(qi={}));var w1;(function(t){t.API_SPEC_UNSPECIFIED="API_SPEC_UNSPECIFIED",t.SIMPLE_SEARCH="SIMPLE_SEARCH",t.ELASTIC_SEARCH="ELASTIC_SEARCH"})(w1||(w1={}));var _1;(function(t){t.AUTH_TYPE_UNSPECIFIED="AUTH_TYPE_UNSPECIFIED",t.NO_AUTH="NO_AUTH",t.API_KEY_AUTH="API_KEY_AUTH",t.HTTP_BASIC_AUTH="HTTP_BASIC_AUTH",t.GOOGLE_SERVICE_ACCOUNT_AUTH="GOOGLE_SERVICE_ACCOUNT_AUTH",t.OAUTH="OAUTH",t.OIDC_AUTH="OIDC_AUTH"})(_1||(_1={}));var E1;(function(t){t.HTTP_IN_UNSPECIFIED="HTTP_IN_UNSPECIFIED",t.HTTP_IN_QUERY="HTTP_IN_QUERY",t.HTTP_IN_HEADER="HTTP_IN_HEADER",t.HTTP_IN_PATH="HTTP_IN_PATH",t.HTTP_IN_BODY="HTTP_IN_BODY",t.HTTP_IN_COOKIE="HTTP_IN_COOKIE"})(E1||(E1={}));var A1;(function(t){t.PHISH_BLOCK_THRESHOLD_UNSPECIFIED="PHISH_BLOCK_THRESHOLD_UNSPECIFIED",t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_HIGH_AND_ABOVE="BLOCK_HIGH_AND_ABOVE",t.BLOCK_HIGHER_AND_ABOVE="BLOCK_HIGHER_AND_ABOVE",t.BLOCK_VERY_HIGH_AND_ABOVE="BLOCK_VERY_HIGH_AND_ABOVE",t.BLOCK_ONLY_EXTREMELY_HIGH="BLOCK_ONLY_EXTREMELY_HIGH"})(A1||(A1={}));var C1;(function(t){t.UNSPECIFIED="UNSPECIFIED",t.BLOCKING="BLOCKING",t.NON_BLOCKING="NON_BLOCKING"})(C1||(C1={}));var T1;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.MODE_DYNAMIC="MODE_DYNAMIC"})(T1||(T1={}));var S1;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.AUTO="AUTO",t.ANY="ANY",t.NONE="NONE",t.VALIDATED="VALIDATED"})(S1||(S1={}));var P1;(function(t){t.THINKING_LEVEL_UNSPECIFIED="THINKING_LEVEL_UNSPECIFIED",t.LOW="LOW",t.MEDIUM="MEDIUM",t.HIGH="HIGH",t.MINIMAL="MINIMAL"})(P1||(P1={}));var I1;(function(t){t.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",t.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",t.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",t.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",t.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",t.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY",t.HARM_CATEGORY_IMAGE_HATE="HARM_CATEGORY_IMAGE_HATE",t.HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT="HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT",t.HARM_CATEGORY_IMAGE_HARASSMENT="HARM_CATEGORY_IMAGE_HARASSMENT",t.HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT="HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT",t.HARM_CATEGORY_JAILBREAK="HARM_CATEGORY_JAILBREAK"})(I1||(I1={}));var x1;(function(t){t.HARM_BLOCK_METHOD_UNSPECIFIED="HARM_BLOCK_METHOD_UNSPECIFIED",t.SEVERITY="SEVERITY",t.PROBABILITY="PROBABILITY"})(x1||(x1={}));var k1;(function(t){t.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE",t.OFF="OFF"})(k1||(k1={}));var R1;(function(t){t.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",t.STOP="STOP",t.MAX_TOKENS="MAX_TOKENS",t.SAFETY="SAFETY",t.RECITATION="RECITATION",t.LANGUAGE="LANGUAGE",t.OTHER="OTHER",t.BLOCKLIST="BLOCKLIST",t.PROHIBITED_CONTENT="PROHIBITED_CONTENT",t.SPII="SPII",t.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",t.IMAGE_SAFETY="IMAGE_SAFETY",t.UNEXPECTED_TOOL_CALL="UNEXPECTED_TOOL_CALL",t.IMAGE_PROHIBITED_CONTENT="IMAGE_PROHIBITED_CONTENT",t.NO_IMAGE="NO_IMAGE",t.IMAGE_RECITATION="IMAGE_RECITATION",t.IMAGE_OTHER="IMAGE_OTHER"})(R1||(R1={}));var N1;(function(t){t.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",t.NEGLIGIBLE="NEGLIGIBLE",t.LOW="LOW",t.MEDIUM="MEDIUM",t.HIGH="HIGH"})(N1||(N1={}));var O1;(function(t){t.HARM_SEVERITY_UNSPECIFIED="HARM_SEVERITY_UNSPECIFIED",t.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",t.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",t.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",t.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH"})(O1||(O1={}));var D1;(function(t){t.URL_RETRIEVAL_STATUS_UNSPECIFIED="URL_RETRIEVAL_STATUS_UNSPECIFIED",t.URL_RETRIEVAL_STATUS_SUCCESS="URL_RETRIEVAL_STATUS_SUCCESS",t.URL_RETRIEVAL_STATUS_ERROR="URL_RETRIEVAL_STATUS_ERROR",t.URL_RETRIEVAL_STATUS_PAYWALL="URL_RETRIEVAL_STATUS_PAYWALL",t.URL_RETRIEVAL_STATUS_UNSAFE="URL_RETRIEVAL_STATUS_UNSAFE"})(D1||(D1={}));var M1;(function(t){t.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",t.SAFETY="SAFETY",t.OTHER="OTHER",t.BLOCKLIST="BLOCKLIST",t.PROHIBITED_CONTENT="PROHIBITED_CONTENT",t.IMAGE_SAFETY="IMAGE_SAFETY",t.MODEL_ARMOR="MODEL_ARMOR",t.JAILBREAK="JAILBREAK"})(M1||(M1={}));var F1;(function(t){t.TRAFFIC_TYPE_UNSPECIFIED="TRAFFIC_TYPE_UNSPECIFIED",t.ON_DEMAND="ON_DEMAND",t.PROVISIONED_THROUGHPUT="PROVISIONED_THROUGHPUT"})(F1||(F1={}));var zp;(function(t){t.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",t.TEXT="TEXT",t.IMAGE="IMAGE",t.AUDIO="AUDIO"})(zp||(zp={}));var L1;(function(t){t.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",t.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",t.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",t.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(L1||(L1={}));var U1;(function(t){t.TUNING_MODE_UNSPECIFIED="TUNING_MODE_UNSPECIFIED",t.TUNING_MODE_FULL="TUNING_MODE_FULL",t.TUNING_MODE_PEFT_ADAPTER="TUNING_MODE_PEFT_ADAPTER"})(U1||(U1={}));var B1;(function(t){t.ADAPTER_SIZE_UNSPECIFIED="ADAPTER_SIZE_UNSPECIFIED",t.ADAPTER_SIZE_ONE="ADAPTER_SIZE_ONE",t.ADAPTER_SIZE_TWO="ADAPTER_SIZE_TWO",t.ADAPTER_SIZE_FOUR="ADAPTER_SIZE_FOUR",t.ADAPTER_SIZE_EIGHT="ADAPTER_SIZE_EIGHT",t.ADAPTER_SIZE_SIXTEEN="ADAPTER_SIZE_SIXTEEN",t.ADAPTER_SIZE_THIRTY_TWO="ADAPTER_SIZE_THIRTY_TWO"})(B1||(B1={}));var Yv;(function(t){t.JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",t.JOB_STATE_QUEUED="JOB_STATE_QUEUED",t.JOB_STATE_PENDING="JOB_STATE_PENDING",t.JOB_STATE_RUNNING="JOB_STATE_RUNNING",t.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",t.JOB_STATE_FAILED="JOB_STATE_FAILED",t.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",t.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",t.JOB_STATE_PAUSED="JOB_STATE_PAUSED",t.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",t.JOB_STATE_UPDATING="JOB_STATE_UPDATING",t.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED"})(Yv||(Yv={}));var G1;(function(t){t.TUNING_TASK_UNSPECIFIED="TUNING_TASK_UNSPECIFIED",t.TUNING_TASK_I2V="TUNING_TASK_I2V",t.TUNING_TASK_T2V="TUNING_TASK_T2V",t.TUNING_TASK_R2V="TUNING_TASK_R2V"})(G1||(G1={}));var H1;(function(t){t.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",t.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",t.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",t.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH",t.MEDIA_RESOLUTION_ULTRA_HIGH="MEDIA_RESOLUTION_ULTRA_HIGH"})(H1||(H1={}));var Xv;(function(t){t.COLLECTION="COLLECTION"})(Xv||(Xv={}));var q1;(function(t){t.FEATURE_SELECTION_PREFERENCE_UNSPECIFIED="FEATURE_SELECTION_PREFERENCE_UNSPECIFIED",t.PRIORITIZE_QUALITY="PRIORITIZE_QUALITY",t.BALANCED="BALANCED",t.PRIORITIZE_COST="PRIORITIZE_COST"})(q1||(q1={}));var $1;(function(t){t.ENVIRONMENT_UNSPECIFIED="ENVIRONMENT_UNSPECIFIED",t.ENVIRONMENT_BROWSER="ENVIRONMENT_BROWSER"})($1||($1={}));var V1;(function(t){t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE"})(V1||(V1={}));var j1;(function(t){t.DONT_ALLOW="DONT_ALLOW",t.ALLOW_ADULT="ALLOW_ADULT",t.ALLOW_ALL="ALLOW_ALL"})(j1||(j1={}));var W1;(function(t){t.auto="auto",t.en="en",t.ja="ja",t.ko="ko",t.hi="hi",t.zh="zh",t.pt="pt",t.es="es"})(W1||(W1={}));var z1;(function(t){t.MASK_MODE_DEFAULT="MASK_MODE_DEFAULT",t.MASK_MODE_USER_PROVIDED="MASK_MODE_USER_PROVIDED",t.MASK_MODE_BACKGROUND="MASK_MODE_BACKGROUND",t.MASK_MODE_FOREGROUND="MASK_MODE_FOREGROUND",t.MASK_MODE_SEMANTIC="MASK_MODE_SEMANTIC"})(z1||(z1={}));var J1;(function(t){t.CONTROL_TYPE_DEFAULT="CONTROL_TYPE_DEFAULT",t.CONTROL_TYPE_CANNY="CONTROL_TYPE_CANNY",t.CONTROL_TYPE_SCRIBBLE="CONTROL_TYPE_SCRIBBLE",t.CONTROL_TYPE_FACE_MESH="CONTROL_TYPE_FACE_MESH"})(J1||(J1={}));var K1;(function(t){t.SUBJECT_TYPE_DEFAULT="SUBJECT_TYPE_DEFAULT",t.SUBJECT_TYPE_PERSON="SUBJECT_TYPE_PERSON",t.SUBJECT_TYPE_ANIMAL="SUBJECT_TYPE_ANIMAL",t.SUBJECT_TYPE_PRODUCT="SUBJECT_TYPE_PRODUCT"})(K1||(K1={}));var Y1;(function(t){t.EDIT_MODE_DEFAULT="EDIT_MODE_DEFAULT",t.EDIT_MODE_INPAINT_REMOVAL="EDIT_MODE_INPAINT_REMOVAL",t.EDIT_MODE_INPAINT_INSERTION="EDIT_MODE_INPAINT_INSERTION",t.EDIT_MODE_OUTPAINT="EDIT_MODE_OUTPAINT",t.EDIT_MODE_CONTROLLED_EDITING="EDIT_MODE_CONTROLLED_EDITING",t.EDIT_MODE_STYLE="EDIT_MODE_STYLE",t.EDIT_MODE_BGSWAP="EDIT_MODE_BGSWAP",t.EDIT_MODE_PRODUCT_IMAGE="EDIT_MODE_PRODUCT_IMAGE"})(Y1||(Y1={}));var X1;(function(t){t.FOREGROUND="FOREGROUND",t.BACKGROUND="BACKGROUND",t.PROMPT="PROMPT",t.SEMANTIC="SEMANTIC",t.INTERACTIVE="INTERACTIVE"})(X1||(X1={}));var Q1;(function(t){t.ASSET="ASSET",t.STYLE="STYLE"})(Q1||(Q1={}));var Z1;(function(t){t.INSERT="INSERT",t.REMOVE="REMOVE",t.REMOVE_STATIC="REMOVE_STATIC",t.OUTPAINT="OUTPAINT"})(Z1||(Z1={}));var ek;(function(t){t.OPTIMIZED="OPTIMIZED",t.LOSSLESS="LOSSLESS"})(ek||(ek={}));var tk;(function(t){t.SUPERVISED_FINE_TUNING="SUPERVISED_FINE_TUNING",t.PREFERENCE_TUNING="PREFERENCE_TUNING",t.DISTILLATION="DISTILLATION"})(tk||(tk={}));var nk;(function(t){t.STATE_UNSPECIFIED="STATE_UNSPECIFIED",t.STATE_PENDING="STATE_PENDING",t.STATE_ACTIVE="STATE_ACTIVE",t.STATE_FAILED="STATE_FAILED"})(nk||(nk={}));var rk;(function(t){t.STATE_UNSPECIFIED="STATE_UNSPECIFIED",t.PROCESSING="PROCESSING",t.ACTIVE="ACTIVE",t.FAILED="FAILED"})(rk||(rk={}));var ok;(function(t){t.SOURCE_UNSPECIFIED="SOURCE_UNSPECIFIED",t.UPLOADED="UPLOADED",t.GENERATED="GENERATED",t.REGISTERED="REGISTERED"})(ok||(ok={}));var ik;(function(t){t.TURN_COMPLETE_REASON_UNSPECIFIED="TURN_COMPLETE_REASON_UNSPECIFIED",t.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",t.RESPONSE_REJECTED="RESPONSE_REJECTED",t.NEED_MORE_INPUT="NEED_MORE_INPUT"})(ik||(ik={}));var sk;(function(t){t.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",t.TEXT="TEXT",t.IMAGE="IMAGE",t.VIDEO="VIDEO",t.AUDIO="AUDIO",t.DOCUMENT="DOCUMENT"})(sk||(sk={}));var ak;(function(t){t.VAD_SIGNAL_TYPE_UNSPECIFIED="VAD_SIGNAL_TYPE_UNSPECIFIED",t.VAD_SIGNAL_TYPE_SOS="VAD_SIGNAL_TYPE_SOS",t.VAD_SIGNAL_TYPE_EOS="VAD_SIGNAL_TYPE_EOS"})(ak||(ak={}));var lk;(function(t){t.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",t.ACTIVITY_START="ACTIVITY_START",t.ACTIVITY_END="ACTIVITY_END"})(lk||(lk={}));var uk;(function(t){t.START_SENSITIVITY_UNSPECIFIED="START_SENSITIVITY_UNSPECIFIED",t.START_SENSITIVITY_HIGH="START_SENSITIVITY_HIGH",t.START_SENSITIVITY_LOW="START_SENSITIVITY_LOW"})(uk||(uk={}));var ck;(function(t){t.END_SENSITIVITY_UNSPECIFIED="END_SENSITIVITY_UNSPECIFIED",t.END_SENSITIVITY_HIGH="END_SENSITIVITY_HIGH",t.END_SENSITIVITY_LOW="END_SENSITIVITY_LOW"})(ck||(ck={}));var fk;(function(t){t.ACTIVITY_HANDLING_UNSPECIFIED="ACTIVITY_HANDLING_UNSPECIFIED",t.START_OF_ACTIVITY_INTERRUPTS="START_OF_ACTIVITY_INTERRUPTS",t.NO_INTERRUPTION="NO_INTERRUPTION"})(fk||(fk={}));var dk;(function(t){t.TURN_COVERAGE_UNSPECIFIED="TURN_COVERAGE_UNSPECIFIED",t.TURN_INCLUDES_ONLY_ACTIVITY="TURN_INCLUDES_ONLY_ACTIVITY",t.TURN_INCLUDES_ALL_INPUT="TURN_INCLUDES_ALL_INPUT"})(dk||(dk={}));var hk;(function(t){t.SCALE_UNSPECIFIED="SCALE_UNSPECIFIED",t.C_MAJOR_A_MINOR="C_MAJOR_A_MINOR",t.D_FLAT_MAJOR_B_FLAT_MINOR="D_FLAT_MAJOR_B_FLAT_MINOR",t.D_MAJOR_B_MINOR="D_MAJOR_B_MINOR",t.E_FLAT_MAJOR_C_MINOR="E_FLAT_MAJOR_C_MINOR",t.E_MAJOR_D_FLAT_MINOR="E_MAJOR_D_FLAT_MINOR",t.F_MAJOR_D_MINOR="F_MAJOR_D_MINOR",t.G_FLAT_MAJOR_E_FLAT_MINOR="G_FLAT_MAJOR_E_FLAT_MINOR",t.G_MAJOR_E_MINOR="G_MAJOR_E_MINOR",t.A_FLAT_MAJOR_F_MINOR="A_FLAT_MAJOR_F_MINOR",t.A_MAJOR_G_FLAT_MINOR="A_MAJOR_G_FLAT_MINOR",t.B_FLAT_MAJOR_G_MINOR="B_FLAT_MAJOR_G_MINOR",t.B_MAJOR_A_FLAT_MINOR="B_MAJOR_A_FLAT_MINOR"})(hk||(hk={}));var pk;(function(t){t.MUSIC_GENERATION_MODE_UNSPECIFIED="MUSIC_GENERATION_MODE_UNSPECIFIED",t.QUALITY="QUALITY",t.DIVERSITY="DIVERSITY",t.VOCALIZATION="VOCALIZATION"})(pk||(pk={}));var au;(function(t){t.PLAYBACK_CONTROL_UNSPECIFIED="PLAYBACK_CONTROL_UNSPECIFIED",t.PLAY="PLAY",t.PAUSE="PAUSE",t.STOP="STOP",t.RESET_CONTEXT="RESET_CONTEXT"})(au||(au={}));var la=class{constructor(e){let n={};for(let r of e.headers.entries())n[r[0]]=r[1];this.headers=n,this.responseInternal=e}json(){return this.responseInternal.json()}};var sa=class{get text(){var e,n,r,o,i,s,a,l;if(((o=(r=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||r===void 0?void 0:r.parts)===null||o===void 0?void 0:o.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning text from the first one.");let u="",f=!1,p=[];for(let m of(l=(a=(s=(i=this.candidates)===null||i===void 0?void 0:i[0])===null||s===void 0?void 0:s.content)===null||a===void 0?void 0:a.parts)!==null&&l!==void 0?l:[]){for(let[b,v]of Object.entries(m))b!=="text"&&b!=="thought"&&b!=="thoughtSignature"&&(v!==null||v!==void 0)&&p.push(b);if(typeof m.text=="string"){if(typeof m.thought=="boolean"&&m.thought)continue;f=!0,u+=m.text}}return p.length>0&&console.warn(`there are non-text parts ${p} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),f?u:void 0}get data(){var e,n,r,o,i,s,a,l;if(((o=(r=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||r===void 0?void 0:r.parts)===null||o===void 0?void 0:o.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning data from the first one.");let u="",f=[];for(let p of(l=(a=(s=(i=this.candidates)===null||i===void 0?void 0:i[0])===null||s===void 0?void 0:s.content)===null||a===void 0?void 0:a.parts)!==null&&l!==void 0?l:[]){for(let[m,b]of Object.entries(p))m!=="inlineData"&&(b!==null||b!==void 0)&&f.push(m);p.inlineData&&typeof p.inlineData.data=="string"&&(u+=atob(p.inlineData.data))}return f.length>0&&console.warn(`there are non-data parts ${f} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),u.length>0?btoa(u):void 0}get functionCalls(){var e,n,r,o,i,s,a,l;if(((o=(r=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||r===void 0?void 0:r.parts)===null||o===void 0?void 0:o.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning function calls from the first one.");let u=(l=(a=(s=(i=this.candidates)===null||i===void 0?void 0:i[0])===null||s===void 0?void 0:s.content)===null||a===void 0?void 0:a.parts)===null||l===void 0?void 0:l.filter(f=>f.functionCall).map(f=>f.functionCall).filter(f=>f!==void 0);if((u==null?void 0:u.length)!==0)return u}get executableCode(){var e,n,r,o,i,s,a,l,u;if(((o=(r=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||r===void 0?void 0:r.parts)===null||o===void 0?void 0:o.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning executable code from the first one.");let f=(l=(a=(s=(i=this.candidates)===null||i===void 0?void 0:i[0])===null||s===void 0?void 0:s.content)===null||a===void 0?void 0:a.parts)===null||l===void 0?void 0:l.filter(p=>p.executableCode).map(p=>p.executableCode).filter(p=>p!==void 0);if((f==null?void 0:f.length)!==0)return(u=f==null?void 0:f[0])===null||u===void 0?void 0:u.code}get codeExecutionResult(){var e,n,r,o,i,s,a,l,u;if(((o=(r=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||r===void 0?void 0:r.parts)===null||o===void 0?void 0:o.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning code execution result from the first one.");let f=(l=(a=(s=(i=this.candidates)===null||i===void 0?void 0:i[0])===null||s===void 0?void 0:s.content)===null||a===void 0?void 0:a.parts)===null||l===void 0?void 0:l.filter(p=>p.codeExecutionResult).map(p=>p.codeExecutionResult).filter(p=>p!==void 0);if((f==null?void 0:f.length)!==0)return(u=f==null?void 0:f[0])===null||u===void 0?void 0:u.output}},Jp=class{},Kp=class{},Qv=class{},Zv=class{},ew=class{},tw=class{},Yp=class{},Xp=class{},Qp=class{},nw=class{};var Zp=class t{_fromAPIResponse({apiResponse:e,_isVertexAI:n}){let r=new t,o,i=e;return n?o=SW(i):o=TW(i),Object.assign(r,o),r}},em=class{},tm=class{},nm=class{},rm=class{},rw=class{},ow=class{},iw=class{};var sw=class t{_fromAPIResponse({apiResponse:e,_isVertexAI:n}){let r=new t,i=OW(e);return Object.assign(r,i),r}},aw=class{},lw=class{},uw=class{},cw=class{};var om=class{};var fw=class{get text(){var e,n,r;let o="",i=!1,s=[];for(let a of(r=(n=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||n===void 0?void 0:n.parts)!==null&&r!==void 0?r:[]){for(let[l,u]of Object.entries(a))l!=="text"&&l!=="thought"&&u!==null&&s.push(l);if(typeof a.text=="string"){if(typeof a.thought=="boolean"&&a.thought)continue;i=!0,o+=a.text}}return s.length>0&&console.warn(`there are non-text parts ${s} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),i?o:void 0}get data(){var e,n,r;let o="",i=[];for(let s of(r=(n=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||n===void 0?void 0:n.parts)!==null&&r!==void 0?r:[]){for(let[a,l]of Object.entries(s))a!=="inlineData"&&l!==null&&i.push(a);s.inlineData&&typeof s.inlineData.data=="string"&&(o+=atob(s.inlineData.data))}return i.length>0&&console.warn(`there are non-data parts ${i} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),o.length>0?btoa(o):void 0}};var dw=class{get audioChunk(){if(this.serverContent&&this.serverContent.audioChunks&&this.serverContent.audioChunks.length>0)return this.serverContent.audioChunks[0]}};var im=class t{_fromAPIResponse({apiResponse:e,_isVertexAI:n}){let r=new t,i=Yw(e);return Object.assign(r,i),r}};function Be(t,e){if(!e||typeof e!="string")throw new Error("model is required and must be a string");if(e.includes("..")||e.includes("?")||e.includes("&"))throw new Error("invalid model parameter");if(t.isVertexAI()){if(e.startsWith("publishers/")||e.startsWith("projects/")||e.startsWith("models/"))return e;if(e.indexOf("/")>=0){let n=e.split("/",2);return`publishers/${n[0]}/models/${n[1]}`}else return`publishers/google/models/${e}`}else return e.startsWith("models/")||e.startsWith("tunedModels/")?e:`models/${e}`}function jk(t,e){let n=Be(t,e);return n?n.startsWith("publishers/")&&t.isVertexAI()?`projects/${t.getProject()}/locations/${t.getLocation()}/${n}`:n.startsWith("models/")&&t.isVertexAI()?`projects/${t.getProject()}/locations/${t.getLocation()}/publishers/google/${n}`:n:""}function Wk(t){return Array.isArray(t)?t.map(e=>sm(e)):[sm(t)]}function sm(t){if(typeof t=="object"&&t!==null)return t;throw new Error(`Could not parse input as Blob. Unsupported blob type: ${typeof t}`)}function zk(t){let e=sm(t);if(e.mimeType&&e.mimeType.startsWith("image/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function Jk(t){let e=sm(t);if(e.mimeType&&e.mimeType.startsWith("audio/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function mk(t){if(t==null)throw new Error("PartUnion is required");if(typeof t=="object")return t;if(typeof t=="string")return{text:t};throw new Error(`Unsupported part type: ${typeof t}`)}function Kk(t){if(t==null||Array.isArray(t)&&t.length===0)throw new Error("PartListUnion is required");return Array.isArray(t)?t.map(e=>mk(e)):[mk(t)]}function hw(t){return t!=null&&typeof t=="object"&&"parts"in t&&Array.isArray(t.parts)}function gk(t){return t!=null&&typeof t=="object"&&"functionCall"in t}function yk(t){return t!=null&&typeof t=="object"&&"functionResponse"in t}function Wt(t){if(t==null)throw new Error("ContentUnion is required");return hw(t)?t:{role:"user",parts:Kk(t)}}function Xw(t,e){if(!e)return[];if(t.isVertexAI()&&Array.isArray(e))return e.flatMap(n=>{let r=Wt(n);return r.parts&&r.parts.length>0&&r.parts[0].text!==void 0?[r.parts[0].text]:[]});if(t.isVertexAI()){let n=Wt(e);return n.parts&&n.parts.length>0&&n.parts[0].text!==void 0?[n.parts[0].text]:[]}return Array.isArray(e)?e.map(n=>Wt(n)):[Wt(e)]}function rr(t){if(t==null||Array.isArray(t)&&t.length===0)throw new Error("contents are required");if(!Array.isArray(t)){if(gk(t)||yk(t))throw new Error("To specify functionCall or functionResponse parts, please wrap them in a Content object, specifying the role for them");return[Wt(t)]}let e=[],n=[],r=hw(t[0]);for(let o of t){let i=hw(o);if(i!=r)throw new Error("Mixing Content and Parts is not supported, please group the parts into a the appropriate Content objects and specify the roles for them");if(i)e.push(o);else{if(gk(o)||yk(o))throw new Error("To specify functionCall or functionResponse parts, please wrap them, and any other parts, in Content objects as appropriate, specifying the role for them");n.push(o)}}return r||e.push({role:"user",parts:Kk(n)}),e}function UW(t,e){t.includes("null")&&(e.nullable=!0);let n=t.filter(r=>r!=="null");if(n.length===1)e.type=Object.values(qi).includes(n[0].toUpperCase())?n[0].toUpperCase():qi.TYPE_UNSPECIFIED;else{e.anyOf=[];for(let r of n)e.anyOf.push({type:Object.values(qi).includes(r.toUpperCase())?r.toUpperCase():qi.TYPE_UNSPECIFIED})}}function lu(t){let e={},n=["items"],r=["anyOf"],o=["properties"];if(t.type&&t.anyOf)throw new Error("type and anyOf cannot be both populated.");let i=t.anyOf;i!=null&&i.length==2&&(i[0].type==="null"?(e.nullable=!0,t=i[1]):i[1].type==="null"&&(e.nullable=!0,t=i[0])),t.type instanceof Array&&UW(t.type,e);for(let[s,a]of Object.entries(t))if(a!=null)if(s=="type"){if(a==="null")throw new Error("type: null can not be the only possible type for the field.");if(a instanceof Array)continue;e.type=Object.values(qi).includes(a.toUpperCase())?a.toUpperCase():qi.TYPE_UNSPECIFIED}else if(n.includes(s))e[s]=lu(a);else if(r.includes(s)){let l=[];for(let u of a){if(u.type=="null"){e.nullable=!0;continue}l.push(lu(u))}e[s]=l}else if(o.includes(s)){let l={};for(let[u,f]of Object.entries(a))l[u]=lu(f);e[s]=l}else{if(s==="additionalProperties")continue;e[s]=a}return e}function Qw(t){return lu(t)}function Zw(t){if(typeof t=="object")return t;if(typeof t=="string")return{voiceConfig:{prebuiltVoiceConfig:{voiceName:t}}};throw new Error(`Unsupported speechConfig type: ${typeof t}`)}function e_(t){if("multiSpeakerVoiceConfig"in t)throw new Error("multiSpeakerVoiceConfig is not supported in the live API.");return t}function du(t){if(t.functionDeclarations)for(let e of t.functionDeclarations)e.parameters&&(Object.keys(e.parameters).includes("$schema")?e.parametersJsonSchema||(e.parametersJsonSchema=e.parameters,delete e.parameters):e.parameters=lu(e.parameters)),e.response&&(Object.keys(e.response).includes("$schema")?e.responseJsonSchema||(e.responseJsonSchema=e.response,delete e.response):e.response=lu(e.response));return t}function hu(t){if(t==null)throw new Error("tools is required");if(!Array.isArray(t))throw new Error("tools is required and must be an array of Tools");let e=[];for(let n of t)e.push(n);return e}function BW(t,e,n,r=1){let o=!e.startsWith(`${n}/`)&&e.split("/").length===r;return t.isVertexAI()?e.startsWith("projects/")?e:e.startsWith("locations/")?`projects/${t.getProject()}/${e}`:e.startsWith(`${n}/`)?`projects/${t.getProject()}/locations/${t.getLocation()}/${e}`:o?`projects/${t.getProject()}/locations/${t.getLocation()}/${n}/${e}`:e:o?`${n}/${e}`:e}function zo(t,e){if(typeof e!="string")throw new Error("name must be a string");return BW(t,e,"cachedContents")}function Yk(t){switch(t){case"STATE_UNSPECIFIED":return"JOB_STATE_UNSPECIFIED";case"CREATING":return"JOB_STATE_RUNNING";case"ACTIVE":return"JOB_STATE_SUCCEEDED";case"FAILED":return"JOB_STATE_FAILED";default:return t}}function Vi(t){return Kw(t)}function GW(t){return t!=null&&typeof t=="object"&&"name"in t}function Xk(t){return t!=null&&typeof t=="object"&&"video"in t}function Qk(t){return t!=null&&typeof t=="object"&&"uri"in t}function t_(t){var e;let n;if(GW(t)&&(n=t.name),!(Qk(t)&&(n=t.uri,n===void 0))&&!(Xk(t)&&(n=(e=t.video)===null||e===void 0?void 0:e.uri,n===void 0))){if(typeof t=="string"&&(n=t),n===void 0)throw new Error("Could not extract file name from the provided input.");if(n.startsWith("https://")){let o=n.split("files/")[1].match(/[a-z0-9]+/);if(o===null)throw new Error(`Could not extract file name from URI ${n}`);n=o[0]}else n.startsWith("files/")&&(n=n.split("files/")[1]);return n}}function Zk(t,e){let n;return t.isVertexAI()?n=e?"publishers/google/models":"models":n=e?"models":"tunedModels",n}function eR(t){for(let e of["models","tunedModels","publisherModels"])if(HW(t,e))return t[e];return[]}function HW(t,e){return t!==null&&typeof t=="object"&&e in t}function qW(t,e={}){let n=t,r={name:n.name,description:n.description,parametersJsonSchema:n.inputSchema};return n.outputSchema&&(r.responseJsonSchema=n.outputSchema),e.behavior&&(r.behavior=e.behavior),{functionDeclarations:[r]}}function $W(t,e={}){let n=[],r=new Set;for(let o of t){let i=o.name;if(r.has(i))throw new Error(`Duplicate function name ${i} found in MCP tools. Please ensure function names are unique.`);r.add(i);let s=qW(o,e);s.functionDeclarations&&n.push(...s.functionDeclarations)}return{functionDeclarations:n}}function tR(t,e){let n;if(typeof e=="string")if(t.isVertexAI())if(e.startsWith("gs://"))n={format:"jsonl",gcsUri:[e]};else if(e.startsWith("bq://"))n={format:"bigquery",bigqueryUri:e};else throw new Error(`Unsupported string source for Vertex AI: ${e}`);else if(e.startsWith("files/"))n={fileName:e};else throw new Error(`Unsupported string source for Gemini API: ${e}`);else if(Array.isArray(e)){if(t.isVertexAI())throw new Error("InlinedRequest[] is not supported in Vertex AI.");n={inlinedRequests:e}}else n=e;let r=[n.gcsUri,n.bigqueryUri].filter(Boolean).length,o=[n.inlinedRequests,n.fileName].filter(Boolean).length;if(t.isVertexAI()){if(o>0||r!==1)throw new Error("Exactly one of `gcsUri` or `bigqueryUri` must be set for Vertex AI.")}else if(r>0||o!==1)throw new Error("Exactly one of `inlinedRequests`, `fileName`, must be set for Gemini API.");return n}function VW(t){if(typeof t!="string")return t;let e=t;if(e.startsWith("gs://"))return{format:"jsonl",gcsUri:e};if(e.startsWith("bq://"))return{format:"bigquery",bigqueryUri:e};throw new Error(`Unsupported destination: ${e}`)}function nR(t){if(typeof t!="object"||t===null)return{};let e=t,n=e.inlinedResponses;if(typeof n!="object"||n===null)return t;let o=n.inlinedResponses;if(!Array.isArray(o)||o.length===0)return t;let i=!1;for(let s of o){if(typeof s!="object"||s===null)continue;let l=s.response;if(typeof l!="object"||l===null)continue;if(l.embedding!==void 0){i=!0;break}}return i&&(e.inlinedEmbedContentResponses=e.inlinedResponses,delete e.inlinedResponses),t}function pu(t,e){let n=e;if(!t.isVertexAI()){if(/batches\/[^/]+$/.test(n))return n.split("/").pop();throw new Error(`Invalid batch job name: ${n}.`)}if(/^projects\/[^/]+\/locations\/[^/]+\/batchPredictionJobs\/[^/]+$/.test(n))return n.split("/").pop();if(/^\d+$/.test(n))return n;throw new Error(`Invalid batch job name: ${n}.`)}function rR(t){let e=t;return e==="BATCH_STATE_UNSPECIFIED"?"JOB_STATE_UNSPECIFIED":e==="BATCH_STATE_PENDING"?"JOB_STATE_PENDING":e==="BATCH_STATE_RUNNING"?"JOB_STATE_RUNNING":e==="BATCH_STATE_SUCCEEDED"?"JOB_STATE_SUCCEEDED":e==="BATCH_STATE_FAILED"?"JOB_STATE_FAILED":e==="BATCH_STATE_CANCELLED"?"JOB_STATE_CANCELLED":e==="BATCH_STATE_EXPIRED"?"JOB_STATE_EXPIRED":e}function jW(t){let e={},n=c(t,["responsesFile"]);n!=null&&d(e,["fileName"],n);let r=c(t,["inlinedResponses","inlinedResponses"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(s=>Tz(s))),d(e,["inlinedResponses"],i)}let o=c(t,["inlinedEmbedContentResponses","inlinedResponses"]);if(o!=null){let i=o;Array.isArray(i)&&(i=i.map(s=>s)),d(e,["inlinedEmbedContentResponses"],i)}return e}function WW(t){let e={},n=c(t,["predictionsFormat"]);n!=null&&d(e,["format"],n);let r=c(t,["gcsDestination","outputUriPrefix"]);r!=null&&d(e,["gcsUri"],r);let o=c(t,["bigqueryDestination","outputUri"]);return o!=null&&d(e,["bigqueryUri"],o),e}function zW(t){let e={},n=c(t,["format"]);n!=null&&d(e,["predictionsFormat"],n);let r=c(t,["gcsUri"]);r!=null&&d(e,["gcsDestination","outputUriPrefix"],r);let o=c(t,["bigqueryUri"]);if(o!=null&&d(e,["bigqueryDestination","outputUri"],o),c(t,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(c(t,["inlinedResponses"])!==void 0)throw new Error("inlinedResponses parameter is not supported in Vertex AI.");if(c(t,["inlinedEmbedContentResponses"])!==void 0)throw new Error("inlinedEmbedContentResponses parameter is not supported in Vertex AI.");return e}function jp(t){let e={},n=c(t,["name"]);n!=null&&d(e,["name"],n);let r=c(t,["metadata","displayName"]);r!=null&&d(e,["displayName"],r);let o=c(t,["metadata","state"]);o!=null&&d(e,["state"],rR(o));let i=c(t,["metadata","createTime"]);i!=null&&d(e,["createTime"],i);let s=c(t,["metadata","endTime"]);s!=null&&d(e,["endTime"],s);let a=c(t,["metadata","updateTime"]);a!=null&&d(e,["updateTime"],a);let l=c(t,["metadata","model"]);l!=null&&d(e,["model"],l);let u=c(t,["metadata","output"]);return u!=null&&d(e,["dest"],jW(nR(u))),e}function pw(t){let e={},n=c(t,["name"]);n!=null&&d(e,["name"],n);let r=c(t,["displayName"]);r!=null&&d(e,["displayName"],r);let o=c(t,["state"]);o!=null&&d(e,["state"],rR(o));let i=c(t,["error"]);i!=null&&d(e,["error"],i);let s=c(t,["createTime"]);s!=null&&d(e,["createTime"],s);let a=c(t,["startTime"]);a!=null&&d(e,["startTime"],a);let l=c(t,["endTime"]);l!=null&&d(e,["endTime"],l);let u=c(t,["updateTime"]);u!=null&&d(e,["updateTime"],u);let f=c(t,["model"]);f!=null&&d(e,["model"],f);let p=c(t,["inputConfig"]);p!=null&&d(e,["src"],JW(p));let m=c(t,["outputConfig"]);m!=null&&d(e,["dest"],WW(nR(m)));let b=c(t,["completionStats"]);return b!=null&&d(e,["completionStats"],b),e}function JW(t){let e={},n=c(t,["instancesFormat"]);n!=null&&d(e,["format"],n);let r=c(t,["gcsSource","uris"]);r!=null&&d(e,["gcsUri"],r);let o=c(t,["bigquerySource","inputUri"]);return o!=null&&d(e,["bigqueryUri"],o),e}function KW(t,e){let n={};if(c(e,["format"])!==void 0)throw new Error("format parameter is not supported in Gemini API.");if(c(e,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(c(e,["bigqueryUri"])!==void 0)throw new Error("bigqueryUri parameter is not supported in Gemini API.");let r=c(e,["fileName"]);r!=null&&d(n,["fileName"],r);let o=c(e,["inlinedRequests"]);if(o!=null){let i=o;Array.isArray(i)&&(i=i.map(s=>Cz(t,s))),d(n,["requests","requests"],i)}return n}function YW(t){let e={},n=c(t,["format"]);n!=null&&d(e,["instancesFormat"],n);let r=c(t,["gcsUri"]);r!=null&&d(e,["gcsSource","uris"],r);let o=c(t,["bigqueryUri"]);if(o!=null&&d(e,["bigquerySource","inputUri"],o),c(t,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(c(t,["inlinedRequests"])!==void 0)throw new Error("inlinedRequests parameter is not supported in Vertex AI.");return e}function XW(t){let e={},n=c(t,["data"]);if(n!=null&&d(e,["data"],n),c(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");let r=c(t,["mimeType"]);return r!=null&&d(e,["mimeType"],r),e}function QW(t,e){let n={},r=c(e,["name"]);return r!=null&&d(n,["_url","name"],pu(t,r)),n}function ZW(t,e){let n={},r=c(e,["name"]);return r!=null&&d(n,["_url","name"],pu(t,r)),n}function ez(t){let e={},n=c(t,["content"]);n!=null&&d(e,["content"],n);let r=c(t,["citationMetadata"]);r!=null&&d(e,["citationMetadata"],tz(r));let o=c(t,["tokenCount"]);o!=null&&d(e,["tokenCount"],o);let i=c(t,["finishReason"]);i!=null&&d(e,["finishReason"],i);let s=c(t,["avgLogprobs"]);s!=null&&d(e,["avgLogprobs"],s);let a=c(t,["groundingMetadata"]);a!=null&&d(e,["groundingMetadata"],a);let l=c(t,["index"]);l!=null&&d(e,["index"],l);let u=c(t,["logprobsResult"]);u!=null&&d(e,["logprobsResult"],u);let f=c(t,["safetyRatings"]);if(f!=null){let m=f;Array.isArray(m)&&(m=m.map(b=>b)),d(e,["safetyRatings"],m)}let p=c(t,["urlContextMetadata"]);return p!=null&&d(e,["urlContextMetadata"],p),e}function tz(t){let e={},n=c(t,["citationSources"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(o=>o)),d(e,["citations"],r)}return e}function oR(t){let e={},n=c(t,["parts"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(i=>Nz(i))),d(e,["parts"],o)}let r=c(t,["role"]);return r!=null&&d(e,["role"],r),e}function nz(t,e){let n={},r=c(t,["displayName"]);if(e!==void 0&&r!=null&&d(e,["batch","displayName"],r),c(t,["dest"])!==void 0)throw new Error("dest parameter is not supported in Gemini API.");return n}function rz(t,e){let n={},r=c(t,["displayName"]);e!==void 0&&r!=null&&d(e,["displayName"],r);let o=c(t,["dest"]);return e!==void 0&&o!=null&&d(e,["outputConfig"],zW(VW(o))),n}function bk(t,e){let n={},r=c(e,["model"]);r!=null&&d(n,["_url","model"],Be(t,r));let o=c(e,["src"]);o!=null&&d(n,["batch","inputConfig"],KW(t,tR(t,o)));let i=c(e,["config"]);return i!=null&&nz(i,n),n}function oz(t,e){let n={},r=c(e,["model"]);r!=null&&d(n,["model"],Be(t,r));let o=c(e,["src"]);o!=null&&d(n,["inputConfig"],YW(tR(t,o)));let i=c(e,["config"]);return i!=null&&rz(i,n),n}function iz(t,e){let n={},r=c(t,["displayName"]);return e!==void 0&&r!=null&&d(e,["batch","displayName"],r),n}function sz(t,e){let n={},r=c(e,["model"]);r!=null&&d(n,["_url","model"],Be(t,r));let o=c(e,["src"]);o!=null&&d(n,["batch","inputConfig"],hz(t,o));let i=c(e,["config"]);return i!=null&&iz(i,n),n}function az(t,e){let n={},r=c(e,["name"]);return r!=null&&d(n,["_url","name"],pu(t,r)),n}function lz(t,e){let n={},r=c(e,["name"]);return r!=null&&d(n,["_url","name"],pu(t,r)),n}function uz(t){let e={},n=c(t,["sdkHttpResponse"]);n!=null&&d(e,["sdkHttpResponse"],n);let r=c(t,["name"]);r!=null&&d(e,["name"],r);let o=c(t,["done"]);o!=null&&d(e,["done"],o);let i=c(t,["error"]);return i!=null&&d(e,["error"],i),e}function cz(t){let e={},n=c(t,["sdkHttpResponse"]);n!=null&&d(e,["sdkHttpResponse"],n);let r=c(t,["name"]);r!=null&&d(e,["name"],r);let o=c(t,["done"]);o!=null&&d(e,["done"],o);let i=c(t,["error"]);return i!=null&&d(e,["error"],i),e}function fz(t,e){let n={},r=c(e,["contents"]);if(r!=null){let i=Xw(t,r);Array.isArray(i)&&(i=i.map(s=>s)),d(n,["requests[]","request","content"],i)}let o=c(e,["config"]);return o!=null&&(d(n,["_self"],dz(o,n)),AW(n,{"requests[].*":"requests[].request.*"})),n}function dz(t,e){let n={},r=c(t,["taskType"]);e!==void 0&&r!=null&&d(e,["requests[]","taskType"],r);let o=c(t,["title"]);e!==void 0&&o!=null&&d(e,["requests[]","title"],o);let i=c(t,["outputDimensionality"]);if(e!==void 0&&i!=null&&d(e,["requests[]","outputDimensionality"],i),c(t,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(c(t,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return n}function hz(t,e){let n={},r=c(e,["fileName"]);r!=null&&d(n,["file_name"],r);let o=c(e,["inlinedRequests"]);return o!=null&&d(n,["requests"],fz(t,o)),n}function pz(t){let e={};if(c(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");let n=c(t,["fileUri"]);n!=null&&d(e,["fileUri"],n);let r=c(t,["mimeType"]);return r!=null&&d(e,["mimeType"],r),e}function mz(t){let e={},n=c(t,["id"]);n!=null&&d(e,["id"],n);let r=c(t,["args"]);r!=null&&d(e,["args"],r);let o=c(t,["name"]);if(o!=null&&d(e,["name"],o),c(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(c(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function gz(t){let e={},n=c(t,["allowedFunctionNames"]);n!=null&&d(e,["allowedFunctionNames"],n);let r=c(t,["mode"]);if(r!=null&&d(e,["mode"],r),c(t,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function yz(t,e,n){let r={},o=c(e,["systemInstruction"]);n!==void 0&&o!=null&&d(n,["systemInstruction"],oR(Wt(o)));let i=c(e,["temperature"]);i!=null&&d(r,["temperature"],i);let s=c(e,["topP"]);s!=null&&d(r,["topP"],s);let a=c(e,["topK"]);a!=null&&d(r,["topK"],a);let l=c(e,["candidateCount"]);l!=null&&d(r,["candidateCount"],l);let u=c(e,["maxOutputTokens"]);u!=null&&d(r,["maxOutputTokens"],u);let f=c(e,["stopSequences"]);f!=null&&d(r,["stopSequences"],f);let p=c(e,["responseLogprobs"]);p!=null&&d(r,["responseLogprobs"],p);let m=c(e,["logprobs"]);m!=null&&d(r,["logprobs"],m);let b=c(e,["presencePenalty"]);b!=null&&d(r,["presencePenalty"],b);let v=c(e,["frequencyPenalty"]);v!=null&&d(r,["frequencyPenalty"],v);let w=c(e,["seed"]);w!=null&&d(r,["seed"],w);let _=c(e,["responseMimeType"]);_!=null&&d(r,["responseMimeType"],_);let T=c(e,["responseSchema"]);T!=null&&d(r,["responseSchema"],Qw(T));let R=c(e,["responseJsonSchema"]);if(R!=null&&d(r,["responseJsonSchema"],R),c(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(c(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");let L=c(e,["safetySettings"]);if(n!==void 0&&L!=null){let se=L;Array.isArray(se)&&(se=se.map(re=>Oz(re))),d(n,["safetySettings"],se)}let D=c(e,["tools"]);if(n!==void 0&&D!=null){let se=hu(D);Array.isArray(se)&&(se=se.map(re=>Mz(du(re)))),d(n,["tools"],se)}let x=c(e,["toolConfig"]);if(n!==void 0&&x!=null&&d(n,["toolConfig"],Dz(x)),c(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");let P=c(e,["cachedContent"]);n!==void 0&&P!=null&&d(n,["cachedContent"],zo(t,P));let V=c(e,["responseModalities"]);V!=null&&d(r,["responseModalities"],V);let J=c(e,["mediaResolution"]);J!=null&&d(r,["mediaResolution"],J);let E=c(e,["speechConfig"]);if(E!=null&&d(r,["speechConfig"],Zw(E)),c(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");let O=c(e,["thinkingConfig"]);O!=null&&d(r,["thinkingConfig"],O);let X=c(e,["imageConfig"]);X!=null&&d(r,["imageConfig"],Az(X));let ee=c(e,["enableEnhancedCivicAnswers"]);if(ee!=null&&d(r,["enableEnhancedCivicAnswers"],ee),c(e,["modelArmorConfig"])!==void 0)throw new Error("modelArmorConfig parameter is not supported in Gemini API.");return r}function bz(t){let e={},n=c(t,["sdkHttpResponse"]);n!=null&&d(e,["sdkHttpResponse"],n);let r=c(t,["candidates"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(u=>ez(u))),d(e,["candidates"],l)}let o=c(t,["modelVersion"]);o!=null&&d(e,["modelVersion"],o);let i=c(t,["promptFeedback"]);i!=null&&d(e,["promptFeedback"],i);let s=c(t,["responseId"]);s!=null&&d(e,["responseId"],s);let a=c(t,["usageMetadata"]);return a!=null&&d(e,["usageMetadata"],a),e}function vz(t,e){let n={},r=c(e,["name"]);return r!=null&&d(n,["_url","name"],pu(t,r)),n}function wz(t,e){let n={},r=c(e,["name"]);return r!=null&&d(n,["_url","name"],pu(t,r)),n}function _z(t){let e={};if(c(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");let n=c(t,["enableWidget"]);return n!=null&&d(e,["enableWidget"],n),e}function Ez(t){let e={};if(c(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(c(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");let n=c(t,["timeRangeFilter"]);return n!=null&&d(e,["timeRangeFilter"],n),e}function Az(t){let e={},n=c(t,["aspectRatio"]);n!=null&&d(e,["aspectRatio"],n);let r=c(t,["imageSize"]);if(r!=null&&d(e,["imageSize"],r),c(t,["personGeneration"])!==void 0)throw new Error("personGeneration parameter is not supported in Gemini API.");if(c(t,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(c(t,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return e}function Cz(t,e){let n={},r=c(e,["model"]);r!=null&&d(n,["request","model"],Be(t,r));let o=c(e,["contents"]);if(o!=null){let a=rr(o);Array.isArray(a)&&(a=a.map(l=>oR(l))),d(n,["request","contents"],a)}let i=c(e,["metadata"]);i!=null&&d(n,["metadata"],i);let s=c(e,["config"]);return s!=null&&d(n,["request","generationConfig"],yz(t,s,c(n,["request"],{}))),n}function Tz(t){let e={},n=c(t,["response"]);n!=null&&d(e,["response"],bz(n));let r=c(t,["metadata"]);r!=null&&d(e,["metadata"],r);let o=c(t,["error"]);return o!=null&&d(e,["error"],o),e}function Sz(t,e){let n={},r=c(t,["pageSize"]);e!==void 0&&r!=null&&d(e,["_query","pageSize"],r);let o=c(t,["pageToken"]);if(e!==void 0&&o!=null&&d(e,["_query","pageToken"],o),c(t,["filter"])!==void 0)throw new Error("filter parameter is not supported in Gemini API.");return n}function Pz(t,e){let n={},r=c(t,["pageSize"]);e!==void 0&&r!=null&&d(e,["_query","pageSize"],r);let o=c(t,["pageToken"]);e!==void 0&&o!=null&&d(e,["_query","pageToken"],o);let i=c(t,["filter"]);return e!==void 0&&i!=null&&d(e,["_query","filter"],i),n}function Iz(t){let e={},n=c(t,["config"]);return n!=null&&Sz(n,e),e}function xz(t){let e={},n=c(t,["config"]);return n!=null&&Pz(n,e),e}function kz(t){let e={},n=c(t,["sdkHttpResponse"]);n!=null&&d(e,["sdkHttpResponse"],n);let r=c(t,["nextPageToken"]);r!=null&&d(e,["nextPageToken"],r);let o=c(t,["operations"]);if(o!=null){let i=o;Array.isArray(i)&&(i=i.map(s=>jp(s))),d(e,["batchJobs"],i)}return e}function Rz(t){let e={},n=c(t,["sdkHttpResponse"]);n!=null&&d(e,["sdkHttpResponse"],n);let r=c(t,["nextPageToken"]);r!=null&&d(e,["nextPageToken"],r);let o=c(t,["batchPredictionJobs"]);if(o!=null){let i=o;Array.isArray(i)&&(i=i.map(s=>pw(s))),d(e,["batchJobs"],i)}return e}function Nz(t){let e={},n=c(t,["mediaResolution"]);n!=null&&d(e,["mediaResolution"],n);let r=c(t,["codeExecutionResult"]);r!=null&&d(e,["codeExecutionResult"],r);let o=c(t,["executableCode"]);o!=null&&d(e,["executableCode"],o);let i=c(t,["fileData"]);i!=null&&d(e,["fileData"],pz(i));let s=c(t,["functionCall"]);s!=null&&d(e,["functionCall"],mz(s));let a=c(t,["functionResponse"]);a!=null&&d(e,["functionResponse"],a);let l=c(t,["inlineData"]);l!=null&&d(e,["inlineData"],XW(l));let u=c(t,["text"]);u!=null&&d(e,["text"],u);let f=c(t,["thought"]);f!=null&&d(e,["thought"],f);let p=c(t,["thoughtSignature"]);p!=null&&d(e,["thoughtSignature"],p);let m=c(t,["videoMetadata"]);return m!=null&&d(e,["videoMetadata"],m),e}function Oz(t){let e={},n=c(t,["category"]);if(n!=null&&d(e,["category"],n),c(t,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");let r=c(t,["threshold"]);return r!=null&&d(e,["threshold"],r),e}function Dz(t){let e={},n=c(t,["retrievalConfig"]);n!=null&&d(e,["retrievalConfig"],n);let r=c(t,["functionCallingConfig"]);return r!=null&&d(e,["functionCallingConfig"],gz(r)),e}function Mz(t){let e={};if(c(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");let n=c(t,["computerUse"]);n!=null&&d(e,["computerUse"],n);let r=c(t,["fileSearch"]);r!=null&&d(e,["fileSearch"],r);let o=c(t,["codeExecution"]);if(o!=null&&d(e,["codeExecution"],o),c(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");let i=c(t,["functionDeclarations"]);if(i!=null){let f=i;Array.isArray(f)&&(f=f.map(p=>p)),d(e,["functionDeclarations"],f)}let s=c(t,["googleMaps"]);s!=null&&d(e,["googleMaps"],_z(s));let a=c(t,["googleSearch"]);a!=null&&d(e,["googleSearch"],Ez(a));let l=c(t,["googleSearchRetrieval"]);l!=null&&d(e,["googleSearchRetrieval"],l);let u=c(t,["urlContext"]);return u!=null&&d(e,["urlContext"],u),e}var jo;(function(t){t.PAGED_ITEM_BATCH_JOBS="batchJobs",t.PAGED_ITEM_MODELS="models",t.PAGED_ITEM_TUNING_JOBS="tuningJobs",t.PAGED_ITEM_FILES="files",t.PAGED_ITEM_CACHED_CONTENTS="cachedContents",t.PAGED_ITEM_FILE_SEARCH_STORES="fileSearchStores",t.PAGED_ITEM_DOCUMENTS="documents"})(jo||(jo={}));var Wo=class{constructor(e,n,r,o){this.pageInternal=[],this.paramsInternal={},this.requestInternal=n,this.init(e,r,o)}init(e,n,r){var o,i;this.nameInternal=e,this.pageInternal=n[this.nameInternal]||[],this.sdkHttpResponseInternal=n==null?void 0:n.sdkHttpResponse,this.idxInternal=0;let s={config:{}};!r||Object.keys(r).length===0?s={config:{}}:typeof r=="object"?s=Object.assign({},r):s=r,s.config&&(s.config.pageToken=n.nextPageToken),this.paramsInternal=s,this.pageInternalSize=(i=(o=s.config)===null||o===void 0?void 0:o.pageSize)!==null&&i!==void 0?i:this.pageInternal.length}initNextPage(e){this.init(this.nameInternal,e,this.paramsInternal)}get page(){return this.pageInternal}get name(){return this.nameInternal}get pageSize(){return this.pageInternalSize}get sdkHttpResponse(){return this.sdkHttpResponseInternal}get params(){return this.paramsInternal}get pageLength(){return this.pageInternal.length}getItem(e){return this.pageInternal[e]}[Symbol.asyncIterator](){return{next:async()=>{if(this.idxInternal>=this.pageLength)if(this.hasNextPage())await this.nextPage();else return{value:void 0,done:!0};let e=this.getItem(this.idxInternal);return this.idxInternal+=1,{value:e,done:!1}},return:async()=>({value:void 0,done:!0})}}async nextPage(){if(!this.hasNextPage())throw new Error("No more pages to fetch.");let e=await this.requestInternal(this.params);return this.initNextPage(e),this.page}hasNextPage(){var e;return((e=this.params.config)===null||e===void 0?void 0:e.pageToken)!==void 0}};var mw=class extends Ir{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new Wo(jo.PAGED_ITEM_BATCH_JOBS,r=>this.listInternal(r),await this.listInternal(n),n),this.create=async n=>(this.apiClient.isVertexAI()&&(n.config=this.formatDestination(n.src,n.config)),this.createInternal(n)),this.createEmbeddings=async n=>{if(console.warn("batches.createEmbeddings() is experimental and may change without notice."),this.apiClient.isVertexAI())throw new Error("Vertex AI does not support batches.createEmbeddings.");return this.createEmbeddingsInternal(n)}}createInlinedGenerateContentRequest(e){let n=bk(this.apiClient,e),r=n._url,o=le("{model}:batchGenerateContent",r),a=n.batch.inputConfig.requests,l=a.requests,u=[];for(let f of l){let p=Object.assign({},f);if(p.systemInstruction){let m=p.systemInstruction;delete p.systemInstruction;let b=p.request;b.systemInstruction=m,p.request=b}u.push(p)}return a.requests=u,delete n.config,delete n._url,delete n._query,{path:o,body:n}}getGcsUri(e){if(typeof e=="string")return e.startsWith("gs://")?e:void 0;if(!Array.isArray(e)&&e.gcsUri&&e.gcsUri.length>0)return e.gcsUri[0]}getBigqueryUri(e){if(typeof e=="string")return e.startsWith("bq://")?e:void 0;if(!Array.isArray(e))return e.bigqueryUri}formatDestination(e,n){let r=n?Object.assign({},n):{},o=Date.now().toString();if(r.displayName||(r.displayName=`genaiBatchJob_${o}`),r.dest===void 0){let i=this.getGcsUri(e),s=this.getBigqueryUri(e);if(i)i.endsWith(".jsonl")?r.dest=`${i.slice(0,-6)}/dest`:r.dest=`${i}_dest_${o}`;else if(s)r.dest=`${s}_dest_${o}`;else throw new Error("Unsupported source for Vertex AI: No GCS or BigQuery URI found.")}return r}async createInternal(e){var n,r,o,i;let s,a="",l={};if(this.apiClient.isVertexAI()){let u=oz(this.apiClient,e);return a=le("batchPredictionJobs",u._url),l=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json()),s.then(f=>pw(f))}else{let u=bk(this.apiClient,e);return a=le("{model}:batchGenerateContent",u._url),l=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),s.then(f=>jp(f))}}async createEmbeddingsInternal(e){var n,r;let o,i="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{let a=sz(this.apiClient,e);return i=le("{model}:asyncBatchEmbedContent",a._url),s=a._query,delete a._url,delete a._query,o=this.apiClient.request({path:i,queryParams:s,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json()),o.then(l=>jp(l))}}async get(e){var n,r,o,i;let s,a="",l={};if(this.apiClient.isVertexAI()){let u=wz(this.apiClient,e);return a=le("batchPredictionJobs/{name}",u._url),l=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json()),s.then(f=>pw(f))}else{let u=vz(this.apiClient,e);return a=le("batches/{name}",u._url),l=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),s.then(f=>jp(f))}}async cancel(e){var n,r,o,i;let s="",a={};if(this.apiClient.isVertexAI()){let l=ZW(this.apiClient,e);s=le("batchPredictionJobs/{name}:cancel",l._url),a=l._query,delete l._url,delete l._query,await this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal})}else{let l=QW(this.apiClient,e);s=le("batches/{name}:cancel",l._url),a=l._query,delete l._url,delete l._query,await this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal})}}async listInternal(e){var n,r,o,i;let s,a="",l={};if(this.apiClient.isVertexAI()){let u=xz(e);return a=le("batchPredictionJobs",u._url),l=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json().then(p=>{let m=p;return m.sdkHttpResponse={headers:f.headers},m})),s.then(f=>{let p=Rz(f),m=new om;return Object.assign(m,p),m})}else{let u=Iz(e);return a=le("batches",u._url),l=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json().then(p=>{let m=p;return m.sdkHttpResponse={headers:f.headers},m})),s.then(f=>{let p=kz(f),m=new om;return Object.assign(m,p),m})}}async delete(e){var n,r,o,i;let s,a="",l={};if(this.apiClient.isVertexAI()){let u=lz(this.apiClient,e);return a=le("batchPredictionJobs/{name}",u._url),l=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json().then(p=>{let m=p;return m.sdkHttpResponse={headers:f.headers},m})),s.then(f=>cz(f))}else{let u=az(this.apiClient,e);return a=le("batches/{name}",u._url),l=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json().then(p=>{let m=p;return m.sdkHttpResponse={headers:f.headers},m})),s.then(f=>uz(f))}}};function Fz(t){let e={},n=c(t,["data"]);if(n!=null&&d(e,["data"],n),c(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");let r=c(t,["mimeType"]);return r!=null&&d(e,["mimeType"],r),e}function vk(t){let e={},n=c(t,["parts"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(i=>iJ(i))),d(e,["parts"],o)}let r=c(t,["role"]);return r!=null&&d(e,["role"],r),e}function Lz(t,e){let n={},r=c(t,["ttl"]);e!==void 0&&r!=null&&d(e,["ttl"],r);let o=c(t,["expireTime"]);e!==void 0&&o!=null&&d(e,["expireTime"],o);let i=c(t,["displayName"]);e!==void 0&&i!=null&&d(e,["displayName"],i);let s=c(t,["contents"]);if(e!==void 0&&s!=null){let f=rr(s);Array.isArray(f)&&(f=f.map(p=>vk(p))),d(e,["contents"],f)}let a=c(t,["systemInstruction"]);e!==void 0&&a!=null&&d(e,["systemInstruction"],vk(Wt(a)));let l=c(t,["tools"]);if(e!==void 0&&l!=null){let f=l;Array.isArray(f)&&(f=f.map(p=>aJ(p))),d(e,["tools"],f)}let u=c(t,["toolConfig"]);if(e!==void 0&&u!=null&&d(e,["toolConfig"],sJ(u)),c(t,["kmsKeyName"])!==void 0)throw new Error("kmsKeyName parameter is not supported in Gemini API.");return n}function Uz(t,e){let n={},r=c(t,["ttl"]);e!==void 0&&r!=null&&d(e,["ttl"],r);let o=c(t,["expireTime"]);e!==void 0&&o!=null&&d(e,["expireTime"],o);let i=c(t,["displayName"]);e!==void 0&&i!=null&&d(e,["displayName"],i);let s=c(t,["contents"]);if(e!==void 0&&s!=null){let p=rr(s);Array.isArray(p)&&(p=p.map(m=>m)),d(e,["contents"],p)}let a=c(t,["systemInstruction"]);e!==void 0&&a!=null&&d(e,["systemInstruction"],Wt(a));let l=c(t,["tools"]);if(e!==void 0&&l!=null){let p=l;Array.isArray(p)&&(p=p.map(m=>lJ(m))),d(e,["tools"],p)}let u=c(t,["toolConfig"]);e!==void 0&&u!=null&&d(e,["toolConfig"],u);let f=c(t,["kmsKeyName"]);return e!==void 0&&f!=null&&d(e,["encryption_spec","kmsKeyName"],f),n}function Bz(t,e){let n={},r=c(e,["model"]);r!=null&&d(n,["model"],jk(t,r));let o=c(e,["config"]);return o!=null&&Lz(o,n),n}function Gz(t,e){let n={},r=c(e,["model"]);r!=null&&d(n,["model"],jk(t,r));let o=c(e,["config"]);return o!=null&&Uz(o,n),n}function Hz(t,e){let n={},r=c(e,["name"]);return r!=null&&d(n,["_url","name"],zo(t,r)),n}function qz(t,e){let n={},r=c(e,["name"]);return r!=null&&d(n,["_url","name"],zo(t,r)),n}function $z(t){let e={},n=c(t,["sdkHttpResponse"]);return n!=null&&d(e,["sdkHttpResponse"],n),e}function Vz(t){let e={},n=c(t,["sdkHttpResponse"]);return n!=null&&d(e,["sdkHttpResponse"],n),e}function jz(t){let e={};if(c(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");let n=c(t,["fileUri"]);n!=null&&d(e,["fileUri"],n);let r=c(t,["mimeType"]);return r!=null&&d(e,["mimeType"],r),e}function Wz(t){let e={},n=c(t,["id"]);n!=null&&d(e,["id"],n);let r=c(t,["args"]);r!=null&&d(e,["args"],r);let o=c(t,["name"]);if(o!=null&&d(e,["name"],o),c(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(c(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function zz(t){let e={},n=c(t,["allowedFunctionNames"]);n!=null&&d(e,["allowedFunctionNames"],n);let r=c(t,["mode"]);if(r!=null&&d(e,["mode"],r),c(t,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function Jz(t){let e={},n=c(t,["description"]);n!=null&&d(e,["description"],n);let r=c(t,["name"]);r!=null&&d(e,["name"],r);let o=c(t,["parameters"]);o!=null&&d(e,["parameters"],o);let i=c(t,["parametersJsonSchema"]);i!=null&&d(e,["parametersJsonSchema"],i);let s=c(t,["response"]);s!=null&&d(e,["response"],s);let a=c(t,["responseJsonSchema"]);if(a!=null&&d(e,["responseJsonSchema"],a),c(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");return e}function Kz(t,e){let n={},r=c(e,["name"]);return r!=null&&d(n,["_url","name"],zo(t,r)),n}function Yz(t,e){let n={},r=c(e,["name"]);return r!=null&&d(n,["_url","name"],zo(t,r)),n}function Xz(t){let e={};if(c(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");let n=c(t,["enableWidget"]);return n!=null&&d(e,["enableWidget"],n),e}function Qz(t){let e={};if(c(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(c(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");let n=c(t,["timeRangeFilter"]);return n!=null&&d(e,["timeRangeFilter"],n),e}function Zz(t,e){let n={},r=c(t,["pageSize"]);e!==void 0&&r!=null&&d(e,["_query","pageSize"],r);let o=c(t,["pageToken"]);return e!==void 0&&o!=null&&d(e,["_query","pageToken"],o),n}function eJ(t,e){let n={},r=c(t,["pageSize"]);e!==void 0&&r!=null&&d(e,["_query","pageSize"],r);let o=c(t,["pageToken"]);return e!==void 0&&o!=null&&d(e,["_query","pageToken"],o),n}function tJ(t){let e={},n=c(t,["config"]);return n!=null&&Zz(n,e),e}function nJ(t){let e={},n=c(t,["config"]);return n!=null&&eJ(n,e),e}function rJ(t){let e={},n=c(t,["sdkHttpResponse"]);n!=null&&d(e,["sdkHttpResponse"],n);let r=c(t,["nextPageToken"]);r!=null&&d(e,["nextPageToken"],r);let o=c(t,["cachedContents"]);if(o!=null){let i=o;Array.isArray(i)&&(i=i.map(s=>s)),d(e,["cachedContents"],i)}return e}function oJ(t){let e={},n=c(t,["sdkHttpResponse"]);n!=null&&d(e,["sdkHttpResponse"],n);let r=c(t,["nextPageToken"]);r!=null&&d(e,["nextPageToken"],r);let o=c(t,["cachedContents"]);if(o!=null){let i=o;Array.isArray(i)&&(i=i.map(s=>s)),d(e,["cachedContents"],i)}return e}function iJ(t){let e={},n=c(t,["mediaResolution"]);n!=null&&d(e,["mediaResolution"],n);let r=c(t,["codeExecutionResult"]);r!=null&&d(e,["codeExecutionResult"],r);let o=c(t,["executableCode"]);o!=null&&d(e,["executableCode"],o);let i=c(t,["fileData"]);i!=null&&d(e,["fileData"],jz(i));let s=c(t,["functionCall"]);s!=null&&d(e,["functionCall"],Wz(s));let a=c(t,["functionResponse"]);a!=null&&d(e,["functionResponse"],a);let l=c(t,["inlineData"]);l!=null&&d(e,["inlineData"],Fz(l));let u=c(t,["text"]);u!=null&&d(e,["text"],u);let f=c(t,["thought"]);f!=null&&d(e,["thought"],f);let p=c(t,["thoughtSignature"]);p!=null&&d(e,["thoughtSignature"],p);let m=c(t,["videoMetadata"]);return m!=null&&d(e,["videoMetadata"],m),e}function sJ(t){let e={},n=c(t,["retrievalConfig"]);n!=null&&d(e,["retrievalConfig"],n);let r=c(t,["functionCallingConfig"]);return r!=null&&d(e,["functionCallingConfig"],zz(r)),e}function aJ(t){let e={};if(c(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");let n=c(t,["computerUse"]);n!=null&&d(e,["computerUse"],n);let r=c(t,["fileSearch"]);r!=null&&d(e,["fileSearch"],r);let o=c(t,["codeExecution"]);if(o!=null&&d(e,["codeExecution"],o),c(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");let i=c(t,["functionDeclarations"]);if(i!=null){let f=i;Array.isArray(f)&&(f=f.map(p=>p)),d(e,["functionDeclarations"],f)}let s=c(t,["googleMaps"]);s!=null&&d(e,["googleMaps"],Xz(s));let a=c(t,["googleSearch"]);a!=null&&d(e,["googleSearch"],Qz(a));let l=c(t,["googleSearchRetrieval"]);l!=null&&d(e,["googleSearchRetrieval"],l);let u=c(t,["urlContext"]);return u!=null&&d(e,["urlContext"],u),e}function lJ(t){let e={},n=c(t,["retrieval"]);n!=null&&d(e,["retrieval"],n);let r=c(t,["computerUse"]);if(r!=null&&d(e,["computerUse"],r),c(t,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");let o=c(t,["codeExecution"]);o!=null&&d(e,["codeExecution"],o);let i=c(t,["enterpriseWebSearch"]);i!=null&&d(e,["enterpriseWebSearch"],i);let s=c(t,["functionDeclarations"]);if(s!=null){let p=s;Array.isArray(p)&&(p=p.map(m=>Jz(m))),d(e,["functionDeclarations"],p)}let a=c(t,["googleMaps"]);a!=null&&d(e,["googleMaps"],a);let l=c(t,["googleSearch"]);l!=null&&d(e,["googleSearch"],l);let u=c(t,["googleSearchRetrieval"]);u!=null&&d(e,["googleSearchRetrieval"],u);let f=c(t,["urlContext"]);return f!=null&&d(e,["urlContext"],f),e}function uJ(t,e){let n={},r=c(t,["ttl"]);e!==void 0&&r!=null&&d(e,["ttl"],r);let o=c(t,["expireTime"]);return e!==void 0&&o!=null&&d(e,["expireTime"],o),n}function cJ(t,e){let n={},r=c(t,["ttl"]);e!==void 0&&r!=null&&d(e,["ttl"],r);let o=c(t,["expireTime"]);return e!==void 0&&o!=null&&d(e,["expireTime"],o),n}function fJ(t,e){let n={},r=c(e,["name"]);r!=null&&d(n,["_url","name"],zo(t,r));let o=c(e,["config"]);return o!=null&&uJ(o,n),n}function dJ(t,e){let n={},r=c(e,["name"]);r!=null&&d(n,["_url","name"],zo(t,r));let o=c(e,["config"]);return o!=null&&cJ(o,n),n}var gw=class extends Ir{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new Wo(jo.PAGED_ITEM_CACHED_CONTENTS,r=>this.listInternal(r),await this.listInternal(n),n)}async create(e){var n,r,o,i;let s,a="",l={};if(this.apiClient.isVertexAI()){let u=Gz(this.apiClient,e);return a=le("cachedContents",u._url),l=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json()),s.then(f=>f)}else{let u=Bz(this.apiClient,e);return a=le("cachedContents",u._url),l=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),s.then(f=>f)}}async get(e){var n,r,o,i;let s,a="",l={};if(this.apiClient.isVertexAI()){let u=Yz(this.apiClient,e);return a=le("{name}",u._url),l=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json()),s.then(f=>f)}else{let u=Kz(this.apiClient,e);return a=le("{name}",u._url),l=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),s.then(f=>f)}}async delete(e){var n,r,o,i;let s,a="",l={};if(this.apiClient.isVertexAI()){let u=qz(this.apiClient,e);return a=le("{name}",u._url),l=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json().then(p=>{let m=p;return m.sdkHttpResponse={headers:f.headers},m})),s.then(f=>{let p=Vz(f),m=new nm;return Object.assign(m,p),m})}else{let u=Hz(this.apiClient,e);return a=le("{name}",u._url),l=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json().then(p=>{let m=p;return m.sdkHttpResponse={headers:f.headers},m})),s.then(f=>{let p=$z(f),m=new nm;return Object.assign(m,p),m})}}async update(e){var n,r,o,i;let s,a="",l={};if(this.apiClient.isVertexAI()){let u=dJ(this.apiClient,e);return a=le("{name}",u._url),l=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"PATCH",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json()),s.then(f=>f)}else{let u=fJ(this.apiClient,e);return a=le("{name}",u._url),l=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"PATCH",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),s.then(f=>f)}}async listInternal(e){var n,r,o,i;let s,a="",l={};if(this.apiClient.isVertexAI()){let u=nJ(e);return a=le("cachedContents",u._url),l=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json().then(p=>{let m=p;return m.sdkHttpResponse={headers:f.headers},m})),s.then(f=>{let p=oJ(f),m=new rm;return Object.assign(m,p),m})}else{let u=tJ(e);return a=le("cachedContents",u._url),l=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json().then(p=>{let m=p;return m.sdkHttpResponse={headers:f.headers},m})),s.then(f=>{let p=rJ(f),m=new rm;return Object.assign(m,p),m})}}};function am(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(t);o<r.length;o++)e.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(t,r[o])&&(n[r[o]]=t[r[o]]);return n}function wk(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Ce(t){return this instanceof Ce?(this.v=t,this):new Ce(t)}function Sr(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(t,e||[]),o,i=[];return o=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",s),o[Symbol.asyncIterator]=function(){return this},o;function s(b){return function(v){return Promise.resolve(v).then(b,p)}}function a(b,v){r[b]&&(o[b]=function(w){return new Promise(function(_,T){i.push([b,w,_,T])>1||l(b,w)})},v&&(o[b]=v(o[b])))}function l(b,v){try{u(r[b](v))}catch(w){m(i[0][3],w)}}function u(b){b.value instanceof Ce?Promise.resolve(b.value.v).then(f,p):m(i[0][2],b)}function f(b){l("next",b)}function p(b){l("throw",b)}function m(b,v){b(v),i.shift(),i.length&&l(i[0][0],i[0][1])}}function Pr(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof wk=="function"?wk(t):t[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(i){n[i]=t[i]&&function(s){return new Promise(function(a,l){s=t[i](s),o(a,l,s.done,s.value)})}}function o(i,s,a,l){Promise.resolve(l).then(function(u){i({value:u,done:a})},s)}}function hJ(t){var e;if(t.candidates==null||t.candidates.length===0)return!1;let n=(e=t.candidates[0])===null||e===void 0?void 0:e.content;return n===void 0?!1:iR(n)}function iR(t){if(t.parts===void 0||t.parts.length===0)return!1;for(let e of t.parts)if(e===void 0||Object.keys(e).length===0)return!1;return!0}function pJ(t){if(t.length!==0){for(let e of t)if(e.role!=="user"&&e.role!=="model")throw new Error(`Role must be user or model, but got ${e.role}.`)}}function _k(t){if(t===void 0||t.length===0)return[];let e=[],n=t.length,r=0;for(;r<n;)if(t[r].role==="user")e.push(t[r]),r++;else{let o=[],i=!0;for(;r<n&&t[r].role==="model";)o.push(t[r]),i&&!iR(t[r])&&(i=!1),r++;i?e.push(...o):e.pop()}return e}var yw=class{constructor(e,n){this.modelsModule=e,this.apiClient=n}create(e){return new bw(this.apiClient,this.modelsModule,e.model,e.config,structuredClone(e.history))}},bw=class{constructor(e,n,r,o={},i=[]){this.apiClient=e,this.modelsModule=n,this.model=r,this.config=o,this.history=i,this.sendPromise=Promise.resolve(),pJ(i)}async sendMessage(e){var n;await this.sendPromise;let r=Wt(e.message),o=this.modelsModule.generateContent({model:this.model,contents:this.getHistory(!0).concat(r),config:(n=e.config)!==null&&n!==void 0?n:this.config});return this.sendPromise=(async()=>{var i,s,a;let l=await o,u=(s=(i=l.candidates)===null||i===void 0?void 0:i[0])===null||s===void 0?void 0:s.content,f=l.automaticFunctionCallingHistory,p=this.getHistory(!0).length,m=[];f!=null&&(m=(a=f.slice(p))!==null&&a!==void 0?a:[]);let b=u?[u]:[];this.recordHistory(r,b,m)})(),await this.sendPromise.catch(()=>{this.sendPromise=Promise.resolve()}),o}async sendMessageStream(e){var n;await this.sendPromise;let r=Wt(e.message),o=this.modelsModule.generateContentStream({model:this.model,contents:this.getHistory(!0).concat(r),config:(n=e.config)!==null&&n!==void 0?n:this.config});this.sendPromise=o.then(()=>{}).catch(()=>{});let i=await o;return this.processStreamResponse(i,r)}getHistory(e=!1){let n=e?_k(this.history):this.history;return structuredClone(n)}processStreamResponse(e,n){return Sr(this,arguments,function*(){var o,i,s,a,l,u;let f=[];try{for(var p=!0,m=Pr(e),b;b=yield Ce(m.next()),o=b.done,!o;p=!0){a=b.value,p=!1;let v=a;if(hJ(v)){let w=(u=(l=v.candidates)===null||l===void 0?void 0:l[0])===null||u===void 0?void 0:u.content;w!==void 0&&f.push(w)}yield yield Ce(v)}}catch(v){i={error:v}}finally{try{!p&&!o&&(s=m.return)&&(yield Ce(s.call(m)))}finally{if(i)throw i.error}}this.recordHistory(n,f)})}recordHistory(e,n,r){let o=[];n.length>0&&n.every(i=>i.role!==void 0)?o=n:o.push({role:"model",parts:[]}),r&&r.length>0?this.history.push(..._k(r)):this.history.push(e),this.history.push(...o)}};var hf=class t extends Error{constructor(e){super(e.message),this.name="ApiError",this.status=e.status,Object.setPrototypeOf(this,t.prototype)}};function mJ(t){let e={},n=c(t,["file"]);return n!=null&&d(e,["file"],n),e}function gJ(t){let e={},n=c(t,["sdkHttpResponse"]);return n!=null&&d(e,["sdkHttpResponse"],n),e}function yJ(t){let e={},n=c(t,["name"]);return n!=null&&d(e,["_url","file"],t_(n)),e}function bJ(t){let e={},n=c(t,["sdkHttpResponse"]);return n!=null&&d(e,["sdkHttpResponse"],n),e}function vJ(t){let e={},n=c(t,["name"]);return n!=null&&d(e,["_url","file"],t_(n)),e}function wJ(t){let e={},n=c(t,["uris"]);return n!=null&&d(e,["uris"],n),e}function _J(t,e){let n={},r=c(t,["pageSize"]);e!==void 0&&r!=null&&d(e,["_query","pageSize"],r);let o=c(t,["pageToken"]);return e!==void 0&&o!=null&&d(e,["_query","pageToken"],o),n}function EJ(t){let e={},n=c(t,["config"]);return n!=null&&_J(n,e),e}function AJ(t){let e={},n=c(t,["sdkHttpResponse"]);n!=null&&d(e,["sdkHttpResponse"],n);let r=c(t,["nextPageToken"]);r!=null&&d(e,["nextPageToken"],r);let o=c(t,["files"]);if(o!=null){let i=o;Array.isArray(i)&&(i=i.map(s=>s)),d(e,["files"],i)}return e}function CJ(t){let e={},n=c(t,["sdkHttpResponse"]);n!=null&&d(e,["sdkHttpResponse"],n);let r=c(t,["files"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(i=>i)),d(e,["files"],o)}return e}var vw=class extends Ir{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new Wo(jo.PAGED_ITEM_FILES,r=>this.listInternal(r),await this.listInternal(n),n)}async upload(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files. You can share files through a GCS bucket.");return this.apiClient.uploadFile(e.file,e.config).then(n=>n)}async download(e){await this.apiClient.downloadFile(e)}async registerFiles(e){throw new Error("registerFiles is only supported in Node.js environments.")}async _registerFiles(e){return this.registerFilesInternal(e)}async listInternal(e){var n,r;let o,i="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{let a=EJ(e);return i=le("files",a._url),s=a._query,delete a._url,delete a._query,o=this.apiClient.request({path:i,queryParams:s,body:JSON.stringify(a),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json().then(u=>{let f=u;return f.sdkHttpResponse={headers:l.headers},f})),o.then(l=>{let u=AJ(l),f=new aw;return Object.assign(f,u),f})}}async createInternal(e){var n,r;let o,i="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{let a=mJ(e);return i=le("upload/v1beta/files",a._url),s=a._query,delete a._url,delete a._query,o=this.apiClient.request({path:i,queryParams:s,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json()),o.then(l=>{let u=gJ(l),f=new lw;return Object.assign(f,u),f})}}async get(e){var n,r;let o,i="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{let a=vJ(e);return i=le("files/{file}",a._url),s=a._query,delete a._url,delete a._query,o=this.apiClient.request({path:i,queryParams:s,body:JSON.stringify(a),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json()),o.then(l=>l)}}async delete(e){var n,r;let o,i="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{let a=yJ(e);return i=le("files/{file}",a._url),s=a._query,delete a._url,delete a._query,o=this.apiClient.request({path:i,queryParams:s,body:JSON.stringify(a),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json().then(u=>{let f=u;return f.sdkHttpResponse={headers:l.headers},f})),o.then(l=>{let u=bJ(l),f=new uw;return Object.assign(f,u),f})}}async registerFilesInternal(e){var n,r;let o,i="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{let a=wJ(e);return i=le("files:register",a._url),s=a._query,delete a._url,delete a._query,o=this.apiClient.request({path:i,queryParams:s,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json()),o.then(l=>{let u=CJ(l),f=new cw;return Object.assign(f,u),f})}}};function Wp(t){let e={},n=c(t,["data"]);if(n!=null&&d(e,["data"],n),c(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");let r=c(t,["mimeType"]);return r!=null&&d(e,["mimeType"],r),e}function TJ(t){let e={},n=c(t,["parts"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(i=>HJ(i))),d(e,["parts"],o)}let r=c(t,["role"]);return r!=null&&d(e,["role"],r),e}function SJ(t){let e={};if(c(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");let n=c(t,["fileUri"]);n!=null&&d(e,["fileUri"],n);let r=c(t,["mimeType"]);return r!=null&&d(e,["mimeType"],r),e}function PJ(t){let e={},n=c(t,["id"]);n!=null&&d(e,["id"],n);let r=c(t,["args"]);r!=null&&d(e,["args"],r);let o=c(t,["name"]);if(o!=null&&d(e,["name"],o),c(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(c(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function IJ(t){let e={},n=c(t,["description"]);n!=null&&d(e,["description"],n);let r=c(t,["name"]);r!=null&&d(e,["name"],r);let o=c(t,["parameters"]);o!=null&&d(e,["parameters"],o);let i=c(t,["parametersJsonSchema"]);i!=null&&d(e,["parametersJsonSchema"],i);let s=c(t,["response"]);s!=null&&d(e,["response"],s);let a=c(t,["responseJsonSchema"]);if(a!=null&&d(e,["responseJsonSchema"],a),c(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");return e}function xJ(t){let e={},n=c(t,["modelSelectionConfig"]);n!=null&&d(e,["modelConfig"],n);let r=c(t,["responseJsonSchema"]);r!=null&&d(e,["responseJsonSchema"],r);let o=c(t,["audioTimestamp"]);o!=null&&d(e,["audioTimestamp"],o);let i=c(t,["candidateCount"]);i!=null&&d(e,["candidateCount"],i);let s=c(t,["enableAffectiveDialog"]);s!=null&&d(e,["enableAffectiveDialog"],s);let a=c(t,["frequencyPenalty"]);a!=null&&d(e,["frequencyPenalty"],a);let l=c(t,["logprobs"]);l!=null&&d(e,["logprobs"],l);let u=c(t,["maxOutputTokens"]);u!=null&&d(e,["maxOutputTokens"],u);let f=c(t,["mediaResolution"]);f!=null&&d(e,["mediaResolution"],f);let p=c(t,["presencePenalty"]);p!=null&&d(e,["presencePenalty"],p);let m=c(t,["responseLogprobs"]);m!=null&&d(e,["responseLogprobs"],m);let b=c(t,["responseMimeType"]);b!=null&&d(e,["responseMimeType"],b);let v=c(t,["responseModalities"]);v!=null&&d(e,["responseModalities"],v);let w=c(t,["responseSchema"]);w!=null&&d(e,["responseSchema"],w);let _=c(t,["routingConfig"]);_!=null&&d(e,["routingConfig"],_);let T=c(t,["seed"]);T!=null&&d(e,["seed"],T);let R=c(t,["speechConfig"]);R!=null&&d(e,["speechConfig"],R);let L=c(t,["stopSequences"]);L!=null&&d(e,["stopSequences"],L);let D=c(t,["temperature"]);D!=null&&d(e,["temperature"],D);let x=c(t,["thinkingConfig"]);x!=null&&d(e,["thinkingConfig"],x);let P=c(t,["topK"]);P!=null&&d(e,["topK"],P);let V=c(t,["topP"]);if(V!=null&&d(e,["topP"],V),c(t,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function kJ(t){let e={};if(c(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");let n=c(t,["enableWidget"]);return n!=null&&d(e,["enableWidget"],n),e}function RJ(t){let e={};if(c(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(c(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");let n=c(t,["timeRangeFilter"]);return n!=null&&d(e,["timeRangeFilter"],n),e}function NJ(t,e){let n={},r=c(t,["generationConfig"]);e!==void 0&&r!=null&&d(e,["setup","generationConfig"],r);let o=c(t,["responseModalities"]);e!==void 0&&o!=null&&d(e,["setup","generationConfig","responseModalities"],o);let i=c(t,["temperature"]);e!==void 0&&i!=null&&d(e,["setup","generationConfig","temperature"],i);let s=c(t,["topP"]);e!==void 0&&s!=null&&d(e,["setup","generationConfig","topP"],s);let a=c(t,["topK"]);e!==void 0&&a!=null&&d(e,["setup","generationConfig","topK"],a);let l=c(t,["maxOutputTokens"]);e!==void 0&&l!=null&&d(e,["setup","generationConfig","maxOutputTokens"],l);let u=c(t,["mediaResolution"]);e!==void 0&&u!=null&&d(e,["setup","generationConfig","mediaResolution"],u);let f=c(t,["seed"]);e!==void 0&&f!=null&&d(e,["setup","generationConfig","seed"],f);let p=c(t,["speechConfig"]);e!==void 0&&p!=null&&d(e,["setup","generationConfig","speechConfig"],e_(p));let m=c(t,["thinkingConfig"]);e!==void 0&&m!=null&&d(e,["setup","generationConfig","thinkingConfig"],m);let b=c(t,["enableAffectiveDialog"]);e!==void 0&&b!=null&&d(e,["setup","generationConfig","enableAffectiveDialog"],b);let v=c(t,["systemInstruction"]);e!==void 0&&v!=null&&d(e,["setup","systemInstruction"],TJ(Wt(v)));let w=c(t,["tools"]);if(e!==void 0&&w!=null){let P=hu(w);Array.isArray(P)&&(P=P.map(V=>$J(du(V)))),d(e,["setup","tools"],P)}let _=c(t,["sessionResumption"]);e!==void 0&&_!=null&&d(e,["setup","sessionResumption"],qJ(_));let T=c(t,["inputAudioTranscription"]);e!==void 0&&T!=null&&d(e,["setup","inputAudioTranscription"],T);let R=c(t,["outputAudioTranscription"]);e!==void 0&&R!=null&&d(e,["setup","outputAudioTranscription"],R);let L=c(t,["realtimeInputConfig"]);e!==void 0&&L!=null&&d(e,["setup","realtimeInputConfig"],L);let D=c(t,["contextWindowCompression"]);e!==void 0&&D!=null&&d(e,["setup","contextWindowCompression"],D);let x=c(t,["proactivity"]);if(e!==void 0&&x!=null&&d(e,["setup","proactivity"],x),c(t,["explicitVadSignal"])!==void 0)throw new Error("explicitVadSignal parameter is not supported in Gemini API.");return n}function OJ(t,e){let n={},r=c(t,["generationConfig"]);e!==void 0&&r!=null&&d(e,["setup","generationConfig"],xJ(r));let o=c(t,["responseModalities"]);e!==void 0&&o!=null&&d(e,["setup","generationConfig","responseModalities"],o);let i=c(t,["temperature"]);e!==void 0&&i!=null&&d(e,["setup","generationConfig","temperature"],i);let s=c(t,["topP"]);e!==void 0&&s!=null&&d(e,["setup","generationConfig","topP"],s);let a=c(t,["topK"]);e!==void 0&&a!=null&&d(e,["setup","generationConfig","topK"],a);let l=c(t,["maxOutputTokens"]);e!==void 0&&l!=null&&d(e,["setup","generationConfig","maxOutputTokens"],l);let u=c(t,["mediaResolution"]);e!==void 0&&u!=null&&d(e,["setup","generationConfig","mediaResolution"],u);let f=c(t,["seed"]);e!==void 0&&f!=null&&d(e,["setup","generationConfig","seed"],f);let p=c(t,["speechConfig"]);e!==void 0&&p!=null&&d(e,["setup","generationConfig","speechConfig"],e_(p));let m=c(t,["thinkingConfig"]);e!==void 0&&m!=null&&d(e,["setup","generationConfig","thinkingConfig"],m);let b=c(t,["enableAffectiveDialog"]);e!==void 0&&b!=null&&d(e,["setup","generationConfig","enableAffectiveDialog"],b);let v=c(t,["systemInstruction"]);e!==void 0&&v!=null&&d(e,["setup","systemInstruction"],Wt(v));let w=c(t,["tools"]);if(e!==void 0&&w!=null){let V=hu(w);Array.isArray(V)&&(V=V.map(J=>VJ(du(J)))),d(e,["setup","tools"],V)}let _=c(t,["sessionResumption"]);e!==void 0&&_!=null&&d(e,["setup","sessionResumption"],_);let T=c(t,["inputAudioTranscription"]);e!==void 0&&T!=null&&d(e,["setup","inputAudioTranscription"],T);let R=c(t,["outputAudioTranscription"]);e!==void 0&&R!=null&&d(e,["setup","outputAudioTranscription"],R);let L=c(t,["realtimeInputConfig"]);e!==void 0&&L!=null&&d(e,["setup","realtimeInputConfig"],L);let D=c(t,["contextWindowCompression"]);e!==void 0&&D!=null&&d(e,["setup","contextWindowCompression"],D);let x=c(t,["proactivity"]);e!==void 0&&x!=null&&d(e,["setup","proactivity"],x);let P=c(t,["explicitVadSignal"]);return e!==void 0&&P!=null&&d(e,["setup","explicitVadSignal"],P),n}function DJ(t,e){let n={},r=c(e,["model"]);r!=null&&d(n,["setup","model"],Be(t,r));let o=c(e,["config"]);return o!=null&&d(n,["config"],NJ(o,n)),n}function MJ(t,e){let n={},r=c(e,["model"]);r!=null&&d(n,["setup","model"],Be(t,r));let o=c(e,["config"]);return o!=null&&d(n,["config"],OJ(o,n)),n}function FJ(t){let e={},n=c(t,["musicGenerationConfig"]);return n!=null&&d(e,["musicGenerationConfig"],n),e}function LJ(t){let e={},n=c(t,["weightedPrompts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(o=>o)),d(e,["weightedPrompts"],r)}return e}function UJ(t){let e={},n=c(t,["media"]);if(n!=null){let u=Wk(n);Array.isArray(u)&&(u=u.map(f=>Wp(f))),d(e,["mediaChunks"],u)}let r=c(t,["audio"]);r!=null&&d(e,["audio"],Wp(Jk(r)));let o=c(t,["audioStreamEnd"]);o!=null&&d(e,["audioStreamEnd"],o);let i=c(t,["video"]);i!=null&&d(e,["video"],Wp(zk(i)));let s=c(t,["text"]);s!=null&&d(e,["text"],s);let a=c(t,["activityStart"]);a!=null&&d(e,["activityStart"],a);let l=c(t,["activityEnd"]);return l!=null&&d(e,["activityEnd"],l),e}function BJ(t){let e={},n=c(t,["media"]);if(n!=null){let u=Wk(n);Array.isArray(u)&&(u=u.map(f=>f)),d(e,["mediaChunks"],u)}let r=c(t,["audio"]);r!=null&&d(e,["audio"],Jk(r));let o=c(t,["audioStreamEnd"]);o!=null&&d(e,["audioStreamEnd"],o);let i=c(t,["video"]);i!=null&&d(e,["video"],zk(i));let s=c(t,["text"]);s!=null&&d(e,["text"],s);let a=c(t,["activityStart"]);a!=null&&d(e,["activityStart"],a);let l=c(t,["activityEnd"]);return l!=null&&d(e,["activityEnd"],l),e}function GJ(t){let e={},n=c(t,["setupComplete"]);n!=null&&d(e,["setupComplete"],n);let r=c(t,["serverContent"]);r!=null&&d(e,["serverContent"],r);let o=c(t,["toolCall"]);o!=null&&d(e,["toolCall"],o);let i=c(t,["toolCallCancellation"]);i!=null&&d(e,["toolCallCancellation"],i);let s=c(t,["usageMetadata"]);s!=null&&d(e,["usageMetadata"],jJ(s));let a=c(t,["goAway"]);a!=null&&d(e,["goAway"],a);let l=c(t,["sessionResumptionUpdate"]);l!=null&&d(e,["sessionResumptionUpdate"],l);let u=c(t,["voiceActivityDetectionSignal"]);u!=null&&d(e,["voiceActivityDetectionSignal"],u);let f=c(t,["voiceActivity"]);return f!=null&&d(e,["voiceActivity"],WJ(f)),e}function HJ(t){let e={},n=c(t,["mediaResolution"]);n!=null&&d(e,["mediaResolution"],n);let r=c(t,["codeExecutionResult"]);r!=null&&d(e,["codeExecutionResult"],r);let o=c(t,["executableCode"]);o!=null&&d(e,["executableCode"],o);let i=c(t,["fileData"]);i!=null&&d(e,["fileData"],SJ(i));let s=c(t,["functionCall"]);s!=null&&d(e,["functionCall"],PJ(s));let a=c(t,["functionResponse"]);a!=null&&d(e,["functionResponse"],a);let l=c(t,["inlineData"]);l!=null&&d(e,["inlineData"],Wp(l));let u=c(t,["text"]);u!=null&&d(e,["text"],u);let f=c(t,["thought"]);f!=null&&d(e,["thought"],f);let p=c(t,["thoughtSignature"]);p!=null&&d(e,["thoughtSignature"],p);let m=c(t,["videoMetadata"]);return m!=null&&d(e,["videoMetadata"],m),e}function qJ(t){let e={},n=c(t,["handle"]);if(n!=null&&d(e,["handle"],n),c(t,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function $J(t){let e={};if(c(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");let n=c(t,["computerUse"]);n!=null&&d(e,["computerUse"],n);let r=c(t,["fileSearch"]);r!=null&&d(e,["fileSearch"],r);let o=c(t,["codeExecution"]);if(o!=null&&d(e,["codeExecution"],o),c(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");let i=c(t,["functionDeclarations"]);if(i!=null){let f=i;Array.isArray(f)&&(f=f.map(p=>p)),d(e,["functionDeclarations"],f)}let s=c(t,["googleMaps"]);s!=null&&d(e,["googleMaps"],kJ(s));let a=c(t,["googleSearch"]);a!=null&&d(e,["googleSearch"],RJ(a));let l=c(t,["googleSearchRetrieval"]);l!=null&&d(e,["googleSearchRetrieval"],l);let u=c(t,["urlContext"]);return u!=null&&d(e,["urlContext"],u),e}function VJ(t){let e={},n=c(t,["retrieval"]);n!=null&&d(e,["retrieval"],n);let r=c(t,["computerUse"]);if(r!=null&&d(e,["computerUse"],r),c(t,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");let o=c(t,["codeExecution"]);o!=null&&d(e,["codeExecution"],o);let i=c(t,["enterpriseWebSearch"]);i!=null&&d(e,["enterpriseWebSearch"],i);let s=c(t,["functionDeclarations"]);if(s!=null){let p=s;Array.isArray(p)&&(p=p.map(m=>IJ(m))),d(e,["functionDeclarations"],p)}let a=c(t,["googleMaps"]);a!=null&&d(e,["googleMaps"],a);let l=c(t,["googleSearch"]);l!=null&&d(e,["googleSearch"],l);let u=c(t,["googleSearchRetrieval"]);u!=null&&d(e,["googleSearchRetrieval"],u);let f=c(t,["urlContext"]);return f!=null&&d(e,["urlContext"],f),e}function jJ(t){let e={},n=c(t,["promptTokenCount"]);n!=null&&d(e,["promptTokenCount"],n);let r=c(t,["cachedContentTokenCount"]);r!=null&&d(e,["cachedContentTokenCount"],r);let o=c(t,["candidatesTokenCount"]);o!=null&&d(e,["responseTokenCount"],o);let i=c(t,["toolUsePromptTokenCount"]);i!=null&&d(e,["toolUsePromptTokenCount"],i);let s=c(t,["thoughtsTokenCount"]);s!=null&&d(e,["thoughtsTokenCount"],s);let a=c(t,["totalTokenCount"]);a!=null&&d(e,["totalTokenCount"],a);let l=c(t,["promptTokensDetails"]);if(l!=null){let b=l;Array.isArray(b)&&(b=b.map(v=>v)),d(e,["promptTokensDetails"],b)}let u=c(t,["cacheTokensDetails"]);if(u!=null){let b=u;Array.isArray(b)&&(b=b.map(v=>v)),d(e,["cacheTokensDetails"],b)}let f=c(t,["candidatesTokensDetails"]);if(f!=null){let b=f;Array.isArray(b)&&(b=b.map(v=>v)),d(e,["responseTokensDetails"],b)}let p=c(t,["toolUsePromptTokensDetails"]);if(p!=null){let b=p;Array.isArray(b)&&(b=b.map(v=>v)),d(e,["toolUsePromptTokensDetails"],b)}let m=c(t,["trafficType"]);return m!=null&&d(e,["trafficType"],m),e}function WJ(t){let e={},n=c(t,["type"]);return n!=null&&d(e,["voiceActivityType"],n),e}function zJ(t,e){let n={},r=c(t,["data"]);if(r!=null&&d(n,["data"],r),c(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");let o=c(t,["mimeType"]);return o!=null&&d(n,["mimeType"],o),n}function JJ(t,e){let n={},r=c(t,["content"]);r!=null&&d(n,["content"],r);let o=c(t,["citationMetadata"]);o!=null&&d(n,["citationMetadata"],KJ(o));let i=c(t,["tokenCount"]);i!=null&&d(n,["tokenCount"],i);let s=c(t,["finishReason"]);s!=null&&d(n,["finishReason"],s);let a=c(t,["avgLogprobs"]);a!=null&&d(n,["avgLogprobs"],a);let l=c(t,["groundingMetadata"]);l!=null&&d(n,["groundingMetadata"],l);let u=c(t,["index"]);u!=null&&d(n,["index"],u);let f=c(t,["logprobsResult"]);f!=null&&d(n,["logprobsResult"],f);let p=c(t,["safetyRatings"]);if(p!=null){let b=p;Array.isArray(b)&&(b=b.map(v=>v)),d(n,["safetyRatings"],b)}let m=c(t,["urlContextMetadata"]);return m!=null&&d(n,["urlContextMetadata"],m),n}function KJ(t,e){let n={},r=c(t,["citationSources"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(i=>i)),d(n,["citations"],o)}return n}function YJ(t,e,n){let r={},o=c(e,["model"]);o!=null&&d(r,["_url","model"],Be(t,o));let i=c(e,["contents"]);if(i!=null){let s=rr(i);Array.isArray(s)&&(s=s.map(a=>a)),d(r,["contents"],s)}return r}function XJ(t,e){let n={},r=c(t,["sdkHttpResponse"]);r!=null&&d(n,["sdkHttpResponse"],r);let o=c(t,["tokensInfo"]);if(o!=null){let i=o;Array.isArray(i)&&(i=i.map(s=>s)),d(n,["tokensInfo"],i)}return n}function QJ(t,e){let n={},r=c(t,["values"]);r!=null&&d(n,["values"],r);let o=c(t,["statistics"]);return o!=null&&d(n,["statistics"],ZJ(o)),n}function ZJ(t,e){let n={},r=c(t,["truncated"]);r!=null&&d(n,["truncated"],r);let o=c(t,["token_count"]);return o!=null&&d(n,["tokenCount"],o),n}function Cm(t,e){let n={},r=c(t,["parts"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(s=>l8(s))),d(n,["parts"],i)}let o=c(t,["role"]);return o!=null&&d(n,["role"],o),n}function e9(t,e){let n={},r=c(t,["controlType"]);r!=null&&d(n,["controlType"],r);let o=c(t,["enableControlImageComputation"]);return o!=null&&d(n,["computeControl"],o),n}function t9(t,e){let n={};if(c(t,["systemInstruction"])!==void 0)throw new Error("systemInstruction parameter is not supported in Gemini API.");if(c(t,["tools"])!==void 0)throw new Error("tools parameter is not supported in Gemini API.");if(c(t,["generationConfig"])!==void 0)throw new Error("generationConfig parameter is not supported in Gemini API.");return n}function n9(t,e,n){let r={},o=c(t,["systemInstruction"]);e!==void 0&&o!=null&&d(e,["systemInstruction"],Wt(o));let i=c(t,["tools"]);if(e!==void 0&&i!=null){let a=i;Array.isArray(a)&&(a=a.map(l=>uR(l))),d(e,["tools"],a)}let s=c(t,["generationConfig"]);return e!==void 0&&s!=null&&d(e,["generationConfig"],z9(s)),r}function r9(t,e,n){let r={},o=c(e,["model"]);o!=null&&d(r,["_url","model"],Be(t,o));let i=c(e,["contents"]);if(i!=null){let a=rr(i);Array.isArray(a)&&(a=a.map(l=>Cm(l))),d(r,["contents"],a)}let s=c(e,["config"]);return s!=null&&t9(s),r}function o9(t,e,n){let r={},o=c(e,["model"]);o!=null&&d(r,["_url","model"],Be(t,o));let i=c(e,["contents"]);if(i!=null){let a=rr(i);Array.isArray(a)&&(a=a.map(l=>l)),d(r,["contents"],a)}let s=c(e,["config"]);return s!=null&&n9(s,r),r}function i9(t,e){let n={},r=c(t,["sdkHttpResponse"]);r!=null&&d(n,["sdkHttpResponse"],r);let o=c(t,["totalTokens"]);o!=null&&d(n,["totalTokens"],o);let i=c(t,["cachedContentTokenCount"]);return i!=null&&d(n,["cachedContentTokenCount"],i),n}function s9(t,e){let n={},r=c(t,["sdkHttpResponse"]);r!=null&&d(n,["sdkHttpResponse"],r);let o=c(t,["totalTokens"]);return o!=null&&d(n,["totalTokens"],o),n}function a9(t,e,n){let r={},o=c(e,["model"]);return o!=null&&d(r,["_url","name"],Be(t,o)),r}function l9(t,e,n){let r={},o=c(e,["model"]);return o!=null&&d(r,["_url","name"],Be(t,o)),r}function u9(t,e){let n={},r=c(t,["sdkHttpResponse"]);return r!=null&&d(n,["sdkHttpResponse"],r),n}function c9(t,e){let n={},r=c(t,["sdkHttpResponse"]);return r!=null&&d(n,["sdkHttpResponse"],r),n}function f9(t,e,n){let r={},o=c(t,["outputGcsUri"]);e!==void 0&&o!=null&&d(e,["parameters","storageUri"],o);let i=c(t,["negativePrompt"]);e!==void 0&&i!=null&&d(e,["parameters","negativePrompt"],i);let s=c(t,["numberOfImages"]);e!==void 0&&s!=null&&d(e,["parameters","sampleCount"],s);let a=c(t,["aspectRatio"]);e!==void 0&&a!=null&&d(e,["parameters","aspectRatio"],a);let l=c(t,["guidanceScale"]);e!==void 0&&l!=null&&d(e,["parameters","guidanceScale"],l);let u=c(t,["seed"]);e!==void 0&&u!=null&&d(e,["parameters","seed"],u);let f=c(t,["safetyFilterLevel"]);e!==void 0&&f!=null&&d(e,["parameters","safetySetting"],f);let p=c(t,["personGeneration"]);e!==void 0&&p!=null&&d(e,["parameters","personGeneration"],p);let m=c(t,["includeSafetyAttributes"]);e!==void 0&&m!=null&&d(e,["parameters","includeSafetyAttributes"],m);let b=c(t,["includeRaiReason"]);e!==void 0&&b!=null&&d(e,["parameters","includeRaiReason"],b);let v=c(t,["language"]);e!==void 0&&v!=null&&d(e,["parameters","language"],v);let w=c(t,["outputMimeType"]);e!==void 0&&w!=null&&d(e,["parameters","outputOptions","mimeType"],w);let _=c(t,["outputCompressionQuality"]);e!==void 0&&_!=null&&d(e,["parameters","outputOptions","compressionQuality"],_);let T=c(t,["addWatermark"]);e!==void 0&&T!=null&&d(e,["parameters","addWatermark"],T);let R=c(t,["labels"]);e!==void 0&&R!=null&&d(e,["labels"],R);let L=c(t,["editMode"]);e!==void 0&&L!=null&&d(e,["parameters","editMode"],L);let D=c(t,["baseSteps"]);return e!==void 0&&D!=null&&d(e,["parameters","editConfig","baseSteps"],D),r}function d9(t,e,n){let r={},o=c(e,["model"]);o!=null&&d(r,["_url","model"],Be(t,o));let i=c(e,["prompt"]);i!=null&&d(r,["instances[0]","prompt"],i);let s=c(e,["referenceImages"]);if(s!=null){let l=s;Array.isArray(l)&&(l=l.map(u=>p8(u))),d(r,["instances[0]","referenceImages"],l)}let a=c(e,["config"]);return a!=null&&f9(a,r),r}function h9(t,e){let n={},r=c(t,["sdkHttpResponse"]);r!=null&&d(n,["sdkHttpResponse"],r);let o=c(t,["predictions"]);if(o!=null){let i=o;Array.isArray(i)&&(i=i.map(s=>Tm(s))),d(n,["generatedImages"],i)}return n}function p9(t,e,n){let r={},o=c(t,["taskType"]);e!==void 0&&o!=null&&d(e,["requests[]","taskType"],o);let i=c(t,["title"]);e!==void 0&&i!=null&&d(e,["requests[]","title"],i);let s=c(t,["outputDimensionality"]);if(e!==void 0&&s!=null&&d(e,["requests[]","outputDimensionality"],s),c(t,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(c(t,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return r}function m9(t,e,n){let r={},o=c(t,["taskType"]);e!==void 0&&o!=null&&d(e,["instances[]","task_type"],o);let i=c(t,["title"]);e!==void 0&&i!=null&&d(e,["instances[]","title"],i);let s=c(t,["outputDimensionality"]);e!==void 0&&s!=null&&d(e,["parameters","outputDimensionality"],s);let a=c(t,["mimeType"]);e!==void 0&&a!=null&&d(e,["instances[]","mimeType"],a);let l=c(t,["autoTruncate"]);return e!==void 0&&l!=null&&d(e,["parameters","autoTruncate"],l),r}function g9(t,e,n){let r={},o=c(e,["model"]);o!=null&&d(r,["_url","model"],Be(t,o));let i=c(e,["contents"]);if(i!=null){let l=Xw(t,i);Array.isArray(l)&&(l=l.map(u=>u)),d(r,["requests[]","content"],l)}let s=c(e,["config"]);s!=null&&p9(s,r);let a=c(e,["model"]);return a!==void 0&&d(r,["requests[]","model"],Be(t,a)),r}function y9(t,e,n){let r={},o=c(e,["model"]);o!=null&&d(r,["_url","model"],Be(t,o));let i=c(e,["contents"]);if(i!=null){let a=Xw(t,i);Array.isArray(a)&&(a=a.map(l=>l)),d(r,["instances[]","content"],a)}let s=c(e,["config"]);return s!=null&&m9(s,r),r}function b9(t,e){let n={},r=c(t,["sdkHttpResponse"]);r!=null&&d(n,["sdkHttpResponse"],r);let o=c(t,["embeddings"]);if(o!=null){let s=o;Array.isArray(s)&&(s=s.map(a=>a)),d(n,["embeddings"],s)}let i=c(t,["metadata"]);return i!=null&&d(n,["metadata"],i),n}function v9(t,e){let n={},r=c(t,["sdkHttpResponse"]);r!=null&&d(n,["sdkHttpResponse"],r);let o=c(t,["predictions[]","embeddings"]);if(o!=null){let s=o;Array.isArray(s)&&(s=s.map(a=>QJ(a))),d(n,["embeddings"],s)}let i=c(t,["metadata"]);return i!=null&&d(n,["metadata"],i),n}function w9(t,e){let n={},r=c(t,["endpoint"]);r!=null&&d(n,["name"],r);let o=c(t,["deployedModelId"]);return o!=null&&d(n,["deployedModelId"],o),n}function _9(t,e){let n={};if(c(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");let r=c(t,["fileUri"]);r!=null&&d(n,["fileUri"],r);let o=c(t,["mimeType"]);return o!=null&&d(n,["mimeType"],o),n}function E9(t,e){let n={},r=c(t,["id"]);r!=null&&d(n,["id"],r);let o=c(t,["args"]);o!=null&&d(n,["args"],o);let i=c(t,["name"]);if(i!=null&&d(n,["name"],i),c(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(c(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return n}function A9(t,e){let n={},r=c(t,["allowedFunctionNames"]);r!=null&&d(n,["allowedFunctionNames"],r);let o=c(t,["mode"]);if(o!=null&&d(n,["mode"],o),c(t,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return n}function C9(t,e){let n={},r=c(t,["description"]);r!=null&&d(n,["description"],r);let o=c(t,["name"]);o!=null&&d(n,["name"],o);let i=c(t,["parameters"]);i!=null&&d(n,["parameters"],i);let s=c(t,["parametersJsonSchema"]);s!=null&&d(n,["parametersJsonSchema"],s);let a=c(t,["response"]);a!=null&&d(n,["response"],a);let l=c(t,["responseJsonSchema"]);if(l!=null&&d(n,["responseJsonSchema"],l),c(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");return n}function T9(t,e,n,r){let o={},i=c(e,["systemInstruction"]);n!==void 0&&i!=null&&d(n,["systemInstruction"],Cm(Wt(i)));let s=c(e,["temperature"]);s!=null&&d(o,["temperature"],s);let a=c(e,["topP"]);a!=null&&d(o,["topP"],a);let l=c(e,["topK"]);l!=null&&d(o,["topK"],l);let u=c(e,["candidateCount"]);u!=null&&d(o,["candidateCount"],u);let f=c(e,["maxOutputTokens"]);f!=null&&d(o,["maxOutputTokens"],f);let p=c(e,["stopSequences"]);p!=null&&d(o,["stopSequences"],p);let m=c(e,["responseLogprobs"]);m!=null&&d(o,["responseLogprobs"],m);let b=c(e,["logprobs"]);b!=null&&d(o,["logprobs"],b);let v=c(e,["presencePenalty"]);v!=null&&d(o,["presencePenalty"],v);let w=c(e,["frequencyPenalty"]);w!=null&&d(o,["frequencyPenalty"],w);let _=c(e,["seed"]);_!=null&&d(o,["seed"],_);let T=c(e,["responseMimeType"]);T!=null&&d(o,["responseMimeType"],T);let R=c(e,["responseSchema"]);R!=null&&d(o,["responseSchema"],Qw(R));let L=c(e,["responseJsonSchema"]);if(L!=null&&d(o,["responseJsonSchema"],L),c(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(c(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");let D=c(e,["safetySettings"]);if(n!==void 0&&D!=null){let re=D;Array.isArray(re)&&(re=re.map(be=>m8(be))),d(n,["safetySettings"],re)}let x=c(e,["tools"]);if(n!==void 0&&x!=null){let re=hu(x);Array.isArray(re)&&(re=re.map(be=>E8(du(be)))),d(n,["tools"],re)}let P=c(e,["toolConfig"]);if(n!==void 0&&P!=null&&d(n,["toolConfig"],_8(P)),c(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");let V=c(e,["cachedContent"]);n!==void 0&&V!=null&&d(n,["cachedContent"],zo(t,V));let J=c(e,["responseModalities"]);J!=null&&d(o,["responseModalities"],J);let E=c(e,["mediaResolution"]);E!=null&&d(o,["mediaResolution"],E);let O=c(e,["speechConfig"]);if(O!=null&&d(o,["speechConfig"],Zw(O)),c(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");let X=c(e,["thinkingConfig"]);X!=null&&d(o,["thinkingConfig"],X);let ee=c(e,["imageConfig"]);ee!=null&&d(o,["imageConfig"],Q9(ee));let se=c(e,["enableEnhancedCivicAnswers"]);if(se!=null&&d(o,["enableEnhancedCivicAnswers"],se),c(e,["modelArmorConfig"])!==void 0)throw new Error("modelArmorConfig parameter is not supported in Gemini API.");return o}function S9(t,e,n,r){let o={},i=c(e,["systemInstruction"]);n!==void 0&&i!=null&&d(n,["systemInstruction"],Wt(i));let s=c(e,["temperature"]);s!=null&&d(o,["temperature"],s);let a=c(e,["topP"]);a!=null&&d(o,["topP"],a);let l=c(e,["topK"]);l!=null&&d(o,["topK"],l);let u=c(e,["candidateCount"]);u!=null&&d(o,["candidateCount"],u);let f=c(e,["maxOutputTokens"]);f!=null&&d(o,["maxOutputTokens"],f);let p=c(e,["stopSequences"]);p!=null&&d(o,["stopSequences"],p);let m=c(e,["responseLogprobs"]);m!=null&&d(o,["responseLogprobs"],m);let b=c(e,["logprobs"]);b!=null&&d(o,["logprobs"],b);let v=c(e,["presencePenalty"]);v!=null&&d(o,["presencePenalty"],v);let w=c(e,["frequencyPenalty"]);w!=null&&d(o,["frequencyPenalty"],w);let _=c(e,["seed"]);_!=null&&d(o,["seed"],_);let T=c(e,["responseMimeType"]);T!=null&&d(o,["responseMimeType"],T);let R=c(e,["responseSchema"]);R!=null&&d(o,["responseSchema"],Qw(R));let L=c(e,["responseJsonSchema"]);L!=null&&d(o,["responseJsonSchema"],L);let D=c(e,["routingConfig"]);D!=null&&d(o,["routingConfig"],D);let x=c(e,["modelSelectionConfig"]);x!=null&&d(o,["modelConfig"],x);let P=c(e,["safetySettings"]);if(n!==void 0&&P!=null){let Ie=P;Array.isArray(Ie)&&(Ie=Ie.map(Qe=>Qe)),d(n,["safetySettings"],Ie)}let V=c(e,["tools"]);if(n!==void 0&&V!=null){let Ie=hu(V);Array.isArray(Ie)&&(Ie=Ie.map(Qe=>uR(du(Qe)))),d(n,["tools"],Ie)}let J=c(e,["toolConfig"]);n!==void 0&&J!=null&&d(n,["toolConfig"],J);let E=c(e,["labels"]);n!==void 0&&E!=null&&d(n,["labels"],E);let O=c(e,["cachedContent"]);n!==void 0&&O!=null&&d(n,["cachedContent"],zo(t,O));let X=c(e,["responseModalities"]);X!=null&&d(o,["responseModalities"],X);let ee=c(e,["mediaResolution"]);ee!=null&&d(o,["mediaResolution"],ee);let se=c(e,["speechConfig"]);se!=null&&d(o,["speechConfig"],Zw(se));let re=c(e,["audioTimestamp"]);re!=null&&d(o,["audioTimestamp"],re);let be=c(e,["thinkingConfig"]);be!=null&&d(o,["thinkingConfig"],be);let Me=c(e,["imageConfig"]);if(Me!=null&&d(o,["imageConfig"],Z9(Me)),c(e,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");let ke=c(e,["modelArmorConfig"]);return n!==void 0&&ke!=null&&d(n,["modelArmorConfig"],ke),o}function Ek(t,e,n){let r={},o=c(e,["model"]);o!=null&&d(r,["_url","model"],Be(t,o));let i=c(e,["contents"]);if(i!=null){let a=rr(i);Array.isArray(a)&&(a=a.map(l=>Cm(l))),d(r,["contents"],a)}let s=c(e,["config"]);return s!=null&&d(r,["generationConfig"],T9(t,s,r)),r}function Ak(t,e,n){let r={},o=c(e,["model"]);o!=null&&d(r,["_url","model"],Be(t,o));let i=c(e,["contents"]);if(i!=null){let a=rr(i);Array.isArray(a)&&(a=a.map(l=>l)),d(r,["contents"],a)}let s=c(e,["config"]);return s!=null&&d(r,["generationConfig"],S9(t,s,r)),r}function Ck(t,e){let n={},r=c(t,["sdkHttpResponse"]);r!=null&&d(n,["sdkHttpResponse"],r);let o=c(t,["candidates"]);if(o!=null){let u=o;Array.isArray(u)&&(u=u.map(f=>JJ(f))),d(n,["candidates"],u)}let i=c(t,["modelVersion"]);i!=null&&d(n,["modelVersion"],i);let s=c(t,["promptFeedback"]);s!=null&&d(n,["promptFeedback"],s);let a=c(t,["responseId"]);a!=null&&d(n,["responseId"],a);let l=c(t,["usageMetadata"]);return l!=null&&d(n,["usageMetadata"],l),n}function Tk(t,e){let n={},r=c(t,["sdkHttpResponse"]);r!=null&&d(n,["sdkHttpResponse"],r);let o=c(t,["candidates"]);if(o!=null){let f=o;Array.isArray(f)&&(f=f.map(p=>p)),d(n,["candidates"],f)}let i=c(t,["createTime"]);i!=null&&d(n,["createTime"],i);let s=c(t,["modelVersion"]);s!=null&&d(n,["modelVersion"],s);let a=c(t,["promptFeedback"]);a!=null&&d(n,["promptFeedback"],a);let l=c(t,["responseId"]);l!=null&&d(n,["responseId"],l);let u=c(t,["usageMetadata"]);return u!=null&&d(n,["usageMetadata"],u),n}function P9(t,e,n){let r={};if(c(t,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(c(t,["negativePrompt"])!==void 0)throw new Error("negativePrompt parameter is not supported in Gemini API.");let o=c(t,["numberOfImages"]);e!==void 0&&o!=null&&d(e,["parameters","sampleCount"],o);let i=c(t,["aspectRatio"]);e!==void 0&&i!=null&&d(e,["parameters","aspectRatio"],i);let s=c(t,["guidanceScale"]);if(e!==void 0&&s!=null&&d(e,["parameters","guidanceScale"],s),c(t,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");let a=c(t,["safetyFilterLevel"]);e!==void 0&&a!=null&&d(e,["parameters","safetySetting"],a);let l=c(t,["personGeneration"]);e!==void 0&&l!=null&&d(e,["parameters","personGeneration"],l);let u=c(t,["includeSafetyAttributes"]);e!==void 0&&u!=null&&d(e,["parameters","includeSafetyAttributes"],u);let f=c(t,["includeRaiReason"]);e!==void 0&&f!=null&&d(e,["parameters","includeRaiReason"],f);let p=c(t,["language"]);e!==void 0&&p!=null&&d(e,["parameters","language"],p);let m=c(t,["outputMimeType"]);e!==void 0&&m!=null&&d(e,["parameters","outputOptions","mimeType"],m);let b=c(t,["outputCompressionQuality"]);if(e!==void 0&&b!=null&&d(e,["parameters","outputOptions","compressionQuality"],b),c(t,["addWatermark"])!==void 0)throw new Error("addWatermark parameter is not supported in Gemini API.");if(c(t,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");let v=c(t,["imageSize"]);if(e!==void 0&&v!=null&&d(e,["parameters","sampleImageSize"],v),c(t,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return r}function I9(t,e,n){let r={},o=c(t,["outputGcsUri"]);e!==void 0&&o!=null&&d(e,["parameters","storageUri"],o);let i=c(t,["negativePrompt"]);e!==void 0&&i!=null&&d(e,["parameters","negativePrompt"],i);let s=c(t,["numberOfImages"]);e!==void 0&&s!=null&&d(e,["parameters","sampleCount"],s);let a=c(t,["aspectRatio"]);e!==void 0&&a!=null&&d(e,["parameters","aspectRatio"],a);let l=c(t,["guidanceScale"]);e!==void 0&&l!=null&&d(e,["parameters","guidanceScale"],l);let u=c(t,["seed"]);e!==void 0&&u!=null&&d(e,["parameters","seed"],u);let f=c(t,["safetyFilterLevel"]);e!==void 0&&f!=null&&d(e,["parameters","safetySetting"],f);let p=c(t,["personGeneration"]);e!==void 0&&p!=null&&d(e,["parameters","personGeneration"],p);let m=c(t,["includeSafetyAttributes"]);e!==void 0&&m!=null&&d(e,["parameters","includeSafetyAttributes"],m);let b=c(t,["includeRaiReason"]);e!==void 0&&b!=null&&d(e,["parameters","includeRaiReason"],b);let v=c(t,["language"]);e!==void 0&&v!=null&&d(e,["parameters","language"],v);let w=c(t,["outputMimeType"]);e!==void 0&&w!=null&&d(e,["parameters","outputOptions","mimeType"],w);let _=c(t,["outputCompressionQuality"]);e!==void 0&&_!=null&&d(e,["parameters","outputOptions","compressionQuality"],_);let T=c(t,["addWatermark"]);e!==void 0&&T!=null&&d(e,["parameters","addWatermark"],T);let R=c(t,["labels"]);e!==void 0&&R!=null&&d(e,["labels"],R);let L=c(t,["imageSize"]);e!==void 0&&L!=null&&d(e,["parameters","sampleImageSize"],L);let D=c(t,["enhancePrompt"]);return e!==void 0&&D!=null&&d(e,["parameters","enhancePrompt"],D),r}function x9(t,e,n){let r={},o=c(e,["model"]);o!=null&&d(r,["_url","model"],Be(t,o));let i=c(e,["prompt"]);i!=null&&d(r,["instances[0]","prompt"],i);let s=c(e,["config"]);return s!=null&&P9(s,r),r}function k9(t,e,n){let r={},o=c(e,["model"]);o!=null&&d(r,["_url","model"],Be(t,o));let i=c(e,["prompt"]);i!=null&&d(r,["instances[0]","prompt"],i);let s=c(e,["config"]);return s!=null&&I9(s,r),r}function R9(t,e){let n={},r=c(t,["sdkHttpResponse"]);r!=null&&d(n,["sdkHttpResponse"],r);let o=c(t,["predictions"]);if(o!=null){let s=o;Array.isArray(s)&&(s=s.map(a=>$9(a))),d(n,["generatedImages"],s)}let i=c(t,["positivePromptSafetyAttributes"]);return i!=null&&d(n,["positivePromptSafetyAttributes"],aR(i)),n}function N9(t,e){let n={},r=c(t,["sdkHttpResponse"]);r!=null&&d(n,["sdkHttpResponse"],r);let o=c(t,["predictions"]);if(o!=null){let s=o;Array.isArray(s)&&(s=s.map(a=>Tm(a))),d(n,["generatedImages"],s)}let i=c(t,["positivePromptSafetyAttributes"]);return i!=null&&d(n,["positivePromptSafetyAttributes"],lR(i)),n}function O9(t,e,n){let r={},o=c(t,["numberOfVideos"]);if(e!==void 0&&o!=null&&d(e,["parameters","sampleCount"],o),c(t,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(c(t,["fps"])!==void 0)throw new Error("fps parameter is not supported in Gemini API.");let i=c(t,["durationSeconds"]);if(e!==void 0&&i!=null&&d(e,["parameters","durationSeconds"],i),c(t,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");let s=c(t,["aspectRatio"]);e!==void 0&&s!=null&&d(e,["parameters","aspectRatio"],s);let a=c(t,["resolution"]);e!==void 0&&a!=null&&d(e,["parameters","resolution"],a);let l=c(t,["personGeneration"]);if(e!==void 0&&l!=null&&d(e,["parameters","personGeneration"],l),c(t,["pubsubTopic"])!==void 0)throw new Error("pubsubTopic parameter is not supported in Gemini API.");let u=c(t,["negativePrompt"]);e!==void 0&&u!=null&&d(e,["parameters","negativePrompt"],u);let f=c(t,["enhancePrompt"]);if(e!==void 0&&f!=null&&d(e,["parameters","enhancePrompt"],f),c(t,["generateAudio"])!==void 0)throw new Error("generateAudio parameter is not supported in Gemini API.");let p=c(t,["lastFrame"]);e!==void 0&&p!=null&&d(e,["instances[0]","lastFrame"],Sm(p));let m=c(t,["referenceImages"]);if(e!==void 0&&m!=null){let b=m;Array.isArray(b)&&(b=b.map(v=>M8(v))),d(e,["instances[0]","referenceImages"],b)}if(c(t,["mask"])!==void 0)throw new Error("mask parameter is not supported in Gemini API.");if(c(t,["compressionQuality"])!==void 0)throw new Error("compressionQuality parameter is not supported in Gemini API.");return r}function D9(t,e,n){let r={},o=c(t,["numberOfVideos"]);e!==void 0&&o!=null&&d(e,["parameters","sampleCount"],o);let i=c(t,["outputGcsUri"]);e!==void 0&&i!=null&&d(e,["parameters","storageUri"],i);let s=c(t,["fps"]);e!==void 0&&s!=null&&d(e,["parameters","fps"],s);let a=c(t,["durationSeconds"]);e!==void 0&&a!=null&&d(e,["parameters","durationSeconds"],a);let l=c(t,["seed"]);e!==void 0&&l!=null&&d(e,["parameters","seed"],l);let u=c(t,["aspectRatio"]);e!==void 0&&u!=null&&d(e,["parameters","aspectRatio"],u);let f=c(t,["resolution"]);e!==void 0&&f!=null&&d(e,["parameters","resolution"],f);let p=c(t,["personGeneration"]);e!==void 0&&p!=null&&d(e,["parameters","personGeneration"],p);let m=c(t,["pubsubTopic"]);e!==void 0&&m!=null&&d(e,["parameters","pubsubTopic"],m);let b=c(t,["negativePrompt"]);e!==void 0&&b!=null&&d(e,["parameters","negativePrompt"],b);let v=c(t,["enhancePrompt"]);e!==void 0&&v!=null&&d(e,["parameters","enhancePrompt"],v);let w=c(t,["generateAudio"]);e!==void 0&&w!=null&&d(e,["parameters","generateAudio"],w);let _=c(t,["lastFrame"]);e!==void 0&&_!=null&&d(e,["instances[0]","lastFrame"],xr(_));let T=c(t,["referenceImages"]);if(e!==void 0&&T!=null){let D=T;Array.isArray(D)&&(D=D.map(x=>F8(x))),d(e,["instances[0]","referenceImages"],D)}let R=c(t,["mask"]);e!==void 0&&R!=null&&d(e,["instances[0]","mask"],D8(R));let L=c(t,["compressionQuality"]);return e!==void 0&&L!=null&&d(e,["parameters","compressionQuality"],L),r}function M9(t,e){let n={},r=c(t,["name"]);r!=null&&d(n,["name"],r);let o=c(t,["metadata"]);o!=null&&d(n,["metadata"],o);let i=c(t,["done"]);i!=null&&d(n,["done"],i);let s=c(t,["error"]);s!=null&&d(n,["error"],s);let a=c(t,["response","generateVideoResponse"]);return a!=null&&d(n,["response"],B9(a)),n}function F9(t,e){let n={},r=c(t,["name"]);r!=null&&d(n,["name"],r);let o=c(t,["metadata"]);o!=null&&d(n,["metadata"],o);let i=c(t,["done"]);i!=null&&d(n,["done"],i);let s=c(t,["error"]);s!=null&&d(n,["error"],s);let a=c(t,["response"]);return a!=null&&d(n,["response"],G9(a)),n}function L9(t,e,n){let r={},o=c(e,["model"]);o!=null&&d(r,["_url","model"],Be(t,o));let i=c(e,["prompt"]);i!=null&&d(r,["instances[0]","prompt"],i);let s=c(e,["image"]);s!=null&&d(r,["instances[0]","image"],Sm(s));let a=c(e,["video"]);a!=null&&d(r,["instances[0]","video"],cR(a));let l=c(e,["source"]);l!=null&&H9(l,r);let u=c(e,["config"]);return u!=null&&O9(u,r),r}function U9(t,e,n){let r={},o=c(e,["model"]);o!=null&&d(r,["_url","model"],Be(t,o));let i=c(e,["prompt"]);i!=null&&d(r,["instances[0]","prompt"],i);let s=c(e,["image"]);s!=null&&d(r,["instances[0]","image"],xr(s));let a=c(e,["video"]);a!=null&&d(r,["instances[0]","video"],fR(a));let l=c(e,["source"]);l!=null&&q9(l,r);let u=c(e,["config"]);return u!=null&&D9(u,r),r}function B9(t,e){let n={},r=c(t,["generatedSamples"]);if(r!=null){let s=r;Array.isArray(s)&&(s=s.map(a=>j9(a))),d(n,["generatedVideos"],s)}let o=c(t,["raiMediaFilteredCount"]);o!=null&&d(n,["raiMediaFilteredCount"],o);let i=c(t,["raiMediaFilteredReasons"]);return i!=null&&d(n,["raiMediaFilteredReasons"],i),n}function G9(t,e){let n={},r=c(t,["videos"]);if(r!=null){let s=r;Array.isArray(s)&&(s=s.map(a=>W9(a))),d(n,["generatedVideos"],s)}let o=c(t,["raiMediaFilteredCount"]);o!=null&&d(n,["raiMediaFilteredCount"],o);let i=c(t,["raiMediaFilteredReasons"]);return i!=null&&d(n,["raiMediaFilteredReasons"],i),n}function H9(t,e,n){let r={},o=c(t,["prompt"]);e!==void 0&&o!=null&&d(e,["instances[0]","prompt"],o);let i=c(t,["image"]);e!==void 0&&i!=null&&d(e,["instances[0]","image"],Sm(i));let s=c(t,["video"]);return e!==void 0&&s!=null&&d(e,["instances[0]","video"],cR(s)),r}function q9(t,e,n){let r={},o=c(t,["prompt"]);e!==void 0&&o!=null&&d(e,["instances[0]","prompt"],o);let i=c(t,["image"]);e!==void 0&&i!=null&&d(e,["instances[0]","image"],xr(i));let s=c(t,["video"]);return e!==void 0&&s!=null&&d(e,["instances[0]","video"],fR(s)),r}function $9(t,e){let n={},r=c(t,["_self"]);r!=null&&d(n,["image"],e8(r));let o=c(t,["raiFilteredReason"]);o!=null&&d(n,["raiFilteredReason"],o);let i=c(t,["_self"]);return i!=null&&d(n,["safetyAttributes"],aR(i)),n}function Tm(t,e){let n={},r=c(t,["_self"]);r!=null&&d(n,["image"],sR(r));let o=c(t,["raiFilteredReason"]);o!=null&&d(n,["raiFilteredReason"],o);let i=c(t,["_self"]);i!=null&&d(n,["safetyAttributes"],lR(i));let s=c(t,["prompt"]);return s!=null&&d(n,["enhancedPrompt"],s),n}function V9(t,e){let n={},r=c(t,["_self"]);r!=null&&d(n,["mask"],sR(r));let o=c(t,["labels"]);if(o!=null){let i=o;Array.isArray(i)&&(i=i.map(s=>s)),d(n,["labels"],i)}return n}function j9(t,e){let n={},r=c(t,["video"]);return r!=null&&d(n,["video"],N8(r)),n}function W9(t,e){let n={},r=c(t,["_self"]);return r!=null&&d(n,["video"],O8(r)),n}function z9(t,e){let n={},r=c(t,["modelSelectionConfig"]);r!=null&&d(n,["modelConfig"],r);let o=c(t,["responseJsonSchema"]);o!=null&&d(n,["responseJsonSchema"],o);let i=c(t,["audioTimestamp"]);i!=null&&d(n,["audioTimestamp"],i);let s=c(t,["candidateCount"]);s!=null&&d(n,["candidateCount"],s);let a=c(t,["enableAffectiveDialog"]);a!=null&&d(n,["enableAffectiveDialog"],a);let l=c(t,["frequencyPenalty"]);l!=null&&d(n,["frequencyPenalty"],l);let u=c(t,["logprobs"]);u!=null&&d(n,["logprobs"],u);let f=c(t,["maxOutputTokens"]);f!=null&&d(n,["maxOutputTokens"],f);let p=c(t,["mediaResolution"]);p!=null&&d(n,["mediaResolution"],p);let m=c(t,["presencePenalty"]);m!=null&&d(n,["presencePenalty"],m);let b=c(t,["responseLogprobs"]);b!=null&&d(n,["responseLogprobs"],b);let v=c(t,["responseMimeType"]);v!=null&&d(n,["responseMimeType"],v);let w=c(t,["responseModalities"]);w!=null&&d(n,["responseModalities"],w);let _=c(t,["responseSchema"]);_!=null&&d(n,["responseSchema"],_);let T=c(t,["routingConfig"]);T!=null&&d(n,["routingConfig"],T);let R=c(t,["seed"]);R!=null&&d(n,["seed"],R);let L=c(t,["speechConfig"]);L!=null&&d(n,["speechConfig"],L);let D=c(t,["stopSequences"]);D!=null&&d(n,["stopSequences"],D);let x=c(t,["temperature"]);x!=null&&d(n,["temperature"],x);let P=c(t,["thinkingConfig"]);P!=null&&d(n,["thinkingConfig"],P);let V=c(t,["topK"]);V!=null&&d(n,["topK"],V);let J=c(t,["topP"]);if(J!=null&&d(n,["topP"],J),c(t,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return n}function J9(t,e,n){let r={},o=c(e,["model"]);return o!=null&&d(r,["_url","name"],Be(t,o)),r}function K9(t,e,n){let r={},o=c(e,["model"]);return o!=null&&d(r,["_url","name"],Be(t,o)),r}function Y9(t,e){let n={};if(c(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");let r=c(t,["enableWidget"]);return r!=null&&d(n,["enableWidget"],r),n}function X9(t,e){let n={};if(c(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(c(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");let r=c(t,["timeRangeFilter"]);return r!=null&&d(n,["timeRangeFilter"],r),n}function Q9(t,e){let n={},r=c(t,["aspectRatio"]);r!=null&&d(n,["aspectRatio"],r);let o=c(t,["imageSize"]);if(o!=null&&d(n,["imageSize"],o),c(t,["personGeneration"])!==void 0)throw new Error("personGeneration parameter is not supported in Gemini API.");if(c(t,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(c(t,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return n}function Z9(t,e){let n={},r=c(t,["aspectRatio"]);r!=null&&d(n,["aspectRatio"],r);let o=c(t,["imageSize"]);o!=null&&d(n,["imageSize"],o);let i=c(t,["personGeneration"]);i!=null&&d(n,["personGeneration"],i);let s=c(t,["outputMimeType"]);s!=null&&d(n,["imageOutputOptions","mimeType"],s);let a=c(t,["outputCompressionQuality"]);return a!=null&&d(n,["imageOutputOptions","compressionQuality"],a),n}function e8(t,e){let n={},r=c(t,["bytesBase64Encoded"]);r!=null&&d(n,["imageBytes"],Vi(r));let o=c(t,["mimeType"]);return o!=null&&d(n,["mimeType"],o),n}function sR(t,e){let n={},r=c(t,["gcsUri"]);r!=null&&d(n,["gcsUri"],r);let o=c(t,["bytesBase64Encoded"]);o!=null&&d(n,["imageBytes"],Vi(o));let i=c(t,["mimeType"]);return i!=null&&d(n,["mimeType"],i),n}function Sm(t,e){let n={};if(c(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");let r=c(t,["imageBytes"]);r!=null&&d(n,["bytesBase64Encoded"],Vi(r));let o=c(t,["mimeType"]);return o!=null&&d(n,["mimeType"],o),n}function xr(t,e){let n={},r=c(t,["gcsUri"]);r!=null&&d(n,["gcsUri"],r);let o=c(t,["imageBytes"]);o!=null&&d(n,["bytesBase64Encoded"],Vi(o));let i=c(t,["mimeType"]);return i!=null&&d(n,["mimeType"],i),n}function t8(t,e,n,r){let o={},i=c(e,["pageSize"]);n!==void 0&&i!=null&&d(n,["_query","pageSize"],i);let s=c(e,["pageToken"]);n!==void 0&&s!=null&&d(n,["_query","pageToken"],s);let a=c(e,["filter"]);n!==void 0&&a!=null&&d(n,["_query","filter"],a);let l=c(e,["queryBase"]);return n!==void 0&&l!=null&&d(n,["_url","models_url"],Zk(t,l)),o}function n8(t,e,n,r){let o={},i=c(e,["pageSize"]);n!==void 0&&i!=null&&d(n,["_query","pageSize"],i);let s=c(e,["pageToken"]);n!==void 0&&s!=null&&d(n,["_query","pageToken"],s);let a=c(e,["filter"]);n!==void 0&&a!=null&&d(n,["_query","filter"],a);let l=c(e,["queryBase"]);return n!==void 0&&l!=null&&d(n,["_url","models_url"],Zk(t,l)),o}function r8(t,e,n){let r={},o=c(e,["config"]);return o!=null&&t8(t,o,r),r}function o8(t,e,n){let r={},o=c(e,["config"]);return o!=null&&n8(t,o,r),r}function i8(t,e){let n={},r=c(t,["sdkHttpResponse"]);r!=null&&d(n,["sdkHttpResponse"],r);let o=c(t,["nextPageToken"]);o!=null&&d(n,["nextPageToken"],o);let i=c(t,["_self"]);if(i!=null){let s=eR(i);Array.isArray(s)&&(s=s.map(a=>ww(a))),d(n,["models"],s)}return n}function s8(t,e){let n={},r=c(t,["sdkHttpResponse"]);r!=null&&d(n,["sdkHttpResponse"],r);let o=c(t,["nextPageToken"]);o!=null&&d(n,["nextPageToken"],o);let i=c(t,["_self"]);if(i!=null){let s=eR(i);Array.isArray(s)&&(s=s.map(a=>_w(a))),d(n,["models"],s)}return n}function a8(t,e){let n={},r=c(t,["maskMode"]);r!=null&&d(n,["maskMode"],r);let o=c(t,["segmentationClasses"]);o!=null&&d(n,["maskClasses"],o);let i=c(t,["maskDilation"]);return i!=null&&d(n,["dilation"],i),n}function ww(t,e){let n={},r=c(t,["name"]);r!=null&&d(n,["name"],r);let o=c(t,["displayName"]);o!=null&&d(n,["displayName"],o);let i=c(t,["description"]);i!=null&&d(n,["description"],i);let s=c(t,["version"]);s!=null&&d(n,["version"],s);let a=c(t,["_self"]);a!=null&&d(n,["tunedModelInfo"],A8(a));let l=c(t,["inputTokenLimit"]);l!=null&&d(n,["inputTokenLimit"],l);let u=c(t,["outputTokenLimit"]);u!=null&&d(n,["outputTokenLimit"],u);let f=c(t,["supportedGenerationMethods"]);f!=null&&d(n,["supportedActions"],f);let p=c(t,["temperature"]);p!=null&&d(n,["temperature"],p);let m=c(t,["maxTemperature"]);m!=null&&d(n,["maxTemperature"],m);let b=c(t,["topP"]);b!=null&&d(n,["topP"],b);let v=c(t,["topK"]);v!=null&&d(n,["topK"],v);let w=c(t,["thinking"]);return w!=null&&d(n,["thinking"],w),n}function _w(t,e){let n={},r=c(t,["name"]);r!=null&&d(n,["name"],r);let o=c(t,["displayName"]);o!=null&&d(n,["displayName"],o);let i=c(t,["description"]);i!=null&&d(n,["description"],i);let s=c(t,["versionId"]);s!=null&&d(n,["version"],s);let a=c(t,["deployedModels"]);if(a!=null){let m=a;Array.isArray(m)&&(m=m.map(b=>w9(b))),d(n,["endpoints"],m)}let l=c(t,["labels"]);l!=null&&d(n,["labels"],l);let u=c(t,["_self"]);u!=null&&d(n,["tunedModelInfo"],C8(u));let f=c(t,["defaultCheckpointId"]);f!=null&&d(n,["defaultCheckpointId"],f);let p=c(t,["checkpoints"]);if(p!=null){let m=p;Array.isArray(m)&&(m=m.map(b=>b)),d(n,["checkpoints"],m)}return n}function l8(t,e){let n={},r=c(t,["mediaResolution"]);r!=null&&d(n,["mediaResolution"],r);let o=c(t,["codeExecutionResult"]);o!=null&&d(n,["codeExecutionResult"],o);let i=c(t,["executableCode"]);i!=null&&d(n,["executableCode"],i);let s=c(t,["fileData"]);s!=null&&d(n,["fileData"],_9(s));let a=c(t,["functionCall"]);a!=null&&d(n,["functionCall"],E9(a));let l=c(t,["functionResponse"]);l!=null&&d(n,["functionResponse"],l);let u=c(t,["inlineData"]);u!=null&&d(n,["inlineData"],zJ(u));let f=c(t,["text"]);f!=null&&d(n,["text"],f);let p=c(t,["thought"]);p!=null&&d(n,["thought"],p);let m=c(t,["thoughtSignature"]);m!=null&&d(n,["thoughtSignature"],m);let b=c(t,["videoMetadata"]);return b!=null&&d(n,["videoMetadata"],b),n}function u8(t,e){let n={},r=c(t,["productImage"]);return r!=null&&d(n,["image"],xr(r)),n}function c8(t,e,n){let r={},o=c(t,["numberOfImages"]);e!==void 0&&o!=null&&d(e,["parameters","sampleCount"],o);let i=c(t,["baseSteps"]);e!==void 0&&i!=null&&d(e,["parameters","baseSteps"],i);let s=c(t,["outputGcsUri"]);e!==void 0&&s!=null&&d(e,["parameters","storageUri"],s);let a=c(t,["seed"]);e!==void 0&&a!=null&&d(e,["parameters","seed"],a);let l=c(t,["safetyFilterLevel"]);e!==void 0&&l!=null&&d(e,["parameters","safetySetting"],l);let u=c(t,["personGeneration"]);e!==void 0&&u!=null&&d(e,["parameters","personGeneration"],u);let f=c(t,["addWatermark"]);e!==void 0&&f!=null&&d(e,["parameters","addWatermark"],f);let p=c(t,["outputMimeType"]);e!==void 0&&p!=null&&d(e,["parameters","outputOptions","mimeType"],p);let m=c(t,["outputCompressionQuality"]);e!==void 0&&m!=null&&d(e,["parameters","outputOptions","compressionQuality"],m);let b=c(t,["enhancePrompt"]);e!==void 0&&b!=null&&d(e,["parameters","enhancePrompt"],b);let v=c(t,["labels"]);return e!==void 0&&v!=null&&d(e,["labels"],v),r}function f8(t,e,n){let r={},o=c(e,["model"]);o!=null&&d(r,["_url","model"],Be(t,o));let i=c(e,["source"]);i!=null&&h8(i,r);let s=c(e,["config"]);return s!=null&&c8(s,r),r}function d8(t,e){let n={},r=c(t,["predictions"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(i=>Tm(i))),d(n,["generatedImages"],o)}return n}function h8(t,e,n){let r={},o=c(t,["prompt"]);e!==void 0&&o!=null&&d(e,["instances[0]","prompt"],o);let i=c(t,["personImage"]);e!==void 0&&i!=null&&d(e,["instances[0]","personImage","image"],xr(i));let s=c(t,["productImages"]);if(e!==void 0&&s!=null){let a=s;Array.isArray(a)&&(a=a.map(l=>u8(l))),d(e,["instances[0]","productImages"],a)}return r}function p8(t,e){let n={},r=c(t,["referenceImage"]);r!=null&&d(n,["referenceImage"],xr(r));let o=c(t,["referenceId"]);o!=null&&d(n,["referenceId"],o);let i=c(t,["referenceType"]);i!=null&&d(n,["referenceType"],i);let s=c(t,["maskImageConfig"]);s!=null&&d(n,["maskImageConfig"],a8(s));let a=c(t,["controlImageConfig"]);a!=null&&d(n,["controlImageConfig"],e9(a));let l=c(t,["styleImageConfig"]);l!=null&&d(n,["styleImageConfig"],l);let u=c(t,["subjectImageConfig"]);return u!=null&&d(n,["subjectImageConfig"],u),n}function aR(t,e){let n={},r=c(t,["safetyAttributes","categories"]);r!=null&&d(n,["categories"],r);let o=c(t,["safetyAttributes","scores"]);o!=null&&d(n,["scores"],o);let i=c(t,["contentType"]);return i!=null&&d(n,["contentType"],i),n}function lR(t,e){let n={},r=c(t,["safetyAttributes","categories"]);r!=null&&d(n,["categories"],r);let o=c(t,["safetyAttributes","scores"]);o!=null&&d(n,["scores"],o);let i=c(t,["contentType"]);return i!=null&&d(n,["contentType"],i),n}function m8(t,e){let n={},r=c(t,["category"]);if(r!=null&&d(n,["category"],r),c(t,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");let o=c(t,["threshold"]);return o!=null&&d(n,["threshold"],o),n}function g8(t,e){let n={},r=c(t,["image"]);return r!=null&&d(n,["image"],xr(r)),n}function y8(t,e,n){let r={},o=c(t,["mode"]);e!==void 0&&o!=null&&d(e,["parameters","mode"],o);let i=c(t,["maxPredictions"]);e!==void 0&&i!=null&&d(e,["parameters","maxPredictions"],i);let s=c(t,["confidenceThreshold"]);e!==void 0&&s!=null&&d(e,["parameters","confidenceThreshold"],s);let a=c(t,["maskDilation"]);e!==void 0&&a!=null&&d(e,["parameters","maskDilation"],a);let l=c(t,["binaryColorThreshold"]);e!==void 0&&l!=null&&d(e,["parameters","binaryColorThreshold"],l);let u=c(t,["labels"]);return e!==void 0&&u!=null&&d(e,["labels"],u),r}function b8(t,e,n){let r={},o=c(e,["model"]);o!=null&&d(r,["_url","model"],Be(t,o));let i=c(e,["source"]);i!=null&&w8(i,r);let s=c(e,["config"]);return s!=null&&y8(s,r),r}function v8(t,e){let n={},r=c(t,["predictions"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(i=>V9(i))),d(n,["generatedMasks"],o)}return n}function w8(t,e,n){let r={},o=c(t,["prompt"]);e!==void 0&&o!=null&&d(e,["instances[0]","prompt"],o);let i=c(t,["image"]);e!==void 0&&i!=null&&d(e,["instances[0]","image"],xr(i));let s=c(t,["scribbleImage"]);return e!==void 0&&s!=null&&d(e,["instances[0]","scribble"],g8(s)),r}function _8(t,e){let n={},r=c(t,["retrievalConfig"]);r!=null&&d(n,["retrievalConfig"],r);let o=c(t,["functionCallingConfig"]);return o!=null&&d(n,["functionCallingConfig"],A9(o)),n}function E8(t,e){let n={};if(c(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");let r=c(t,["computerUse"]);r!=null&&d(n,["computerUse"],r);let o=c(t,["fileSearch"]);o!=null&&d(n,["fileSearch"],o);let i=c(t,["codeExecution"]);if(i!=null&&d(n,["codeExecution"],i),c(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");let s=c(t,["functionDeclarations"]);if(s!=null){let p=s;Array.isArray(p)&&(p=p.map(m=>m)),d(n,["functionDeclarations"],p)}let a=c(t,["googleMaps"]);a!=null&&d(n,["googleMaps"],Y9(a));let l=c(t,["googleSearch"]);l!=null&&d(n,["googleSearch"],X9(l));let u=c(t,["googleSearchRetrieval"]);u!=null&&d(n,["googleSearchRetrieval"],u);let f=c(t,["urlContext"]);return f!=null&&d(n,["urlContext"],f),n}function uR(t,e){let n={},r=c(t,["retrieval"]);r!=null&&d(n,["retrieval"],r);let o=c(t,["computerUse"]);if(o!=null&&d(n,["computerUse"],o),c(t,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");let i=c(t,["codeExecution"]);i!=null&&d(n,["codeExecution"],i);let s=c(t,["enterpriseWebSearch"]);s!=null&&d(n,["enterpriseWebSearch"],s);let a=c(t,["functionDeclarations"]);if(a!=null){let m=a;Array.isArray(m)&&(m=m.map(b=>C9(b))),d(n,["functionDeclarations"],m)}let l=c(t,["googleMaps"]);l!=null&&d(n,["googleMaps"],l);let u=c(t,["googleSearch"]);u!=null&&d(n,["googleSearch"],u);let f=c(t,["googleSearchRetrieval"]);f!=null&&d(n,["googleSearchRetrieval"],f);let p=c(t,["urlContext"]);return p!=null&&d(n,["urlContext"],p),n}function A8(t,e){let n={},r=c(t,["baseModel"]);r!=null&&d(n,["baseModel"],r);let o=c(t,["createTime"]);o!=null&&d(n,["createTime"],o);let i=c(t,["updateTime"]);return i!=null&&d(n,["updateTime"],i),n}function C8(t,e){let n={},r=c(t,["labels","google-vertex-llm-tuning-base-model-id"]);r!=null&&d(n,["baseModel"],r);let o=c(t,["createTime"]);o!=null&&d(n,["createTime"],o);let i=c(t,["updateTime"]);return i!=null&&d(n,["updateTime"],i),n}function T8(t,e,n){let r={},o=c(t,["displayName"]);e!==void 0&&o!=null&&d(e,["displayName"],o);let i=c(t,["description"]);e!==void 0&&i!=null&&d(e,["description"],i);let s=c(t,["defaultCheckpointId"]);return e!==void 0&&s!=null&&d(e,["defaultCheckpointId"],s),r}function S8(t,e,n){let r={},o=c(t,["displayName"]);e!==void 0&&o!=null&&d(e,["displayName"],o);let i=c(t,["description"]);e!==void 0&&i!=null&&d(e,["description"],i);let s=c(t,["defaultCheckpointId"]);return e!==void 0&&s!=null&&d(e,["defaultCheckpointId"],s),r}function P8(t,e,n){let r={},o=c(e,["model"]);o!=null&&d(r,["_url","name"],Be(t,o));let i=c(e,["config"]);return i!=null&&T8(i,r),r}function I8(t,e,n){let r={},o=c(e,["model"]);o!=null&&d(r,["_url","model"],Be(t,o));let i=c(e,["config"]);return i!=null&&S8(i,r),r}function x8(t,e,n){let r={},o=c(t,["outputGcsUri"]);e!==void 0&&o!=null&&d(e,["parameters","storageUri"],o);let i=c(t,["safetyFilterLevel"]);e!==void 0&&i!=null&&d(e,["parameters","safetySetting"],i);let s=c(t,["personGeneration"]);e!==void 0&&s!=null&&d(e,["parameters","personGeneration"],s);let a=c(t,["includeRaiReason"]);e!==void 0&&a!=null&&d(e,["parameters","includeRaiReason"],a);let l=c(t,["outputMimeType"]);e!==void 0&&l!=null&&d(e,["parameters","outputOptions","mimeType"],l);let u=c(t,["outputCompressionQuality"]);e!==void 0&&u!=null&&d(e,["parameters","outputOptions","compressionQuality"],u);let f=c(t,["enhanceInputImage"]);e!==void 0&&f!=null&&d(e,["parameters","upscaleConfig","enhanceInputImage"],f);let p=c(t,["imagePreservationFactor"]);e!==void 0&&p!=null&&d(e,["parameters","upscaleConfig","imagePreservationFactor"],p);let m=c(t,["labels"]);e!==void 0&&m!=null&&d(e,["labels"],m);let b=c(t,["numberOfImages"]);e!==void 0&&b!=null&&d(e,["parameters","sampleCount"],b);let v=c(t,["mode"]);return e!==void 0&&v!=null&&d(e,["parameters","mode"],v),r}function k8(t,e,n){let r={},o=c(e,["model"]);o!=null&&d(r,["_url","model"],Be(t,o));let i=c(e,["image"]);i!=null&&d(r,["instances[0]","image"],xr(i));let s=c(e,["upscaleFactor"]);s!=null&&d(r,["parameters","upscaleConfig","upscaleFactor"],s);let a=c(e,["config"]);return a!=null&&x8(a,r),r}function R8(t,e){let n={},r=c(t,["sdkHttpResponse"]);r!=null&&d(n,["sdkHttpResponse"],r);let o=c(t,["predictions"]);if(o!=null){let i=o;Array.isArray(i)&&(i=i.map(s=>Tm(s))),d(n,["generatedImages"],i)}return n}function N8(t,e){let n={},r=c(t,["uri"]);r!=null&&d(n,["uri"],r);let o=c(t,["encodedVideo"]);o!=null&&d(n,["videoBytes"],Vi(o));let i=c(t,["encoding"]);return i!=null&&d(n,["mimeType"],i),n}function O8(t,e){let n={},r=c(t,["gcsUri"]);r!=null&&d(n,["uri"],r);let o=c(t,["bytesBase64Encoded"]);o!=null&&d(n,["videoBytes"],Vi(o));let i=c(t,["mimeType"]);return i!=null&&d(n,["mimeType"],i),n}function D8(t,e){let n={},r=c(t,["image"]);r!=null&&d(n,["_self"],xr(r));let o=c(t,["maskMode"]);return o!=null&&d(n,["maskMode"],o),n}function M8(t,e){let n={},r=c(t,["image"]);r!=null&&d(n,["image"],Sm(r));let o=c(t,["referenceType"]);return o!=null&&d(n,["referenceType"],o),n}function F8(t,e){let n={},r=c(t,["image"]);r!=null&&d(n,["image"],xr(r));let o=c(t,["referenceType"]);return o!=null&&d(n,["referenceType"],o),n}function cR(t,e){let n={},r=c(t,["uri"]);r!=null&&d(n,["uri"],r);let o=c(t,["videoBytes"]);o!=null&&d(n,["encodedVideo"],Vi(o));let i=c(t,["mimeType"]);return i!=null&&d(n,["encoding"],i),n}function fR(t,e){let n={},r=c(t,["uri"]);r!=null&&d(n,["gcsUri"],r);let o=c(t,["videoBytes"]);o!=null&&d(n,["bytesBase64Encoded"],Vi(o));let i=c(t,["mimeType"]);return i!=null&&d(n,["mimeType"],i),n}function L8(t,e){let n={},r=c(t,["displayName"]);return e!==void 0&&r!=null&&d(e,["displayName"],r),n}function U8(t){let e={},n=c(t,["config"]);return n!=null&&L8(n,e),e}function B8(t,e){let n={},r=c(t,["force"]);return e!==void 0&&r!=null&&d(e,["_query","force"],r),n}function G8(t){let e={},n=c(t,["name"]);n!=null&&d(e,["_url","name"],n);let r=c(t,["config"]);return r!=null&&B8(r,e),e}function H8(t){let e={},n=c(t,["name"]);return n!=null&&d(e,["_url","name"],n),e}function q8(t,e){let n={},r=c(t,["customMetadata"]);if(e!==void 0&&r!=null){let i=r;Array.isArray(i)&&(i=i.map(s=>s)),d(e,["customMetadata"],i)}let o=c(t,["chunkingConfig"]);return e!==void 0&&o!=null&&d(e,["chunkingConfig"],o),n}function $8(t){let e={},n=c(t,["name"]);n!=null&&d(e,["name"],n);let r=c(t,["metadata"]);r!=null&&d(e,["metadata"],r);let o=c(t,["done"]);o!=null&&d(e,["done"],o);let i=c(t,["error"]);i!=null&&d(e,["error"],i);let s=c(t,["response"]);return s!=null&&d(e,["response"],j8(s)),e}function V8(t){let e={},n=c(t,["fileSearchStoreName"]);n!=null&&d(e,["_url","file_search_store_name"],n);let r=c(t,["fileName"]);r!=null&&d(e,["fileName"],r);let o=c(t,["config"]);return o!=null&&q8(o,e),e}function j8(t){let e={},n=c(t,["sdkHttpResponse"]);n!=null&&d(e,["sdkHttpResponse"],n);let r=c(t,["parent"]);r!=null&&d(e,["parent"],r);let o=c(t,["documentName"]);return o!=null&&d(e,["documentName"],o),e}function W8(t,e){let n={},r=c(t,["pageSize"]);e!==void 0&&r!=null&&d(e,["_query","pageSize"],r);let o=c(t,["pageToken"]);return e!==void 0&&o!=null&&d(e,["_query","pageToken"],o),n}function z8(t){let e={},n=c(t,["config"]);return n!=null&&W8(n,e),e}function J8(t){let e={},n=c(t,["sdkHttpResponse"]);n!=null&&d(e,["sdkHttpResponse"],n);let r=c(t,["nextPageToken"]);r!=null&&d(e,["nextPageToken"],r);let o=c(t,["fileSearchStores"]);if(o!=null){let i=o;Array.isArray(i)&&(i=i.map(s=>s)),d(e,["fileSearchStores"],i)}return e}function dR(t,e){let n={},r=c(t,["mimeType"]);e!==void 0&&r!=null&&d(e,["mimeType"],r);let o=c(t,["displayName"]);e!==void 0&&o!=null&&d(e,["displayName"],o);let i=c(t,["customMetadata"]);if(e!==void 0&&i!=null){let a=i;Array.isArray(a)&&(a=a.map(l=>l)),d(e,["customMetadata"],a)}let s=c(t,["chunkingConfig"]);return e!==void 0&&s!=null&&d(e,["chunkingConfig"],s),n}function K8(t){let e={},n=c(t,["fileSearchStoreName"]);n!=null&&d(e,["_url","file_search_store_name"],n);let r=c(t,["config"]);return r!=null&&dR(r,e),e}function Y8(t){let e={},n=c(t,["sdkHttpResponse"]);return n!=null&&d(e,["sdkHttpResponse"],n),e}var X8="Content-Type",Q8="X-Server-Timeout",Z8="User-Agent",Ew="x-goog-api-client",eK="1.41.0",tK=`google-genai-sdk/${eK}`,nK="v1beta1",rK="v1beta",oK=5,iK=[408,429,500,502,503,504],Aw=class{constructor(e){var n,r,o;this.clientOptions=Object.assign({},e),this.customBaseUrl=(n=e.httpOptions)===null||n===void 0?void 0:n.baseUrl,this.clientOptions.vertexai&&(this.clientOptions.project&&this.clientOptions.location?this.clientOptions.apiKey=void 0:this.clientOptions.apiKey&&(this.clientOptions.project=void 0,this.clientOptions.location=void 0));let i={};if(this.clientOptions.vertexai){if(!this.clientOptions.location&&!this.clientOptions.apiKey&&!this.customBaseUrl&&(this.clientOptions.location="global"),!(this.clientOptions.project&&this.clientOptions.location||this.clientOptions.apiKey)&&!this.customBaseUrl)throw new Error("Authentication is not set up. Please provide either a project and location, or an API key, or a custom base URL.");let a=e.project&&e.location||!!e.apiKey;this.customBaseUrl&&!a?(i.baseUrl=this.customBaseUrl,this.clientOptions.project=void 0,this.clientOptions.location=void 0):this.clientOptions.apiKey||this.clientOptions.location==="global"?i.baseUrl="https://aiplatform.googleapis.com/":this.clientOptions.project&&this.clientOptions.location&&(i.baseUrl=`https://${this.clientOptions.location}-aiplatform.googleapis.com/`),i.apiVersion=(r=this.clientOptions.apiVersion)!==null&&r!==void 0?r:nK}else{if(!this.clientOptions.apiKey)throw new hf({message:"API key must be set when using the Gemini API.",status:403});i.apiVersion=(o=this.clientOptions.apiVersion)!==null&&o!==void 0?o:rK,i.baseUrl="https://generativelanguage.googleapis.com/"}i.headers=this.getDefaultHeaders(),this.clientOptions.httpOptions=i,e.httpOptions&&(this.clientOptions.httpOptions=this.patchHttpOptions(i,e.httpOptions))}isVertexAI(){var e;return(e=this.clientOptions.vertexai)!==null&&e!==void 0?e:!1}getProject(){return this.clientOptions.project}getLocation(){return this.clientOptions.location}getCustomBaseUrl(){return this.customBaseUrl}async getAuthHeaders(){let e=new Headers;return await this.clientOptions.auth.addAuthHeaders(e),e}getApiVersion(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.apiVersion!==void 0)return this.clientOptions.httpOptions.apiVersion;throw new Error("API version is not set.")}getBaseUrl(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.baseUrl!==void 0)return this.clientOptions.httpOptions.baseUrl;throw new Error("Base URL is not set.")}getRequestUrl(){return this.getRequestUrlInternal(this.clientOptions.httpOptions)}getHeaders(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.headers!==void 0)return this.clientOptions.httpOptions.headers;throw new Error("Headers are not set.")}getRequestUrlInternal(e){if(!e||e.baseUrl===void 0||e.apiVersion===void 0)throw new Error("HTTP options are not correctly set.");let r=[e.baseUrl.endsWith("/")?e.baseUrl.slice(0,-1):e.baseUrl];return e.apiVersion&&e.apiVersion!==""&&r.push(e.apiVersion),r.join("/")}getBaseResourcePath(){return`projects/${this.clientOptions.project}/locations/${this.clientOptions.location}`}getApiKey(){return this.clientOptions.apiKey}getWebsocketBaseUrl(){let e=this.getBaseUrl(),n=new URL(e);return n.protocol=n.protocol=="http:"?"ws":"wss",n.toString()}setBaseUrl(e){if(this.clientOptions.httpOptions)this.clientOptions.httpOptions.baseUrl=e;else throw new Error("HTTP options are not correctly set.")}constructUrl(e,n,r){let o=[this.getRequestUrlInternal(n)];return r&&o.push(this.getBaseResourcePath()),e!==""&&o.push(e),new URL(`${o.join("/")}`)}shouldPrependVertexProjectPath(e,n){return!(n.baseUrl&&n.baseUrlResourceScope===Xv.COLLECTION||this.clientOptions.apiKey||!this.clientOptions.vertexai||e.path.startsWith("projects/")||e.httpMethod==="GET"&&e.path.startsWith("publishers/google/models"))}async request(e){let n=this.clientOptions.httpOptions;e.httpOptions&&(n=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));let r=this.shouldPrependVertexProjectPath(e,n),o=this.constructUrl(e.path,n,r);if(e.queryParams)for(let[s,a]of Object.entries(e.queryParams))o.searchParams.append(s,String(a));let i={};if(e.httpMethod==="GET"){if(e.body&&e.body!=="{}")throw new Error("Request body should be empty for GET request, but got non empty request body")}else i.body=e.body;return i=await this.includeExtraHttpOptionsToRequestInit(i,n,o.toString(),e.abortSignal),this.unaryApiCall(o,i,e.httpMethod)}patchHttpOptions(e,n){let r=JSON.parse(JSON.stringify(e));for(let[o,i]of Object.entries(n))typeof i=="object"?r[o]=Object.assign(Object.assign({},r[o]),i):i!==void 0&&(r[o]=i);return r}async requestStream(e){let n=this.clientOptions.httpOptions;e.httpOptions&&(n=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));let r=this.shouldPrependVertexProjectPath(e,n),o=this.constructUrl(e.path,n,r);(!o.searchParams.has("alt")||o.searchParams.get("alt")!=="sse")&&o.searchParams.set("alt","sse");let i={};return i.body=e.body,i=await this.includeExtraHttpOptionsToRequestInit(i,n,o.toString(),e.abortSignal),this.streamApiCall(o,i,e.httpMethod)}async includeExtraHttpOptionsToRequestInit(e,n,r,o){if(n&&n.timeout||o){let i=new AbortController,s=i.signal;if(n.timeout&&(n==null?void 0:n.timeout)>0){let a=setTimeout(()=>i.abort(),n.timeout);a&&typeof a.unref=="function"&&a.unref()}o&&o.addEventListener("abort",()=>{i.abort()}),e.signal=s}return n&&n.extraBody!==null&&sK(e,n.extraBody),e.headers=await this.getHeadersInternal(n,r),e}async unaryApiCall(e,n,r){return this.apiCall(e.toString(),Object.assign(Object.assign({},n),{method:r})).then(async o=>(await Sk(o),new la(o))).catch(o=>{throw o instanceof Error?o:new Error(JSON.stringify(o))})}async streamApiCall(e,n,r){return this.apiCall(e.toString(),Object.assign(Object.assign({},n),{method:r})).then(async o=>(await Sk(o),this.processStreamResponse(o))).catch(o=>{throw o instanceof Error?o:new Error(JSON.stringify(o))})}processStreamResponse(e){return Sr(this,arguments,function*(){var r;let o=(r=e==null?void 0:e.body)===null||r===void 0?void 0:r.getReader(),i=new TextDecoder("utf-8");if(!o)throw new Error("Response body is empty");try{let s="",a="data:",l=[`

`,"\r\r",`\r
\r
`];for(;;){let{done:u,value:f}=yield Ce(o.read());if(u){if(s.trim().length>0)throw new Error("Incomplete JSON segment at the end");break}let p=i.decode(f,{stream:!0});try{let v=JSON.parse(p);if("error"in v){let w=JSON.parse(JSON.stringify(v.error)),_=w.status,T=w.code,R=`got status: ${_}. ${JSON.stringify(v)}`;if(T>=400&&T<600)throw new hf({message:R,status:T})}}catch(v){if(v.name==="ApiError")throw v}s+=p;let m=-1,b=0;for(;;){m=-1,b=0;for(let _ of l){let T=s.indexOf(_);T!==-1&&(m===-1||T<m)&&(m=T,b=_.length)}if(m===-1)break;let v=s.substring(0,m);s=s.substring(m+b);let w=v.trim();if(w.startsWith(a)){let _=w.substring(a.length).trim();try{let T=new Response(_,{headers:e==null?void 0:e.headers,status:e==null?void 0:e.status,statusText:e==null?void 0:e.statusText});yield yield Ce(new la(T))}catch(T){throw new Error(`exception parsing stream chunk ${_}. ${T}`)}}}}}finally{o.releaseLock()}})}async apiCall(e,n){var r;if(!this.clientOptions.httpOptions||!this.clientOptions.httpOptions.retryOptions)return fetch(e,n);let o=this.clientOptions.httpOptions.retryOptions;return Xy(async()=>{let s=await fetch(e,n);if(s.ok)return s;throw iK.includes(s.status)?new Error(`Retryable HTTP Error: ${s.statusText}`):new gc(`Non-retryable exception ${s.statusText} sending request`)},{retries:((r=o.attempts)!==null&&r!==void 0?r:oK)-1})}getDefaultHeaders(){let e={},n=tK+" "+this.clientOptions.userAgentExtra;return e[Z8]=n,e[Ew]=n,e[X8]="application/json",e}async getHeadersInternal(e,n){let r=new Headers;if(e&&e.headers){for(let[o,i]of Object.entries(e.headers))r.append(o,i);e.timeout&&e.timeout>0&&r.append(Q8,String(Math.ceil(e.timeout/1e3)))}return await this.clientOptions.auth.addAuthHeaders(r,n),r}getFileName(e){var n;let r="";return typeof e=="string"&&(r=e.replace(/[/\\]+$/,""),r=(n=r.split(/[/\\]/).pop())!==null&&n!==void 0?n:""),r}async uploadFile(e,n){var r;let o={};n!=null&&(o.mimeType=n.mimeType,o.name=n.name,o.displayName=n.displayName),o.name&&!o.name.startsWith("files/")&&(o.name=`files/${o.name}`);let i=this.clientOptions.uploader,s=await i.stat(e);o.sizeBytes=String(s.size);let a=(r=n==null?void 0:n.mimeType)!==null&&r!==void 0?r:s.type;if(a===void 0||a==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");o.mimeType=a;let l={file:o},u=this.getFileName(e),f=le("upload/v1beta/files",l._url),p=await this.fetchUploadUrl(f,o.sizeBytes,o.mimeType,u,l,n==null?void 0:n.httpOptions);return i.upload(e,p,this)}async uploadFileToFileSearchStore(e,n,r){var o;let i=this.clientOptions.uploader,s=await i.stat(n),a=String(s.size),l=(o=r==null?void 0:r.mimeType)!==null&&o!==void 0?o:s.type;if(l===void 0||l==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");let u=`upload/v1beta/${e}:uploadToFileSearchStore`,f=this.getFileName(n),p={};r!=null&&dR(r,p);let m=await this.fetchUploadUrl(u,a,l,f,p,r==null?void 0:r.httpOptions);return i.uploadToFileSearchStore(n,m,this)}async downloadFile(e){await this.clientOptions.downloader.download(e,this)}async fetchUploadUrl(e,n,r,o,i,s){var a;let l={};s?l=s:l={apiVersion:"",headers:Object.assign({"Content-Type":"application/json","X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${n}`,"X-Goog-Upload-Header-Content-Type":`${r}`},o?{"X-Goog-Upload-File-Name":o}:{})};let u=await this.request({path:e,body:JSON.stringify(i),httpMethod:"POST",httpOptions:l});if(!u||!(u!=null&&u.headers))throw new Error("Server did not return an HttpResponse or the returned HttpResponse did not have headers.");let f=(a=u==null?void 0:u.headers)===null||a===void 0?void 0:a["x-goog-upload-url"];if(f===void 0)throw new Error("Failed to get upload url. Server did not return the x-google-upload-url in the headers");return f}};async function Sk(t){var e;if(t===void 0)throw new Error("response is undefined");if(!t.ok){let n=t.status,r;!((e=t.headers.get("content-type"))===null||e===void 0)&&e.includes("application/json")?r=await t.json():r={error:{message:await t.text(),code:t.status,status:t.statusText}};let o=JSON.stringify(r);throw n>=400&&n<600?new hf({message:o,status:n}):new Error(o)}}function sK(t,e){if(!e||Object.keys(e).length===0)return;if(t.body instanceof Blob){console.warn("includeExtraBodyToRequestInit: extraBody provided but current request body is a Blob. extraBody will be ignored as merging is not supported for Blob bodies.");return}let n={};if(typeof t.body=="string"&&t.body.length>0)try{let i=JSON.parse(t.body);if(typeof i=="object"&&i!==null&&!Array.isArray(i))n=i;else{console.warn("includeExtraBodyToRequestInit: Original request body is valid JSON but not a non-array object. Skip applying extraBody to the request body.");return}}catch(i){console.warn("includeExtraBodyToRequestInit: Original request body is not valid JSON. Skip applying extraBody to the request body.");return}function r(i,s){let a=Object.assign({},i);for(let l in s)if(Object.prototype.hasOwnProperty.call(s,l)){let u=s[l],f=a[l];u&&typeof u=="object"&&!Array.isArray(u)&&f&&typeof f=="object"&&!Array.isArray(f)?a[l]=r(f,u):(f&&u&&typeof f!=typeof u&&console.warn(`includeExtraBodyToRequestInit:deepMerge: Type mismatch for key "${l}". Original type: ${typeof f}, New type: ${typeof u}. Overwriting.`),a[l]=u)}return a}let o=r(n,e);t.body=JSON.stringify(o)}var aK="mcp_used/unknown",lK=!1;function hR(t){for(let e of t)if(uK(e)||typeof e=="object"&&"inputSchema"in e)return!0;return lK}function pR(t){var e;let n=(e=t[Ew])!==null&&e!==void 0?e:"";t[Ew]=(n+` ${aK}`).trimStart()}function uK(t){return t!==null&&typeof t=="object"&&t instanceof Cw}function cK(t){return Sr(this,arguments,function*(n,r=100){let o,i=0;for(;i<r;){let s=yield Ce(n.listTools({cursor:o}));for(let a of s.tools)yield yield Ce(a),i++;if(!s.nextCursor)break;o=s.nextCursor}})}var Cw=class t{constructor(e=[],n){this.mcpTools=[],this.functionNameToMcpClient={},this.mcpClients=e,this.config=n}static create(e,n){return new t(e,n)}async initialize(){var e,n,r,o;if(this.mcpTools.length>0)return;let i={},s=[];for(let f of this.mcpClients)try{for(var a=!0,l=(n=void 0,Pr(cK(f))),u;u=await l.next(),e=u.done,!e;a=!0){o=u.value,a=!1;let p=o;s.push(p);let m=p.name;if(i[m])throw new Error(`Duplicate function name ${m} found in MCP tools. Please ensure function names are unique.`);i[m]=f}}catch(p){n={error:p}}finally{try{!a&&!e&&(r=l.return)&&await r.call(l)}finally{if(n)throw n.error}}this.mcpTools=s,this.functionNameToMcpClient=i}async tool(){return await this.initialize(),$W(this.mcpTools,this.config)}async callTool(e){await this.initialize();let n=[];for(let r of e)if(r.name in this.functionNameToMcpClient){let o=this.functionNameToMcpClient[r.name],i;this.config.timeout&&(i={timeout:this.config.timeout});let s=await o.callTool({name:r.name,arguments:r.args},void 0,i);n.push({functionResponse:{name:r.name,response:s.isError?{error:s}:s}})}return n}};async function fK(t,e,n){let r=new dw,o;n.data instanceof Blob?o=JSON.parse(await n.data.text()):o=JSON.parse(n.data),Object.assign(r,o),e(r)}var Tw=class{constructor(e,n,r){this.apiClient=e,this.auth=n,this.webSocketFactory=r}async connect(e){var n,r;if(this.apiClient.isVertexAI())throw new Error("Live music is not supported for Vertex AI.");console.warn("Live music generation is experimental and may change in future versions.");let o=this.apiClient.getWebsocketBaseUrl(),i=this.apiClient.getApiVersion(),s=hK(this.apiClient.getDefaultHeaders()),a=this.apiClient.getApiKey(),l=`${o}/ws/google.ai.generativelanguage.${i}.GenerativeService.BidiGenerateMusic?key=${a}`,u=()=>{},f=new Promise(L=>{u=L}),p=e.callbacks,m=function(){u({})},b=this.apiClient,v={onopen:m,onmessage:L=>{fK(b,p.onmessage,L)},onerror:(n=p==null?void 0:p.onerror)!==null&&n!==void 0?n:function(L){},onclose:(r=p==null?void 0:p.onclose)!==null&&r!==void 0?r:function(L){}},w=this.webSocketFactory.create(l,dK(s),v);w.connect(),await f;let R={setup:{model:Be(this.apiClient,e.model)}};return w.send(JSON.stringify(R)),new Sw(w,this.apiClient)}},Sw=class{constructor(e,n){this.conn=e,this.apiClient=n}async setWeightedPrompts(e){if(!e.weightedPrompts||Object.keys(e.weightedPrompts).length===0)throw new Error("Weighted prompts must be set and contain at least one entry.");let n=LJ(e);this.conn.send(JSON.stringify({clientContent:n}))}async setMusicGenerationConfig(e){e.musicGenerationConfig||(e.musicGenerationConfig={});let n=FJ(e);this.conn.send(JSON.stringify(n))}sendPlaybackControl(e){let n={playbackControl:e};this.conn.send(JSON.stringify(n))}play(){this.sendPlaybackControl(au.PLAY)}pause(){this.sendPlaybackControl(au.PAUSE)}stop(){this.sendPlaybackControl(au.STOP)}resetContext(){this.sendPlaybackControl(au.RESET_CONTEXT)}close(){this.conn.close()}};function dK(t){let e={};return t.forEach((n,r)=>{e[r]=n}),e}function hK(t){let e=new Headers;for(let[n,r]of Object.entries(t))e.append(n,r);return e}var pK="FunctionResponse request must have an `id` field from the response of a ToolCall.FunctionalCalls in Google AI.";async function mK(t,e,n){let r=new fw,o;n.data instanceof Blob?o=await n.data.text():n.data instanceof ArrayBuffer?o=new TextDecoder().decode(n.data):o=n.data;let i=JSON.parse(o);if(t.isVertexAI()){let s=GJ(i);Object.assign(r,s)}else Object.assign(r,i);e(r)}var Pw=class{constructor(e,n,r){this.apiClient=e,this.auth=n,this.webSocketFactory=r,this.music=new Tw(this.apiClient,this.auth,this.webSocketFactory)}async connect(e){var n,r,o,i,s,a;if(e.config&&e.config.httpOptions)throw new Error("The Live module does not support httpOptions at request-level in LiveConnectConfig yet. Please use the client-level httpOptions configuration instead.");let l=this.apiClient.getWebsocketBaseUrl(),u=this.apiClient.getApiVersion(),f,p=this.apiClient.getHeaders();e.config&&e.config.tools&&hR(e.config.tools)&&pR(p);let m=bK(p);if(this.apiClient.isVertexAI()){let E=this.apiClient.getProject(),O=this.apiClient.getLocation(),X=this.apiClient.getApiKey(),ee=!!E&&!!O||!!X;this.apiClient.getCustomBaseUrl()&&!ee?f=l:(f=`${l}/ws/google.cloud.aiplatform.${u}.LlmBidiService/BidiGenerateContent`,await this.auth.addAuthHeaders(m,f))}else{let E=this.apiClient.getApiKey(),O="BidiGenerateContent",X="key";E!=null&&E.startsWith("auth_tokens/")&&(console.warn("Warning: Ephemeral token support is experimental and may change in future versions."),u!=="v1alpha"&&console.warn("Warning: The SDK's ephemeral token support is in v1alpha only. Please use const ai = new GoogleGenAI({apiKey: token.name, httpOptions: { apiVersion: 'v1alpha' }}); before session connection."),O="BidiGenerateContentConstrained",X="access_token"),f=`${l}/ws/google.ai.generativelanguage.${u}.GenerativeService.${O}?${X}=${E}`}let b=()=>{},v=new Promise(E=>{b=E}),w=e.callbacks,_=function(){var E;(E=w==null?void 0:w.onopen)===null||E===void 0||E.call(w),b({})},T=this.apiClient,R={onopen:_,onmessage:E=>{mK(T,w.onmessage,E)},onerror:(n=w==null?void 0:w.onerror)!==null&&n!==void 0?n:function(E){},onclose:(r=w==null?void 0:w.onclose)!==null&&r!==void 0?r:function(E){}},L=this.webSocketFactory.create(f,yK(m),R);L.connect(),await v;let D=Be(this.apiClient,e.model);if(this.apiClient.isVertexAI()&&D.startsWith("publishers/")){let E=this.apiClient.getProject(),O=this.apiClient.getLocation();E&&O&&(D=`projects/${E}/locations/${O}/`+D)}let x={};this.apiClient.isVertexAI()&&((o=e.config)===null||o===void 0?void 0:o.responseModalities)===void 0&&(e.config===void 0?e.config={responseModalities:[zp.AUDIO]}:e.config.responseModalities=[zp.AUDIO]),!((i=e.config)===null||i===void 0)&&i.generationConfig&&console.warn("Setting `LiveConnectConfig.generation_config` is deprecated, please set the fields on `LiveConnectConfig` directly. This will become an error in a future version (not before Q3 2025).");let P=(a=(s=e.config)===null||s===void 0?void 0:s.tools)!==null&&a!==void 0?a:[],V=[];for(let E of P)if(this.isCallableTool(E)){let O=E;V.push(await O.tool())}else V.push(E);V.length>0&&(e.config.tools=V);let J={model:D,config:e.config,callbacks:e.callbacks};return this.apiClient.isVertexAI()?x=MJ(this.apiClient,J):x=DJ(this.apiClient,J),delete x.config,L.send(JSON.stringify(x)),new Iw(L,this.apiClient)}isCallableTool(e){return"callTool"in e&&typeof e.callTool=="function"}},gK={turnComplete:!0},Iw=class{constructor(e,n){this.conn=e,this.apiClient=n}tLiveClientContent(e,n){if(n.turns!==null&&n.turns!==void 0){let r=[];try{r=rr(n.turns),e.isVertexAI()||(r=r.map(o=>Cm(o)))}catch(o){throw new Error(`Failed to parse client content "turns", type: '${typeof n.turns}'`)}return{clientContent:{turns:r,turnComplete:n.turnComplete}}}return{clientContent:{turnComplete:n.turnComplete}}}tLiveClienttToolResponse(e,n){let r=[];if(n.functionResponses==null)throw new Error("functionResponses is required.");if(Array.isArray(n.functionResponses)?r=n.functionResponses:r=[n.functionResponses],r.length===0)throw new Error("functionResponses is required.");for(let i of r){if(typeof i!="object"||i===null||!("name"in i)||!("response"in i))throw new Error(`Could not parse function response, type '${typeof i}'.`);if(!e.isVertexAI()&&!("id"in i))throw new Error(pK)}return{toolResponse:{functionResponses:r}}}sendClientContent(e){e=Object.assign(Object.assign({},gK),e);let n=this.tLiveClientContent(this.apiClient,e);this.conn.send(JSON.stringify(n))}sendRealtimeInput(e){let n={};this.apiClient.isVertexAI()?n={realtimeInput:BJ(e)}:n={realtimeInput:UJ(e)},this.conn.send(JSON.stringify(n))}sendToolResponse(e){if(e.functionResponses==null)throw new Error("Tool response parameters are required.");let n=this.tLiveClienttToolResponse(this.apiClient,e);this.conn.send(JSON.stringify(n))}close(){this.conn.close()}};function yK(t){let e={};return t.forEach((n,r)=>{e[r]=n}),e}function bK(t){let e=new Headers;for(let[n,r]of Object.entries(t))e.append(n,r);return e}var Pk=10;function Ik(t){var e,n,r;if(!((e=t==null?void 0:t.automaticFunctionCalling)===null||e===void 0)&&e.disable)return!0;let o=!1;for(let s of(n=t==null?void 0:t.tools)!==null&&n!==void 0?n:[])if(uu(s)){o=!0;break}if(!o)return!0;let i=(r=t==null?void 0:t.automaticFunctionCalling)===null||r===void 0?void 0:r.maximumRemoteCalls;return i&&(i<0||!Number.isInteger(i))||i==0?(console.warn("Invalid maximumRemoteCalls value provided for automatic function calling. Disabled automatic function calling. Please provide a valid integer value greater than 0. maximumRemoteCalls provided:",i),!0):!1}function uu(t){return"callTool"in t&&typeof t.callTool=="function"}function vK(t){var e,n,r;return(r=(n=(e=t.config)===null||e===void 0?void 0:e.tools)===null||n===void 0?void 0:n.some(o=>uu(o)))!==null&&r!==void 0?r:!1}function xk(t){var e;let n=[];return!((e=t==null?void 0:t.config)===null||e===void 0)&&e.tools&&t.config.tools.forEach((r,o)=>{if(uu(r))return;let i=r;i.functionDeclarations&&i.functionDeclarations.length>0&&n.push(o)}),n}function kk(t){var e;return!(!((e=t==null?void 0:t.automaticFunctionCalling)===null||e===void 0)&&e.ignoreCallHistory)}var xw=class extends Ir{constructor(e){super(),this.apiClient=e,this.generateContent=async n=>{var r,o,i,s,a;let l=await this.processParamsMaybeAddMcpUsage(n);if(this.maybeMoveToResponseJsonSchem(n),!vK(n)||Ik(n.config))return await this.generateContentInternal(l);let u=xk(n);if(u.length>0){let w=u.map(_=>`tools[${_}]`).join(", ");throw new Error(`Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations is not yet supported. Incompatible tools found at ${w}.`)}let f,p,m=rr(l.contents),b=(i=(o=(r=l.config)===null||r===void 0?void 0:r.automaticFunctionCalling)===null||o===void 0?void 0:o.maximumRemoteCalls)!==null&&i!==void 0?i:Pk,v=0;for(;v<b&&(f=await this.generateContentInternal(l),!(!f.functionCalls||f.functionCalls.length===0));){let w=f.candidates[0].content,_=[];for(let T of(a=(s=n.config)===null||s===void 0?void 0:s.tools)!==null&&a!==void 0?a:[])if(uu(T)){let L=await T.callTool(f.functionCalls);_.push(...L)}v++,p={role:"user",parts:_},l.contents=rr(l.contents),l.contents.push(w),l.contents.push(p),kk(l.config)&&(m.push(w),m.push(p))}return kk(l.config)&&(f.automaticFunctionCallingHistory=m),f},this.generateContentStream=async n=>{var r,o,i,s,a;if(this.maybeMoveToResponseJsonSchem(n),Ik(n.config)){let p=await this.processParamsMaybeAddMcpUsage(n);return await this.generateContentStreamInternal(p)}let l=xk(n);if(l.length>0){let p=l.map(m=>`tools[${m}]`).join(", ");throw new Error(`Incompatible tools found at ${p}. Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations" is not yet supported.`)}let u=(i=(o=(r=n==null?void 0:n.config)===null||r===void 0?void 0:r.toolConfig)===null||o===void 0?void 0:o.functionCallingConfig)===null||i===void 0?void 0:i.streamFunctionCallArguments,f=(a=(s=n==null?void 0:n.config)===null||s===void 0?void 0:s.automaticFunctionCalling)===null||a===void 0?void 0:a.disable;if(u&&!f)throw new Error("Running in streaming mode with 'streamFunctionCallArguments' enabled, this feature is not compatible with automatic function calling (AFC). Please set 'config.automaticFunctionCalling.disable' to true to disable AFC or leave 'config.toolConfig.functionCallingConfig.streamFunctionCallArguments' to be undefined or set to false to disable streaming function call arguments feature.");return await this.processAfcStream(n)},this.generateImages=async n=>await this.generateImagesInternal(n).then(r=>{var o;let i,s=[];if(r!=null&&r.generatedImages)for(let l of r.generatedImages)l&&(l!=null&&l.safetyAttributes)&&((o=l==null?void 0:l.safetyAttributes)===null||o===void 0?void 0:o.contentType)==="Positive Prompt"?i=l==null?void 0:l.safetyAttributes:s.push(l);let a;return i?a={generatedImages:s,positivePromptSafetyAttributes:i,sdkHttpResponse:r.sdkHttpResponse}:a={generatedImages:s,sdkHttpResponse:r.sdkHttpResponse},a}),this.list=async n=>{var r;let s={config:Object.assign(Object.assign({},{queryBase:!0}),n==null?void 0:n.config)};if(this.apiClient.isVertexAI()&&!s.config.queryBase){if(!((r=s.config)===null||r===void 0)&&r.filter)throw new Error("Filtering tuned models list for Vertex AI is not currently supported");s.config.filter="labels.tune-type:*"}return new Wo(jo.PAGED_ITEM_MODELS,a=>this.listInternal(a),await this.listInternal(s),s)},this.editImage=async n=>{let r={model:n.model,prompt:n.prompt,referenceImages:[],config:n.config};return n.referenceImages&&n.referenceImages&&(r.referenceImages=n.referenceImages.map(o=>o.toReferenceImageAPI())),await this.editImageInternal(r)},this.upscaleImage=async n=>{let r={numberOfImages:1,mode:"upscale"};n.config&&(r=Object.assign(Object.assign({},r),n.config));let o={model:n.model,image:n.image,upscaleFactor:n.upscaleFactor,config:r};return await this.upscaleImageInternal(o)},this.generateVideos=async n=>{var r,o,i,s,a,l;if((n.prompt||n.image||n.video)&&n.source)throw new Error("Source and prompt/image/video are mutually exclusive. Please only use source.");return this.apiClient.isVertexAI()||(!((r=n.video)===null||r===void 0)&&r.uri&&(!((o=n.video)===null||o===void 0)&&o.videoBytes)?n.video={uri:n.video.uri,mimeType:n.video.mimeType}:!((s=(i=n.source)===null||i===void 0?void 0:i.video)===null||s===void 0)&&s.uri&&(!((l=(a=n.source)===null||a===void 0?void 0:a.video)===null||l===void 0)&&l.videoBytes)&&(n.source.video={uri:n.source.video.uri,mimeType:n.source.video.mimeType})),await this.generateVideosInternal(n)}}maybeMoveToResponseJsonSchem(e){e.config&&e.config.responseSchema&&(e.config.responseJsonSchema||Object.keys(e.config.responseSchema).includes("$schema")&&(e.config.responseJsonSchema=e.config.responseSchema,delete e.config.responseSchema))}async processParamsMaybeAddMcpUsage(e){var n,r,o;let i=(n=e.config)===null||n===void 0?void 0:n.tools;if(!i)return e;let s=await Promise.all(i.map(async l=>uu(l)?await l.tool():l)),a={model:e.model,contents:e.contents,config:Object.assign(Object.assign({},e.config),{tools:s})};if(a.config.tools=s,e.config&&e.config.tools&&hR(e.config.tools)){let l=(o=(r=e.config.httpOptions)===null||r===void 0?void 0:r.headers)!==null&&o!==void 0?o:{},u=Object.assign({},l);Object.keys(u).length===0&&(u=this.apiClient.getDefaultHeaders()),pR(u),a.config.httpOptions=Object.assign(Object.assign({},e.config.httpOptions),{headers:u})}return a}async initAfcToolsMap(e){var n,r,o;let i=new Map;for(let s of(r=(n=e.config)===null||n===void 0?void 0:n.tools)!==null&&r!==void 0?r:[])if(uu(s)){let a=s,l=await a.tool();for(let u of(o=l.functionDeclarations)!==null&&o!==void 0?o:[]){if(!u.name)throw new Error("Function declaration name is required.");if(i.has(u.name))throw new Error(`Duplicate tool declaration name: ${u.name}`);i.set(u.name,a)}}return i}async processAfcStream(e){var n,r,o;let i=(o=(r=(n=e.config)===null||n===void 0?void 0:n.automaticFunctionCalling)===null||r===void 0?void 0:r.maximumRemoteCalls)!==null&&o!==void 0?o:Pk,s=!1,a=0,l=await this.initAfcToolsMap(e);return function(u,f,p){return Sr(this,arguments,function*(){for(var m,b,v,w,_,T;a<i;){s&&(a++,s=!1);let x=yield Ce(u.processParamsMaybeAddMcpUsage(p)),P=yield Ce(u.generateContentStreamInternal(x)),V=[],J=[];try{for(var R=!0,L=(b=void 0,Pr(P)),D;D=yield Ce(L.next()),m=D.done,!m;R=!0){w=D.value,R=!1;let E=w;if(yield yield Ce(E),E.candidates&&(!((_=E.candidates[0])===null||_===void 0)&&_.content)){J.push(E.candidates[0].content);for(let O of(T=E.candidates[0].content.parts)!==null&&T!==void 0?T:[])if(a<i&&O.functionCall){if(!O.functionCall.name)throw new Error("Function call name was not returned by the model.");if(f.has(O.functionCall.name)){let X=yield Ce(f.get(O.functionCall.name).callTool([O.functionCall]));V.push(...X)}else throw new Error(`Automatic function calling was requested, but not all the tools the model used implement the CallableTool interface. Available tools: ${f.keys()}, mising tool: ${O.functionCall.name}`)}}}}catch(E){b={error:E}}finally{try{!R&&!m&&(v=L.return)&&(yield Ce(v.call(L)))}finally{if(b)throw b.error}}if(V.length>0){s=!0;let E=new sa;E.candidates=[{content:{role:"user",parts:V}}],yield yield Ce(E);let O=[];O.push(...J),O.push({role:"user",parts:V});let X=rr(p.contents).concat(O);p.contents=X}else break}})}(this,l,e)}async generateContentInternal(e){var n,r,o,i;let s,a="",l={};if(this.apiClient.isVertexAI()){let u=Ak(this.apiClient,e);return a=le("{model}:generateContent",u._url),l=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json().then(p=>{let m=p;return m.sdkHttpResponse={headers:f.headers},m})),s.then(f=>{let p=Tk(f),m=new sa;return Object.assign(m,p),m})}else{let u=Ek(this.apiClient,e);return a=le("{model}:generateContent",u._url),l=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json().then(p=>{let m=p;return m.sdkHttpResponse={headers:f.headers},m})),s.then(f=>{let p=Ck(f),m=new sa;return Object.assign(m,p),m})}}async generateContentStreamInternal(e){var n,r,o,i;let s,a="",l={};if(this.apiClient.isVertexAI()){let u=Ak(this.apiClient,e);return a=le("{model}:streamGenerateContent?alt=sse",u._url),l=u._query,delete u._url,delete u._query,s=this.apiClient.requestStream({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}),s.then(function(p){return Sr(this,arguments,function*(){var m,b,v,w;try{for(var _=!0,T=Pr(p),R;R=yield Ce(T.next()),m=R.done,!m;_=!0){w=R.value,_=!1;let L=w,D=Tk(yield Ce(L.json()),e);D.sdkHttpResponse={headers:L.headers};let x=new sa;Object.assign(x,D),yield yield Ce(x)}}catch(L){b={error:L}}finally{try{!_&&!m&&(v=T.return)&&(yield Ce(v.call(T)))}finally{if(b)throw b.error}}})})}else{let u=Ek(this.apiClient,e);return a=le("{model}:streamGenerateContent?alt=sse",u._url),l=u._query,delete u._url,delete u._query,s=this.apiClient.requestStream({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}),s.then(function(p){return Sr(this,arguments,function*(){var m,b,v,w;try{for(var _=!0,T=Pr(p),R;R=yield Ce(T.next()),m=R.done,!m;_=!0){w=R.value,_=!1;let L=w,D=Ck(yield Ce(L.json()),e);D.sdkHttpResponse={headers:L.headers};let x=new sa;Object.assign(x,D),yield yield Ce(x)}}catch(L){b={error:L}}finally{try{!_&&!m&&(v=T.return)&&(yield Ce(v.call(T)))}finally{if(b)throw b.error}}})})}}async embedContent(e){var n,r,o,i;let s,a="",l={};if(this.apiClient.isVertexAI()){let u=y9(this.apiClient,e);return a=le("{model}:predict",u._url),l=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json().then(p=>{let m=p;return m.sdkHttpResponse={headers:f.headers},m})),s.then(f=>{let p=v9(f),m=new Jp;return Object.assign(m,p),m})}else{let u=g9(this.apiClient,e);return a=le("{model}:batchEmbedContents",u._url),l=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json().then(p=>{let m=p;return m.sdkHttpResponse={headers:f.headers},m})),s.then(f=>{let p=b9(f),m=new Jp;return Object.assign(m,p),m})}}async generateImagesInternal(e){var n,r,o,i;let s,a="",l={};if(this.apiClient.isVertexAI()){let u=k9(this.apiClient,e);return a=le("{model}:predict",u._url),l=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json().then(p=>{let m=p;return m.sdkHttpResponse={headers:f.headers},m})),s.then(f=>{let p=N9(f),m=new Kp;return Object.assign(m,p),m})}else{let u=x9(this.apiClient,e);return a=le("{model}:predict",u._url),l=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json().then(p=>{let m=p;return m.sdkHttpResponse={headers:f.headers},m})),s.then(f=>{let p=R9(f),m=new Kp;return Object.assign(m,p),m})}}async editImageInternal(e){var n,r;let o,i="",s={};if(this.apiClient.isVertexAI()){let a=d9(this.apiClient,e);return i=le("{model}:predict",a._url),s=a._query,delete a._url,delete a._query,o=this.apiClient.request({path:i,queryParams:s,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json().then(u=>{let f=u;return f.sdkHttpResponse={headers:l.headers},f})),o.then(l=>{let u=h9(l),f=new Qv;return Object.assign(f,u),f})}else throw new Error("This method is only supported by the Vertex AI.")}async upscaleImageInternal(e){var n,r;let o,i="",s={};if(this.apiClient.isVertexAI()){let a=k8(this.apiClient,e);return i=le("{model}:predict",a._url),s=a._query,delete a._url,delete a._query,o=this.apiClient.request({path:i,queryParams:s,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json().then(u=>{let f=u;return f.sdkHttpResponse={headers:l.headers},f})),o.then(l=>{let u=R8(l),f=new Zv;return Object.assign(f,u),f})}else throw new Error("This method is only supported by the Vertex AI.")}async recontextImage(e){var n,r;let o,i="",s={};if(this.apiClient.isVertexAI()){let a=f8(this.apiClient,e);return i=le("{model}:predict",a._url),s=a._query,delete a._url,delete a._query,o=this.apiClient.request({path:i,queryParams:s,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json()),o.then(l=>{let u=d8(l),f=new ew;return Object.assign(f,u),f})}else throw new Error("This method is only supported by the Vertex AI.")}async segmentImage(e){var n,r;let o,i="",s={};if(this.apiClient.isVertexAI()){let a=b8(this.apiClient,e);return i=le("{model}:predict",a._url),s=a._query,delete a._url,delete a._query,o=this.apiClient.request({path:i,queryParams:s,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json()),o.then(l=>{let u=v8(l),f=new tw;return Object.assign(f,u),f})}else throw new Error("This method is only supported by the Vertex AI.")}async get(e){var n,r,o,i;let s,a="",l={};if(this.apiClient.isVertexAI()){let u=K9(this.apiClient,e);return a=le("{name}",u._url),l=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json()),s.then(f=>_w(f))}else{let u=J9(this.apiClient,e);return a=le("{name}",u._url),l=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),s.then(f=>ww(f))}}async listInternal(e){var n,r,o,i;let s,a="",l={};if(this.apiClient.isVertexAI()){let u=o8(this.apiClient,e);return a=le("{models_url}",u._url),l=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json().then(p=>{let m=p;return m.sdkHttpResponse={headers:f.headers},m})),s.then(f=>{let p=s8(f),m=new Yp;return Object.assign(m,p),m})}else{let u=r8(this.apiClient,e);return a=le("{models_url}",u._url),l=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json().then(p=>{let m=p;return m.sdkHttpResponse={headers:f.headers},m})),s.then(f=>{let p=i8(f),m=new Yp;return Object.assign(m,p),m})}}async update(e){var n,r,o,i;let s,a="",l={};if(this.apiClient.isVertexAI()){let u=I8(this.apiClient,e);return a=le("{model}",u._url),l=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"PATCH",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json()),s.then(f=>_w(f))}else{let u=P8(this.apiClient,e);return a=le("{name}",u._url),l=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"PATCH",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),s.then(f=>ww(f))}}async delete(e){var n,r,o,i;let s,a="",l={};if(this.apiClient.isVertexAI()){let u=l9(this.apiClient,e);return a=le("{name}",u._url),l=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json().then(p=>{let m=p;return m.sdkHttpResponse={headers:f.headers},m})),s.then(f=>{let p=c9(f),m=new Xp;return Object.assign(m,p),m})}else{let u=a9(this.apiClient,e);return a=le("{name}",u._url),l=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json().then(p=>{let m=p;return m.sdkHttpResponse={headers:f.headers},m})),s.then(f=>{let p=u9(f),m=new Xp;return Object.assign(m,p),m})}}async countTokens(e){var n,r,o,i;let s,a="",l={};if(this.apiClient.isVertexAI()){let u=o9(this.apiClient,e);return a=le("{model}:countTokens",u._url),l=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json().then(p=>{let m=p;return m.sdkHttpResponse={headers:f.headers},m})),s.then(f=>{let p=s9(f),m=new Qp;return Object.assign(m,p),m})}else{let u=r9(this.apiClient,e);return a=le("{model}:countTokens",u._url),l=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json().then(p=>{let m=p;return m.sdkHttpResponse={headers:f.headers},m})),s.then(f=>{let p=i9(f),m=new Qp;return Object.assign(m,p),m})}}async computeTokens(e){var n,r;let o,i="",s={};if(this.apiClient.isVertexAI()){let a=YJ(this.apiClient,e);return i=le("{model}:computeTokens",a._url),s=a._query,delete a._url,delete a._query,o=this.apiClient.request({path:i,queryParams:s,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json().then(u=>{let f=u;return f.sdkHttpResponse={headers:l.headers},f})),o.then(l=>{let u=XJ(l),f=new nw;return Object.assign(f,u),f})}else throw new Error("This method is only supported by the Vertex AI.")}async generateVideosInternal(e){var n,r,o,i;let s,a="",l={};if(this.apiClient.isVertexAI()){let u=U9(this.apiClient,e);return a=le("{model}:predictLongRunning",u._url),l=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json()),s.then(f=>{let p=F9(f),m=new Zp;return Object.assign(m,p),m})}else{let u=L9(this.apiClient,e);return a=le("{model}:predictLongRunning",u._url),l=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),s.then(f=>{let p=M9(f),m=new Zp;return Object.assign(m,p),m})}}};var kw=class extends Ir{constructor(e){super(),this.apiClient=e}async getVideosOperation(e){let n=e.operation,r=e.config;if(n.name===void 0||n.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){let o=n.name.split("/operations/")[0],i;r&&"httpOptions"in r&&(i=r.httpOptions);let s=await this.fetchPredictVideosOperationInternal({operationName:n.name,resourceName:o,config:{httpOptions:i}});return n._fromAPIResponse({apiResponse:s,_isVertexAI:!0})}else{let o=await this.getVideosOperationInternal({operationName:n.name,config:r});return n._fromAPIResponse({apiResponse:o,_isVertexAI:!1})}}async get(e){let n=e.operation,r=e.config;if(n.name===void 0||n.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){let o=n.name.split("/operations/")[0],i;r&&"httpOptions"in r&&(i=r.httpOptions);let s=await this.fetchPredictVideosOperationInternal({operationName:n.name,resourceName:o,config:{httpOptions:i}});return n._fromAPIResponse({apiResponse:s,_isVertexAI:!0})}else{let o=await this.getVideosOperationInternal({operationName:n.name,config:r});return n._fromAPIResponse({apiResponse:o,_isVertexAI:!1})}}async getVideosOperationInternal(e){var n,r,o,i;let s,a="",l={};if(this.apiClient.isVertexAI()){let u=NW(e);return a=le("{operationName}",u._url),l=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json()),s}else{let u=RW(e);return a=le("{operationName}",u._url),l=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),s}}async fetchPredictVideosOperationInternal(e){var n,r;let o,i="",s={};if(this.apiClient.isVertexAI()){let a=CW(e);return i=le("{resourceName}:fetchPredictOperation",a._url),s=a._query,delete a._url,delete a._query,o=this.apiClient.request({path:i,queryParams:s,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json()),o}else throw new Error("This method is only supported by the Vertex AI.")}};function wK(t){let e={},n=c(t,["data"]);if(n!=null&&d(e,["data"],n),c(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");let r=c(t,["mimeType"]);return r!=null&&d(e,["mimeType"],r),e}function _K(t){let e={},n=c(t,["parts"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(i=>kK(i))),d(e,["parts"],o)}let r=c(t,["role"]);return r!=null&&d(e,["role"],r),e}function EK(t,e,n){let r={},o=c(e,["expireTime"]);n!==void 0&&o!=null&&d(n,["expireTime"],o);let i=c(e,["newSessionExpireTime"]);n!==void 0&&i!=null&&d(n,["newSessionExpireTime"],i);let s=c(e,["uses"]);n!==void 0&&s!=null&&d(n,["uses"],s);let a=c(e,["liveConnectConstraints"]);n!==void 0&&a!=null&&d(n,["bidiGenerateContentSetup"],xK(t,a));let l=c(e,["lockAdditionalFields"]);return n!==void 0&&l!=null&&d(n,["fieldMask"],l),r}function AK(t,e){let n={},r=c(e,["config"]);return r!=null&&d(n,["config"],EK(t,r,n)),n}function CK(t){let e={};if(c(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");let n=c(t,["fileUri"]);n!=null&&d(e,["fileUri"],n);let r=c(t,["mimeType"]);return r!=null&&d(e,["mimeType"],r),e}function TK(t){let e={},n=c(t,["id"]);n!=null&&d(e,["id"],n);let r=c(t,["args"]);r!=null&&d(e,["args"],r);let o=c(t,["name"]);if(o!=null&&d(e,["name"],o),c(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(c(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function SK(t){let e={};if(c(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");let n=c(t,["enableWidget"]);return n!=null&&d(e,["enableWidget"],n),e}function PK(t){let e={};if(c(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(c(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");let n=c(t,["timeRangeFilter"]);return n!=null&&d(e,["timeRangeFilter"],n),e}function IK(t,e){let n={},r=c(t,["generationConfig"]);e!==void 0&&r!=null&&d(e,["setup","generationConfig"],r);let o=c(t,["responseModalities"]);e!==void 0&&o!=null&&d(e,["setup","generationConfig","responseModalities"],o);let i=c(t,["temperature"]);e!==void 0&&i!=null&&d(e,["setup","generationConfig","temperature"],i);let s=c(t,["topP"]);e!==void 0&&s!=null&&d(e,["setup","generationConfig","topP"],s);let a=c(t,["topK"]);e!==void 0&&a!=null&&d(e,["setup","generationConfig","topK"],a);let l=c(t,["maxOutputTokens"]);e!==void 0&&l!=null&&d(e,["setup","generationConfig","maxOutputTokens"],l);let u=c(t,["mediaResolution"]);e!==void 0&&u!=null&&d(e,["setup","generationConfig","mediaResolution"],u);let f=c(t,["seed"]);e!==void 0&&f!=null&&d(e,["setup","generationConfig","seed"],f);let p=c(t,["speechConfig"]);e!==void 0&&p!=null&&d(e,["setup","generationConfig","speechConfig"],e_(p));let m=c(t,["thinkingConfig"]);e!==void 0&&m!=null&&d(e,["setup","generationConfig","thinkingConfig"],m);let b=c(t,["enableAffectiveDialog"]);e!==void 0&&b!=null&&d(e,["setup","generationConfig","enableAffectiveDialog"],b);let v=c(t,["systemInstruction"]);e!==void 0&&v!=null&&d(e,["setup","systemInstruction"],_K(Wt(v)));let w=c(t,["tools"]);if(e!==void 0&&w!=null){let P=hu(w);Array.isArray(P)&&(P=P.map(V=>NK(du(V)))),d(e,["setup","tools"],P)}let _=c(t,["sessionResumption"]);e!==void 0&&_!=null&&d(e,["setup","sessionResumption"],RK(_));let T=c(t,["inputAudioTranscription"]);e!==void 0&&T!=null&&d(e,["setup","inputAudioTranscription"],T);let R=c(t,["outputAudioTranscription"]);e!==void 0&&R!=null&&d(e,["setup","outputAudioTranscription"],R);let L=c(t,["realtimeInputConfig"]);e!==void 0&&L!=null&&d(e,["setup","realtimeInputConfig"],L);let D=c(t,["contextWindowCompression"]);e!==void 0&&D!=null&&d(e,["setup","contextWindowCompression"],D);let x=c(t,["proactivity"]);if(e!==void 0&&x!=null&&d(e,["setup","proactivity"],x),c(t,["explicitVadSignal"])!==void 0)throw new Error("explicitVadSignal parameter is not supported in Gemini API.");return n}function xK(t,e){let n={},r=c(e,["model"]);r!=null&&d(n,["setup","model"],Be(t,r));let o=c(e,["config"]);return o!=null&&d(n,["config"],IK(o,n)),n}function kK(t){let e={},n=c(t,["mediaResolution"]);n!=null&&d(e,["mediaResolution"],n);let r=c(t,["codeExecutionResult"]);r!=null&&d(e,["codeExecutionResult"],r);let o=c(t,["executableCode"]);o!=null&&d(e,["executableCode"],o);let i=c(t,["fileData"]);i!=null&&d(e,["fileData"],CK(i));let s=c(t,["functionCall"]);s!=null&&d(e,["functionCall"],TK(s));let a=c(t,["functionResponse"]);a!=null&&d(e,["functionResponse"],a);let l=c(t,["inlineData"]);l!=null&&d(e,["inlineData"],wK(l));let u=c(t,["text"]);u!=null&&d(e,["text"],u);let f=c(t,["thought"]);f!=null&&d(e,["thought"],f);let p=c(t,["thoughtSignature"]);p!=null&&d(e,["thoughtSignature"],p);let m=c(t,["videoMetadata"]);return m!=null&&d(e,["videoMetadata"],m),e}function RK(t){let e={},n=c(t,["handle"]);if(n!=null&&d(e,["handle"],n),c(t,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function NK(t){let e={};if(c(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");let n=c(t,["computerUse"]);n!=null&&d(e,["computerUse"],n);let r=c(t,["fileSearch"]);r!=null&&d(e,["fileSearch"],r);let o=c(t,["codeExecution"]);if(o!=null&&d(e,["codeExecution"],o),c(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");let i=c(t,["functionDeclarations"]);if(i!=null){let f=i;Array.isArray(f)&&(f=f.map(p=>p)),d(e,["functionDeclarations"],f)}let s=c(t,["googleMaps"]);s!=null&&d(e,["googleMaps"],SK(s));let a=c(t,["googleSearch"]);a!=null&&d(e,["googleSearch"],PK(a));let l=c(t,["googleSearchRetrieval"]);l!=null&&d(e,["googleSearchRetrieval"],l);let u=c(t,["urlContext"]);return u!=null&&d(e,["urlContext"],u),e}function OK(t){let e=[];for(let n in t)if(Object.prototype.hasOwnProperty.call(t,n)){let r=t[n];if(typeof r=="object"&&r!=null&&Object.keys(r).length>0){let o=Object.keys(r).map(i=>`${n}.${i}`);e.push(...o)}else e.push(n)}return e.join(",")}function DK(t,e){let n=null,r=t.bidiGenerateContentSetup;if(typeof r=="object"&&r!==null&&"setup"in r){let i=r.setup;typeof i=="object"&&i!==null?(t.bidiGenerateContentSetup=i,n=i):delete t.bidiGenerateContentSetup}else r!==void 0&&delete t.bidiGenerateContentSetup;let o=t.fieldMask;if(n){let i=OK(n);if(Array.isArray(e==null?void 0:e.lockAdditionalFields)&&(e==null?void 0:e.lockAdditionalFields.length)===0)i?t.fieldMask=i:delete t.fieldMask;else if(e!=null&&e.lockAdditionalFields&&e.lockAdditionalFields.length>0&&o!==null&&Array.isArray(o)&&o.length>0){let s=["temperature","topK","topP","maxOutputTokens","responseModalities","seed","speechConfig"],a=[];o.length>0&&(a=o.map(u=>s.includes(u)?`generationConfig.${u}`:u));let l=[];i&&l.push(i),a.length>0&&l.push(...a),l.length>0?t.fieldMask=l.join(","):delete t.fieldMask}else delete t.fieldMask}else o!==null&&Array.isArray(o)&&o.length>0?t.fieldMask=o.join(","):delete t.fieldMask;return t}var Rw=class extends Ir{constructor(e){super(),this.apiClient=e}async create(e){var n,r;let o,i="",s={};if(this.apiClient.isVertexAI())throw new Error("The client.tokens.create method is only supported by the Gemini Developer API.");{let a=AK(this.apiClient,e);i=le("auth_tokens",a._url),s=a._query,delete a.config,delete a._url,delete a._query;let l=DK(a,e.config);return o=this.apiClient.request({path:i,queryParams:s,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json()),o.then(u=>u)}}};function MK(t,e){let n={},r=c(t,["force"]);return e!==void 0&&r!=null&&d(e,["_query","force"],r),n}function FK(t){let e={},n=c(t,["name"]);n!=null&&d(e,["_url","name"],n);let r=c(t,["config"]);return r!=null&&MK(r,e),e}function LK(t){let e={},n=c(t,["name"]);return n!=null&&d(e,["_url","name"],n),e}function UK(t,e){let n={},r=c(t,["pageSize"]);e!==void 0&&r!=null&&d(e,["_query","pageSize"],r);let o=c(t,["pageToken"]);return e!==void 0&&o!=null&&d(e,["_query","pageToken"],o),n}function BK(t){let e={},n=c(t,["parent"]);n!=null&&d(e,["_url","parent"],n);let r=c(t,["config"]);return r!=null&&UK(r,e),e}function GK(t){let e={},n=c(t,["sdkHttpResponse"]);n!=null&&d(e,["sdkHttpResponse"],n);let r=c(t,["nextPageToken"]);r!=null&&d(e,["nextPageToken"],r);let o=c(t,["documents"]);if(o!=null){let i=o;Array.isArray(i)&&(i=i.map(s=>s)),d(e,["documents"],i)}return e}var Nw=class extends Ir{constructor(e){super(),this.apiClient=e,this.list=async n=>new Wo(jo.PAGED_ITEM_DOCUMENTS,r=>this.listInternal({parent:n.parent,config:r.config}),await this.listInternal(n),n)}async get(e){var n,r;let o,i="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{let a=LK(e);return i=le("{name}",a._url),s=a._query,delete a._url,delete a._query,o=this.apiClient.request({path:i,queryParams:s,body:JSON.stringify(a),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json()),o.then(l=>l)}}async delete(e){var n,r;let o="",i={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{let s=FK(e);o=le("{name}",s._url),i=s._query,delete s._url,delete s._query,await this.apiClient.request({path:o,queryParams:i,body:JSON.stringify(s),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal})}}async listInternal(e){var n,r;let o,i="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{let a=BK(e);return i=le("{parent}/documents",a._url),s=a._query,delete a._url,delete a._query,o=this.apiClient.request({path:i,queryParams:s,body:JSON.stringify(a),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json()),o.then(l=>{let u=GK(l),f=new rw;return Object.assign(f,u),f})}}};var Ow=class extends Ir{constructor(e,n=new Nw(e)){super(),this.apiClient=e,this.documents=n,this.list=async(r={})=>new Wo(jo.PAGED_ITEM_FILE_SEARCH_STORES,o=>this.listInternal(o),await this.listInternal(r),r)}async uploadToFileSearchStore(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files to a file search store.");return this.apiClient.uploadFileToFileSearchStore(e.fileSearchStoreName,e.file,e.config)}async create(e){var n,r;let o,i="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{let a=U8(e);return i=le("fileSearchStores",a._url),s=a._query,delete a._url,delete a._query,o=this.apiClient.request({path:i,queryParams:s,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json()),o.then(l=>l)}}async get(e){var n,r;let o,i="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{let a=H8(e);return i=le("{name}",a._url),s=a._query,delete a._url,delete a._query,o=this.apiClient.request({path:i,queryParams:s,body:JSON.stringify(a),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json()),o.then(l=>l)}}async delete(e){var n,r;let o="",i={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{let s=G8(e);o=le("{name}",s._url),i=s._query,delete s._url,delete s._query,await this.apiClient.request({path:o,queryParams:i,body:JSON.stringify(s),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal})}}async listInternal(e){var n,r;let o,i="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{let a=z8(e);return i=le("fileSearchStores",a._url),s=a._query,delete a._url,delete a._query,o=this.apiClient.request({path:i,queryParams:s,body:JSON.stringify(a),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json()),o.then(l=>{let u=J8(l),f=new ow;return Object.assign(f,u),f})}}async uploadToFileSearchStoreInternal(e){var n,r;let o,i="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{let a=K8(e);return i=le("upload/v1beta/{file_search_store_name}:uploadToFileSearchStore",a._url),s=a._query,delete a._url,delete a._query,o=this.apiClient.request({path:i,queryParams:s,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json()),o.then(l=>{let u=Y8(l),f=new iw;return Object.assign(f,u),f})}}async importFile(e){var n,r;let o,i="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{let a=V8(e);return i=le("{file_search_store_name}:importFile",a._url),s=a._query,delete a._url,delete a._query,o=this.apiClient.request({path:i,queryParams:s,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json()),o.then(l=>{let u=$8(l),f=new sw;return Object.assign(f,u),f})}}};var mR=function(){let{crypto:t}=globalThis;if(t!=null&&t.randomUUID)return mR=t.randomUUID.bind(t),t.randomUUID();let e=new Uint8Array(1),n=t?()=>t.getRandomValues(e)[0]:()=>Math.random()*255&255;return"10000000-1000-4000-8000-100000000000".replace(/[018]/g,r=>(+r^n()&15>>+r/4).toString(16))},HK=()=>mR();function Dw(t){return typeof t=="object"&&t!==null&&("name"in t&&t.name==="AbortError"||"message"in t&&String(t.message).includes("FetchRequestCanceledException"))}var Mw=t=>{if(t instanceof Error)return t;if(typeof t=="object"&&t!==null){try{if(Object.prototype.toString.call(t)==="[object Error]"){let e=new Error(t.message,t.cause?{cause:t.cause}:{});return t.stack&&(e.stack=t.stack),t.cause&&!e.cause&&(e.cause=t.cause),t.name&&(e.name=t.name),e}}catch(e){}try{return new Error(JSON.stringify(t))}catch(e){}}return new Error(t)};var mn=class extends Error{},gn=class t extends mn{constructor(e,n,r,o){super(`${t.makeMessage(e,n,r)}`),this.status=e,this.headers=o,this.error=n}static makeMessage(e,n,r){let o=n!=null&&n.message?typeof n.message=="string"?n.message:JSON.stringify(n.message):n?JSON.stringify(n):r;return e&&o?`${e} ${o}`:e?`${e} status code (no body)`:o||"(no status code or body)"}static generate(e,n,r,o){if(!e||!o)return new cu({message:r,cause:Mw(n)});let i=n;return e===400?new um(e,i,r,o):e===401?new cm(e,i,r,o):e===403?new fm(e,i,r,o):e===404?new dm(e,i,r,o):e===409?new hm(e,i,r,o):e===422?new pm(e,i,r,o):e===429?new mm(e,i,r,o):e>=500?new gm(e,i,r,o):new t(e,i,r,o)}},pf=class extends gn{constructor({message:e}={}){super(void 0,void 0,e||"Request was aborted.",void 0)}},cu=class extends gn{constructor({message:e,cause:n}){super(void 0,void 0,e||"Connection error.",void 0),n&&(this.cause=n)}},lm=class extends cu{constructor({message:e}={}){super({message:e!=null?e:"Request timed out."})}},um=class extends gn{},cm=class extends gn{},fm=class extends gn{},dm=class extends gn{},hm=class extends gn{},pm=class extends gn{},mm=class extends gn{},gm=class extends gn{};var qK=/^[a-z][a-z0-9+.-]*:/i,$K=t=>qK.test(t),Fw=t=>(Fw=Array.isArray,Fw(t)),VK=Fw,jK=VK,Rk=jK;function WK(t){if(!t)return!0;for(let e in t)return!1;return!0}function zK(t,e){return Object.prototype.hasOwnProperty.call(t,e)}var JK=(t,e)=>{if(typeof e!="number"||!Number.isInteger(e))throw new mn(`${t} must be an integer`);if(e<0)throw new mn(`${t} must be a positive integer`);return e},KK=t=>{try{return JSON.parse(t)}catch(e){return}};var YK=t=>new Promise(e=>setTimeout(e,t));var su="0.0.1";function XK(){return typeof Deno!="undefined"&&Deno.build!=null?"deno":typeof EdgeRuntime!="undefined"?"edge":Object.prototype.toString.call(typeof globalThis.process!="undefined"?globalThis.process:0)==="[object process]"?"node":"unknown"}var QK=()=>{var t,e,n,r,o;let i=XK();if(i==="deno")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":su,"X-Stainless-OS":Ok(Deno.build.os),"X-Stainless-Arch":Nk(Deno.build.arch),"X-Stainless-Runtime":"deno","X-Stainless-Runtime-Version":typeof Deno.version=="string"?Deno.version:(e=(t=Deno.version)===null||t===void 0?void 0:t.deno)!==null&&e!==void 0?e:"unknown"};if(typeof EdgeRuntime!="undefined")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":su,"X-Stainless-OS":"Unknown","X-Stainless-Arch":`other:${EdgeRuntime}`,"X-Stainless-Runtime":"edge","X-Stainless-Runtime-Version":globalThis.process.version};if(i==="node")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":su,"X-Stainless-OS":Ok((n=globalThis.process.platform)!==null&&n!==void 0?n:"unknown"),"X-Stainless-Arch":Nk((r=globalThis.process.arch)!==null&&r!==void 0?r:"unknown"),"X-Stainless-Runtime":"node","X-Stainless-Runtime-Version":(o=globalThis.process.version)!==null&&o!==void 0?o:"unknown"};let s=ZK();return s?{"X-Stainless-Lang":"js","X-Stainless-Package-Version":su,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":`browser:${s.browser}`,"X-Stainless-Runtime-Version":s.version}:{"X-Stainless-Lang":"js","X-Stainless-Package-Version":su,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":"unknown","X-Stainless-Runtime-Version":"unknown"}};function ZK(){if(typeof navigator=="undefined"||!navigator)return null;let t=[{key:"edge",pattern:/Edge(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/MSIE(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/Trident(?:.*rv\:(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"chrome",pattern:/Chrome(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"firefox",pattern:/Firefox(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"safari",pattern:/(?:Version\W+(\d+)\.(\d+)(?:\.(\d+))?)?(?:\W+Mobile\S*)?\W+Safari/}];for(let{key:e,pattern:n}of t){let r=n.exec(navigator.userAgent);if(r){let o=r[1]||0,i=r[2]||0,s=r[3]||0;return{browser:e,version:`${o}.${i}.${s}`}}}return null}var Nk=t=>t==="x32"?"x32":t==="x86_64"||t==="x64"?"x64":t==="arm"?"arm":t==="aarch64"||t==="arm64"?"arm64":t?`other:${t}`:"unknown",Ok=t=>(t=t.toLowerCase(),t.includes("ios")?"iOS":t==="android"?"Android":t==="darwin"?"MacOS":t==="win32"?"Windows":t==="freebsd"?"FreeBSD":t==="openbsd"?"OpenBSD":t==="linux"?"Linux":t?`Other:${t}`:"Unknown"),Gp,e7=()=>Gp!=null?Gp:Gp=QK();function t7(){if(typeof fetch!="undefined")return fetch;throw new Error("`fetch` is not defined as a global; Either pass `fetch` to the client, `new GeminiNextGenAPIClient({ fetch })` or polyfill the global, `globalThis.fetch = fetch`")}function gR(...t){let e=globalThis.ReadableStream;if(typeof e=="undefined")throw new Error("`ReadableStream` is not defined as a global; You will need to polyfill it, `globalThis.ReadableStream = ReadableStream`");return new e(...t)}function n7(t){let e=Symbol.asyncIterator in t?t[Symbol.asyncIterator]():t[Symbol.iterator]();return gR({start(){},async pull(n){let{done:r,value:o}=await e.next();r?n.close():n.enqueue(o)},async cancel(){var n;await((n=e.return)===null||n===void 0?void 0:n.call(e))}})}function yR(t){if(t[Symbol.asyncIterator])return t;let e=t.getReader();return{async next(){try{let n=await e.read();return n!=null&&n.done&&e.releaseLock(),n}catch(n){throw e.releaseLock(),n}},async return(){let n=e.cancel();return e.releaseLock(),await n,{done:!0,value:void 0}},[Symbol.asyncIterator](){return this}}}async function r7(t){var e,n;if(t===null||typeof t!="object")return;if(t[Symbol.asyncIterator]){await((n=(e=t[Symbol.asyncIterator]()).return)===null||n===void 0?void 0:n.call(e));return}let r=t.getReader(),o=r.cancel();r.releaseLock(),await o}var o7=({headers:t,body:e})=>({bodyHeaders:{"content-type":"application/json"},body:JSON.stringify(e)});var bR=()=>{var t;if(typeof File=="undefined"){let{process:e}=globalThis,n=typeof((t=e==null?void 0:e.versions)===null||t===void 0?void 0:t.node)=="string"&&parseInt(e.versions.node.split("."))<20;throw new Error("`File` is not defined as a global, which is required for file uploads."+(n?" Update to Node 20 LTS or newer, or set `globalThis.File` to `import('node:buffer').File`.":""))}};function Wv(t,e,n){return bR(),new File(t,e!=null?e:"unknown_file",n)}function i7(t){return(typeof t=="object"&&t!==null&&("name"in t&&t.name&&String(t.name)||"url"in t&&t.url&&String(t.url)||"filename"in t&&t.filename&&String(t.filename)||"path"in t&&t.path&&String(t.path))||"").split(/[\\/]/).pop()||void 0}var s7=t=>t!=null&&typeof t=="object"&&typeof t[Symbol.asyncIterator]=="function";var vR=t=>t!=null&&typeof t=="object"&&typeof t.size=="number"&&typeof t.type=="string"&&typeof t.text=="function"&&typeof t.slice=="function"&&typeof t.arrayBuffer=="function",a7=t=>t!=null&&typeof t=="object"&&typeof t.name=="string"&&typeof t.lastModified=="number"&&vR(t),l7=t=>t!=null&&typeof t=="object"&&typeof t.url=="string"&&typeof t.blob=="function";async function u7(t,e,n){if(bR(),t=await t,a7(t))return t instanceof File?t:Wv([await t.arrayBuffer()],t.name);if(l7(t)){let o=await t.blob();return e||(e=new URL(t.url).pathname.split(/[\\/]/).pop()),Wv(await Lw(o),e,n)}let r=await Lw(t);if(e||(e=i7(t)),!(n!=null&&n.type)){let o=r.find(i=>typeof i=="object"&&"type"in i&&i.type);typeof o=="string"&&(n=Object.assign(Object.assign({},n),{type:o}))}return Wv(r,e,n)}async function Lw(t){var e,n,r,o,i;let s=[];if(typeof t=="string"||ArrayBuffer.isView(t)||t instanceof ArrayBuffer)s.push(t);else if(vR(t))s.push(t instanceof Blob?t:await t.arrayBuffer());else if(s7(t))try{for(var a=!0,l=Pr(t),u;u=await l.next(),e=u.done,!e;a=!0){o=u.value,a=!1;let f=o;s.push(...await Lw(f))}}catch(f){n={error:f}}finally{try{!a&&!e&&(r=l.return)&&await r.call(l)}finally{if(n)throw n.error}}else{let f=(i=t==null?void 0:t.constructor)===null||i===void 0?void 0:i.name;throw new Error(`Unexpected data type: ${typeof t}${f?`; constructor: ${f}`:""}${c7(t)}`)}return s}function c7(t){return typeof t!="object"||t===null?"":`; props: [${Object.getOwnPropertyNames(t).map(n=>`"${n}"`).join(", ")}]`}var ym=class{constructor(e){this._client=e}};ym._key=[];function wR(t){return t.replace(/[^A-Za-z0-9\-._~!$&'()*+,;=:@]+/g,encodeURIComponent)}var Dk=Object.freeze(Object.create(null)),f7=(t=wR)=>function(n,...r){if(n.length===1)return n[0];let o=!1,i=[],s=n.reduce((f,p,m)=>{var b,v,w;/[?#]/.test(p)&&(o=!0);let _=r[m],T=(o?encodeURIComponent:t)(""+_);return m!==r.length&&(_==null||typeof _=="object"&&_.toString===((w=Object.getPrototypeOf((v=Object.getPrototypeOf((b=_.hasOwnProperty)!==null&&b!==void 0?b:Dk))!==null&&v!==void 0?v:Dk))===null||w===void 0?void 0:w.toString))&&(T=_+"",i.push({start:f.length+p.length,length:T.length,error:`Value of type ${Object.prototype.toString.call(_).slice(8,-1)} is not a valid path parameter`})),f+p+(m===r.length?"":T)},""),a=s.split(/[?#]/,1)[0],l=/(?<=^|\/)(?:\.|%2e){1,2}(?=\/|$)/gi,u;for(;(u=l.exec(a))!==null;)i.push({start:u.index,length:u[0].length,error:`Value "${u[0]}" can't be safely passed as a path parameter`});if(i.sort((f,p)=>f.start-p.start),i.length>0){let f=0,p=i.reduce((m,b)=>{let v=" ".repeat(b.start-f),w="^".repeat(b.length);return f=b.start+b.length,m+v+w},"");throw new mn(`Path parameters result in path with invalid segments:
${i.map(m=>m.error).join(`
`)}
${s}
${p}`)}return s},Hp=f7(wR);var bm=class extends ym{create(e,n){var r;let{api_version:o=this._client.apiVersion}=e,i=am(e,["api_version"]);if("model"in i&&"agent_config"in i)throw new mn("Invalid request: specified `model` and `agent_config`. If specifying `model`, use `generation_config`.");if("agent"in i&&"generation_config"in i)throw new mn("Invalid request: specified `agent` and `generation_config`. If specifying `agent`, use `agent_config`.");return this._client.post(Hp`/${o}/interactions`,Object.assign(Object.assign({body:i},n),{stream:(r=e.stream)!==null&&r!==void 0?r:!1}))}delete(e,n={},r){let{api_version:o=this._client.apiVersion}=n!=null?n:{};return this._client.delete(Hp`/${o}/interactions/${e}`,r)}cancel(e,n={},r){let{api_version:o=this._client.apiVersion}=n!=null?n:{};return this._client.post(Hp`/${o}/interactions/${e}/cancel`,r)}get(e,n={},r){var o;let i=n!=null?n:{},{api_version:s=this._client.apiVersion}=i,a=am(i,["api_version"]);return this._client.get(Hp`/${s}/interactions/${e}`,Object.assign(Object.assign({query:a},r),{stream:(o=n==null?void 0:n.stream)!==null&&o!==void 0?o:!1}))}};bm._key=Object.freeze(["interactions"]);var vm=class extends bm{};function d7(t){let e=0;for(let o of t)e+=o.length;let n=new Uint8Array(e),r=0;for(let o of t)n.set(o,r),r+=o.length;return n}var qp;function n_(t){let e;return(qp!=null?qp:(e=new globalThis.TextEncoder,qp=e.encode.bind(e)))(t)}var $p;function Mk(t){let e;return($p!=null?$p:(e=new globalThis.TextDecoder,$p=e.decode.bind(e)))(t)}var fu=class{constructor(){this.buffer=new Uint8Array,this.carriageReturnIndex=null}decode(e){if(e==null)return[];let n=e instanceof ArrayBuffer?new Uint8Array(e):typeof e=="string"?n_(e):e;this.buffer=d7([this.buffer,n]);let r=[],o;for(;(o=h7(this.buffer,this.carriageReturnIndex))!=null;){if(o.carriage&&this.carriageReturnIndex==null){this.carriageReturnIndex=o.index;continue}if(this.carriageReturnIndex!=null&&(o.index!==this.carriageReturnIndex+1||o.carriage)){r.push(Mk(this.buffer.subarray(0,this.carriageReturnIndex-1))),this.buffer=this.buffer.subarray(this.carriageReturnIndex),this.carriageReturnIndex=null;continue}let i=this.carriageReturnIndex!==null?o.preceding-1:o.preceding,s=Mk(this.buffer.subarray(0,i));r.push(s),this.buffer=this.buffer.subarray(o.index),this.carriageReturnIndex=null}return r}flush(){return this.buffer.length?this.decode(`
`):[]}};fu.NEWLINE_CHARS=new Set([`
`,"\r"]);fu.NEWLINE_REGEXP=/\r\n|[\n\r]/g;function h7(t,e){for(let o=e!=null?e:0;o<t.length;o++){if(t[o]===10)return{preceding:o,index:o+1,carriage:!1};if(t[o]===13)return{preceding:o,index:o+1,carriage:!0}}return null}function p7(t){for(let r=0;r<t.length-1;r++){if(t[r]===10&&t[r+1]===10||t[r]===13&&t[r+1]===13)return r+2;if(t[r]===13&&t[r+1]===10&&r+3<t.length&&t[r+2]===13&&t[r+3]===10)return r+4}return-1}var wm={off:0,error:200,warn:300,info:400,debug:500},Fk=(t,e,n)=>{if(t){if(zK(wm,t))return t;on(n).warn(`${e} was set to ${JSON.stringify(t)}, expected one of ${JSON.stringify(Object.keys(wm))}`)}};function df(){}function Vp(t,e,n){return!e||wm[t]>wm[n]?df:e[t].bind(e)}var m7={error:df,warn:df,info:df,debug:df},Lk=new WeakMap;function on(t){var e;let n=t.logger,r=(e=t.logLevel)!==null&&e!==void 0?e:"off";if(!n)return m7;let o=Lk.get(n);if(o&&o[0]===r)return o[1];let i={error:Vp("error",n,r),warn:Vp("warn",n,r),info:Vp("info",n,r),debug:Vp("debug",n,r)};return Lk.set(n,[r,i]),i}var ia=t=>(t.options&&(t.options=Object.assign({},t.options),delete t.options.headers),t.headers&&(t.headers=Object.fromEntries((t.headers instanceof Headers?[...t.headers]:Object.entries(t.headers)).map(([e,n])=>[e,e.toLowerCase()==="x-goog-api-key"||e.toLowerCase()==="authorization"||e.toLowerCase()==="cookie"||e.toLowerCase()==="set-cookie"?"***":n]))),"retryOfRequestLogID"in t&&(t.retryOfRequestLogID&&(t.retryOf=t.retryOfRequestLogID),delete t.retryOfRequestLogID),t);var Uw=class t{constructor(e,n,r){this.iterator=e,this.controller=n,this.client=r}static fromSSEResponse(e,n,r){let o=!1,i=r?on(r):console;function s(){return Sr(this,arguments,function*(){var l,u,f,p;if(o)throw new mn("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");o=!0;let m=!1;try{try{for(var b=!0,v=Pr(g7(e,n)),w;w=yield Ce(v.next()),l=w.done,!l;b=!0){p=w.value,b=!1;let _=p;if(!m)if(_.data.startsWith("[DONE]")){m=!0;continue}else try{yield yield Ce(JSON.parse(_.data))}catch(T){throw i.error("Could not parse message into JSON:",_.data),i.error("From chunk:",_.raw),T}}}catch(_){u={error:_}}finally{try{!b&&!l&&(f=v.return)&&(yield Ce(f.call(v)))}finally{if(u)throw u.error}}m=!0}catch(_){if(Dw(_))return yield Ce(void 0);throw _}finally{m||n.abort()}})}return new t(s,n,r)}static fromReadableStream(e,n,r){let o=!1;function i(){return Sr(this,arguments,function*(){var l,u,f,p;let m=new fu,b=yR(e);try{for(var v=!0,w=Pr(b),_;_=yield Ce(w.next()),l=_.done,!l;v=!0){p=_.value,v=!1;let T=p;for(let R of m.decode(T))yield yield Ce(R)}}catch(T){u={error:T}}finally{try{!v&&!l&&(f=w.return)&&(yield Ce(f.call(w)))}finally{if(u)throw u.error}}for(let T of m.flush())yield yield Ce(T)})}function s(){return Sr(this,arguments,function*(){var l,u,f,p;if(o)throw new mn("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");o=!0;let m=!1;try{try{for(var b=!0,v=Pr(i()),w;w=yield Ce(v.next()),l=w.done,!l;b=!0){p=w.value,b=!1;let _=p;m||_&&(yield yield Ce(JSON.parse(_)))}}catch(_){u={error:_}}finally{try{!b&&!l&&(f=v.return)&&(yield Ce(f.call(v)))}finally{if(u)throw u.error}}m=!0}catch(_){if(Dw(_))return yield Ce(void 0);throw _}finally{m||n.abort()}})}return new t(s,n,r)}[Symbol.asyncIterator](){return this.iterator()}tee(){let e=[],n=[],r=this.iterator(),o=i=>({next:()=>{if(i.length===0){let s=r.next();e.push(s),n.push(s)}return i.shift()}});return[new t(()=>o(e),this.controller,this.client),new t(()=>o(n),this.controller,this.client)]}toReadableStream(){let e=this,n;return gR({async start(){n=e[Symbol.asyncIterator]()},async pull(r){try{let{value:o,done:i}=await n.next();if(i)return r.close();let s=n_(JSON.stringify(o)+`
`);r.enqueue(s)}catch(o){r.error(o)}},async cancel(){var r;await((r=n.return)===null||r===void 0?void 0:r.call(n))}})}};function g7(t,e){return Sr(this,arguments,function*(){var r,o,i,s;if(!t.body)throw e.abort(),typeof globalThis.navigator!="undefined"&&globalThis.navigator.product==="ReactNative"?new mn("The default react-native fetch implementation does not support streaming. Please use expo/fetch: https://docs.expo.dev/versions/latest/sdk/expo/#expofetch-api"):new mn("Attempted to iterate over a response with no body");let a=new Bw,l=new fu,u=yR(t.body);try{for(var f=!0,p=Pr(y7(u)),m;m=yield Ce(p.next()),r=m.done,!r;f=!0){s=m.value,f=!1;let b=s;for(let v of l.decode(b)){let w=a.decode(v);w&&(yield yield Ce(w))}}}catch(b){o={error:b}}finally{try{!f&&!r&&(i=p.return)&&(yield Ce(i.call(p)))}finally{if(o)throw o.error}}for(let b of l.flush()){let v=a.decode(b);v&&(yield yield Ce(v))}})}function y7(t){return Sr(this,arguments,function*(){var n,r,o,i;let s=new Uint8Array;try{for(var a=!0,l=Pr(t),u;u=yield Ce(l.next()),n=u.done,!n;a=!0){i=u.value,a=!1;let f=i;if(f==null)continue;let p=f instanceof ArrayBuffer?new Uint8Array(f):typeof f=="string"?n_(f):f,m=new Uint8Array(s.length+p.length);m.set(s),m.set(p,s.length),s=m;let b;for(;(b=p7(s))!==-1;)yield yield Ce(s.slice(0,b)),s=s.slice(b)}}catch(f){r={error:f}}finally{try{!a&&!n&&(o=l.return)&&(yield Ce(o.call(l)))}finally{if(r)throw r.error}}s.length>0&&(yield yield Ce(s))})}var Bw=class{constructor(){this.event=null,this.data=[],this.chunks=[]}decode(e){if(e.endsWith("\r")&&(e=e.substring(0,e.length-1)),!e){if(!this.event&&!this.data.length)return null;let i={event:this.event,data:this.data.join(`
`),raw:this.chunks};return this.event=null,this.data=[],this.chunks=[],i}if(this.chunks.push(e),e.startsWith(":"))return null;let[n,r,o]=b7(e,":");return o.startsWith(" ")&&(o=o.substring(1)),n==="event"?this.event=o:n==="data"&&this.data.push(o),null}};function b7(t,e){let n=t.indexOf(e);return n!==-1?[t.substring(0,n),e,t.substring(n+e.length)]:[t,"",""]}async function v7(t,e){let{response:n,requestLogID:r,retryOfRequestLogID:o,startTime:i}=e,s=await(async()=>{var a;if(e.options.stream)return on(t).debug("response",n.status,n.url,n.headers,n.body),e.options.__streamClass?e.options.__streamClass.fromSSEResponse(n,e.controller,t):Uw.fromSSEResponse(n,e.controller,t);if(n.status===204)return null;if(e.options.__binaryResponse)return n;let l=n.headers.get("content-type"),u=(a=l==null?void 0:l.split(";")[0])===null||a===void 0?void 0:a.trim();return(u==null?void 0:u.includes("application/json"))||(u==null?void 0:u.endsWith("+json"))?n.headers.get("content-length")==="0"?void 0:await n.json():await n.text()})();return on(t).debug(`[${r}] response parsed`,ia({retryOfRequestLogID:o,url:n.url,status:n.status,body:s,durationMs:Date.now()-i})),s}var Gw=class t extends Promise{constructor(e,n,r=v7){super(o=>{o(null)}),this.responsePromise=n,this.parseResponse=r,this.client=e}_thenUnwrap(e){return new t(this.client,this.responsePromise,async(n,r)=>e(await this.parseResponse(n,r),r))}asResponse(){return this.responsePromise.then(e=>e.response)}async withResponse(){let[e,n]=await Promise.all([this.parse(),this.asResponse()]);return{data:e,response:n}}parse(){return this.parsedPromise||(this.parsedPromise=this.responsePromise.then(e=>this.parseResponse(this.client,e))),this.parsedPromise}then(e,n){return this.parse().then(e,n)}catch(e){return this.parse().catch(e)}finally(e){return this.parse().finally(e)}};var _R=Symbol("brand.privateNullableHeaders");function*w7(t){if(!t)return;if(_R in t){let{values:r,nulls:o}=t;yield*r.entries();for(let i of o)yield[i,null];return}let e=!1,n;t instanceof Headers?n=t.entries():Rk(t)?n=t:(e=!0,n=Object.entries(t!=null?t:{}));for(let r of n){let o=r[0];if(typeof o!="string")throw new TypeError("expected header name to be a string");let i=Rk(r[1])?r[1]:[r[1]],s=!1;for(let a of i)a!==void 0&&(e&&!s&&(s=!0,yield[o,null]),yield[o,a])}}var cf=t=>{let e=new Headers,n=new Set;for(let r of t){let o=new Set;for(let[i,s]of w7(r)){let a=i.toLowerCase();o.has(a)||(e.delete(i),o.add(a)),s===null?(e.delete(i),n.add(a)):(e.append(i,s),n.delete(a))}}return{[_R]:!0,values:e,nulls:n}};var zv=t=>{var e,n,r,o,i,s;if(typeof globalThis.process!="undefined")return(r=(n=(e=globalThis.process.env)===null||e===void 0?void 0:e[t])===null||n===void 0?void 0:n.trim())!==null&&r!==void 0?r:void 0;if(typeof globalThis.Deno!="undefined")return(s=(i=(o=globalThis.Deno.env)===null||o===void 0?void 0:o.get)===null||i===void 0?void 0:i.call(o,t))===null||s===void 0?void 0:s.trim()};var ER,_m=class t{constructor(e){var n,r,o,i,s,a,l,{baseURL:u=zv("GEMINI_NEXT_GEN_API_BASE_URL"),apiKey:f=(n=zv("GEMINI_API_KEY"))!==null&&n!==void 0?n:null,apiVersion:p="v1beta"}=e,m=am(e,["baseURL","apiKey","apiVersion"]);let b=Object.assign(Object.assign({apiKey:f,apiVersion:p},m),{baseURL:u||"https://generativelanguage.googleapis.com"});this.baseURL=b.baseURL,this.timeout=(r=b.timeout)!==null&&r!==void 0?r:t.DEFAULT_TIMEOUT,this.logger=(o=b.logger)!==null&&o!==void 0?o:console;let v="warn";this.logLevel=v,this.logLevel=(s=(i=Fk(b.logLevel,"ClientOptions.logLevel",this))!==null&&i!==void 0?i:Fk(zv("GEMINI_NEXT_GEN_API_LOG"),"process.env['GEMINI_NEXT_GEN_API_LOG']",this))!==null&&s!==void 0?s:v,this.fetchOptions=b.fetchOptions,this.maxRetries=(a=b.maxRetries)!==null&&a!==void 0?a:2,this.fetch=(l=b.fetch)!==null&&l!==void 0?l:t7(),this.encoder=o7,this._options=b,this.apiKey=f,this.apiVersion=p,this.clientAdapter=b.clientAdapter}withOptions(e){return new this.constructor(Object.assign(Object.assign(Object.assign({},this._options),{baseURL:this.baseURL,maxRetries:this.maxRetries,timeout:this.timeout,logger:this.logger,logLevel:this.logLevel,fetch:this.fetch,fetchOptions:this.fetchOptions,apiKey:this.apiKey,apiVersion:this.apiVersion}),e))}baseURLOverridden(){return this.baseURL!=="https://generativelanguage.googleapis.com"}defaultQuery(){return this._options.defaultQuery}validateHeaders({values:e,nulls:n}){if(!(e.has("authorization")||e.has("x-goog-api-key"))&&!(this.apiKey&&e.get("x-goog-api-key"))&&!n.has("x-goog-api-key"))throw new Error('Could not resolve authentication method. Expected the apiKey to be set. Or for the "x-goog-api-key" headers to be explicitly omitted')}async authHeaders(e){let n=cf([e.headers]);if(!(n.values.has("authorization")||n.values.has("x-goog-api-key"))){if(this.apiKey)return cf([{"x-goog-api-key":this.apiKey}]);if(this.clientAdapter.isVertexAI())return cf([await this.clientAdapter.getAuthHeaders()])}}stringifyQuery(e){return Object.entries(e).filter(([n,r])=>typeof r!="undefined").map(([n,r])=>{if(typeof r=="string"||typeof r=="number"||typeof r=="boolean")return`${encodeURIComponent(n)}=${encodeURIComponent(r)}`;if(r===null)return`${encodeURIComponent(n)}=`;throw new mn(`Cannot stringify type ${typeof r}; Expected string, number, boolean, or null. If you need to pass nested query parameters, you can manually encode them, e.g. { query: { 'foo[key1]': value1, 'foo[key2]': value2 } }, and please open a GitHub issue requesting better support for your use case.`)}).join("&")}getUserAgent(){return`${this.constructor.name}/JS ${su}`}defaultIdempotencyKey(){return`stainless-node-retry-${HK()}`}makeStatusError(e,n,r,o){return gn.generate(e,n,r,o)}buildURL(e,n,r){let o=!this.baseURLOverridden()&&r||this.baseURL,i=$K(e)?new URL(e):new URL(o+(o.endsWith("/")&&e.startsWith("/")?e.slice(1):e)),s=this.defaultQuery();return WK(s)||(n=Object.assign(Object.assign({},s),n)),typeof n=="object"&&n&&!Array.isArray(n)&&(i.search=this.stringifyQuery(n)),i.toString()}async prepareOptions(e){if(this.clientAdapter&&this.clientAdapter.isVertexAI()&&!e.path.startsWith(`/${this.apiVersion}/projects/`)){let n=e.path.slice(this.apiVersion.length+1);e.path=`/${this.apiVersion}/projects/${this.clientAdapter.getProject()}/locations/${this.clientAdapter.getLocation()}${n}`}}async prepareRequest(e,{url:n,options:r}){}get(e,n){return this.methodRequest("get",e,n)}post(e,n){return this.methodRequest("post",e,n)}patch(e,n){return this.methodRequest("patch",e,n)}put(e,n){return this.methodRequest("put",e,n)}delete(e,n){return this.methodRequest("delete",e,n)}methodRequest(e,n,r){return this.request(Promise.resolve(r).then(o=>Object.assign({method:e,path:n},o)))}request(e,n=null){return new Gw(this,this.makeRequest(e,n,void 0))}async makeRequest(e,n,r){var o,i,s;let a=await e,l=(o=a.maxRetries)!==null&&o!==void 0?o:this.maxRetries;n==null&&(n=l),await this.prepareOptions(a);let{req:u,url:f,timeout:p}=await this.buildRequest(a,{retryCount:l-n});await this.prepareRequest(u,{url:f,options:a});let m="log_"+(Math.random()*(1<<24)|0).toString(16).padStart(6,"0"),b=r===void 0?"":`, retryOf: ${r}`,v=Date.now();if(on(this).debug(`[${m}] sending request`,ia({retryOfRequestLogID:r,method:a.method,url:f,options:a,headers:u.headers})),!((i=a.signal)===null||i===void 0)&&i.aborted)throw new pf;let w=new AbortController,_=await this.fetchWithTimeout(f,u,p,w).catch(Mw),T=Date.now();if(_ instanceof globalThis.Error){let L=`retrying, ${n} attempts remaining`;if(!((s=a.signal)===null||s===void 0)&&s.aborted)throw new pf;let D=Dw(_)||/timed? ?out/i.test(String(_)+("cause"in _?String(_.cause):""));if(n)return on(this).info(`[${m}] connection ${D?"timed out":"failed"} - ${L}`),on(this).debug(`[${m}] connection ${D?"timed out":"failed"} (${L})`,ia({retryOfRequestLogID:r,url:f,durationMs:T-v,message:_.message})),this.retryRequest(a,n,r!=null?r:m);throw on(this).info(`[${m}] connection ${D?"timed out":"failed"} - error; no more retries left`),on(this).debug(`[${m}] connection ${D?"timed out":"failed"} (error; no more retries left)`,ia({retryOfRequestLogID:r,url:f,durationMs:T-v,message:_.message})),D?new lm:new cu({cause:_})}let R=`[${m}${b}] ${u.method} ${f} ${_.ok?"succeeded":"failed"} with status ${_.status} in ${T-v}ms`;if(!_.ok){let L=await this.shouldRetry(_);if(n&&L){let E=`retrying, ${n} attempts remaining`;return await r7(_.body),on(this).info(`${R} - ${E}`),on(this).debug(`[${m}] response error (${E})`,ia({retryOfRequestLogID:r,url:_.url,status:_.status,headers:_.headers,durationMs:T-v})),this.retryRequest(a,n,r!=null?r:m,_.headers)}let D=L?"error; no more retries left":"error; not retryable";on(this).info(`${R} - ${D}`);let x=await _.text().catch(E=>Mw(E).message),P=KK(x),V=P?void 0:x;throw on(this).debug(`[${m}] response error (${D})`,ia({retryOfRequestLogID:r,url:_.url,status:_.status,headers:_.headers,message:V,durationMs:Date.now()-v})),this.makeStatusError(_.status,P,V,_.headers)}return on(this).info(R),on(this).debug(`[${m}] response start`,ia({retryOfRequestLogID:r,url:_.url,status:_.status,headers:_.headers,durationMs:T-v})),{response:_,options:a,controller:w,requestLogID:m,retryOfRequestLogID:r,startTime:v}}async fetchWithTimeout(e,n,r,o){let i=n||{},{signal:s,method:a}=i,l=am(i,["signal","method"]),u=this._makeAbort(o);s&&s.addEventListener("abort",u,{once:!0});let f=setTimeout(u,r),p=globalThis.ReadableStream&&l.body instanceof globalThis.ReadableStream||typeof l.body=="object"&&l.body!==null&&Symbol.asyncIterator in l.body,m=Object.assign(Object.assign(Object.assign({signal:o.signal},p?{duplex:"half"}:{}),{method:"GET"}),l);a&&(m.method=a.toUpperCase());try{return await this.fetch.call(void 0,e,m)}finally{clearTimeout(f)}}async shouldRetry(e){let n=e.headers.get("x-should-retry");return n==="true"?!0:n==="false"?!1:e.status===408||e.status===409||e.status===429||e.status>=500}async retryRequest(e,n,r,o){var i;let s,a=o==null?void 0:o.get("retry-after-ms");if(a){let u=parseFloat(a);Number.isNaN(u)||(s=u)}let l=o==null?void 0:o.get("retry-after");if(l&&!s){let u=parseFloat(l);Number.isNaN(u)?s=Date.parse(l)-Date.now():s=u*1e3}if(!(s&&0<=s&&s<60*1e3)){let u=(i=e.maxRetries)!==null&&i!==void 0?i:this.maxRetries;s=this.calculateDefaultRetryTimeoutMillis(n,u)}return await YK(s),this.makeRequest(e,n-1,r)}calculateDefaultRetryTimeoutMillis(e,n){let i=n-e,s=Math.min(.5*Math.pow(2,i),8),a=1-Math.random()*.25;return s*a*1e3}async buildRequest(e,{retryCount:n=0}={}){var r,o,i;let s=Object.assign({},e),{method:a,path:l,query:u,defaultBaseURL:f}=s,p=this.buildURL(l,u,f);"timeout"in s&&JK("timeout",s.timeout),s.timeout=(r=s.timeout)!==null&&r!==void 0?r:this.timeout;let{bodyHeaders:m,body:b}=this.buildBody({options:s}),v=await this.buildHeaders({options:e,method:a,bodyHeaders:m,retryCount:n});return{req:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({method:a,headers:v},s.signal&&{signal:s.signal}),globalThis.ReadableStream&&b instanceof globalThis.ReadableStream&&{duplex:"half"}),b&&{body:b}),(o=this.fetchOptions)!==null&&o!==void 0?o:{}),(i=s.fetchOptions)!==null&&i!==void 0?i:{}),url:p,timeout:s.timeout}}async buildHeaders({options:e,method:n,bodyHeaders:r,retryCount:o}){let i={};this.idempotencyHeader&&n!=="get"&&(e.idempotencyKey||(e.idempotencyKey=this.defaultIdempotencyKey()),i[this.idempotencyHeader]=e.idempotencyKey);let s=await this.authHeaders(e),a=cf([i,Object.assign(Object.assign({Accept:"application/json","User-Agent":this.getUserAgent(),"X-Stainless-Retry-Count":String(o)},e.timeout?{"X-Stainless-Timeout":String(Math.trunc(e.timeout/1e3))}:{}),e7()),this._options.defaultHeaders,r,e.headers,s]);return this.validateHeaders(a),a.values}_makeAbort(e){return()=>e.abort()}buildBody({options:{body:e,headers:n}}){if(!e)return{bodyHeaders:void 0,body:void 0};let r=cf([n]);return ArrayBuffer.isView(e)||e instanceof ArrayBuffer||e instanceof DataView||typeof e=="string"&&r.values.has("content-type")||globalThis.Blob&&e instanceof globalThis.Blob||e instanceof FormData||e instanceof URLSearchParams||globalThis.ReadableStream&&e instanceof globalThis.ReadableStream?{bodyHeaders:void 0,body:e}:typeof e=="object"&&(Symbol.asyncIterator in e||Symbol.iterator in e&&"next"in e&&typeof e.next=="function")?{bodyHeaders:void 0,body:n7(e)}:this.encoder({body:e,headers:r})}};_m.DEFAULT_TIMEOUT=6e4;var vt=class extends _m{constructor(){super(...arguments),this.interactions=new vm(this)}};ER=vt;vt.GeminiNextGenAPIClient=ER;vt.GeminiNextGenAPIClientError=mn;vt.APIError=gn;vt.APIConnectionError=cu;vt.APIConnectionTimeoutError=lm;vt.APIUserAbortError=pf;vt.NotFoundError=dm;vt.ConflictError=hm;vt.RateLimitError=mm;vt.BadRequestError=um;vt.AuthenticationError=cm;vt.InternalServerError=gm;vt.PermissionDeniedError=fm;vt.UnprocessableEntityError=pm;vt.toFile=u7;vt.Interactions=vm;var Uk="x-goog-api-key",ff="https://www.googleapis.com/auth/cloud-platform",Hw=class{constructor(e){if(e.apiKey!==void 0){this.apiKey=e.apiKey;return}let n=_7(e.googleAuthOptions);this.googleAuth=new Bk.GoogleAuth(n)}async addAuthHeaders(e,n){if(this.apiKey!==void 0){if(this.apiKey.startsWith("auth_tokens/"))throw new Error("Ephemeral tokens are only supported by the live API.");this.addKeyHeader(e);return}return this.addGoogleAuthHeaders(e,n)}addKeyHeader(e){if(e.get(Uk)===null){if(this.apiKey===void 0)throw new Error("Trying to set API key header but apiKey is not set");e.append(Uk,this.apiKey)}}async addGoogleAuthHeaders(e,n){if(this.googleAuth===void 0)throw new Error("Trying to set google-auth headers but googleAuth is unset");let r=await this.googleAuth.getRequestHeaders(n);for(let[o,i]of r)e.get(o)===null&&e.append(o,i)}};function _7(t){let e;if(t){if(e=t,e.scopes){if(typeof e.scopes=="string"&&e.scopes!==ff||Array.isArray(e.scopes)&&e.scopes.indexOf(ff)<0)throw new Error(`Invalid auth scopes. Scopes must include: ${ff}`)}else return e.scopes=[ff],e;return e}else return e={scopes:[ff]},e}var qw=class{async download(e,n){if(e.downloadPath){let r=await E7(e,n);if(r instanceof la){let o=(0,Gk.createWriteStream)(e.downloadPath);qk.Readable.fromWeb(r.responseInternal.body).pipe(o),await(0,$k.finished)(o)}else try{await(0,Hk.writeFile)(e.downloadPath,r,{encoding:"base64"})}catch(o){throw new Error(`Failed to write file to ${e.downloadPath}: ${o}`)}}}};async function E7(t,e){var n,r,o;let i=t_(t.file);if(i!==void 0)return await e.request({path:`files/${i}:download`,httpMethod:"GET",queryParams:{alt:"media"},httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal});if(Xk(t.file)){let s=(o=t.file.video)===null||o===void 0?void 0:o.videoBytes;if(typeof s=="string")return s;throw new Error("Failed to download generated video, Uri or videoBytes not found.")}else if(Qk(t.file)){let s=t.file.videoBytes;if(typeof s=="string")return s;throw new Error("Failed to download video, Uri or videoBytes not found.")}else throw new Error("Unsupported file type")}var $w=class{create(e,n,r){return new Vw(e,n,r)}},Vw=class{constructor(e,n,r){this.url=e,this.headers=n,this.callbacks=r}connect(){this.ws=new jv.default(this.url,{headers:this.headers}),this.ws.onopen=this.callbacks.onopen,this.ws.onerror=this.callbacks.onerror,this.ws.onclose=this.callbacks.onclose,this.ws.onmessage=this.callbacks.onmessage}send(e){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.send(e)}close(){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.close()}};function A7(t,e){let n={},r=c(t,["name"]);return r!=null&&d(n,["_url","name"],r),n}function C7(t,e){let n={},r=c(t,["name"]);return r!=null&&d(n,["_url","name"],r),n}function T7(t,e){let n={},r=c(t,["sdkHttpResponse"]);return r!=null&&d(n,["sdkHttpResponse"],r),n}function S7(t,e){let n={},r=c(t,["sdkHttpResponse"]);return r!=null&&d(n,["sdkHttpResponse"],r),n}function P7(t,e,n){let r={};if(c(t,["validationDataset"])!==void 0)throw new Error("validationDataset parameter is not supported in Gemini API.");let o=c(t,["tunedModelDisplayName"]);if(e!==void 0&&o!=null&&d(e,["displayName"],o),c(t,["description"])!==void 0)throw new Error("description parameter is not supported in Gemini API.");let i=c(t,["epochCount"]);e!==void 0&&i!=null&&d(e,["tuningTask","hyperparameters","epochCount"],i);let s=c(t,["learningRateMultiplier"]);if(s!=null&&d(r,["tuningTask","hyperparameters","learningRateMultiplier"],s),c(t,["exportLastCheckpointOnly"])!==void 0)throw new Error("exportLastCheckpointOnly parameter is not supported in Gemini API.");if(c(t,["preTunedModelCheckpointId"])!==void 0)throw new Error("preTunedModelCheckpointId parameter is not supported in Gemini API.");if(c(t,["adapterSize"])!==void 0)throw new Error("adapterSize parameter is not supported in Gemini API.");if(c(t,["tuningMode"])!==void 0)throw new Error("tuningMode parameter is not supported in Gemini API.");if(c(t,["customBaseModel"])!==void 0)throw new Error("customBaseModel parameter is not supported in Gemini API.");let a=c(t,["batchSize"]);e!==void 0&&a!=null&&d(e,["tuningTask","hyperparameters","batchSize"],a);let l=c(t,["learningRate"]);if(e!==void 0&&l!=null&&d(e,["tuningTask","hyperparameters","learningRate"],l),c(t,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");if(c(t,["beta"])!==void 0)throw new Error("beta parameter is not supported in Gemini API.");if(c(t,["baseTeacherModel"])!==void 0)throw new Error("baseTeacherModel parameter is not supported in Gemini API.");if(c(t,["tunedTeacherModelSource"])!==void 0)throw new Error("tunedTeacherModelSource parameter is not supported in Gemini API.");if(c(t,["sftLossWeightMultiplier"])!==void 0)throw new Error("sftLossWeightMultiplier parameter is not supported in Gemini API.");if(c(t,["outputUri"])!==void 0)throw new Error("outputUri parameter is not supported in Gemini API.");if(c(t,["encryptionSpec"])!==void 0)throw new Error("encryptionSpec parameter is not supported in Gemini API.");return r}function I7(t,e,n){let r={},o=c(n,["config","method"]);if(o===void 0&&(o="SUPERVISED_FINE_TUNING"),o==="SUPERVISED_FINE_TUNING"){let P=c(t,["validationDataset"]);e!==void 0&&P!=null&&d(e,["supervisedTuningSpec"],Jv(P))}else if(o==="PREFERENCE_TUNING"){let P=c(t,["validationDataset"]);e!==void 0&&P!=null&&d(e,["preferenceOptimizationSpec"],Jv(P))}else if(o==="DISTILLATION"){let P=c(t,["validationDataset"]);e!==void 0&&P!=null&&d(e,["distillationSpec"],Jv(P))}let i=c(t,["tunedModelDisplayName"]);e!==void 0&&i!=null&&d(e,["tunedModelDisplayName"],i);let s=c(t,["description"]);e!==void 0&&s!=null&&d(e,["description"],s);let a=c(n,["config","method"]);if(a===void 0&&(a="SUPERVISED_FINE_TUNING"),a==="SUPERVISED_FINE_TUNING"){let P=c(t,["epochCount"]);e!==void 0&&P!=null&&d(e,["supervisedTuningSpec","hyperParameters","epochCount"],P)}else if(a==="PREFERENCE_TUNING"){let P=c(t,["epochCount"]);e!==void 0&&P!=null&&d(e,["preferenceOptimizationSpec","hyperParameters","epochCount"],P)}else if(a==="DISTILLATION"){let P=c(t,["epochCount"]);e!==void 0&&P!=null&&d(e,["distillationSpec","hyperParameters","epochCount"],P)}let l=c(n,["config","method"]);if(l===void 0&&(l="SUPERVISED_FINE_TUNING"),l==="SUPERVISED_FINE_TUNING"){let P=c(t,["learningRateMultiplier"]);e!==void 0&&P!=null&&d(e,["supervisedTuningSpec","hyperParameters","learningRateMultiplier"],P)}else if(l==="PREFERENCE_TUNING"){let P=c(t,["learningRateMultiplier"]);e!==void 0&&P!=null&&d(e,["preferenceOptimizationSpec","hyperParameters","learningRateMultiplier"],P)}else if(l==="DISTILLATION"){let P=c(t,["learningRateMultiplier"]);e!==void 0&&P!=null&&d(e,["distillationSpec","hyperParameters","learningRateMultiplier"],P)}let u=c(n,["config","method"]);if(u===void 0&&(u="SUPERVISED_FINE_TUNING"),u==="SUPERVISED_FINE_TUNING"){let P=c(t,["exportLastCheckpointOnly"]);e!==void 0&&P!=null&&d(e,["supervisedTuningSpec","exportLastCheckpointOnly"],P)}else if(u==="PREFERENCE_TUNING"){let P=c(t,["exportLastCheckpointOnly"]);e!==void 0&&P!=null&&d(e,["preferenceOptimizationSpec","exportLastCheckpointOnly"],P)}else if(u==="DISTILLATION"){let P=c(t,["exportLastCheckpointOnly"]);e!==void 0&&P!=null&&d(e,["distillationSpec","exportLastCheckpointOnly"],P)}let f=c(n,["config","method"]);if(f===void 0&&(f="SUPERVISED_FINE_TUNING"),f==="SUPERVISED_FINE_TUNING"){let P=c(t,["adapterSize"]);e!==void 0&&P!=null&&d(e,["supervisedTuningSpec","hyperParameters","adapterSize"],P)}else if(f==="PREFERENCE_TUNING"){let P=c(t,["adapterSize"]);e!==void 0&&P!=null&&d(e,["preferenceOptimizationSpec","hyperParameters","adapterSize"],P)}else if(f==="DISTILLATION"){let P=c(t,["adapterSize"]);e!==void 0&&P!=null&&d(e,["distillationSpec","hyperParameters","adapterSize"],P)}let p=c(n,["config","method"]);if(p===void 0&&(p="SUPERVISED_FINE_TUNING"),p==="SUPERVISED_FINE_TUNING"){let P=c(t,["tuningMode"]);e!==void 0&&P!=null&&d(e,["supervisedTuningSpec","tuningMode"],P)}let m=c(t,["customBaseModel"]);e!==void 0&&m!=null&&d(e,["customBaseModel"],m);let b=c(n,["config","method"]);if(b===void 0&&(b="SUPERVISED_FINE_TUNING"),b==="SUPERVISED_FINE_TUNING"){let P=c(t,["batchSize"]);e!==void 0&&P!=null&&d(e,["supervisedTuningSpec","hyperParameters","batchSize"],P)}let v=c(n,["config","method"]);if(v===void 0&&(v="SUPERVISED_FINE_TUNING"),v==="SUPERVISED_FINE_TUNING"){let P=c(t,["learningRate"]);e!==void 0&&P!=null&&d(e,["supervisedTuningSpec","hyperParameters","learningRate"],P)}let w=c(t,["labels"]);e!==void 0&&w!=null&&d(e,["labels"],w);let _=c(t,["beta"]);e!==void 0&&_!=null&&d(e,["preferenceOptimizationSpec","hyperParameters","beta"],_);let T=c(t,["baseTeacherModel"]);e!==void 0&&T!=null&&d(e,["distillationSpec","baseTeacherModel"],T);let R=c(t,["tunedTeacherModelSource"]);e!==void 0&&R!=null&&d(e,["distillationSpec","tunedTeacherModelSource"],R);let L=c(t,["sftLossWeightMultiplier"]);e!==void 0&&L!=null&&d(e,["distillationSpec","hyperParameters","sftLossWeightMultiplier"],L);let D=c(t,["outputUri"]);e!==void 0&&D!=null&&d(e,["outputUri"],D);let x=c(t,["encryptionSpec"]);return e!==void 0&&x!=null&&d(e,["encryptionSpec"],x),r}function x7(t,e){let n={},r=c(t,["baseModel"]);r!=null&&d(n,["baseModel"],r);let o=c(t,["preTunedModel"]);o!=null&&d(n,["preTunedModel"],o);let i=c(t,["trainingDataset"]);i!=null&&G7(i);let s=c(t,["config"]);return s!=null&&P7(s,n),n}function k7(t,e){let n={},r=c(t,["baseModel"]);r!=null&&d(n,["baseModel"],r);let o=c(t,["preTunedModel"]);o!=null&&d(n,["preTunedModel"],o);let i=c(t,["trainingDataset"]);i!=null&&H7(i,n,e);let s=c(t,["config"]);return s!=null&&I7(s,n,e),n}function R7(t,e){let n={},r=c(t,["name"]);return r!=null&&d(n,["_url","name"],r),n}function N7(t,e){let n={},r=c(t,["name"]);return r!=null&&d(n,["_url","name"],r),n}function O7(t,e,n){let r={},o=c(t,["pageSize"]);e!==void 0&&o!=null&&d(e,["_query","pageSize"],o);let i=c(t,["pageToken"]);e!==void 0&&i!=null&&d(e,["_query","pageToken"],i);let s=c(t,["filter"]);return e!==void 0&&s!=null&&d(e,["_query","filter"],s),r}function D7(t,e,n){let r={},o=c(t,["pageSize"]);e!==void 0&&o!=null&&d(e,["_query","pageSize"],o);let i=c(t,["pageToken"]);e!==void 0&&i!=null&&d(e,["_query","pageToken"],i);let s=c(t,["filter"]);return e!==void 0&&s!=null&&d(e,["_query","filter"],s),r}function M7(t,e){let n={},r=c(t,["config"]);return r!=null&&O7(r,n),n}function F7(t,e){let n={},r=c(t,["config"]);return r!=null&&D7(r,n),n}function L7(t,e){let n={},r=c(t,["sdkHttpResponse"]);r!=null&&d(n,["sdkHttpResponse"],r);let o=c(t,["nextPageToken"]);o!=null&&d(n,["nextPageToken"],o);let i=c(t,["tunedModels"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(a=>AR(a))),d(n,["tuningJobs"],s)}return n}function U7(t,e){let n={},r=c(t,["sdkHttpResponse"]);r!=null&&d(n,["sdkHttpResponse"],r);let o=c(t,["nextPageToken"]);o!=null&&d(n,["nextPageToken"],o);let i=c(t,["tuningJobs"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(a=>jw(a))),d(n,["tuningJobs"],s)}return n}function B7(t,e){let n={},r=c(t,["name"]);r!=null&&d(n,["model"],r);let o=c(t,["name"]);return o!=null&&d(n,["endpoint"],o),n}function G7(t,e){let n={};if(c(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(c(t,["vertexDatasetResource"])!==void 0)throw new Error("vertexDatasetResource parameter is not supported in Gemini API.");let r=c(t,["examples"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(i=>i)),d(n,["examples","examples"],o)}return n}function H7(t,e,n){let r={},o=c(n,["config","method"]);if(o===void 0&&(o="SUPERVISED_FINE_TUNING"),o==="SUPERVISED_FINE_TUNING"){let s=c(t,["gcsUri"]);e!==void 0&&s!=null&&d(e,["supervisedTuningSpec","trainingDatasetUri"],s)}else if(o==="PREFERENCE_TUNING"){let s=c(t,["gcsUri"]);e!==void 0&&s!=null&&d(e,["preferenceOptimizationSpec","trainingDatasetUri"],s)}else if(o==="DISTILLATION"){let s=c(t,["gcsUri"]);e!==void 0&&s!=null&&d(e,["distillationSpec","promptDatasetUri"],s)}let i=c(n,["config","method"]);if(i===void 0&&(i="SUPERVISED_FINE_TUNING"),i==="SUPERVISED_FINE_TUNING"){let s=c(t,["vertexDatasetResource"]);e!==void 0&&s!=null&&d(e,["supervisedTuningSpec","trainingDatasetUri"],s)}else if(i==="PREFERENCE_TUNING"){let s=c(t,["vertexDatasetResource"]);e!==void 0&&s!=null&&d(e,["preferenceOptimizationSpec","trainingDatasetUri"],s)}else if(i==="DISTILLATION"){let s=c(t,["vertexDatasetResource"]);e!==void 0&&s!=null&&d(e,["distillationSpec","promptDatasetUri"],s)}if(c(t,["examples"])!==void 0)throw new Error("examples parameter is not supported in Vertex AI.");return r}function AR(t,e){let n={},r=c(t,["sdkHttpResponse"]);r!=null&&d(n,["sdkHttpResponse"],r);let o=c(t,["name"]);o!=null&&d(n,["name"],o);let i=c(t,["state"]);i!=null&&d(n,["state"],Yk(i));let s=c(t,["createTime"]);s!=null&&d(n,["createTime"],s);let a=c(t,["tuningTask","startTime"]);a!=null&&d(n,["startTime"],a);let l=c(t,["tuningTask","completeTime"]);l!=null&&d(n,["endTime"],l);let u=c(t,["updateTime"]);u!=null&&d(n,["updateTime"],u);let f=c(t,["description"]);f!=null&&d(n,["description"],f);let p=c(t,["baseModel"]);p!=null&&d(n,["baseModel"],p);let m=c(t,["_self"]);return m!=null&&d(n,["tunedModel"],B7(m)),n}function jw(t,e){let n={},r=c(t,["sdkHttpResponse"]);r!=null&&d(n,["sdkHttpResponse"],r);let o=c(t,["name"]);o!=null&&d(n,["name"],o);let i=c(t,["state"]);i!=null&&d(n,["state"],Yk(i));let s=c(t,["createTime"]);s!=null&&d(n,["createTime"],s);let a=c(t,["startTime"]);a!=null&&d(n,["startTime"],a);let l=c(t,["endTime"]);l!=null&&d(n,["endTime"],l);let u=c(t,["updateTime"]);u!=null&&d(n,["updateTime"],u);let f=c(t,["error"]);f!=null&&d(n,["error"],f);let p=c(t,["description"]);p!=null&&d(n,["description"],p);let m=c(t,["baseModel"]);m!=null&&d(n,["baseModel"],m);let b=c(t,["tunedModel"]);b!=null&&d(n,["tunedModel"],b);let v=c(t,["preTunedModel"]);v!=null&&d(n,["preTunedModel"],v);let w=c(t,["supervisedTuningSpec"]);w!=null&&d(n,["supervisedTuningSpec"],w);let _=c(t,["preferenceOptimizationSpec"]);_!=null&&d(n,["preferenceOptimizationSpec"],_);let T=c(t,["distillationSpec"]);T!=null&&d(n,["distillationSpec"],T);let R=c(t,["tuningDataStats"]);R!=null&&d(n,["tuningDataStats"],R);let L=c(t,["encryptionSpec"]);L!=null&&d(n,["encryptionSpec"],L);let D=c(t,["partnerModelTuningSpec"]);D!=null&&d(n,["partnerModelTuningSpec"],D);let x=c(t,["customBaseModel"]);x!=null&&d(n,["customBaseModel"],x);let P=c(t,["experiment"]);P!=null&&d(n,["experiment"],P);let V=c(t,["labels"]);V!=null&&d(n,["labels"],V);let J=c(t,["outputUri"]);J!=null&&d(n,["outputUri"],J);let E=c(t,["pipelineJob"]);E!=null&&d(n,["pipelineJob"],E);let O=c(t,["serviceAccount"]);O!=null&&d(n,["serviceAccount"],O);let X=c(t,["tunedModelDisplayName"]);X!=null&&d(n,["tunedModelDisplayName"],X);let ee=c(t,["veoTuningSpec"]);return ee!=null&&d(n,["veoTuningSpec"],ee),n}function q7(t,e){let n={},r=c(t,["sdkHttpResponse"]);r!=null&&d(n,["sdkHttpResponse"],r);let o=c(t,["name"]);o!=null&&d(n,["name"],o);let i=c(t,["metadata"]);i!=null&&d(n,["metadata"],i);let s=c(t,["done"]);s!=null&&d(n,["done"],s);let a=c(t,["error"]);return a!=null&&d(n,["error"],a),n}function Jv(t,e){let n={},r=c(t,["gcsUri"]);r!=null&&d(n,["validationDatasetUri"],r);let o=c(t,["vertexDatasetResource"]);return o!=null&&d(n,["validationDatasetUri"],o),n}var Ww=class extends Ir{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new Wo(jo.PAGED_ITEM_TUNING_JOBS,r=>this.listInternal(r),await this.listInternal(n),n),this.get=async n=>await this.getInternal(n),this.tune=async n=>{var r;if(this.apiClient.isVertexAI())if(n.baseModel.startsWith("projects/")){let o={tunedModelName:n.baseModel};!((r=n.config)===null||r===void 0)&&r.preTunedModelCheckpointId&&(o.checkpointId=n.config.preTunedModelCheckpointId);let i=Object.assign(Object.assign({},n),{preTunedModel:o});return i.baseModel=void 0,await this.tuneInternal(i)}else{let o=Object.assign({},n);return await this.tuneInternal(o)}else{let o=Object.assign({},n),i=await this.tuneMldevInternal(o),s="";return i.metadata!==void 0&&i.metadata.tunedModel!==void 0?s=i.metadata.tunedModel:i.name!==void 0&&i.name.includes("/operations/")&&(s=i.name.split("/operations/")[0]),{name:s,state:Yv.JOB_STATE_QUEUED}}}}async getInternal(e){var n,r,o,i;let s,a="",l={};if(this.apiClient.isVertexAI()){let u=N7(e);return a=le("{name}",u._url),l=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json().then(p=>{let m=p;return m.sdkHttpResponse={headers:f.headers},m})),s.then(f=>jw(f))}else{let u=R7(e);return a=le("{name}",u._url),l=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json().then(p=>{let m=p;return m.sdkHttpResponse={headers:f.headers},m})),s.then(f=>AR(f))}}async listInternal(e){var n,r,o,i;let s,a="",l={};if(this.apiClient.isVertexAI()){let u=F7(e);return a=le("tuningJobs",u._url),l=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json().then(p=>{let m=p;return m.sdkHttpResponse={headers:f.headers},m})),s.then(f=>{let p=U7(f),m=new em;return Object.assign(m,p),m})}else{let u=M7(e);return a=le("tunedModels",u._url),l=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json().then(p=>{let m=p;return m.sdkHttpResponse={headers:f.headers},m})),s.then(f=>{let p=L7(f),m=new em;return Object.assign(m,p),m})}}async cancel(e){var n,r,o,i;let s,a="",l={};if(this.apiClient.isVertexAI()){let u=C7(e);return a=le("{name}:cancel",u._url),l=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json().then(p=>{let m=p;return m.sdkHttpResponse={headers:f.headers},m})),s.then(f=>{let p=S7(f),m=new tm;return Object.assign(m,p),m})}else{let u=A7(e);return a=le("{name}:cancel",u._url),l=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json().then(p=>{let m=p;return m.sdkHttpResponse={headers:f.headers},m})),s.then(f=>{let p=T7(f),m=new tm;return Object.assign(m,p),m})}}async tuneInternal(e){var n,r;let o,i="",s={};if(this.apiClient.isVertexAI()){let a=k7(e,e);return i=le("tuningJobs",a._url),s=a._query,delete a._url,delete a._query,o=this.apiClient.request({path:i,queryParams:s,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json().then(u=>{let f=u;return f.sdkHttpResponse={headers:l.headers},f})),o.then(l=>jw(l))}else throw new Error("This method is only supported by the Vertex AI.")}async tuneMldevInternal(e){var n,r;let o,i="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{let a=x7(e);return i=le("tunedModels",a._url),s=a._query,delete a._url,delete a._query,o=this.apiClient.request({path:i,queryParams:s,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json().then(u=>{let f=u;return f.sdkHttpResponse={headers:l.headers},f})),o.then(l=>q7(l))}}},CR=1024*1024*8,TR=3,SR=1e3,PR=2,$i="x-goog-upload-status";async function $7(t,e,n){var r;let o=await IR(t,e,n),i=await(o==null?void 0:o.json());if(((r=o==null?void 0:o.headers)===null||r===void 0?void 0:r[$i])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");return i.file}async function V7(t,e,n){var r;let o=await IR(t,e,n),i=await(o==null?void 0:o.json());if(((r=o==null?void 0:o.headers)===null||r===void 0?void 0:r[$i])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");let s=Yw(i),a=new im;return Object.assign(a,s),a}async function IR(t,e,n){var r,o;let i=0,s=0,a=new la(new Response),l="upload";for(i=t.size;s<i;){let u=Math.min(CR,i-s),f=t.slice(s,s+u);s+u>=i&&(l+=", finalize");let p=0,m=SR;for(;p<TR&&(a=await n.request({path:"",body:f,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:e,headers:{"X-Goog-Upload-Command":l,"X-Goog-Upload-Offset":String(s),"Content-Length":String(u)}}}),!(!((r=a==null?void 0:a.headers)===null||r===void 0)&&r[$i]));)p++,await xR(m),m=m*PR;if(s+=u,((o=a==null?void 0:a.headers)===null||o===void 0?void 0:o[$i])!=="active")break;if(i<=s)throw new Error("All content has been uploaded, but the upload status is not finalized.")}return a}async function j7(t){return{size:t.size,type:t.type}}function xR(t){return new Promise(e=>setTimeout(e,t))}var zw=class{async stat(e){let n={size:0,type:void 0};if(typeof e=="string"){let r=await Am.stat(e);return n.size=r.size,n.type=this.inferMimeType(e),n}else return await j7(e)}async upload(e,n,r){return typeof e=="string"?await this.uploadFileFromPath(e,n,r):$7(e,n,r)}async uploadToFileSearchStore(e,n,r){return typeof e=="string"?await this.uploadFileToFileSearchStoreFromPath(e,n,r):V7(e,n,r)}inferMimeType(e){let n=e.slice(e.lastIndexOf(".")+1);return{aac:"audio/aac",abw:"application/x-abiword",arc:"application/x-freearc",avi:"video/x-msvideo",azw:"application/vnd.amazon.ebook",bin:"application/octet-stream",bmp:"image/bmp",bz:"application/x-bzip",bz2:"application/x-bzip2",csh:"application/x-csh",css:"text/css",csv:"text/csv",doc:"application/msword",docx:"application/vnd.openxmlformats-officedocument.wordprocessingml.document",eot:"application/vnd.ms-fontobject",epub:"application/epub+zip",gz:"application/gzip",gif:"image/gif",htm:"text/html",html:"text/html",ico:"image/vnd.microsoft.icon",ics:"text/calendar",jar:"application/java-archive",jpeg:"image/jpeg",jpg:"image/jpeg",js:"text/javascript",json:"application/json",jsonld:"application/ld+json",kml:"application/vnd.google-earth.kml+xml",kmz:"application/vnd.google-earth.kmz+xml",mjs:"text/javascript",mp3:"audio/mpeg",mp4:"video/mp4",mpeg:"video/mpeg",mpkg:"application/vnd.apple.installer+xml",odt:"application/vnd.oasis.opendocument.text",oga:"audio/ogg",ogv:"video/ogg",ogx:"application/ogg",opus:"audio/opus",otf:"font/otf",png:"image/png",pdf:"application/pdf",php:"application/x-httpd-php",ppt:"application/vnd.ms-powerpoint",pptx:"application/vnd.openxmlformats-officedocument.presentationml.presentation",rar:"application/vnd.rar",rtf:"application/rtf",sh:"application/x-sh",svg:"image/svg+xml",swf:"application/x-shockwave-flash",tar:"application/x-tar",tif:"image/tiff",tiff:"image/tiff",ts:"video/mp2t",ttf:"font/ttf",txt:"text/plain",vsd:"application/vnd.visio",wav:"audio/wav",weba:"audio/webm",webm:"video/webm",webp:"image/webp",woff:"font/woff",woff2:"font/woff2",xhtml:"application/xhtml+xml",xls:"application/vnd.ms-excel",xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet",xml:"application/xml",xul:"application/vnd.mozilla.xul+xml",zip:"application/zip","3gp":"video/3gpp","3g2":"video/3gpp2","7z":"application/x-7z-compressed"}[n.toLowerCase()]}async uploadFileFromPath(e,n,r){var o;let i=await this.uploadFileFromPathInternal(e,n,r),s=await(i==null?void 0:i.json());if(((o=i==null?void 0:i.headers)===null||o===void 0?void 0:o[$i])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");return s.file}async uploadFileToFileSearchStoreFromPath(e,n,r){var o;let i=await this.uploadFileFromPathInternal(e,n,r),s=await(i==null?void 0:i.json());if(((o=i==null?void 0:i.headers)===null||o===void 0?void 0:o[$i])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");let a=Yw(s),l=new im;return Object.assign(l,a),l}async uploadFileFromPathInternal(e,n,r){var o,i;let s=0,a=0,l=new la(new Response),u="upload",f,p=Vk.basename(e);try{if(f=await Am.open(e,"r"),!f)throw new Error("Failed to open file");for(s=(await f.stat()).size;a<s;){let m=Math.min(CR,s-a);a+m>=s&&(u+=", finalize");let b=new Uint8Array(m),{bytesRead:v}=await f.read(b,0,m,a);if(v!==m)throw new Error(`Failed to read ${m} bytes from file at offset ${a}. bytes actually read: ${v}`);let w=new Blob([b]),_=0,T=SR;for(;_<TR&&(l=await r.request({path:"",body:w,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:n,headers:{"X-Goog-Upload-Command":u,"X-Goog-Upload-Offset":String(a),"Content-Length":String(v),"X-Goog-Upload-File-Name":p}}}),!(!((o=l==null?void 0:l.headers)===null||o===void 0)&&o[$i]));)_++,await xR(T),T=T*PR;if(a+=v,((i=l==null?void 0:l.headers)===null||i===void 0?void 0:i[$i])!=="active")break;if(s<=a)throw new Error("All content has been uploaded, but the upload status is not finalized.")}return l}finally{f&&await f.close()}}};var Jw=class extends vw{async registerFiles(e){if(typeof process=="undefined"||!process.versions||!process.versions.node)throw new Error("registerFiles is only supported in Node.js environments.");let r=await e.auth.getRequestHeaders(),o=e.config||{},i=o.httpOptions||{},s=Object.assign({},i.headers||{});if(r)if(typeof r[Symbol.iterator]=="function")for(let[a,l]of r)s[a]=l;else for(let[a,l]of Object.entries(r))s[a]=l;return this._registerFiles({uris:e.uris,config:Object.assign(Object.assign({},o),{httpOptions:Object.assign(Object.assign({},i),{headers:s})})})}};var W7="gl-node/",Em=class{get interactions(){var e;if(this._interactions!==void 0)return this._interactions;console.warn("GoogleGenAI.interactions: Interactions usage is experimental and may change in future versions.");let n=this.httpOptions;n!=null&&n.extraBody&&console.warn("GoogleGenAI.interactions: Client level httpOptions.extraBody is not supported by the interactions client and will be ignored.");let r=new vt({baseURL:this.apiClient.getBaseUrl(),apiKey:this.apiKey,apiVersion:this.apiClient.getApiVersion(),clientAdapter:this.apiClient,defaultHeaders:this.apiClient.getDefaultHeaders(),timeout:n==null?void 0:n.timeout,maxRetries:(e=n==null?void 0:n.retryOptions)===null||e===void 0?void 0:e.attempts});return this._interactions=r.interactions,this._interactions}constructor(e){var n,r,o,i,s,a;if((e.project||e.location)&&e.apiKey)throw new Error("Project/location and API key are mutually exclusive in the client initializer.");this.vertexai=(r=(n=e.vertexai)!==null&&n!==void 0?n:z7("GOOGLE_GENAI_USE_VERTEXAI"))!==null&&r!==void 0?r:!1;let l=K7(),u=aa("GOOGLE_CLOUD_PROJECT"),f=aa("GOOGLE_CLOUD_LOCATION");if(this.apiKey=(o=e.apiKey)!==null&&o!==void 0?o:l,this.project=(i=e.project)!==null&&i!==void 0?i:u,this.location=(s=e.location)!==null&&s!==void 0?s:f,!this.vertexai&&!this.apiKey)throw new Error("API key must be set when using the Gemini API.");e.vertexai&&(!((a=e.googleAuthOptions)===null||a===void 0)&&a.credentials&&(console.debug("The user provided Google Cloud credentials will take precedence over the API key from the environment variable."),this.apiKey=void 0),(u||f)&&e.apiKey?(console.debug("The user provided Vertex AI API key will take precedence over the project/location from the environment variables."),this.project=void 0,this.location=void 0):(e.project||e.location)&&l?(console.debug("The user provided project/location will take precedence over the API key from the environment variables."),this.apiKey=void 0):(u||f)&&l&&(console.debug("The project/location from the environment variables will take precedence over the API key from the environment variables."),this.apiKey=void 0),!this.location&&!this.apiKey&&(this.location="global"));let p=EW(e.httpOptions,e.vertexai,aa("GOOGLE_VERTEX_BASE_URL"),aa("GOOGLE_GEMINI_BASE_URL"));p&&(e.httpOptions?e.httpOptions.baseUrl=p:e.httpOptions={baseUrl:p}),this.apiVersion=e.apiVersion,this.httpOptions=e.httpOptions;let m=new Hw({apiKey:this.apiKey,googleAuthOptions:e.googleAuthOptions});this.apiClient=new Aw({auth:m,project:this.project,location:this.location,apiVersion:this.apiVersion,apiKey:this.apiKey,vertexai:this.vertexai,httpOptions:this.httpOptions,userAgentExtra:W7+process.version,uploader:new zw,downloader:new qw}),this.models=new xw(this.apiClient),this.live=new Pw(this.apiClient,m,new $w),this.batches=new mw(this.apiClient),this.chats=new yw(this.models,this.apiClient),this.caches=new gw(this.apiClient),this.files=new Jw(this.apiClient),this.operations=new kw(this.apiClient),this.authTokens=new Rw(this.apiClient),this.tunings=new Ww(this.apiClient),this.fileSearchStores=new Ow(this.apiClient)}};function aa(t){var e,n,r;return(r=(n=(e=process==null?void 0:process.env)===null||e===void 0?void 0:e[t])===null||n===void 0?void 0:n.trim())!==null&&r!==void 0?r:void 0}function z7(t){return J7(aa(t))}function J7(t){return t===void 0?!1:t.toLowerCase()==="true"}function K7(){let t=aa("GOOGLE_API_KEY"),e=aa("GEMINI_API_KEY");return t&&e&&console.warn("Both GOOGLE_API_KEY and GEMINI_API_KEY are set. Using GOOGLE_API_KEY."),t||e||void 0}var Pm=class{constructor(e){this.aborted=!1;this.settings=e,this.client=new Em({apiKey:e.apiKey})}async*generate(e,n,r){this.aborted=!1;let o=await this.client.models.generateContentStream({model:r.model,contents:n,config:{temperature:r.temperature,systemInstruction:r.systemPrompt}}),i=e.getCursor(),s="";for await(let a of o){if(this.aborted)return;if(this.cursorMoved(e,i)){this.abort();return}s+=a.text,yield s}}cursorMoved(e,n){let r=e.getCursor();return r.line!==n.line||r.ch!==n.ch}async abort(){this.aborted||(this.aborted=!0)}async fetchModels(){return(await this.client.models.list()).page.map(n=>{var r;return(r=n.name)==null?void 0:r.replace("models/","")}).filter(n=>typeof n=="string")}async connectionTest(){try{return await this.client.caches.list(),!0}catch(e){return console.error("Error testing connection:",e),!1}}};var Im=class{constructor(e){this.plugin=e;this.settings=this.plugin.settings,this.providers=this.buildProviders(this.settings)}rebuildProviders(){this.providers=this.buildProviders(this.settings)}getProvider(e){return this.providers[e]}async fetchModels(e){return this.providers[e].fetchModels()}async connectionTest(e){return this.providers[e].connectionTest()}buildProviders(e){return{ollama:new Ed(e.providers.ollama),openai:new nh(e.providers.openai),openai_compatible:new rh(e.providers.openai_compatible),gemini:new Pm(e.providers.gemini)}}};var kr="default",mu="/",o_={enabled:!1,suggestionControl:{acceptanceHotkey:"Tab",splitStrategy:"sentence",manualActivationKey:"",outputLimit:{enabled:!0,sentences:1},delayMs:500,activationRules:{requireNonEmptyLine:!0,requireCursorNotAtStart:!0,requireSpaceBeforeCursor:!0}},providers:{openai:{integration:"openai",name:"Open AI",description:"Use OpenAI APIs to generate text.",apiKey:"api-key",models:["gpt-5","gpt-5-nano"],configured:!1,temperature_range:{min:1,max:1}},ollama:{integration:"ollama",name:"Ollama",description:"Use your own Ollama instance to generate text.",host:"http://localhost:11434",models:["llama3.2:latest","mistral-nemo"],configured:!1,temperature_range:{min:0,max:1}},openai_compatible:{integration:"openai_compatible",name:"OpenAI compatible",description:"Use OpenAI compatible APIs to generate completions.",apiKey:"api-key",baseUrl:"https://api.openai.com/v1",models:["gpt-4o","gpt-4o-mini"],configured:!1,temperature_range:{min:0,max:1}},gemini:{integration:"gemini",name:"Gemini",description:"Use Gemini APIs to generate text.",apiKey:"api-key",models:["gemini-2.0-flash","gemini-2.0-flash-lite"],configured:!1,temperature_range:{min:0,max:2}}},profiles:{default:{name:"Default profile",provider:"ollama",completionOptions:{model:"gemma3:12b",userPrompt:`If the last sentence is incomplete, only complete the sentence and nothing else. If the last sentence is complete, generate a new sentence that follows logically:
---
{{{pre_cursor}}}`,systemPrompt:"You are a writing assistant that predicts and completes sentences in a natural, context-aware manner. Your goal is to continue the user\u2019s text smoothly, maintaining coherence, fluency, and style. Adapt to the user\u2019s writing tone, whether formal, informal, creative, or technical. Ensure that completions feel intuitive, useful, and free of unnecessary repetition. Do not generate completion that includes the prompt itself.",temperature:.5}}},path_configs:{"/":{profile:kr,enabled:!0}}};function kR(t){let e=t.profiles,n=Math.random().toString(36).substring(2,6),r="New profile",o=1;Object.entries(e).forEach(([,a])=>{a.name===r&&(r=`New profile ${o}`,o++)});let s={...e[kr],name:r};return e[n]=s,n}function xm(t,e){return t.path_configs[e]||t.path_configs[mu]}function i_(t,e,n){e=e||mu,t.path_configs[e]={profile:n,enabled:!0}}function RR(t){Object.assign(t,o_)}var NR=t=>t===kr;var Pe=require("obsidian");var Y7=Object.prototype.toString,yu=Array.isArray||function(e){return Y7.call(e)==="[object Array]"};function a_(t){return typeof t=="function"}function X7(t){return yu(t)?"array":typeof t}function s_(t){return t.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}function OR(t,e){return t!=null&&typeof t=="object"&&e in t}function Q7(t,e){return t!=null&&typeof t!="object"&&t.hasOwnProperty&&t.hasOwnProperty(e)}var Z7=RegExp.prototype.test;function eY(t,e){return Z7.call(t,e)}var tY=/\S/;function nY(t){return!eY(tY,t)}var rY={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;","`":"&#x60;","=":"&#x3D;"};function oY(t){return String(t).replace(/[&<>"'`=\/]/g,function(n){return rY[n]})}var iY=/\s*/,sY=/\s+/,DR=/\s*=/,aY=/\s*\}/,lY=/#|\^|\/|>|\{|&|=|!/;function uY(t,e){if(!t)return[];var n=!1,r=[],o=[],i=[],s=!1,a=!1,l="",u=0;function f(){if(s&&!a)for(;i.length;)delete o[i.pop()];else i=[];s=!1,a=!1}var p,m,b;function v(J){if(typeof J=="string"&&(J=J.split(sY,2)),!yu(J)||J.length!==2)throw new Error("Invalid tags: "+J);p=new RegExp(s_(J[0])+"\\s*"),m=new RegExp("\\s*"+s_(J[1])),b=new RegExp("\\s*"+s_("}"+J[1]))}v(e||or.tags);for(var w=new gf(t),_,T,R,L,D,x;!w.eos();){if(_=w.pos,R=w.scanUntil(p),R)for(var P=0,V=R.length;P<V;++P)L=R.charAt(P),nY(L)?(i.push(o.length),l+=L):(a=!0,n=!0,l+=" "),o.push(["text",L,_,_+1]),_+=1,L===`
`&&(f(),l="",u=0,n=!1);if(!w.scan(p))break;if(s=!0,T=w.scan(lY)||"name",w.scan(iY),T==="="?(R=w.scanUntil(DR),w.scan(DR),w.scanUntil(m)):T==="{"?(R=w.scanUntil(b),w.scan(aY),w.scanUntil(m),T="&"):R=w.scanUntil(m),!w.scan(m))throw new Error("Unclosed tag at "+w.pos);if(T==">"?D=[T,R,_,w.pos,l,u,n]:D=[T,R,_,w.pos],u++,o.push(D),T==="#"||T==="^")r.push(D);else if(T==="/"){if(x=r.pop(),!x)throw new Error('Unopened section "'+R+'" at '+_);if(x[1]!==R)throw new Error('Unclosed section "'+x[1]+'" at '+_)}else T==="name"||T==="{"||T==="&"?a=!0:T==="="&&v(R)}if(f(),x=r.pop(),x)throw new Error('Unclosed section "'+x[1]+'" at '+w.pos);return fY(cY(o))}function cY(t){for(var e=[],n,r,o=0,i=t.length;o<i;++o)n=t[o],n&&(n[0]==="text"&&r&&r[0]==="text"?(r[1]+=n[1],r[3]=n[3]):(e.push(n),r=n));return e}function fY(t){for(var e=[],n=e,r=[],o,i,s=0,a=t.length;s<a;++s)switch(o=t[s],o[0]){case"#":case"^":n.push(o),r.push(o),n=o[4]=[];break;case"/":i=r.pop(),i[5]=o[2],n=r.length>0?r[r.length-1][4]:e;break;default:n.push(o)}return e}function gf(t){this.string=t,this.tail=t,this.pos=0}gf.prototype.eos=function(){return this.tail===""};gf.prototype.scan=function(e){var n=this.tail.match(e);if(!n||n.index!==0)return"";var r=n[0];return this.tail=this.tail.substring(r.length),this.pos+=r.length,r};gf.prototype.scanUntil=function(e){var n=this.tail.search(e),r;switch(n){case-1:r=this.tail,this.tail="";break;case 0:r="";break;default:r=this.tail.substring(0,n),this.tail=this.tail.substring(n)}return this.pos+=r.length,r};function gu(t,e){this.view=t,this.cache={".":this.view},this.parent=e}gu.prototype.push=function(e){return new gu(e,this)};gu.prototype.lookup=function(e){var n=this.cache,r;if(n.hasOwnProperty(e))r=n[e];else{for(var o=this,i,s,a,l=!1;o;){if(e.indexOf(".")>0)for(i=o.view,s=e.split("."),a=0;i!=null&&a<s.length;)a===s.length-1&&(l=OR(i,s[a])||Q7(i,s[a])),i=i[s[a++]];else i=o.view[e],l=OR(o.view,e);if(l){r=i;break}o=o.parent}n[e]=r}return a_(r)&&(r=r.call(this.view)),r};function sn(){this.templateCache={_cache:{},set:function(e,n){this._cache[e]=n},get:function(e){return this._cache[e]},clear:function(){this._cache={}}}}sn.prototype.clearCache=function(){typeof this.templateCache!="undefined"&&this.templateCache.clear()};sn.prototype.parse=function(e,n){var r=this.templateCache,o=e+":"+(n||or.tags).join(":"),i=typeof r!="undefined",s=i?r.get(o):void 0;return s==null&&(s=uY(e,n),i&&r.set(o,s)),s};sn.prototype.render=function(e,n,r,o){var i=this.getConfigTags(o),s=this.parse(e,i),a=n instanceof gu?n:new gu(n,void 0);return this.renderTokens(s,a,r,e,o)};sn.prototype.renderTokens=function(e,n,r,o,i){for(var s="",a,l,u,f=0,p=e.length;f<p;++f)u=void 0,a=e[f],l=a[0],l==="#"?u=this.renderSection(a,n,r,o,i):l==="^"?u=this.renderInverted(a,n,r,o,i):l===">"?u=this.renderPartial(a,n,r,i):l==="&"?u=this.unescapedValue(a,n):l==="name"?u=this.escapedValue(a,n,i):l==="text"&&(u=this.rawValue(a)),u!==void 0&&(s+=u);return s};sn.prototype.renderSection=function(e,n,r,o,i){var s=this,a="",l=n.lookup(e[1]);function u(m){return s.render(m,n,r,i)}if(l){if(yu(l))for(var f=0,p=l.length;f<p;++f)a+=this.renderTokens(e[4],n.push(l[f]),r,o,i);else if(typeof l=="object"||typeof l=="string"||typeof l=="number")a+=this.renderTokens(e[4],n.push(l),r,o,i);else if(a_(l)){if(typeof o!="string")throw new Error("Cannot use higher-order sections without the original template");l=l.call(n.view,o.slice(e[3],e[5]),u),l!=null&&(a+=l)}else a+=this.renderTokens(e[4],n,r,o,i);return a}};sn.prototype.renderInverted=function(e,n,r,o,i){var s=n.lookup(e[1]);if(!s||yu(s)&&s.length===0)return this.renderTokens(e[4],n,r,o,i)};sn.prototype.indentPartial=function(e,n,r){for(var o=n.replace(/[^ \t]/g,""),i=e.split(`
`),s=0;s<i.length;s++)i[s].length&&(s>0||!r)&&(i[s]=o+i[s]);return i.join(`
`)};sn.prototype.renderPartial=function(e,n,r,o){if(r){var i=this.getConfigTags(o),s=a_(r)?r(e[1]):r[e[1]];if(s!=null){var a=e[6],l=e[5],u=e[4],f=s;l==0&&u&&(f=this.indentPartial(s,u,a));var p=this.parse(f,i);return this.renderTokens(p,n,r,f,o)}}};sn.prototype.unescapedValue=function(e,n){var r=n.lookup(e[1]);if(r!=null)return r};sn.prototype.escapedValue=function(e,n,r){var o=this.getConfigEscape(r)||or.escape,i=n.lookup(e[1]);if(i!=null)return typeof i=="number"&&o===or.escape?String(i):o(i)};sn.prototype.rawValue=function(e){return e[1]};sn.prototype.getConfigTags=function(e){return yu(e)?e:e&&typeof e=="object"?e.tags:void 0};sn.prototype.getConfigEscape=function(e){if(e&&typeof e=="object"&&!yu(e))return e.escape};var or={name:"mustache.js",version:"4.2.0",tags:["{{","}}"],clearCache:void 0,escape:void 0,parse:void 0,render:void 0,Scanner:void 0,Context:void 0,Writer:void 0,set templateCache(t){mf.templateCache=t},get templateCache(){return mf.templateCache}},mf=new sn;or.clearCache=function(){return mf.clearCache()};or.parse=function(e,n){return mf.parse(e,n)};or.render=function(e,n,r,o){if(typeof e!="string")throw new TypeError('Invalid template! Template should be a "string" but "'+X7(e)+'" was given as the first argument for mustache#render(template, view, partials)');return mf.render(e,n,r,o)};or.escape=oY;or.Scanner=gf;or.Context=gu;or.Writer=sn;var MR=or;var dY={one:{},two:{},three:{},four:{}},hY={one:{},two:{},three:{}},pY={},mY=[],yf={methods:dY,model:hY,compute:pY,hooks:mY};var gY=t=>Object.prototype.toString.call(t)==="[object Array]",yY={compute:function(t){let{world:e}=this,n=e.compute;return typeof t=="string"&&n.hasOwnProperty(t)?n[t](this):gY(t)?t.forEach(r=>{e.compute.hasOwnProperty(r)?n[r](this):console.warn("no compute:",t)}):typeof t=="function"?t(this):console.warn("no compute:",t),this}},FR=yY;var bY=function(t){return this.fullPointer.forEach((n,r)=>{let o=this.update([n]);t(o,r)}),this},vY=function(t,e){let r=this.fullPointer.map((i,s)=>{let a=this.update([i]),l=t(a,s);return l===void 0?this.none():l});if(r.length===0)return e||this.update([]);if(r[0]!==void 0&&(typeof r[0]=="string"||typeof r[0]=="object"&&(r[0]===null||!r[0].isView)))return r;let o=[];return r.forEach(i=>{o=o.concat(i.fullPointer)}),this.toView(o)},wY=function(t){let e=this.fullPointer;return e=e.filter((r,o)=>{let i=this.update([r]);return t(i,o)}),this.update(e)},_Y=function(t){let n=this.fullPointer.find((r,o)=>{let i=this.update([r]);return t(i,o)});return this.update([n])},EY=function(t){return this.fullPointer.some((n,r)=>{let o=this.update([n]);return t(o,r)})},AY=function(t=1){let e=this.fullPointer,n=Math.floor(Math.random()*e.length);return n+t>this.length&&(n=this.length-t,n=n<0?0:n),e=e.slice(n,n+t),this.update(e)},LR={forEach:bY,map:vY,filter:wY,find:_Y,some:EY,random:AY};var Rr={termList:function(){return this.methods.one.termList(this.docs)},terms:function(t){let e=this.match(".");return typeof t=="number"?e.eq(t):e},groups:function(t){if(t||t===0)return this.update(this._groups[t]||[]);let e={};return Object.keys(this._groups).forEach(n=>{e[n]=this.update(this._groups[n])}),e},eq:function(t){let e=this.pointer;return e||(e=this.docs.map((n,r)=>[r])),e[t]?this.update([e[t]]):this.none()},first:function(){return this.eq(0)},last:function(){let t=this.fullPointer.length-1;return this.eq(t)},firstTerms:function(){return this.match("^.")},lastTerms:function(){return this.match(".$")},slice:function(t,e){let n=this.pointer||this.docs.map((r,o)=>[o]);return n=n.slice(t,e),this.update(n)},all:function(){return this.update().toView()},fullSentences:function(){let t=this.fullPointer.map(e=>[e[0]]);return this.update(t).toView()},none:function(){return this.update([])},isDoc:function(t){if(!t||!t.isView)return!1;let e=this.fullPointer,n=t.fullPointer;return!e.length===n.length?!1:e.every((r,o)=>n[o]?r[0]===n[o][0]&&r[1]===n[o][1]&&r[2]===n[o][2]:!1)},wordCount:function(){return this.docs.reduce((t,e)=>(t+=e.filter(n=>n.text!=="").length,t),0)},isFull:function(){let t=this.pointer;if(!t)return!0;if(t.length===0||t[0][0]!==0)return!1;let e=0,n=0;return this.document.forEach(r=>e+=r.length),this.docs.forEach(r=>n+=r.length),e===n},getNth:function(t){return typeof t=="number"?this.eq(t):typeof t=="string"?this.if(t):this}};Rr.group=Rr.groups;Rr.fullSentence=Rr.fullSentences;Rr.sentence=Rr.fullSentences;Rr.lastTerm=Rr.lastTerms;Rr.firstTerm=Rr.firstTerms;var UR=Rr;var l_=Object.assign({},UR,FR,LR);l_.get=l_.eq;var BR=l_;var km=class t{constructor(e,n,r={}){[["document",e],["world",yf],["_groups",r],["_cache",null],["viewType","View"]].forEach(i=>{Object.defineProperty(this,i[0],{value:i[1],writable:!0})}),this.ptrs=n}get docs(){let e=this.document;return this.ptrs&&(e=yf.methods.one.getDoc(this.ptrs,this.document)),e}get pointer(){return this.ptrs}get methods(){return this.world.methods}get model(){return this.world.model}get hooks(){return this.world.hooks}get isView(){return!0}get found(){return this.docs.length>0}get length(){return this.docs.length}get fullPointer(){let{docs:e,ptrs:n,document:r}=this;return(n||e.map((i,s)=>[s])).map(i=>{let[s,a,l,u,f]=i;return a=a||0,l=l||(r[s]||[]).length,r[s]&&r[s][a]&&(u=u||r[s][a].id,r[s][l-1]&&(f=f||r[s][l-1].id)),[s,a,l,u,f]})}update(e){let n=new t(this.document,e);if(this._cache&&e&&e.length>0){let r=[];e.forEach((o,i)=>{let[s,a,l]=o;o.length===1?r[i]=this._cache[s]:a===0&&this.document[s].length===l&&(r[i]=this._cache[s])}),r.length>0&&(n._cache=r)}return n.world=this.world,n}toView(e){return new t(this.document,e||this.pointer)}fromText(e){let{methods:n}=this,r=n.one.tokenize.fromString(e,this.world),o=new t(r);return o.world=this.world,o.compute(["normal","freeze","lexicon"]),this.world.compute.preTagger&&o.compute("preTagger"),o.compute("unfreeze"),o}clone(){let e=this.document.slice(0);e=e.map(r=>r.map(o=>(o=Object.assign({},o),o.tags=new Set(o.tags),o)));let n=this.update(this.pointer);return n.document=e,n._cache=this._cache,n}};Object.assign(km.prototype,BR);var Rm=km;var GR="14.14.4";var HR=function(t){return t&&typeof t=="object"&&!Array.isArray(t)};function qR(t,e){if(HR(e))for(let n in e)HR(e[n])?(t[n]||Object.assign(t,{[n]:{}}),qR(t[n],e[n])):Object.assign(t,{[n]:e[n]});return t}function CY(t,e){for(let n in e)t[n]=t[n]||{},Object.assign(t[n],e[n]);return t}var TY=function(t,e){let n=t.two.models||{};Object.keys(e).forEach(r=>{e[r].pastTense&&(n.toPast&&(n.toPast.ex[r]=e[r].pastTense),n.fromPast&&(n.fromPast.ex[e[r].pastTense]=r)),e[r].presentTense&&(n.toPresent&&(n.toPresent.ex[r]=e[r].presentTense),n.fromPresent&&(n.fromPresent.ex[e[r].presentTense]=r)),e[r].gerund&&(n.toGerund&&(n.toGerund.ex[r]=e[r].gerund),n.fromGerund&&(n.fromGerund.ex[e[r].gerund]=r)),e[r].comparative&&(n.toComparative&&(n.toComparative.ex[r]=e[r].comparative),n.fromComparative&&(n.fromComparative.ex[e[r].comparative]=r)),e[r].superlative&&(n.toSuperlative&&(n.toSuperlative.ex[r]=e[r].superlative),n.fromSuperlative&&(n.fromSuperlative.ex[e[r].superlative]=r))})},SY=function(t,e,n,r){let{methods:o,model:i,compute:s,hooks:a}=e;t.methods&&CY(o,t.methods),t.model&&qR(i,t.model),t.irregulars&&TY(i,t.irregulars),t.compute&&Object.assign(s,t.compute),a&&(e.hooks=a.concat(t.hooks||[])),t.api&&t.api(n),t.lib&&Object.keys(t.lib).forEach(l=>r[l]=t.lib[l]),t.tags&&r.addTags(t.tags),t.words&&r.addWords(t.words),t.frozen&&r.addWords(t.frozen,!0),t.mutate&&t.mutate(e,r)},$R=SY;var VR=function(t){let e=typeof process=="undefined"||!process.env?self.env||{}:process.env;return e.DEBUG_TAGS=t==="tagger"||t===!0?!0:"",e.DEBUG_MATCH=t==="match"||t===!0?!0:"",e.DEBUG_CHUNKS=t==="chunker"||t===!0?!0:"",this};var PY=t=>Object.prototype.toString.call(t)==="[object Object]",u_=function(t){return Object.prototype.toString.call(t)==="[object Array]"},IY=function(t){return t.map(e=>e.terms.map(n=>(u_(n.tags)&&(n.tags=new Set(n.tags)),n)))},xY=function(t){return t.map(e=>e.map(n=>({text:n,normal:n,pre:"",post:" ",tags:new Set})))},kY=function(t,e,n){let{methods:r}=n,o=new e([]);if(o.world=n,typeof t=="number"&&(t=String(t)),!t)return o;if(typeof t=="string"){let i=r.one.tokenize.fromString(t,n);return new e(i)}if(PY(t)&&t.isView)return new e(t.document,t.ptrs);if(u_(t)){if(u_(t[0])){let s=xY(t);return new e(s)}let i=IY(t);return new e(i)}return o},c_=kY;var Nm=Object.assign({},yf),yn=function(t,e){e&&yn.addWords(e);let n=c_(t,Rm,Nm);return t&&n.compute(Nm.hooks),n};Object.defineProperty(yn,"_world",{value:Nm,writable:!0});yn.tokenize=function(t,e){let{compute:n}=this._world;e&&yn.addWords(e);let r=c_(t,Rm,Nm);return n.contractions&&r.compute(["alias","normal","machine","contractions"]),r};yn.plugin=function(t){return $R(t,this._world,Rm,this),this};yn.extend=yn.plugin;yn.world=function(){return this._world};yn.model=function(){return this._world.model};yn.methods=function(){return this._world.methods};yn.hooks=function(){return this._world.hooks};yn.verbose=VR;yn.version=GR;var an=yn;var RY=function(t){return t.map(n=>{let r=new Set;return n.forEach(o=>{o.normal!==""&&r.add(o.normal),o.switch&&r.add(`%${o.switch}%`),o.implicit&&r.add(o.implicit),o.machine&&r.add(o.machine),o.root&&r.add(o.root),o.alias&&o.alias.forEach(s=>r.add(s));let i=Array.from(o.tags);for(let s=0;s<i.length;s+=1)r.add("#"+i[s])}),r})},jR=RY;var WR={one:{cacheDoc:jR}};var NY={cache:function(){return this._cache=this.methods.one.cacheDoc(this.document),this},uncache:function(){return this._cache=null,this}},OY=function(t){Object.assign(t.prototype,NY)},zR=OY;var JR={cache:function(t){t._cache=t.methods.one.cacheDoc(t.document)}};var KR={api:zR,compute:JR,methods:WR};var YR={toLowerCase:function(){return this.termList().forEach(t=>{t.text=t.text.toLowerCase()}),this},toUpperCase:function(){return this.termList().forEach(t=>{t.text=t.text.toUpperCase()}),this},toTitleCase:function(){return this.termList().forEach(t=>{t.text=t.text.replace(/^ *[a-z\u00C0-\u00FF]/,e=>e.toUpperCase())}),this},toCamelCase:function(){return this.docs.forEach(t=>{t.forEach((e,n)=>{n!==0&&(e.text=e.text.replace(/^ *[a-z\u00C0-\u00FF]/,r=>r.toUpperCase())),n!==t.length-1&&(e.post="")})}),this}};var XR=t=>/^\p{Lu}[\p{Ll}']/u.test(t)||/^\p{Lu}$/u.test(t),DY=t=>t.replace(/^\p{Ll}/u,e=>e.toUpperCase()),MY=t=>t.replace(/^\p{Lu}/u,e=>e.toLowerCase()),ZR=(t,e,n)=>{if(n.forEach(r=>r.dirty=!0),t){let r=[e,0].concat(n);Array.prototype.splice.apply(t,r)}return t},bu=function(t){let e=/ $/,n=/[-]/,r=t[t.length-1];r&&!e.test(r.post)&&!n.test(r.post)&&(r.post+=" ")},QR=(t,e,n)=>{let r=/[-.?!,;:)'"]/g,o=t[e-1];if(!o)return;let i=o.post;if(r.test(i)){let s=i.match(r).join(""),a=n[n.length-1];a.post=s+a.post,o.post=o.post.replace(r,"")}},FY=function(t,e,n){let r=t[e];if(e!==0||!XR(r.text))return;n[0].text=DY(n[0].text);let o=t[e];o.tags.has("ProperNoun")||o.tags.has("Acronym")||XR(o.text)&&o.text.length>1&&(o.text=MY(o.text))},eN=function(t,e,n,r){let[o,i,s]=e;i===0||s===r[o].length?bu(n):(bu(n),bu([t[e[1]]])),FY(t,i,n),ZR(t,i,n)},tN=function(t,e,n,r){let[o,,i]=e,s=(r[o]||[]).length;i<s?(QR(t,i,n),bu(n)):s===i&&(bu(t),QR(t,i,n),r[o+1]&&(n[n.length-1].post+=" ")),ZR(t,e[2],n),e[4]=n[n.length-1].id};var bf=0,nN=t=>(t=t.length<3?"0"+t:t,t.length<3?"0"+t:t),LY=function(t){let[e,n]=t.index||[0,0];bf+=1,bf=bf>46655?0:bf,e=e>46655?0:e,n=n>1294?0:n;let r=nN(bf.toString(36));r+=nN(e.toString(36));let o=n.toString(36);o=o.length<2?"0"+o:o,r+=o;let i=parseInt(Math.random()*36,10);return r+=i.toString(36),t.normal+"|"+r.toUpperCase()},Om=LY;var rN=function(t){t.has("@hasContraction")&&typeof t.contractions=="function"&&t.grow("@hasContraction").contractions().expand()},oN=t=>Object.prototype.toString.call(t)==="[object Array]",UY=function(t){return t=t.map(e=>(e.id=Om(e),e)),t},BY=function(t,e){let{methods:n}=e;return typeof t=="string"?n.one.tokenize.fromString(t,e)[0]:typeof t=="object"&&t.isView?t.clone().docs[0]||[]:oN(t)?oN(t[0])?t[0]:t:[]},iN=function(t,e,n){let{document:r,world:o}=e;e.uncache();let i=e.fullPointer,s=e.fullPointer;e.forEach((l,u)=>{let f=l.fullPointer[0],[p]=f,m=r[p],b=BY(t,o);b.length!==0&&(b=UY(b),n?(rN(e.update([f]).firstTerm()),eN(m,f,b,r)):(rN(e.update([f]).lastTerm()),tN(m,f,b,r)),r[p]&&r[p][f[1]]&&(f[3]=r[p][f[1]].id),s[u]=f,f[2]+=b.length,i[u]=f)});let a=e.toView(i);return e.ptrs=s,a.compute(["id","index","freeze","lexicon"]),a.world.compute.preTagger&&a.compute("preTagger"),a.compute("unfreeze"),a},ua={insertAfter:function(t){return iN(t,this,!1)},insertBefore:function(t){return iN(t,this,!0)}};ua.append=ua.insertAfter;ua.prepend=ua.insertBefore;ua.insert=ua.insertAfter;var sN=ua;var GY=/\$[0-9a-z]+/g,f_={},HY=t=>/^\p{Lu}[\p{Ll}']/u.test(t)||/^\p{Lu}$/u.test(t),qY=t=>t.replace(/^\p{Ll}/u,e=>e.toUpperCase()),$Y=t=>t.replace(/^\p{Lu}/u,e=>e.toLowerCase()),VY=function(t,e,n){return t.forEach(r=>{let o=e(r);r.replaceWith(o,n)}),t},jY=function(t,e){if(typeof t!="string")return t;let n=e.groups();return t=t.replace(GY,r=>{let o=r.replace(/\$/,"");return n.hasOwnProperty(o)?n[o].text():r}),t};f_.replaceWith=function(t,e={}){let n=this.fullPointer,r=this;if(this.uncache(),typeof t=="function")return VY(r,t,e);let o=r.docs[0];if(!o)return r;let i=e.possessives&&o[o.length-1].tags.has("Possessive"),s=e.case&&HY(o[0].text);t=jY(t,r);let a=this.update(n);n=n.map(m=>m.slice(0,3));let l=(a.docs[0]||[]).map(m=>Array.from(m.tags)),u=a.docs[0][0].pre,f=a.docs[0][a.docs[0].length-1].post;if(typeof t=="string"&&(t=this.fromText(t).compute("id")),r.insertAfter(t),a.has("@hasContraction")&&r.contractions&&r.grow("@hasContraction+").contractions().expand(),r.delete(a),i){let m=r.docs[0],b=m[m.length-1];b.tags.has("Possessive")||(b.text+="'s",b.normal+="'s",b.tags.add("Possessive"))}if(u&&r.docs[0]&&(r.docs[0][0].pre=u),f&&r.docs[0]){let m=r.docs[0][r.docs[0].length-1];m.post.trim()||(m.post=f)}let p=r.toView(n).compute(["index","freeze","lexicon"]);if(p.world.compute.preTagger&&p.compute("preTagger"),p.compute("unfreeze"),e.tags&&p.terms().forEach((m,b)=>{m.tagSafe(l[b])}),!p.docs[0]||!p.docs[0][0])return p;if(e.case){let m=s?qY:$Y;p.docs[0][0].text=m(p.docs[0][0].text)}return p};f_.replace=function(t,e,n){if(t&&!e)return this.replaceWith(t,n);let r=this.match(t);return r.found?(this.soften(),r.replaceWith(e,n)):this};var aN=f_;var WY=function(t,e){let n=t.length-1,r=t[n],o=t[n-e];o&&r&&(o.post+=r.post,o.post=o.post.replace(/ +([.?!,;:])/,"$1"),o.post=o.post.replace(/[,;:]+([.?!])/,"$1"))},zY=function(t,e){e.forEach(n=>{let[r,o,i]=n,s=i-o;t[r]&&(i===t[r].length&&i>1&&WY(t[r],s),t[r].splice(o,s))});for(let n=t.length-1;n>=0;n-=1)if(t[n].length===0&&(t.splice(n,1),n===t.length&&t[n-1])){let r=t[n-1],o=r[r.length-1];o&&(o.post=o.post.trimEnd())}return t},lN=zY;var JY=function(t,e){return t=t.map(n=>{let[r]=n;return e[r]&&e[r].forEach(o=>{let i=o[2]-o[1];n[1]<=o[1]&&n[2]>=o[2]&&(n[2]-=i)}),n}),t.forEach((n,r)=>{if(n[1]===0&&n[2]==0)for(let o=r+1;o<t.length;o+=1)t[o][0]-=1,t[o][0]<0&&(t[o][0]=0)}),t=t.filter(n=>n[2]-n[1]>0),t=t.map(n=>(n[3]=null,n[4]=null,n)),t},d_={remove:function(t){let{indexN:e}=this.methods.one.pointer;this.uncache();let n=this.all(),r=this;t&&(n=this,r=this.match(t));let o=!n.ptrs;r.has("@hasContraction")&&r.contractions&&r.grow("@hasContraction").contractions().expand();let i=n.fullPointer,s=r.fullPointer.reverse(),a=lN(this.document,s),l=e(s);return i=JY(i,l),n.ptrs=i,n.document=a,n.compute("index"),o&&(n.ptrs=void 0),t?n.toView(i):(this.ptrs=[],n.none())}};d_.delete=d_.remove;var uN=d_;var vf={pre:function(t,e){return t===void 0&&this.found?this.docs[0][0].pre:(this.docs.forEach(n=>{let r=n[0];e===!0?r.pre+=t:r.pre=t}),this)},post:function(t,e){if(t===void 0){let n=this.docs[this.docs.length-1];return n[n.length-1].post}return this.docs.forEach(n=>{let r=n[n.length-1];e===!0?r.post+=t:r.post=t}),this},trim:function(){if(!this.found)return this;let t=this.docs,e=t[0][0];e.pre=e.pre.trimStart();let n=t[t.length-1],r=n[n.length-1];return r.post=r.post.trimEnd(),this},hyphenate:function(){return this.docs.forEach(t=>{t.forEach((e,n)=>{n!==0&&(e.pre=""),t[n+1]&&(e.post="-")})}),this},dehyphenate:function(){let t=/[-]/;return this.docs.forEach(e=>{e.forEach(n=>{t.test(n.post)&&(n.post=" ")})}),this},toQuotations:function(t,e){return t=t||'"',e=e||'"',this.docs.forEach(n=>{n[0].pre=t+n[0].pre;let r=n[n.length-1];r.post=e+r.post}),this},toParentheses:function(t,e){return t=t||"(",e=e||")",this.docs.forEach(n=>{n[0].pre=t+n[0].pre;let r=n[n.length-1];r.post=e+r.post}),this}};vf.deHyphenate=vf.dehyphenate;vf.toQuotation=vf.toQuotations;var cN=vf;var KY=(t,e)=>t.normal<e.normal?-1:t.normal>e.normal?1:0,YY=(t,e)=>{let n=t.normal.trim().length,r=e.normal.trim().length;return n<r?1:n>r?-1:0},XY=(t,e)=>t.words<e.words?1:t.words>e.words?-1:0,QY=(t,e)=>t[0]<e[0]?1:t[0]>e[0]?-1:t[1]>e[1]?1:-1,ZY=function(t){let e={};return t.forEach(n=>{e[n.normal]=e[n.normal]||0,e[n.normal]+=1}),t.sort((n,r)=>{let o=e[n.normal],i=e[r.normal];return o<i?1:o>i?-1:0}),t},Dm={alpha:KY,length:YY,wordCount:XY,sequential:QY,byFreq:ZY};var eX=new Set(["index","sequence","seq","sequential","chron","chronological"]),tX=new Set(["freq","frequency","topk","repeats"]),nX=new Set(["alpha","alphabetical"]),rX=function(t,e){let n=t.fullPointer;return n=n.sort((r,o)=>(r=t.update([r]),o=t.update([o]),e(r,o))),t.ptrs=n,t},oX=function(t){let{docs:e,pointer:n}=this;if(this.uncache(),typeof t=="function")return rX(this,t);t=t||"alpha";let r=n||e.map((i,s)=>[s]),o=e.map((i,s)=>({index:s,words:i.length,normal:i.map(a=>a.machine||a.normal||"").join(" "),pointer:r[s]}));return eX.has(t)&&(t="sequential"),nX.has(t)&&(t="alpha"),tX.has(t)?(o=Dm.byFreq(o),this.update(o.map(i=>i.pointer))):typeof Dm[t]=="function"?(o=o.sort(Dm[t]),this.update(o.map(i=>i.pointer))):this},iX=function(){let t=this.pointer||this.docs.map((e,n)=>[n]);return t=[].concat(t),t=t.reverse(),this._cache&&(this._cache=this._cache.reverse()),this.update(t)},sX=function(){let t=new Set;return this.filter(n=>{let r=n.text("machine");return t.has(r)?!1:(t.add(r),!0)})},fN={unique:sX,reverse:iX,sort:oX};var aX=t=>Object.prototype.toString.call(t)==="[object Array]",dN=function(t,e){if(t.length>0){let n=t[t.length-1],r=n[n.length-1];/ /.test(r.post)===!1&&(r.post+=" ")}return t=t.concat(e),t},lX=function(t,e){if(t.document===e.document){let r=t.fullPointer.concat(e.fullPointer);return t.toView(r).compute("index")}return e.fullPointer.forEach(r=>{r[0]+=t.document.length}),t.document=dN(t.document,e.docs),t.all()},hN={concat:function(t){if(typeof t=="string"){let e=this.fromText(t);if(!this.found||!this.ptrs)this.document=this.document.concat(e.document);else{let n=this.fullPointer,r=n[n.length-1][0];this.document.splice(r,0,...e.document)}return this.all().compute("index")}if(typeof t=="object"&&t.isView)return lX(this,t);if(aX(t)){let e=dN(this.document,t);return this.document=e,this.all()}return this}};var uX=function(){return this.ptrs=this.fullPointer,this},cX=function(){let t=this.ptrs;return!t||t.length<1?this:(t=t.map(e=>e.slice(0,3)),this.ptrs=t,this)},pN={harden:uX,soften:cX};var fX=Object.assign({},YR,sN,aN,uN,cN,fN,hN,pN),dX=function(t){Object.assign(t.prototype,fX)},mN=dX;var hX={id:function(t){let e=t.docs;for(let n=0;n<e.length;n+=1)for(let r=0;r<e[n].length;r+=1){let o=e[n][r];o.id=o.id||Om(o)}}},gN=hX;var yN={api:mN,compute:gN};var bN=[{word:"@",out:["at"]},{word:"arent",out:["are","not"]},{word:"alot",out:["a","lot"]},{word:"brb",out:["be","right","back"]},{word:"cannot",out:["can","not"]},{word:"dun",out:["do","not"]},{word:"can't",out:["can","not"]},{word:"shan't",out:["should","not"]},{word:"won't",out:["will","not"]},{word:"that's",out:["that","is"]},{word:"what's",out:["what","is"]},{word:"let's",out:["let","us"]},{word:"dunno",out:["do","not","know"]},{word:"gonna",out:["going","to"]},{word:"gotta",out:["have","got","to"]},{word:"gimme",out:["give","me"]},{word:"outta",out:["out","of"]},{word:"tryna",out:["trying","to"]},{word:"gtg",out:["got","to","go"]},{word:"im",out:["i","am"]},{word:"imma",out:["I","will"]},{word:"imo",out:["in","my","opinion"]},{word:"irl",out:["in","real","life"]},{word:"ive",out:["i","have"]},{word:"rn",out:["right","now"]},{word:"tbh",out:["to","be","honest"]},{word:"wanna",out:["want","to"]},{word:"c'mere",out:["come","here"]},{word:"c'mon",out:["come","on"]},{word:"shoulda",out:["should","have"]},{word:"coulda",out:["coulda","have"]},{word:"woulda",out:["woulda","have"]},{word:"musta",out:["must","have"]},{word:"tis",out:["it","is"]},{word:"twas",out:["it","was"]},{word:"y'know",out:["you","know"]},{word:"ne'er",out:["never"]},{word:"o'er",out:["over"]},{after:"ll",out:["will"]},{after:"ve",out:["have"]},{after:"re",out:["are"]},{after:"m",out:["am"]},{before:"c",out:["ce"]},{before:"m",out:["me"]},{before:"n",out:["ne"]},{before:"qu",out:["que"]},{before:"s",out:["se"]},{before:"t",out:["tu"]},{word:"shouldnt",out:["should","not"]},{word:"couldnt",out:["could","not"]},{word:"wouldnt",out:["would","not"]},{word:"hasnt",out:["has","not"]},{word:"wasnt",out:["was","not"]},{word:"isnt",out:["is","not"]},{word:"cant",out:["can","not"]},{word:"dont",out:["do","not"]},{word:"wont",out:["will","not"]},{word:"howd",out:["how","did"]},{word:"whatd",out:["what","did"]},{word:"whend",out:["when","did"]},{word:"whered",out:["where","did"]}];var vN={st:!0,nd:!0,rd:!0,th:!0,am:!0,pm:!0,max:!0,"\xB0":!0,s:!0,e:!0,er:!0,\u00E8re:!0,\u00E8me:!0};var wN={one:{contractions:bN,numberSuffixes:vN}};var pX=function(t,e,n){let[r,o]=e;!n||n.length===0||(n=n.map((i,s)=>(i.implicit=i.text,i.machine=i.text,i.pre="",i.post="",i.text="",i.normal="",i.index=[r,o+s],i)),n[0]&&(n[0].pre=t[r][o].pre,n[n.length-1].post=t[r][o].post,n[0].text=t[r][o].text,n[0].normal=t[r][o].normal),t[r].splice(o,1,...n))},Mm=pX;var mX=/'/,gX=new Set(["what","how","when","where","why"]),yX=new Set(["be","go","start","think","need"]),bX=new Set(["been","gone"]),vX=function(t,e){let n=t[e].normal.split(mX)[0];if(gX.has(n))return[n,"did"];if(t[e+1]){if(bX.has(t[e+1].normal))return[n,"had"];if(yX.has(t[e+1].normal))return[n,"would"]}return null},_N=vX;var wX=function(t,e){return t[e].normal==="ain't"||t[e].normal==="aint"?null:[t[e].normal.replace(/n't/,""),"not"]},EN=wX;var h_=/'/,_X=/(e||aison|sion|tion)$/,EX=/(age|isme|acle|ege|oire)$/,AX=(t,e)=>{let n=t[e].normal.split(h_)[1];return n&&n.endsWith("e")?["la",n]:["le",n]},CX=(t,e)=>{let n=t[e].normal.split(h_)[1];return n&&_X.test(n)&&!EX.test(n)?["du",n]:n&&n.endsWith("s")?["des",n]:["de",n]},TX=(t,e)=>["je",t[e].normal.split(h_)[1]],Fm={preJ:TX,preL:AX,preD:CX};var SX=/^([0-9.]{1,4}[a-z]{0,2}) ?[-] ?([0-9]{1,4}[a-z]{0,2})$/i,PX=/^([0-9]{1,2}(:[0-9][0-9])?(am|pm)?) ?[-] ?([0-9]{1,2}(:[0-9][0-9])?(am|pm)?)$/i,IX=/^[0-9]{3}-[0-9]{4}$/,xX=function(t,e){let n=t[e],r=n.text.match(SX);return r!==null?n.tags.has("PhoneNumber")===!0||IX.test(n.text)?null:[r[1],"to",r[2]]:(r=n.text.match(PX),r!==null?[r[1],"to",r[4]]:null)},AN=xX;var kX=/^([+-]?[0-9][.,0-9]*)([a-z/]+)$/,RX=function(t,e,n){let r=n.model.one.numberSuffixes||{},i=t[e].text.match(kX);if(i!==null){let s=i[2].toLowerCase().trim();return r.hasOwnProperty(s)?null:[i[1],s]}return null},CN=RX;var TN=/'/,NX=/^[0-9][^-]*[-].*?[0-9]/,SN=function(t,e,n,r){let o=e.update();o.document=[t];let i=n+r;n>0&&(n-=1),t[i]&&(i+=1),o.ptrs=[[0,n,i]]},PN={t:(t,e)=>EN(t,e),d:(t,e)=>_N(t,e)},IN={j:(t,e)=>Fm.preJ(t,e),l:(t,e)=>Fm.preL(t,e),d:(t,e)=>Fm.preD(t,e)},OX=function(t,e,n,r){for(let o=0;o<t.length;o+=1){let i=t[o];if(i.word===e.normal)return i.out;if(r!==null&&r===i.after)return[n].concat(i.out);if(n!==null&&n===i.before&&r&&r.length>2)return i.out.concat(r)}return null},p_=function(t,e){let n=e.fromText(t.join(" "));return n.compute(["id","alias"]),n.docs[0]},DX=function(t,e){for(let n=e+1;n<5&&t[n];n+=1)if(t[n].normal==="been")return["there","has"];return["there","is"]},MX=t=>{let{world:e,document:n}=t,{model:r,methods:o}=e,i=r.one.contractions||[];n.forEach((s,a)=>{for(let l=s.length-1;l>=0;l-=1){let u=null,f=null;if(TN.test(s[l].normal)===!0){let m=s[l].normal.split(TN);u=m[0],f=m[1]}let p=OX(i,s[l],u,f);if(!p&&PN.hasOwnProperty(f)&&(p=PN[f](s,l,e)),!p&&IN.hasOwnProperty(u)&&(p=IN[u](s,l)),u==="there"&&f==="s"&&(p=DX(s,l)),p){p=p_(p,t),Mm(n,[a,l],p),SN(n[a],t,l,p.length);continue}if(NX.test(s[l].normal)){p=AN(s,l),p&&(p=p_(p,t),Mm(n,[a,l],p),o.one.setTag(p,"NumberRange",e),p[2]&&p[2].tags.has("Time")&&o.one.setTag([p[0]],"Time",e,null,"time-range"),SN(n[a],t,l,p.length));continue}p=CN(s,l,e),p&&(p=p_(p,t),Mm(n,[a,l],p),o.one.setTag([p[1]],"Unit",e,null,"contraction-unit"))}})},xN=MX;var kN={contractions:xN};var FX={model:wN,compute:kN,hooks:["contractions"]},RN=FX;var NN=function(t){let e=t.world,{model:n,methods:r}=t.world,o=r.one.setTag,{frozenLex:i}=n.one,s=n.one._multiCache||{};t.docs.forEach(a=>{for(let l=0;l<a.length;l+=1){let u=a[l],f=u.machine||u.normal;if(s[f]!==void 0&&a[l+1]){let p=l+s[f]-1;for(let m=p;m>l;m-=1){let b=a.slice(l,m+1),v=b.map(w=>w.machine||w.normal).join(" ");if(i.hasOwnProperty(v)===!0){o(b,i[v],e,!1,"1-frozen-multi-lexicon"),b.forEach(w=>w.frozen=!0);continue}}}if(i[f]!==void 0&&i.hasOwnProperty(f)){o([u],i[f],e,!1,"1-freeze-lexicon"),u.frozen=!0;continue}}})},LX=function(t){return t.docs.forEach(e=>{e.forEach(n=>{delete n.frozen})}),t},ON={frozen:NN,freeze:NN,unfreeze:LX};var DN=t=>"\x1B[34m"+t+"\x1B[0m",MN=t=>"\x1B[3m\x1B[2m"+t+"\x1B[0m",UX=function(t){t.docs.forEach(e=>{console.log(DN(`
  \u250C\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500`)),e.forEach(n=>{let r=`  ${MN("\u2502")}  `,o=n.implicit||n.text||"-";n.frozen===!0?r+=`${DN(o)} \u2744\uFE0F`:r+=MN(o),console.log(r)})})},m_=UX;var FN={compute:ON,mutate:t=>{let e=t.methods.one;e.termMethods.isFrozen=n=>n.frozen===!0,e.debug.freeze=m_,e.debug.frozen=m_},api:function(t){t.prototype.freeze=function(){return this.docs.forEach(e=>{e.forEach(n=>{n.frozen=!0})}),this},t.prototype.unfreeze=function(){this.compute("unfreeze")},t.prototype.isFrozen=function(){return this.match("@isFrozen+")}},hooks:["freeze"]};var BX=function(t,e,n){let{model:r,methods:o}=n,i=o.one.setTag,s=r.one._multiCache||{},{lexicon:a}=r.one||{},l=t[e],u=l.machine||l.normal;if(s[u]!==void 0&&t[e+1]){let f=e+s[u]-1;for(let p=f;p>e;p-=1){let m=t.slice(e,p+1);if(m.length<=1)return!1;let b=m.map(v=>v.machine||v.normal).join(" ");if(a.hasOwnProperty(b)===!0){let v=a[b];return i(m,v,n,!1,"1-multi-lexicon"),v&&v.length===2&&(v[0]==="PhrasalVerb"||v[1]==="PhrasalVerb")&&i([m[1]],"Particle",n,!1,"1-phrasal-particle"),!0}}return!1}return null},LN=BX;var UN=/^(under|over|mis|re|un|dis|semi|pre|post)-?/,GX=new Set(["Verb","Infinitive","PastTense","Gerund","PresentTense","Adjective","Participle"]),HX=function(t,e,n){let{model:r,methods:o}=n,i=o.one.setTag,{lexicon:s}=r.one,a=t[e],l=a.machine||a.normal;if(s[l]!==void 0&&s.hasOwnProperty(l))return i([a],s[l],n,!1,"1-lexicon"),!0;if(a.alias){let u=a.alias.find(f=>s.hasOwnProperty(f));if(u)return i([a],s[u],n,!1,"1-lexicon-alias"),!0}if(UN.test(l)===!0){let u=l.replace(UN,"");if(s.hasOwnProperty(u)&&u.length>3&&GX.has(s[u]))return i([a],s[u],n,!1,"1-lexicon-prefix"),!0}return null},BN=HX;var qX=function(t){let e=t.world;t.docs.forEach(n=>{for(let r=0;r<n.length;r+=1)if(n[r].tags.size===0){let o=null;o=o||LN(n,r,e),o=o||BN(n,r,e)}})},GN={lexicon:qX};var $X=function(t){let e={},n={};return Object.keys(t).forEach(r=>{let o=t[r];r=r.toLowerCase().trim(),r=r.replace(/'s\b/,"");let i=r.split(/ /);i.length>1&&(n[i[0]]===void 0||i.length>n[i[0]])&&(n[i[0]]=i.length),e[r]=e[r]||o}),delete e[""],delete e[null],delete e[" "],{lex:e,_multi:n}},HN=$X;var qN={one:{expandLexicon:HN}};var VX=function(t,e=!1){let n=this.world(),{methods:r,model:o}=n;if(!t)return;if(Object.keys(t).forEach(a=>{typeof t[a]=="string"&&t[a].startsWith("#")&&(t[a]=t[a].replace(/^#/,""))}),e===!0){let{lex:a,_multi:l}=r.one.expandLexicon(t,n);Object.assign(o.one._multiCache,l),Object.assign(o.one.frozenLex,a);return}if(r.two.expandLexicon){let{lex:a,_multi:l}=r.two.expandLexicon(t,n);Object.assign(o.one.lexicon,a),Object.assign(o.one._multiCache,l)}let{lex:i,_multi:s}=r.one.expandLexicon(t,n);Object.assign(o.one.lexicon,i),Object.assign(o.one._multiCache,s)},$N={addWords:VX};var jX={one:{lexicon:{},_multiCache:{},frozenLex:{}}},VN={model:jX,methods:qN,compute:GN,lib:$N,hooks:["lexicon"]};var WX=function(t,e){let{methods:n,model:r}=e;return n.one.tokenize.splitTerms(t,r).map(i=>n.one.tokenize.splitWhitespace(i,r)).map(i=>i.text.toLowerCase())},zX=function(t,e){let n=[{}],r=[null],o=[0],i=[],s=0;t.forEach(function(a){let l=0,u=WX(a,e);for(let f=0;f<u.length;f++){let p=u[f];n[l]&&n[l].hasOwnProperty(p)?l=n[l][p]:(s++,n[l][p]=s,n[s]={},l=s,r[s]=null)}r[l]=[u.length]});for(let a in n[0])s=n[0][a],o[s]=0,i.push(s);for(;i.length;){let a=i.shift(),l=Object.keys(n[a]);for(let u=0;u<l.length;u+=1){let f=l[u],p=n[a][f];for(i.push(p),s=o[a];s>0&&!n[s].hasOwnProperty(f);)s=o[s];if(n.hasOwnProperty(s)){let m=n[s][f];o[p]=m,r[m]&&(r[p]=r[p]||[],r[p]=r[p].concat(r[m]))}else o[p]=0}}return{goNext:n,endAs:r,failTo:o}},Lm=zX;var JX=function(t,e,n){let r=0,o=[];for(let i=0;i<t.length;i++){let s=t[i][n.form]||t[i].normal;for(;r>0&&(e.goNext[r]===void 0||!e.goNext[r].hasOwnProperty(s));)r=e.failTo[r]||0;if(e.goNext[r].hasOwnProperty(s)&&(r=e.goNext[r][s],e.endAs[r])){let a=e.endAs[r];for(let l=0;l<a.length;l++){let u=a[l],f=t[i-u+1],[p,m]=f.index;o.push([p,m,m+u,f.id])}}}return o},KX=function(t,e){for(let n=0;n<t.length;n+=1)if(e.has(t[n])===!0)return!1;return!0},YX=function(t,e,n){let r=[];n.form=n.form||"normal";let o=t.docs;if(!e.goNext||!e.goNext[0])return console.error("Compromise invalid lookup trie"),t.none();let i=Object.keys(e.goNext[0]);for(let s=0;s<o.length;s++){if(t._cache&&t._cache[s]&&KX(i,t._cache[s])===!0)continue;let a=o[s],l=JX(a,e,n);l.length>0&&(r=r.concat(l))}return t.update(r)},jN=YX;var XX=t=>Object.prototype.toString.call(t)==="[object Object]";function WN(t){t.prototype.lookup=function(e,n={}){if(!e)return this.none();typeof e=="string"&&(e=[e]);let r=XX(e)?e:Lm(e,this.world),o=jN(this,r,n);return o=o.settle(),o}}var g_=(t,e)=>{for(let n=t.length-1;n>=0;n-=1)if(t[n]!==e)return t=t.slice(0,n+1),t;return t},QX=function(t){return t.goNext=t.goNext.map(e=>{if(Object.keys(e).length!==0)return e}),t.goNext=g_(t.goNext,void 0),t.failTo=g_(t.failTo,0),t.endAs=g_(t.endAs,null),t},zN=QX;var y_={buildTrie:function(t){let e=Lm(t,this.world());return zN(e)}};y_.compile=y_.buildTrie;var JN={api:WN,lib:y_};var KN=function(t,e){return e&&t.forEach(n=>{let r=n[0];e[r]&&(n[0]=e[r][0],n[1]+=e[r][1],n[2]+=e[r][1])}),t},b_=function(t,e){let{ptrs:n,byGroup:r}=t;return n=KN(n,e),Object.keys(r).forEach(o=>{r[o]=KN(r[o],e)}),{ptrs:n,byGroup:r}},vu=function(t,e,n){let r=n.methods.one;return typeof t=="number"&&(t=String(t)),typeof t=="string"&&(t=r.killUnicode(t,n),t=r.parseMatch(t,e,n)),t},YN=t=>Object.prototype.toString.call(t)==="[object Object]",wu=t=>t&&YN(t)&&t.isView===!0,_u=t=>t&&YN(t)&&t.isNet===!0;var ZX=function(t,e,n){let r=this.methods.one;if(wu(t))return this.intersection(t);if(_u(t))return this.sweep(t,{tagger:!1}).view.settle();t=vu(t,n,this.world);let o={regs:t,group:e},i=r.match(this.docs,o,this._cache),{ptrs:s,byGroup:a}=b_(i,this.fullPointer),l=this.toView(s);return l._groups=a,l},eQ=function(t,e,n){let r=this.methods.one;if(wu(t))return this.intersection(t).eq(0);if(_u(t))return this.sweep(t,{tagger:!1,matchOne:!0}).view;t=vu(t,n,this.world);let o={regs:t,group:e,justOne:!0},i=r.match(this.docs,o,this._cache),{ptrs:s,byGroup:a}=b_(i,this.fullPointer),l=this.toView(s);return l._groups=a,l},tQ=function(t,e,n){let r=this.methods.one;if(wu(t))return this.intersection(t).fullPointer.length>0;if(_u(t))return this.sweep(t,{tagger:!1}).view.found;t=vu(t,n,this.world);let o={regs:t,group:e,justOne:!0};return r.match(this.docs,o,this._cache).ptrs.length>0},nQ=function(t,e,n){let r=this.methods.one;if(wu(t))return this.filter(l=>l.intersection(t).found);if(_u(t)){let l=this.sweep(t,{tagger:!1}).view.settle();return this.if(l)}t=vu(t,n,this.world);let o={regs:t,group:e,justOne:!0},i=this.fullPointer,s=this._cache||[];i=i.filter((l,u)=>{let f=this.update([l]);return r.match(f.docs,o,s[u]).ptrs.length>0});let a=this.update(i);return this._cache&&(a._cache=i.map(l=>s[l[0]])),a},rQ=function(t,e,n){let{methods:r}=this,o=r.one;if(wu(t))return this.filter(a=>!a.intersection(t).found);if(_u(t)){let a=this.sweep(t,{tagger:!1}).view.settle();return this.ifNo(a)}t=vu(t,n,this.world);let i=this._cache||[],s=this.filter((a,l)=>{let u={regs:t,group:e,justOne:!0};return o.match(a.docs,u,i[l]).ptrs.length===0});return this._cache&&(s._cache=s.ptrs.map(a=>i[a[0]])),s},XN={matchOne:eQ,match:ZX,has:tQ,if:nQ,ifNo:rQ};var oQ=function(t,e,n){let{indexN:r}=this.methods.one.pointer,o=[],i=r(this.fullPointer);Object.keys(i).forEach(a=>{let l=i[a].sort((u,f)=>u[1]>f[1]?1:-1)[0];l[1]>0&&o.push([l[0],0,l[1]])});let s=this.toView(o);return t?s.match(t,e,n):s},iQ=function(t,e,n){let{indexN:r}=this.methods.one.pointer,o=[],i=r(this.fullPointer),s=this.document;Object.keys(i).forEach(l=>{let u=i[l].sort((m,b)=>m[1]>b[1]?-1:1)[0],[f,,p]=u;p<s[f].length&&o.push([f,p,s[f].length])});let a=this.toView(o);return t?a.match(t,e,n):a},sQ=function(t,e,n){typeof t=="string"&&(t=this.world.methods.one.parseMatch(t,n,this.world)),t[t.length-1].end=!0;let r=this.fullPointer;return this.forEach((o,i)=>{let s=o.before(t,e);if(s.found){let a=s.terms();r[i][1]-=a.length,r[i][3]=a.docs[0][0].id}}),this.update(r)},aQ=function(t,e,n){typeof t=="string"&&(t=this.world.methods.one.parseMatch(t,n,this.world)),t[0].start=!0;let r=this.fullPointer;return this.forEach((o,i)=>{let s=o.after(t,e);if(s.found){let a=s.terms();r[i][2]+=a.length,r[i][4]=null}}),this.update(r)},lQ=function(t,e,n){return this.growRight(t,e,n).growLeft(t,e,n)},QN={before:oQ,after:iQ,growLeft:sQ,growRight:aQ,grow:lQ};var ZN=function(t,e){return[t[0],t[1],e[2]]},uQ=function(t){return Object.prototype.toString.call(t)==="[object Array]"},v_=(t,e,n)=>typeof t=="string"||uQ(t)?e.match(t,n):t||e.none(),w_=function(t,e){let[n,r,o]=t;return e.document[n]&&e.document[n][r]&&(t[3]=t[3]||e.document[n][r].id,e.document[n][o-1]&&(t[4]=t[4]||e.document[n][o-1].id)),t},Eu={};Eu.splitOn=function(t,e){let{splitAll:n}=this.methods.one.pointer,r=v_(t,this,e).fullPointer,o=n(this.fullPointer,r),i=[];return o.forEach(s=>{i.push(s.passthrough),i.push(s.before),i.push(s.match),i.push(s.after)}),i=i.filter(s=>s),i=i.map(s=>w_(s,this)),this.update(i)};Eu.splitBefore=function(t,e){let{splitAll:n}=this.methods.one.pointer,r=v_(t,this,e).fullPointer,o=n(this.fullPointer,r);for(let s=0;s<o.length;s+=1)!o[s].after&&o[s+1]&&o[s+1].before&&o[s].match&&o[s].match[0]===o[s+1].before[0]&&(o[s].after=o[s+1].before,delete o[s+1].before);let i=[];return o.forEach(s=>{i.push(s.passthrough),i.push(s.before),s.match&&s.after?i.push(ZN(s.match,s.after)):i.push(s.match)}),i=i.filter(s=>s),i=i.map(s=>w_(s,this)),this.update(i)};Eu.splitAfter=function(t,e){let{splitAll:n}=this.methods.one.pointer,r=v_(t,this,e).fullPointer,o=n(this.fullPointer,r),i=[];return o.forEach(s=>{i.push(s.passthrough),s.before&&s.match?i.push(ZN(s.before,s.match)):(i.push(s.before),i.push(s.match)),i.push(s.after)}),i=i.filter(s=>s),i=i.map(s=>w_(s,this)),this.update(i)};Eu.split=Eu.splitAfter;var eO=Eu;var cQ=function(t,e){return!t||!e||t[0]!==e[0]?!1:t[2]===e[1]},tO=function(t,e,n){let r=t.world,o=r.methods.one.parseMatch;e=e||".$",n=n||"^.";let i=o(e,{},r),s=o(n,{},r);i[i.length-1].end=!0,s[0].start=!0;let a=t.fullPointer,l=[a[0]];for(let u=1;u<a.length;u+=1){let f=l[l.length-1],p=a[u],m=t.update([f]),b=t.update([p]);cQ(f,p)&&m.has(i)&&b.has(s)?l[l.length-1]=[f[0],f[1],p[2],f[3],p[4]]:l.push(p)}return t.update(l)},fQ={joinIf:function(t,e){return tO(this,t,e)},join:function(){return tO(this)}},nO=fQ;var Nr=Object.assign({},XN,QN,eO,nO);Nr.lookBehind=Nr.before;Nr.lookBefore=Nr.before;Nr.lookAhead=Nr.after;Nr.lookAfter=Nr.after;Nr.notIf=Nr.ifNo;var dQ=function(t){Object.assign(t.prototype,Nr)},rO=dQ;var hQ=/(?:^|\s)([![^]*(?:<[^<]*>)?\/.*?[^\\/]\/[?\]+*$~]*)(?:\s|$)/,pQ=/([!~[^]*(?:<[^<]*>)?\([^)]+[^\\)]\)[?\]+*$~]*)(?:\s|$)/,mQ=/ /g,gQ=t=>/^[![^]*(<[^<]*>)?\(/.test(t)&&/\)[?\]+*$~]*$/.test(t),oO=t=>/^[![^]*(<[^<]*>)?\//.test(t)&&/\/[?\]+*$~]*$/.test(t),iO=function(t){return t=t.map(e=>e.trim()),t=t.filter(e=>e),t},yQ=function(t){let e=t.split(hQ),n=[];e.forEach(o=>{if(oO(o)){n.push(o);return}n=n.concat(o.split(pQ))}),n=iO(n);let r=[];return n.forEach(o=>{gQ(o)||oO(o)?r.push(o):r=r.concat(o.split(mQ))}),r=iO(r),r},sO=yQ;var aO=/\{([0-9]+)?(, *[0-9]*)?\}/,lO=/&&/,bQ=new RegExp(/^<\s*(\S+)\s*>/),uO=t=>t.charAt(0).toUpperCase()+t.substring(1),ir=t=>t.charAt(t.length-1),Gn=t=>t.charAt(0),Au=t=>t.substring(1),Cu=t=>t.substring(0,t.length-1),wf=function(t){return t=Au(t),t=Cu(t),t},cO=function(t,e){let n={};for(let r=0;r<2;r+=1){if(ir(t)==="$"&&(n.end=!0,t=Cu(t)),Gn(t)==="^"&&(n.start=!0,t=Au(t)),ir(t)==="?"&&(n.optional=!0,t=Cu(t)),(Gn(t)==="["||ir(t)==="]")&&(n.group=null,Gn(t)==="["&&(n.groupStart=!0),ir(t)==="]"&&(n.groupEnd=!0),t=t.replace(/^\[/,""),t=t.replace(/\]$/,""),Gn(t)==="<")){let o=bQ.exec(t);o.length>=2&&(n.group=o[1],t=t.replace(o[0],""))}if(ir(t)==="+"&&(n.greedy=!0,t=Cu(t)),t!=="*"&&ir(t)==="*"&&t!=="\\*"&&(n.greedy=!0,t=Cu(t)),Gn(t)==="!"&&(n.negative=!0,t=Au(t)),Gn(t)==="~"&&ir(t)==="~"&&t.length>2&&(t=wf(t),n.fuzzy=!0,n.min=e.fuzzy||.85,/\(/.test(t)===!1))return n.word=t,n;if(Gn(t)==="/"&&ir(t)==="/")return t=wf(t),e.caseSensitive&&(n.use="text"),n.regex=new RegExp(t),n;if(aO.test(t)===!0&&(t=t.replace(aO,(o,i,s)=>(s===void 0?(n.min=Number(i),n.max=Number(i)):(s=s.replace(/, */,""),i===void 0?(n.min=0,n.max=Number(s)):(n.min=Number(i),n.max=Number(s||999))),n.greedy=!0,n.min||(n.optional=!0),""))),Gn(t)==="("&&ir(t)===")"){lO.test(t)?(n.choices=t.split(lO),n.operator="and"):(n.choices=t.split("|"),n.operator="or"),n.choices[0]=Au(n.choices[0]);let o=n.choices.length-1;n.choices[o]=Cu(n.choices[o]),n.choices=n.choices.map(i=>i.trim()),n.choices=n.choices.filter(i=>i),n.choices=n.choices.map(i=>i.split(/ /g).map(s=>cO(s,e))),t=""}if(Gn(t)==="{"&&ir(t)==="}"){if(t=wf(t),n.root=t,/\//.test(t)){let o=n.root.split(/\//);n.root=o[0],n.pos=o[1],n.pos==="adj"&&(n.pos="Adjective"),n.pos=n.pos.charAt(0).toUpperCase()+n.pos.substr(1).toLowerCase(),o[2]!==void 0&&(n.sense=o[2])}return n}if(Gn(t)==="<"&&ir(t)===">")return t=wf(t),n.chunk=uO(t),n.greedy=!0,n;if(Gn(t)==="%"&&ir(t)==="%")return t=wf(t),n.switch=t,n}return Gn(t)==="#"?(n.tag=Au(t),n.tag=uO(n.tag),n):Gn(t)==="@"?(n.method=Au(t),n):t==="."?(n.anything=!0,n):t==="*"?(n.anything=!0,n.greedy=!0,n.optional=!0,n):(t&&(t=t.replace("\\*","*"),t=t.replace("\\.","."),e.caseSensitive?n.use="text":t=t.toLowerCase(),n.word=t),n)},fO=cO;var vQ=/[a-z0-9][-][a-z]/i,wQ=function(t,e){let n=e.model.one.prefixes;for(let r=t.length-1;r>=0;r-=1){let o=t[r];if(o.word&&vQ.test(o.word)){let i=o.word.split(/[-]/g);if(n.hasOwnProperty(i[0]))continue;i=i.filter(s=>s).reverse(),t.splice(r,1),i.forEach(s=>{let a=Object.assign({},o);a.word=s,t.splice(r,0,a)})}}return t},dO=wQ;var hO=function(t,e){let{all:n}=e.methods.two.transform.verb||{},r=t.root;return n?n(r,e.model):[]},pO=function(t,e){let{all:n}=e.methods.two.transform.noun||{};return n?n(t.root,e.model):[t.root]},mO=function(t,e){let{all:n}=e.methods.two.transform.adjective||{};return n?n(t.root,e.model):[t.root]},_Q=function(t,e){return t=t.map(n=>{if(n.root)if(e.methods.two&&e.methods.two.transform){let r=[];n.pos?n.pos==="Verb"?r=r.concat(hO(n,e)):n.pos==="Noun"?r=r.concat(pO(n,e)):n.pos==="Adjective"&&(r=r.concat(mO(n,e))):(r=r.concat(hO(n,e)),r=r.concat(pO(n,e)),r=r.concat(mO(n,e))),r=r.filter(o=>o),r.length>0&&(n.operator="or",n.fastOr=new Set(r))}else n.machine=n.root,delete n.id,delete n.root;return n}),t},gO=_Q;var EQ=function(t){let e=0,n=null;for(let r=0;r<t.length;r++){let o=t[r];o.groupStart===!0&&(n=o.group,n===null&&(n=String(e),e+=1)),n!==null&&(o.group=n),o.groupEnd===!0&&(n=null)}return t},AQ=function(t){return t.map(e=>{if(e.choices!==void 0){if(e.operator!=="or"||e.fuzzy===!0)return e;e.choices.every(r=>{if(r.length!==1)return!1;let o=r[0];return o.fuzzy===!0||o.start||o.end?!1:o.word!==void 0&&o.negative!==!0&&o.optional!==!0&&o.method!==!0})===!0&&(e.fastOr=new Set,e.choices.forEach(r=>{e.fastOr.add(r[0].word)}),delete e.choices)}return e})},CQ=function(t){return t.map(e=>(e.fuzzy&&e.choices&&e.choices.forEach(n=>{n.length===1&&n[0].word&&(n[0].fuzzy=!0,n[0].min=e.min)}),e))},TQ=function(t){return t=EQ(t),t=AQ(t),t=CQ(t),t},yO=TQ;var SQ=function(t,e,n){if(t==null||t==="")return[];e=e||{},typeof t=="number"&&(t=String(t));let r=sO(t);return r=r.map(o=>fO(o,e)),r=dO(r,n),r=gO(r,n),r=yO(r,e),r},bO=SQ;var PQ=function(t,e){for(let n of e)if(t.has(n))return!0;return!1},IQ=function(t,e){for(let n=0;n<t.length;n+=1){let r=t[n];if(!(r.optional===!0||r.negative===!0||r.fuzzy===!0)){if(r.word!==void 0&&e.has(r.word)===!1||r.tag!==void 0&&e.has("#"+r.tag)===!1)return!0;if(r.fastOr&&PQ(r.fastOr,e)===!1)return!1}}return!1},vO=IQ;var xQ=function(t,e){let n=t.length,r=e.length;if(n===0)return r;if(r===0)return n;let o=(r>n?r:n)+1;if(Math.abs(n-r)>(o||100))return o||100;let i=[];for(let m=0;m<o;m++)i[m]=[m],i[m].length=o;for(let m=0;m<o;m++)i[0][m]=m;let s,a,l,u,f,p;for(let m=1;m<=n;++m)for(a=t[m-1],s=1;s<=r;++s){if(m===s&&i[m][s]>4)return n;l=e[s-1],u=a===l?0:1,f=i[m-1][s]+1,(p=i[m][s-1]+1)<f&&(f=p),(p=i[m-1][s-1]+u)<f&&(f=p),m>1&&s>1&&a===e[s-2]&&t[m-2]===l&&(p=i[m-2][s-2]+u)<f?i[m][s]=p:i[m][s]=f}return i[n][r]},kQ=function(t,e,n=3){if(t===e)return 1;if(t.length<n||e.length<n)return 0;let r=xQ(t,e),o=Math.max(t.length,e.length);return 1-(o===0?0:r/o)},wO=kQ;var RQ=/([\u0022\uFF02\u0027\u201C\u2018\u201F\u201B\u201E\u2E42\u201A\u00AB\u2039\u2035\u2036\u2037\u301D\u0060\u301F])/,NQ=/([\u0022\uFF02\u0027\u201D\u2019\u00BB\u203A\u2032\u2033\u2034\u301E\u00B4])/,_O=/^[-]$/,EO=/ [-]{1,3} /,uo=(t,e)=>t.post.indexOf(e)!==-1,__={hasQuote:t=>RQ.test(t.pre)||NQ.test(t.post),hasComma:t=>uo(t,","),hasPeriod:t=>uo(t,".")===!0&&uo(t,"...")===!1,hasExclamation:t=>uo(t,"!"),hasQuestionMark:t=>uo(t,"?")||uo(t,"\xBF"),hasEllipses:t=>uo(t,"..")||uo(t,"\u2026"),hasSemicolon:t=>uo(t,";"),hasColon:t=>uo(t,":"),hasSlash:t=>/\//.test(t.text),hasHyphen:t=>_O.test(t.post)||_O.test(t.pre),hasDash:t=>EO.test(t.post)||EO.test(t.pre),hasContraction:t=>!!t.implicit,isAcronym:t=>t.tags.has("Acronym"),isKnown:t=>t.tags.size>0,isTitleCase:t=>/^\p{Lu}[a-z'\u00C0-\u00FF]/u.test(t.text),isUpperCase:t=>/^\p{Lu}+$/u.test(t.text)};__.hasQuotation=__.hasQuote;var _f=__;var Um=function(){},OQ=function(t,e,n,r){if(e.anything===!0)return!0;if(e.start===!0&&n!==0||e.end===!0&&n!==r-1)return!1;if(e.id!==void 0&&e.id===t.id)return!0;if(e.word!==void 0)return e.use?e.word===t[e.use]:t.machine!==null&&t.machine===e.word||t.alias!==void 0&&t.alias.hasOwnProperty(e.word)||e.fuzzy===!0&&(e.word===t.root||wO(e.word,t.normal)>=e.min)||t.alias&&t.alias.some(o=>o===e.word)?!0:e.word===t.text||e.word===t.normal;if(e.tag!==void 0)return t.tags.has(e.tag)===!0;if(e.method!==void 0)return typeof _f[e.method]=="function"&&_f[e.method](t)===!0;if(e.pre!==void 0)return t.pre&&t.pre.includes(e.pre);if(e.post!==void 0)return t.post&&t.post.includes(e.post);if(e.regex!==void 0){let o=t.normal;return e.use&&(o=t[e.use]),e.regex.test(o)}if(e.chunk!==void 0)return t.chunk===e.chunk;if(e.switch!==void 0)return t.switch===e.switch;if(e.machine!==void 0)return t.normal===e.machine||t.machine===e.machine||t.root===e.machine;if(e.sense!==void 0)return t.sense===e.sense;if(e.fastOr!==void 0){if(e.pos&&!t.tags.has(e.pos))return null;let o=t.root||t.implicit||t.machine||t.normal;return e.fastOr.has(o)||e.fastOr.has(t.text)}return e.choices!==void 0?e.operator==="and"?e.choices.every(o=>Um(t,o,n,r)):e.choices.some(o=>Um(t,o,n,r)):!1};Um=function(t,e,n,r){let o=OQ(t,e,n,r);return e.negative===!0?!o:o};var mt=Um;var AO=function(t,e){let n=Object.assign({},t.regs[t.r],{start:!1,end:!1}),r=t.t;for(;t.t<t.terms.length;t.t+=1){if(e&&mt(t.terms[t.t],e,t.start_i+t.t,t.phrase_length))return t.t;let o=t.t-r+1;if(n.max!==void 0&&o===n.max)return t.t;if(mt(t.terms[t.t],n,t.start_i+t.t,t.phrase_length)===!1)return n.min!==void 0&&o<n.min?null:t.t}return t.t},CO=function(t,e){let n=t.t;if(!e)return t.terms.length;for(;n<t.terms.length;n+=1)if(mt(t.terms[n],e,t.start_i+n,t.phrase_length)===!0)return n;return null},TO=function(t,e){if(t.end===!0&&t.greedy===!0&&e.start_i+e.t<e.phrase_length-1){let n=Object.assign({},t,{end:!1});if(mt(e.terms[e.t],n,e.start_i+e.t,e.phrase_length)===!0)return!0}return!1};var ji=function(t,e){return t.groups[t.inGroup]||(t.groups[t.inGroup]={start:e,length:0}),t.groups[t.inGroup]};var DQ=function(t){let{regs:e}=t,n=e[t.r],r=CO(t,e[t.r+1]);if(r===null||r===0||n.min!==void 0&&r-t.t<n.min)return null;if(n.max!==void 0&&r-t.t>n.max)return t.t=t.t+n.max,!0;if(t.hasGroup===!0){let o=ji(t,t.t);o.length=r-t.t}return t.t=r,!0},SO=DQ;var MQ=function(t){return Object.prototype.toString.call(t)==="[object Array]"},E_=function(t,e=0){let n=t.regs[t.r],r=!1;for(let o=0;o<n.choices.length;o+=1){let i=n.choices[o];if(!MQ(i))return!1;if(r=i.every((s,a)=>{let l=0,u=t.t+a+e+l;if(t.terms[u]===void 0)return!1;let f=mt(t.terms[u],s,u+t.start_i,t.phrase_length);if(f===!0&&s.greedy===!0)for(let p=1;p<t.terms.length;p+=1){let m=t.terms[u+p];if(m)if(mt(m,s,t.start_i+p,t.phrase_length)===!0)l+=1;else break}return e+=l,f}),r){e+=i.length;break}}return r&&n.greedy===!0?E_(t,e):e},PO=function(t){let e=0;return t.regs[t.r].choices.every(o=>{let i=o.every((s,a)=>{let l=t.t+a;return t.terms[l]===void 0?!1:mt(t.terms[l],s,l,t.phrase_length)});return i===!0&&o.length>e&&(e=o.length),i})===!0?e:!1};var FQ=function(t){let{regs:e}=t,n=e[t.r],r=E_(t);if(r){if(n.negative===!0)return null;if(t.hasGroup===!0){let o=ji(t,t.t);o.length+=r}if(n.end===!0){let o=t.phrase_length;if(t.t+t.start_i+r!==o)return null}return t.t+=r,!0}else if(!n.optional)return null;return!0},IO=FQ;var LQ=function(t){let{regs:e}=t,n=e[t.r],r=PO(t);if(r){if(n.negative===!0)return null;if(t.hasGroup===!0){let o=ji(t,t.t);o.length+=r}if(n.end===!0){let o=t.phrase_length-1;if(t.t+t.start_i!==o)return null}return t.t+=r,!0}else if(!n.optional)return null;return!0},xO=LQ;var UQ=function(t,e,n){let r=0;for(let o=t.t;o<t.terms.length;o+=1){let i=mt(t.terms[o],e,t.start_i+t.t,t.phrase_length);if(i||n&&(i=mt(t.terms[o],n,t.start_i+t.t,t.phrase_length),i)||(r+=1,e.max!==void 0&&r===e.max))break}return r===0||e.min&&e.min>r?!1:(t.t+=r,!0)},kO=UQ;var BQ=function(t){let{regs:e}=t,n=e[t.r],r=Object.assign({},n);if(r.negative=!1,mt(t.terms[t.t],r,t.start_i+t.t,t.phrase_length))return!1;if(n.optional){let i=e[t.r+1];i&&(mt(t.terms[t.t],i,t.start_i+t.t,t.phrase_length)?t.r+=1:i.optional&&e[t.r+2]&&mt(t.terms[t.t],e[t.r+2],t.start_i+t.t,t.phrase_length)&&(t.r+=2))}return n.greedy?kO(t,r,e[t.r+1]):(t.t+=1,!0)},RO=BQ;var GQ=function(t){let{regs:e}=t,n=e[t.r],r=t.terms[t.t],o=mt(r,e[t.r+1],t.start_i+t.t,t.phrase_length);if(n.negative||o){let i=t.terms[t.t+1];(!i||!mt(i,e[t.r+1],t.start_i+t.t,t.phrase_length))&&(t.r+=1)}},NO=GQ;var HQ=function(t){let{regs:e,phrase_length:n}=t,r=e[t.r];return t.t=AO(t,e[t.r+1]),t.t===null||r.min&&r.min>t.t||r.end===!0&&t.start_i+t.t!==n?null:!0},OO=HQ;var qQ=function(t){let e=t.terms[t.t],n=t.regs[t.r];if(e.implicit&&t.terms[t.t+1]){if(!t.terms[t.t+1].implicit)return;n.word===e.normal&&(t.t+=1),n.method==="hasContraction"&&(t.t+=1)}},DO=qQ;var $Q=function(t,e){let n=t.regs[t.r],r=ji(t,e);t.t>1&&n.greedy?r.length+=t.t-e:r.length++},VQ=function(t){let{regs:e}=t,n=e[t.r],r=t.terms[t.t],o=t.t;return n.optional&&e[t.r+1]&&n.negative?!0:(n.optional&&e[t.r+1]&&NO(t),r.implicit&&t.terms[t.t+1]&&DO(t),t.t+=1,n.end===!0&&t.t!==t.terms.length&&n.greedy!==!0||n.greedy===!0&&!OO(t)?null:(t.hasGroup===!0&&$Q(t,o),!0))},Bm=VQ;var jQ=function(t,e,n,r){if(t.length===0||e.length===0)return null;let o={t:0,terms:t,r:0,regs:e,groups:{},start_i:n,phrase_length:r,inGroup:null};for(;o.r<e.length;o.r+=1){let a=e[o.r];if(o.hasGroup=!!a.group,o.hasGroup===!0?o.inGroup=a.group:o.inGroup=null,!o.terms[o.t]){if(e.slice(o.r).some(f=>!f.optional)===!1)break;return null}if(a.anything===!0&&a.greedy===!0){if(!SO(o))return null;continue}if(a.choices!==void 0&&a.operator==="or"){if(!IO(o))return null;continue}if(a.choices!==void 0&&a.operator==="and"){if(!xO(o))return null;continue}if(a.anything===!0){if(a.negative&&a.anything||!Bm(o))return null;continue}if(TO(a,o)===!0){if(!Bm(o))return null;continue}if(a.negative){if(!RO(o))return null;continue}if(mt(o.terms[o.t],a,o.start_i+o.t,o.phrase_length)===!0){if(!Bm(o))return null;continue}if(a.optional!==!0)return null}let i=[null,n,o.t+n];if(i[1]===i[2])return null;let s={};return Object.keys(o.groups).forEach(a=>{let l=o.groups[a],u=n+l.start;s[a]=[null,u,u+l.length]}),{pointer:i,groups:s}},Ef=jQ;var WQ=function(t,e){let n=[],r={};return t.length===0?{ptrs:n,byGroup:r}:(typeof e=="number"&&(e=String(e)),e?t.forEach(o=>{o.groups[e]&&n.push(o.groups[e])}):t.forEach(o=>{n.push(o.pointer),Object.keys(o.groups).forEach(i=>{r[i]=r[i]||[],r[i].push(o.groups[i])})}),{ptrs:n,byGroup:r})},MO=WQ;var zQ=function(t,e,n){return t=t.filter(r=>{let[o,i,s]=r.pointer,a=n[o].slice(i,s);for(let l=0;l<a.length;l+=1){let u=a.slice(l);if(Ef(u,e,l,a.length)!==null)return!1}return!0}),t},FO=zQ;var LO=function(t,e){return t.pointer[0]=e,Object.keys(t.groups).forEach(n=>{t.groups[n][0]=e}),t},JQ=function(t,e,n){let r=Ef(t,e,0,t.length);return r?(r=LO(r,n),r):null},KQ=function(t,e,n){n=n||[];let{regs:r,group:o,justOne:i}=e,s=[];if(!r||r.length===0)return{ptrs:[],byGroup:{}};let a=r.filter(l=>l.optional!==!0&&l.negative!==!0).length;e:for(let l=0;l<t.length;l+=1){let u=t[l];if(!(n[l]&&vO(r,n[l]))){if(r[0].start===!0){let f=JQ(u,r,l,o);f&&s.push(f);continue}for(let f=0;f<u.length;f+=1){let p=u.slice(f);if(p.length<a)break;let m=Ef(p,r,f,u.length);if(m){if(m=LO(m,l),s.push(m),i===!0)break e;let b=m.pointer[2];Math.abs(b-1)>f&&(f=Math.abs(b-1))}}}}return r[r.length-1].end===!0&&(s=s.filter(l=>{let u=l.pointer[0];return t[u].length===l.pointer[2]})),e.notIf&&(s=FO(s,e.notIf,t)),s=MO(s,o),s.ptrs.forEach(l=>{let[u,f,p]=l;l[3]=t[u][f].id,l[4]=t[u][p-1].id}),s},UO=KQ;var YQ={one:{termMethods:_f,parseMatch:bO,match:UO}},BO=YQ;var GO={parseMatch:function(t,e){let n=this.world(),r=n.methods.one.killUnicode;return r&&(t=r(t,n)),n.methods.one.parseMatch(t,e,n)}};var HO={api:rO,methods:BO,lib:GO};var XQ=/^\../,QQ=/^#./,ZQ=t=>(t=t.replace(/&/g,"&amp;"),t=t.replace(/</g,"&lt;"),t=t.replace(/>/g,"&gt;"),t=t.replace(/"/g,"&quot;"),t=t.replace(/'/g,"&apos;"),t),eZ=function(t){let e="",n="</span>";return t=ZQ(t),XQ.test(t)?e=`<span class="${t.replace(/^\./,"")}"`:QQ.test(t)?e=`<span id="${t.replace(/^#/,"")}"`:(e=`<${t}`,n=`</${t}>`),e+=">",{start:e,end:n}},tZ=function(t,e){let n={},r={};return Object.keys(e).forEach(o=>{let i=e[o],s=eZ(o);typeof i=="string"&&(i=t.match(i)),i.docs.forEach(a=>{if(a.every(f=>f.implicit))return;let l=a[0].id;n[l]=n[l]||[],n[l].push(s.start);let u=a[a.length-1].id;r[u]=r[u]||[],r[u].push(s.end)})}),{starts:n,ends:r}},nZ=function(t){let{starts:e,ends:n}=tZ(this,t),r="";return this.docs.forEach(o=>{for(let i=0;i<o.length;i+=1){let s=o[i];e.hasOwnProperty(s.id)&&(r+=e[s.id].join("")),r+=s.pre||"",r+=s.text||"",n.hasOwnProperty(s.id)&&(r+=n[s.id].join("")),r+=s.post||""}}),r},qO={html:nZ};var $O=/[,:;)\]*.?~!\u0022\uFF02\u201D\u2019\u00BB\u203A\u2032\u2033\u2034\u301E\u00B4-]+$/,A_=/^[(['"*~\uFF02\u201C\u2018\u201F\u201B\u201E\u2E42\u201A\u00AB\u2039\u2035\u2036\u2037\u301D\u0060\u301F]+/,rZ=/[,:;)('"\u201D\]]/,oZ=/^[-]$/,iZ=/ /,Wi=function(t,e,n=!0){let r="";return t.forEach(o=>{let i=o.pre||"",s=o.post||"";e.punctuation==="some"&&(i=i.replace(A_,""),oZ.test(s)&&(s=" "),s=s.replace(rZ,""),s=s.replace(/\?!+/,"?"),s=s.replace(/!+/,"!"),s=s.replace(/\?+/,"?"),s=s.replace(/\.{2,}/,""),o.tags.has("Abbreviation")&&(s=s.replace(/\./,""))),e.whitespace==="some"&&(i=i.replace(/\s/,""),s=s.replace(/\s+/," ")),e.keepPunct||(i=i.replace(A_,""),s==="-"?s=" ":s=s.replace($O,""));let a=o[e.form||"text"]||o.normal||"";e.form==="implicit"&&(a=o.implicit||o.text),e.form==="root"&&o.implicit&&(a=o.root||o.implicit||o.normal),(e.form==="machine"||e.form==="implicit"||e.form==="root")&&o.implicit&&(!s||!iZ.test(s))&&(s+=" "),r+=i+a+s}),n===!1&&(r=r.trim()),e.lowerCase===!0&&(r=r.toLowerCase()),r},VO=function(t,e){let n="";if(!t||!t[0]||!t[0][0])return n;for(let r=0;r<t.length;r+=1)n+=Wi(t[r],e,!0);if(e.keepSpace||(n=n.trim()),e.keepEndPunct===!1){t[0][0].tags.has("Emoticon")||(n=n.replace(A_,""));let r=t[t.length-1];r[r.length-1].tags.has("Emoticon")||(n=n.replace($O,"")),n.endsWith("'")&&!n.endsWith("s'")&&(n=n.replace(/'/,""))}return e.cleanWhitespace===!0&&(n=n.trim()),n};var Af={text:{form:"text"},normal:{whitespace:"some",punctuation:"some",case:"some",unicode:"some",form:"normal"},machine:{keepSpace:!1,whitespace:"some",punctuation:"some",case:"none",unicode:"some",form:"machine"},root:{keepSpace:!1,whitespace:"some",punctuation:"some",case:"some",unicode:"some",form:"root"},implicit:{form:"implicit"}};Af.clean=Af.normal;Af.reduced=Af.root;var Tu=Af;var jO=[],ca=0;for(;ca<64;)jO[ca]=0|Math.sin(++ca%Math.PI)*4294967296;var sZ=function(t){let e,n,r,o=[e=1732584193,n=4023233417,~e,~n],i=[],s=decodeURI(encodeURI(t))+"\x80",a=s.length;for(t=--a/4+2|15,i[--t]=a*8;~a;)i[a>>2]|=s.charCodeAt(a)<<8*a--;for(ca=s=0;ca<t;ca+=16){for(a=o;s<64;a=[r=a[3],e+((r=a[0]+[e&n|~e&r,r&e|~r&n,e^n^r,n^(e|~r)][a=s>>4]+jO[s]+~~i[ca|[s,5*s+1,3*s+5,7*s][a]&15])<<(a=[7,12,17,22,5,9,14,20,4,11,16,23,6,10,15,21][4*a+s++%4])|r>>>-a),e,n])e=a[1]|0,n=a[2];for(s=4;s;)o[--s]+=a[s]}for(t="";s<32;)t+=(o[s>>3]>>(1^s++)*4&15).toString(16);return t},fa=sZ;var aZ={text:!0,terms:!0},WO={case:"none",unicode:"some",form:"machine",punctuation:"some"},C_=function(t,e){return Object.assign({},t,e)},Jo={text:t=>Wi(t,{keepPunct:!0},!1),normal:t=>Wi(t,C_(Tu.normal,{keepPunct:!0}),!1),implicit:t=>Wi(t,C_(Tu.implicit,{keepPunct:!0}),!1),machine:t=>Wi(t,WO,!1),root:t=>Wi(t,C_(WO,{form:"root"}),!1),hash:t=>fa(Wi(t,{keepPunct:!0},!1)),offset:t=>{let e=Jo.text(t).length;return{index:t[0].offset.index,start:t[0].offset.start,length:e}},terms:t=>t.map(e=>{let n=Object.assign({},e);return n.tags=Array.from(e.tags),n}),confidence:(t,e,n)=>e.eq(n).confidence(),syllables:(t,e,n)=>e.eq(n).syllables(),sentence:(t,e,n)=>e.eq(n).fullSentence().text(),dirty:t=>t.some(e=>e.dirty===!0)};Jo.sentences=Jo.sentence;Jo.clean=Jo.normal;Jo.reduced=Jo.root;var lZ=function(t,e){return e=e||{},typeof e=="string"&&(e={}),e=Object.assign({},aZ,e),e.offset&&t.compute("offset"),t.docs.map((n,r)=>{let o={};return Object.keys(e).forEach(i=>{e[i]&&Jo[i]&&(o[i]=Jo[i](n,t,r))}),o})},T_={json:function(t){let e=lZ(this,t);return typeof t=="number"?e[t]:e}};T_.data=T_.json;var zO=T_;var uZ=()=>typeof window!="undefined"&&window.document,cZ=function(t){let e=this.methods.one.debug||{};return t&&e.hasOwnProperty(t)?(e[t](this),this):uZ()?(e.clientSide(this),this):(e.tags(this),this)},JO=cZ;var fZ=function(t){let e=t.pre||"",n=t.post||"";return e+t.text+n},dZ=function(t,e){let n={};return Object.keys(e).forEach(r=>{t.match(r).fullPointer.forEach(i=>{n[i[3]]={fn:e[r],end:i[2]}})}),n},hZ=function(t,e){let n=dZ(t,e),r="";return t.docs.forEach((o,i)=>{for(let s=0;s<o.length;s+=1){let a=o[s];if(n.hasOwnProperty(a.id)){let{fn:l,end:u}=n[a.id],f=t.update([[i,s,u]]);r+=o[s].pre||"",r+=l(f),s=u-1,r+=o[s].post||""}else r+=fZ(a)}}),r},S_=hZ;var pZ=t=>Object.prototype.toString.call(t)==="[object Object]",mZ=function(t){let e={};return t.forEach(r=>{e[r]=e[r]||0,e[r]+=1}),Object.keys(e).map(r=>({normal:r,count:e[r]})).sort((r,o)=>r.count>o.count?-1:0)},gZ=function(t){if(pZ(t))return S_(this,t);if(t==="text")return this.text();if(t==="normal")return this.text("normal");if(t==="root")return this.text("root");if(t==="machine"||t==="reduced")return this.text("machine");if(t==="hash"||t==="md5")return fa(this.text());if(t==="json")return this.json();if(t==="offset"||t==="offsets")return this.compute("offset"),this.json({offset:!0});if(t==="array")return this.docs.map(n=>n.reduce((r,o)=>r+o.pre+o.text+o.post,"").trim()).filter(n=>n);if(t==="freq"||t==="frequency"||t==="topk")return mZ(this.json({normal:!0}).map(e=>e.normal));if(t==="terms"){let e=[];return this.docs.forEach(n=>{let r=n.map(o=>o.text);r=r.filter(o=>o),e=e.concat(r)}),e}return t==="tags"?this.docs.map(e=>e.reduce((n,r)=>(n[r.implicit||r.normal]=Array.from(r.tags),n),{})):t==="debug"?this.debug():this.text()},yZ={debug:JO,out:gZ,wrap:function(t){return S_(this,t)}},KO=yZ;var bZ=t=>Object.prototype.toString.call(t)==="[object Object]",YO={text:function(t){let e={};if(t&&typeof t=="string"&&Tu.hasOwnProperty(t)?e=Object.assign({},Tu[t]):t&&bZ(t)&&(e=Object.assign({},t)),e.keepSpace===void 0&&!this.isFull()&&(e.keepSpace=!1),e.keepEndPunct===void 0&&this.pointer){let n=this.pointer[0];n&&n[1]?e.keepEndPunct=!1:e.keepEndPunct=!0}return e.keepPunct===void 0&&(e.keepPunct=!0),e.keepSpace===void 0&&(e.keepSpace=!0),VO(this.docs,e)}};var vZ=Object.assign({},KO,YO,zO,qO),wZ=function(t){Object.assign(t.prototype,vZ)},XO=wZ;var _Z=function(t){console.log("%c -=-=- ","background-color:#6699cc;"),t.forEach(e=>{console.groupCollapsed(e.text());let r=e.docs[0].map(o=>{let i=o.text||"-";o.implicit&&(i="["+o.implicit+"]");let s="["+Array.from(o.tags).join(", ")+"]";return{text:i,tags:s}});console.table(r,["text","tags"]),console.groupEnd()})},QO=_Z;var Ko="\x1B[0m",EZ={green:t=>"\x1B[32m"+t+Ko,red:t=>"\x1B[31m"+t+Ko,blue:t=>"\x1B[34m"+t+Ko,magenta:t=>"\x1B[35m"+t+Ko,cyan:t=>"\x1B[36m"+t+Ko,yellow:t=>"\x1B[33m"+t+Ko,black:t=>"\x1B[30m"+t+Ko,dim:t=>"\x1B[2m"+t+Ko,i:t=>"\x1B[3m"+t+Ko},zt=EZ;var AZ=function(t,e){return e.one.tagSet&&(t=t.map(n=>{if(!e.one.tagSet.hasOwnProperty(n))return n;let r=e.one.tagSet[n].color||"blue";return zt[r](n)})),t.join(", ")},CZ=function(t){let{docs:e,model:n}=t;e.length===0&&console.log(zt.blue(`
     \u2500\u2500\u2500\u2500\u2500\u2500`)),e.forEach(r=>{console.log(zt.blue(`
  \u250C\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500`)),r.forEach(o=>{let i=[...o.tags||[]],s=o.text||"-";o.sense&&(s=`{${o.normal}/${o.sense}}`),o.implicit&&(s="["+o.implicit+"]"),s=zt.yellow(s);let a="'"+s+"'";if(o.reference){let u=t.update([o.reference]).text("normal");a+=` - ${zt.dim(zt.i("["+u+"]"))}`}a=a.padEnd(18);let l=zt.blue("  \u2502 ")+zt.i(a)+"  - "+AZ(i,n);console.log(l)})}),console.log(`
`)},ZO=CZ;var TZ=function(t){let{docs:e}=t;console.log(""),e.forEach(n=>{let r=[];n.forEach(o=>{o.chunk==="Noun"?r.push(zt.blue(o.implicit||o.normal)):o.chunk==="Verb"?r.push(zt.green(o.implicit||o.normal)):o.chunk==="Adjective"?r.push(zt.yellow(o.implicit||o.normal)):o.chunk==="Pivot"?r.push(zt.red(o.implicit||o.normal)):r.push(o.implicit||o.normal)}),console.log(r.join(" "),`
`)}),console.log(`
`)},eD=TZ;var SZ=(t,e,n)=>{let r=n*9,o=e.start+r,i=o+e.length,s=t.substring(0,o),a=t.substring(o,i),l=t.substring(i,t.length);return[s,a,l]},PZ=function(t,e,n){let r=SZ(t,e,n);return`${r[0]}${zt.blue(r[1])}${r[2]}`},IZ=function(t){if(!t.found)return;let e={};t.fullPointer.forEach(n=>{e[n[0]]=e[n[0]]||[],e[n[0]].push(n)}),Object.keys(e).forEach(n=>{let o=t.update([[Number(n)]]).text();t.update(e[n]).json({offset:!0}).forEach((a,l)=>{o=PZ(o,a.offset,l)}),console.log(o)}),console.log(`
`)},tD=IZ;var xZ={tags:ZO,clientSide:QO,chunks:eD,highlight:tD},P_=xZ;var nD={api:XO,methods:{one:{hash:fa,debug:P_}}};var Gm=function(t,e){if(t[0]!==e[0])return!1;let[,n,r]=t,[,o,i]=e;return n<=o&&r>o||o<=n&&i>n},rD=function(t){let e=t[0][1],n=t[0][2];return t.forEach(r=>{r[1]<e&&(e=r[1]),r[2]>n&&(n=r[2])}),[t[0][0],e,n]},zi=function(t){let e={};return t.forEach(n=>{e[n[0]]=e[n[0]]||[],e[n[0]].push(n)}),e},oD=function(t){let e={};for(let n=0;n<t.length;n+=1)e[t[n].join(",")]=t[n];return Object.values(e)};var kZ=function(t,e){let[n,r]=t,o=e[1],i=e[2],s={};if(r<o){let a=o<t[2]?o:t[2];s.before=[n,r,a]}return s.match=e,t[2]>i&&(s.after=[n,i,t[2]]),s},RZ=function(t,e){return t[1]<=e[1]&&e[2]<=t[2]},NZ=function(t,e){let n=zi(e),r=[];return t.forEach(o=>{let[i]=o,s=n[i]||[];if(s=s.filter(l=>RZ(o,l)),s.length===0){r.push({passthrough:o});return}s=s.sort((l,u)=>l[1]-u[1]);let a=o;s.forEach((l,u)=>{let f=kZ(a,l);s[u+1]?(r.push({before:f.before,match:f.match}),f.after&&(a=f.after)):r.push(f)})}),r},Hm=NZ;var OZ=function(t,e,n){for(let r=0;r<20;r+=1){if(e[n-r]){let o=e[n-r].findIndex(i=>i.id===t);if(o!==-1)return[n-r,o]}if(e[n+r]){let o=e[n+r].findIndex(i=>i.id===t);if(o!==-1)return[n+r,o]}}return null},DZ=function(t,e){let[n,r,,,o]=t,i=e[n],s=i.findIndex(a=>a.id===o);return s===-1?(t[2]=e[n].length,t[4]=i.length?i[i.length-1].id:null):t[2]=s,e[n].slice(r,t[2]+1)},MZ=function(t,e){let n=[];return t.forEach((r,o)=>{if(!r)return;let[i,s,a,l,u]=r,f=e[i]||[];if(s===void 0&&(s=0),a===void 0&&(a=f.length),l&&(!f[s]||f[s].id!==l)){let p=OZ(l,e,i);if(p!==null){let m=a-s;f=e[p[0]].slice(p[1],p[1]+m);let b=f[0]?f[0].id:null;t[o]=[p[0],p[1],p[1]+m,b]}}else f=f.slice(s,a);f.length!==0&&s!==a&&(u&&f[f.length-1].id!==u&&(f=DZ(r,e)),n.push(f))}),n=n.filter(r=>r.length>0),n},iD=MZ;var FZ=function(t){let e=[];for(let n=0;n<t.length;n+=1)for(let r=0;r<t[n].length;r+=1)e.push(t[n][r]);return e},sD={one:{termList:FZ,getDoc:iD,pointer:{indexN:zi,splitAll:Hm}}};var LZ=function(t,e){let n=t.concat(e),r=zi(n),o=[];return n.forEach(i=>{let[s]=i;if(r[s].length===1){o.push(i);return}let a=r[s].filter(u=>Gm(i,u));a.push(i);let l=rD(a);o.push(l)}),o=oD(o),o},I_=LZ;var UZ=function(t,e){let n=[];return Hm(t,e).forEach(o=>{o.passthrough&&n.push(o.passthrough),o.before&&n.push(o.before),o.after&&n.push(o.after)}),n},x_=UZ;var BZ=function(t,e){let n=t[1]<e[1]?e[1]:t[1],r=t[2]>e[2]?e[2]:t[2];return n<r?[t[0],n,r]:null},GZ=function(t,e){let n=zi(e),r=[];return t.forEach(o=>{let i=n[o[0]]||[];i=i.filter(s=>Gm(o,s)),i.length!==0&&i.forEach(s=>{let a=BZ(o,s);a&&r.push(a)})}),r},aD=GZ;var HZ=function(t){return Object.prototype.toString.call(t)==="[object Array]"},k_=(t,e)=>typeof t=="string"||HZ(t)?e.match(t):t||e.none(),Cf=function(t,e){return t.map(n=>{let[r,o]=n;return e[r]&&e[r][o]&&(n[3]=e[r][o].id),n})},co={};co.union=function(t){t=k_(t,this);let e=I_(this.fullPointer,t.fullPointer);return e=Cf(e,this.document),this.toView(e)};co.and=co.union;co.intersection=function(t){t=k_(t,this);let e=aD(this.fullPointer,t.fullPointer);return e=Cf(e,this.document),this.toView(e)};co.not=function(t){t=k_(t,this);let e=x_(this.fullPointer,t.fullPointer);return e=Cf(e,this.document),this.toView(e)};co.difference=co.not;co.complement=function(){let t=this.all(),e=x_(t.fullPointer,this.fullPointer);return e=Cf(e,this.document),this.toView(e)};co.settle=function(){let t=this.fullPointer;return t.forEach(e=>{t=I_(t,[e])}),t=Cf(t,this.document),this.update(t)};var qZ=function(t){Object.assign(t.prototype,co)},lD=qZ;var uD={methods:sD,api:lD};var cD={buildNet:function(t){let n=this.methods().one.buildNet(t,this.world());return n.isNet=!0,n}};var $Z=function(t){t.prototype.sweep=function(e,n={}){let{world:r,docs:o}=this,{methods:i}=r,s=i.one.bulkMatch(o,e,this.methods,n);n.tagger!==!1&&i.one.bulkTagger(s,o,this.world),s=s.map(l=>{let u=l.pointer,f=o[u[0]][u[1]],p=u[2]-u[1];return f.index&&(l.pointer=[f.index[0],f.index[1],u[1]+p]),l});let a=s.map(l=>l.pointer);return s=s.map(l=>(l.view=this.update([l.pointer]),delete l.regs,delete l.needs,delete l.pointer,delete l._expanded,l)),{view:this.update(a),found:s}}},fD=$Z;var R_=function(t){return t.optional===!0||t.negative===!0?null:t.tag?"#"+t.tag:t.word?t.word:t.switch?`%${t.switch}%`:null},VZ=function(t){let e=[];return t.forEach(n=>{e.push(R_(n)),n.operator==="and"&&n.choices&&n.choices.forEach(r=>{r.forEach(o=>{e.push(R_(o))})})}),e.filter(n=>n)},jZ=function(t){let e=[],n=0;return t.forEach(r=>{r.operator==="or"&&!r.optional&&!r.negative&&(r.fastOr&&Array.from(r.fastOr).forEach(o=>{e.push(o)}),r.choices&&r.choices.forEach(o=>{o.forEach(i=>{let s=R_(i);s&&e.push(s)})}),n+=1)}),{wants:e,count:n}},WZ=function(t,e){let n=e.methods.one.parseMatch;return t.forEach(r=>{r.regs=n(r.match,{},e),typeof r.ifNo=="string"&&(r.ifNo=[r.ifNo]),r.notIf&&(r.notIf=n(r.notIf,{},e)),r.needs=VZ(r.regs);let{wants:o,count:i}=jZ(r.regs);r.wants=o,r.minWant=i,r.minWords=r.regs.filter(s=>!s.optional).length}),t},dD=WZ;var zZ=function(t,e){t=dD(t,e);let n={};t.forEach(o=>{o.needs.forEach(i=>{n[i]=Array.isArray(n[i])?n[i]:[],n[i].push(o)}),o.wants.forEach(i=>{n[i]=Array.isArray(n[i])?n[i]:[],n[i].push(o)})}),Object.keys(n).forEach(o=>{let i={};n[o]=n[o].filter(s=>typeof i[s.match]=="boolean"?!1:(i[s.match]=!0,!0))});let r=t.filter(o=>o.needs.length===0&&o.wants.length===0);return{hooks:n,always:r}},hD=zZ;var JZ=function(t,e){return t.map((n,r)=>{let o=[];Object.keys(e).forEach(s=>{t[r].has(s)&&(o=o.concat(e[s]))});let i={};return o=o.filter(s=>typeof i[s.match]=="boolean"?!1:(i[s.match]=!0,!0)),o})},pD=JZ;var KZ=function(t,e){return t.map((n,r)=>{let o=e[r];return n=n.filter(i=>i.needs.every(s=>o.has(s))),n=n.filter(i=>!(i.ifNo!==void 0&&i.ifNo.some(s=>o.has(s))===!0)),n=n.filter(i=>i.wants.length===0?!0:i.wants.filter(a=>o.has(a)).length>=i.minWant),n})},mD=KZ;var YZ=function(t,e,n,r,o){let i=[];for(let s=0;s<t.length;s+=1)for(let a=0;a<t[s].length;a+=1){let l=t[s][a],u=r.one.match([e[s]],l);if(u.ptrs.length>0&&(u.ptrs.forEach(f=>{f[0]=s;let p=Object.assign({},l,{pointer:f});l.unTag!==void 0&&(p.unTag=l.unTag),i.push(p)}),o.matchOne===!0))return[i[0]]}return i},gD=YZ;var XZ=function(t,e){return t.map((n,r)=>{let o=e[r].length;return n=n.filter(i=>o>=i.minWords),n})},QZ=function(t,e,n,r={}){let o=n.one.cacheDoc(t),i=pD(o,e.hooks);return i=mD(i,o,t),e.always.length>0&&(i=i.map(a=>a.concat(e.always))),i=XZ(i,t),gD(i,t,o,n,r)},yD=QZ;var ZZ=function(t,e,n){let r=n.one.tagSet;if(!r.hasOwnProperty(e))return!0;let o=r[e].not||[];for(let i=0;i<t.length;i+=1){let s=t[i];for(let a=0;a<o.length;a+=1)if(s.tags.has(o[a])===!0)return!1}return!0},bD=ZZ;var eee=function(t,e,n){let{model:r,methods:o}=n,{getDoc:i,setTag:s,unTag:a}=o.one,l=o.two.looksPlural;return t.length===0?t:((typeof process=="undefined"||!process.env?self.env||{}:process.env).DEBUG_TAGS&&console.log(`

  \x1B[32m\u2192 ${t.length} post-tagger:\x1B[0m`),t.map(f=>{if(!f.tag&&!f.chunk&&!f.unTag)return;let p=f.reason||f.match,m=i([f.pointer],e)[0];if(!(f.safe===!0&&(bD(m,f.tag,r)===!1||m[m.length-1].post==="-"))){if(f.tag!==void 0){if(s(m,f.tag,n,f.safe,`[post] '${p}'`),f.tag==="Noun"&&l){let b=m[m.length-1];l(b.text)?s([b],"Plural",n,f.safe,"quick-plural"):s([b],"Singular",n,f.safe,"quick-singular")}f.freeze===!0&&m.forEach(b=>b.frozen=!0)}f.unTag!==void 0&&a(m,f.unTag,n,f.safe,p),f.chunk&&m.forEach(b=>b.chunk=f.chunk)}}))},vD=eee;var wD={buildNet:hD,bulkMatch:yD,bulkTagger:vD};var _D={lib:cD,api:fD,methods:{one:wD}};var AD=/ /,ED=function(t,e){e==="Noun"&&(t.chunk=e),e==="Verb"&&(t.chunk=e)},CD=function(t,e,n,r){if(t.tags.has(e)===!0||e===".")return null;t.frozen===!0&&(r=!0);let o=n[e];if(o){if(o.not&&o.not.length>0)for(let i=0;i<o.not.length;i+=1){if(r===!0&&t.tags.has(o.not[i]))return null;t.tags.delete(o.not[i])}if(o.parents&&o.parents.length>0)for(let i=0;i<o.parents.length;i+=1)t.tags.add(o.parents[i]),ED(t,o.parents[i])}return t.tags.add(e),t.dirty=!0,ED(t,e),!0},tee=function(t,e,n,r){let o=e.split(AD);t.forEach((i,s)=>{let a=o[s];a&&(a=a.replace(/^#/,""),CD(i,a,n,r))})},nee=function(t){return Object.prototype.toString.call(t)==="[object Array]"},ree=(t,e,n="")=>{let r=s=>"\x1B[33m\x1B[3m"+s+"\x1B[0m",o=s=>"\x1B[3m"+s+"\x1B[0m",i=t.map(s=>s.text||"["+s.implicit+"]").join(" ");typeof e!="string"&&e.length>2&&(e=e.slice(0,2).join(", #")+" +"),e=typeof e!="string"?e.join(", #"):e,console.log(` ${r(i).padEnd(24)} \x1B[32m\u2192\x1B[0m #${e.padEnd(22)}  ${o(n)}`)},TD=function(t,e,n={},r,o){let i=n.model.one.tagSet||{};if(!e)return;let s=typeof process=="undefined"||!process.env?self.env||{}:process.env;if(s&&s.DEBUG_TAGS&&ree(t,e,o),nee(e)===!0){e.forEach(a=>TD(t,a,n,r));return}if(typeof e!="string"){console.warn(`compromise: Invalid tag '${e}'`);return}if(e=e.trim(),AD.test(e)){tee(t,e,i,r);return}e=e.replace(/^#/,"");for(let a=0;a<t.length;a+=1)CD(t[a],e,i,r)},SD=TD;var oee=function(t,e,n){e=e.trim().replace(/^#/,"");for(let r=0;r<t.length;r+=1){let o=t[r];if(o.frozen===!0)continue;if(e==="*"){o.tags.clear();continue}let i=n[e];if(i&&i.children.length>0)for(let s=0;s<i.children.length;s+=1)o.tags.delete(i.children[s]);o.tags.delete(e)}},PD=oee;var iee=function(t,e,n){if(!n.hasOwnProperty(e))return!0;let r=n[e].not||[];for(let o=0;o<r.length;o+=1)if(t.tags.has(r[o]))return!1;return!0},ID=iee;var Ji=function(t){return t.children=t.children||[],t._cache=t._cache||{},t.props=t.props||{},t._cache.parents=t._cache.parents||[],t._cache.children=t._cache.children||[],t},see=/^ *(#|\/\/)/,aee=function(t){let e=t.trim().split(/->/),n=[];e.forEach(o=>{n=n.concat(function(i){if(!(i=i.trim()))return null;if(/^\[/.test(i)&&/\]$/.test(i)){let s=(i=(i=i.replace(/^\[/,"")).replace(/\]$/,"")).split(/,/);return s=s.map(a=>a.trim()).filter(a=>a),s=s.map(a=>Ji({id:a})),s}return[Ji({id:i})]}(o))}),n=n.filter(o=>o);let r=n[0];for(let o=1;o<n.length;o+=1)r.children.push(n[o]),r=n[o];return n[0]},Yo=(t,e)=>{let n=[],r=[t];for(;r.length>0;){let o=r.pop();n.push(o),o.children&&o.children.forEach(i=>{e&&e(o,i),r.push(i)})}return n},M_=t=>Object.prototype.toString.call(t)==="[object Array]",qm=t=>(t=t||"").trim(),lee=function(t=[]){return typeof t=="string"?function(n){let r=n.split(/\r?\n/),o=[];r.forEach(s=>{if(!s.trim()||see.test(s))return;let a=(l=>{let u=/^( {2}|\t)/,f=0;for(;u.test(l);)l=l.replace(u,""),f+=1;return f})(s);o.push({indent:a,node:aee(s)})});let i=function(s){let a={children:[]};return s.forEach((l,u)=>{l.indent===0?a.children=a.children.concat(l.node):s[u-1]&&function(f,p){let m=f[p].indent;for(;p>=0;p-=1)if(f[p].indent<m)return f[p];return f[0]}(s,u).node.children.push(l.node)}),a}(o);return i=Ji(i),i}(t):M_(t)?function(n){let r={};n.forEach(i=>{r[i.id]=i});let o=Ji({});return n.forEach(i=>{if((i=Ji(i)).parent)if(r.hasOwnProperty(i.parent)){let s=r[i.parent];delete i.parent,s.children.push(i)}else console.warn(`[Grad] - missing node '${i.parent}'`);else o.children.push(i)}),o}(t):(Yo(e=t).forEach(Ji),e);var e},uee=t=>"\x1B[31m"+t+"\x1B[0m",cee=t=>"\x1B[2m"+t+"\x1B[0m",O_=function(t,e){let n="-> ";e&&(n=cee("\u2192 "));let r="";return Yo(t).forEach((o,i)=>{let s=o.id||"";if(e&&(s=uee(s)),i===0&&!o.id)return;let a=o._cache.parents.length;r+="    ".repeat(a)+n+s+`
`}),r},xD=function(t){let e=Yo(t);e.forEach(r=>{delete(r=Object.assign({},r)).children});let n=e[0];return n&&!n.id&&Object.keys(n.props).length===0&&e.shift(),e},kD={text:O_,txt:O_,array:xD,flat:xD},RD=function(t,e){return e==="nested"||e==="json"?t:e==="debug"?(console.log(O_(t,!0)),null):kD.hasOwnProperty(e)?kD[e](t):t},N_=t=>{Yo(t,(e,n)=>{e.id&&(e._cache.parents=e._cache.parents||[],n._cache.parents=e._cache.parents.concat([e.id]))})},fee=(t,e)=>(Object.keys(e).forEach(n=>{if(e[n]instanceof Set){let r=t[n]||new Set;t[n]=new Set([...r,...e[n]])}else if((r=>r&&typeof r=="object"&&!Array.isArray(r))(e[n])){let r=t[n]||{};t[n]=Object.assign({},e[n],r)}else M_(e[n])?t[n]=e[n].concat(t[n]||[]):t[n]===void 0&&(t[n]=e[n])}),t),dee=/\//,D_=class t{constructor(e={}){Object.defineProperty(this,"json",{enumerable:!1,value:e,writable:!0})}get children(){return this.json.children}get id(){return this.json.id}get found(){return this.json.id||this.json.children.length>0}props(e={}){let n=this.json.props||{};return typeof e=="string"&&(n[e]=!0),this.json.props=Object.assign(n,e),this}get(e){if(e=qm(e),!dee.test(e)){let r=this.json.children.find(o=>o.id===e);return new t(r)}let n=((r,o)=>{let i=(s=>typeof s!="string"?s:(s=s.replace(/^\//,"")).split(/\//))(o=o||"");for(let s=0;s<i.length;s+=1){let a=r.children.find(l=>l.id===i[s]);if(!a)return null;r=a}return r})(this.json,e)||Ji({});return new t(n)}add(e,n={}){if(M_(e))return e.forEach(o=>this.add(qm(o),n)),this;e=qm(e);let r=Ji({id:e,props:n});return this.json.children.push(r),new t(r)}remove(e){return e=qm(e),this.json.children=this.json.children.filter(n=>n.id!==e),this}nodes(){return Yo(this.json).map(e=>(delete(e=Object.assign({},e)).children,e))}cache(){return(e=>{let n=Yo(e,(o,i)=>{o.id&&(o._cache.parents=o._cache.parents||[],o._cache.children=o._cache.children||[],i._cache.parents=o._cache.parents.concat([o.id]))}),r={};n.forEach(o=>{o.id&&(r[o.id]=o)}),n.forEach(o=>{o._cache.parents.forEach(i=>{r.hasOwnProperty(i)&&r[i]._cache.children.push(o.id)})}),e._cache.children=Object.keys(r)})(this.json),this}list(){return Yo(this.json)}fillDown(){var e;return e=this.json,Yo(e,(n,r)=>{r.props=fee(r.props,n.props)}),this}depth(){N_(this.json);let e=Yo(this.json),n=e.length>1?1:0;return e.forEach(r=>{if(r._cache.parents.length===0)return;let o=r._cache.parents.length+1;o>n&&(n=o)}),n}out(e){return N_(this.json),RD(this.json,e)}debug(){return N_(this.json),RD(this.json,"debug"),this}},F_=function(t){let e=lee(t);return new D_(e)};F_.prototype.plugin=function(t){t(this)};var hee={Noun:"blue",Verb:"green",Negative:"green",Date:"red",Value:"red",Adjective:"magenta",Preposition:"cyan",Conjunction:"cyan",Determiner:"cyan",Hyphenated:"cyan",Adverb:"cyan"},da=hee;var pee=function(t){if(da.hasOwnProperty(t.id))return da[t.id];if(da.hasOwnProperty(t.is))return da[t.is];let e=t._cache.parents.find(n=>da[n]);return da[e]},mee=function(t){let e={};return t.forEach(n=>{let{not:r,also:o,is:i,novel:s}=n.props,a=n._cache.parents;o&&(a=a.concat(o)),e[n.id]={is:i,not:r,novel:s,also:o,parents:a,children:n._cache.children,color:pee(n)}}),Object.keys(e).forEach(n=>{let r=new Set(e[n].not);e[n].not.forEach(o=>{e[o]&&e[o].children.forEach(i=>r.add(i))}),e[n].not=Array.from(r)}),e},ND=mee;var OD=function(t){return t?typeof t=="string"?[t]:t:[]},gee=function(t,e){return Object.keys(t).forEach(n=>{t[n].isA&&(t[n].is=t[n].isA),t[n].notA&&(t[n].not=t[n].notA),t[n].is&&typeof t[n].is=="string"&&!e.hasOwnProperty(t[n].is)&&!t.hasOwnProperty(t[n].is)&&(t[t[n].is]={}),t[n].not&&typeof t[n].not=="string"&&!t.hasOwnProperty(t[n].not)&&!e.hasOwnProperty(t[n].not)&&!t.hasOwnProperty(t[n].not)&&(t[t[n].not]={})}),t},yee=function(t,e){return t=gee(t,e),Object.keys(t).forEach(n=>{t[n].children=OD(t[n].children),t[n].not=OD(t[n].not)}),Object.keys(t).forEach(n=>{(t[n].not||[]).forEach(o=>{t[o]&&t[o].not&&t[o].not.push(n)})}),t},DD=yee;var bee=function(t){let e=Object.keys(t).map(r=>{let o=t[r],i={not:new Set(o.not),also:o.also,is:o.is,novel:o.novel};return{id:r,parent:o.is,props:i,children:[]}});return F_(e).cache().fillDown().out("array")},vee=function(t){return Object.keys(t).forEach(e=>{t[e]=Object.assign({},t[e]),t[e].novel=!0}),t},wee=function(t,e){Object.keys(e).length>0&&(t=vee(t)),t=DD(t,e);let n=Object.assign({},e,t),r=bee(n);return ND(r)},MD=wee;var FD={one:{setTag:SD,unTag:PD,addTags:MD,canBe:ID}};var LD=function(t){return Object.prototype.toString.call(t)==="[object Array]"},_ee={tag:function(t,e="",n){if(!this.found||!t)return this;let r=this.termList();if(r.length===0)return this;let{methods:o,verbose:i,world:s}=this;return i===!0&&console.log(" +  ",t,e||""),LD(t)?t.forEach(a=>o.one.setTag(r,a,s,n,e)):o.one.setTag(r,t,s,n,e),this.uncache(),this},tagSafe:function(t,e=""){return this.tag(t,e,!0)},unTag:function(t,e){if(!this.found||!t)return this;let n=this.termList();if(n.length===0)return this;let{methods:r,verbose:o,model:i}=this;o===!0&&console.log(" -  ",t,e||"");let s=i.one.tagSet;return LD(t)?t.forEach(a=>r.one.unTag(n,a,s)):r.one.unTag(n,t,s),this.uncache(),this},canBe:function(t){t=t.replace(/^#/,"");let e=this.model.one.tagSet,n=this.methods.one.canBe,r=[];this.document.forEach((i,s)=>{i.forEach((a,l)=>{n(a,t,e)||r.push([s,l,l+1])})});let o=this.update(r);return this.difference(o)}},UD=_ee;var Eee=function(t){Object.assign(t.prototype,UD)},BD=Eee;var Aee=function(t){let{model:e,methods:n}=this.world(),r=e.one.tagSet,o=n.one.addTags,i=o(t,r);return e.one.tagSet=i,this},GD={addTags:Aee};var HD=new Set(["Auxiliary","Possessive"]),Cee=function(t,e){return t=t.sort((n,r)=>{if(HD.has(n)||!e.hasOwnProperty(r))return 1;if(HD.has(r)||!e.hasOwnProperty(n))return-1;let o=e[n].children||[],i=o.length;o=e[r].children||[];let s=o.length;return i-s}),t},Tee=function(t){let{document:e,world:n}=t,r=n.model.one.tagSet;e.forEach(o=>{o.forEach(i=>{let s=Array.from(i.tags);i.tagRank=Cee(s,r)})})},qD=Tee;var $D={model:{one:{tagSet:{}}},compute:{tagRank:qD},methods:FD,api:BD,lib:GD};var See=/([.!?\u203D\u2E18\u203C\u2047-\u2049\u3002]+\s)/g,Pee=/^[.!?\u203D\u2E18\u203C\u2047-\u2049\u3002]+\s$/,Iee=/((?:\r?\n|\r)+)/,xee=function(t){let e=[],n=t.split(Iee);for(let r=0;r<n.length;r++){let o=n[r].split(See);for(let i=0;i<o.length;i++)o[i+1]&&Pee.test(o[i+1])===!0&&(o[i]+=o[i+1],o[i+1]=""),o[i]!==""&&e.push(o[i])}return e},VD=xee;var kee=/[a-z0-9\u00C0-\u00FF\u00a9\u00ae\u2000-\u3300\ud000-\udfff]/i,Ree=/\S/,Nee=function(t){let e=[];for(let n=0;n<t.length;n++){let r=t[n];if(!(r===void 0||r==="")){if(Ree.test(r)===!1||kee.test(r)===!1){if(e[e.length-1]){e[e.length-1]+=r;continue}else if(t[n+1]){t[n+1]=r+t[n+1];continue}}e.push(r)}}return e},jD=Nee;var Oee=function(t,e){let n=e.methods.one.tokenize.isSentence,r=e.model.one.abbreviations||new Set,o=[];for(let i=0;i<t.length;i++){let s=t[i];t[i+1]&&n(s,r)===!1?t[i+1]=s+(t[i+1]||""):s&&s.length>0&&(o.push(s),t[i]="")}return o},WD=Oee;var JD={'"':'"',"\uFF02":"\uFF02","\u201C":"\u201D","\u201F":"\u201D","\u201E":"\u201D","\u2E42":"\u201D","\u201A":"\u2019","\xAB":"\xBB","\u2039":"\u203A","\u2035":"\u2032","\u2036":"\u2033","\u2037":"\u2034","\u301D":"\u301E","\u301F":"\u301E"},Dee=RegExp("["+Object.keys(JD).join("")+"]","g"),Mee=RegExp("["+Object.values(JD).join("")+"]","g"),zD=function(t){if(!t)return!1;let e=t.match(Mee);return e!==null&&e.length===1},Fee=function(t){let e=[];for(let n=0;n<t.length;n+=1){let o=t[n].match(Dee);if(o!==null&&o.length===1){if(zD(t[n+1])&&t[n+1].length<280){t[n]+=t[n+1],e.push(t[n]),t[n+1]="",n+=1;continue}if(zD(t[n+2])){let i=t[n+1]+t[n+2];if(i.length<280){t[n]+=i,e.push(t[n]),t[n+1]="",t[n+2]="",n+=2;continue}}}e.push(t[n])}return e},KD=Fee;var YD=/\(/g,Lee=/\)/g,Uee=function(t){let e=[];for(let n=0;n<t.length;n+=1){let o=t[n].match(YD);if(o!==null&&o.length===1&&t[n+1]&&t[n+1].length<250&&t[n+1].match(Lee)!==null&&o.length===1&&!YD.test(t[n+1])){t[n]+=t[n+1],e.push(t[n]),t[n+1]="",n+=1;continue}e.push(t[n])}return e},XD=Uee;var Bee=/\S/,QD=/^\s+/,Gee=function(t,e){if(t=t||"",t=String(t),!t||typeof t!="string"||Bee.test(t)===!1)return[];t=t.replace("\xA0"," ");let n=VD(t),r=jD(n);if(r=WD(r,e),r=KD(r),r=XD(r),r.length===0)return[t];for(let o=1;o<r.length;o+=1){let i=r[o].match(QD);i!==null&&(r[o-1]+=i[0],r[o]=r[o].replace(QD,""))}return r},ZD=Gee;var eM=function(t,e){let n=t.split(/[-]/);if(n.length<=1)return!1;let{prefixes:r,suffixes:o}=e.one;return n[0].length===1&&/[a-z]/i.test(n[0])||r.hasOwnProperty(n[0])||(n[1]=n[1].trim().replace(/[.?!]$/,""),o.hasOwnProperty(n[1]))?!1:/^([a-z\u00C0-\u00FF`"'/]+)[-]([a-z0-9\u00C0-\u00FF].*)/i.test(t)===!0||/^[('"]?([0-9]{1,4})[-]([a-z\u00C0-\u00FF`"'/-]+[)'"]?$)/i.test(t)===!0},tM=function(t){let e=[],n=t.split(/[-]/),r="-",o=t.match(/[-]/);o&&o[0]&&(r=o);for(let i=0;i<n.length;i++)i===n.length-1?e.push(n[i]):e.push(n[i]+r);return e};var Hee=function(t){let e=/^[0-9]{1,4}(:[0-9][0-9])?([a-z]{1,2})? ?[-] ?$/,n=/^[0-9]{1,4}([a-z]{1,2})? ?$/;for(let r=0;r<t.length-1;r+=1)t[r+1]&&e.test(t[r])&&n.test(t[r+1])&&(t[r]=t[r]+t[r+1],t[r+1]=null);return t},nM=Hee;var qee=/\p{L} ?\/ ?\p{L}+$/u,$ee=function(t){for(let e=1;e<t.length-1;e++)qee.test(t[e])&&(t[e-1]+=t[e]+t[e+1],t[e]=null,t[e+1]=null);return t},rM=$ee;var Vee=/\S/,jee=/^[!?.]+$/,Wee=/(\S+)/,L_=[".","?","!",":",";","-","\u2013","\u2014","--","...","(",")","[","]",'"',"'","`","\xAB","\xBB","*","\u2022"];L_=L_.reduce((t,e)=>(t[e]=!0,t),{});var zee=function(t){return Object.prototype.toString.call(t)==="[object Array]"},Jee=function(t,e){let n=[],r=[];if(t=t||"",typeof t=="number"&&(t=String(t)),zee(t))return t;let o=t.split(Wee);for(let s=0;s<o.length;s++){if(eM(o[s],e)===!0){r=r.concat(tM(o[s]));continue}r.push(o[s])}let i="";for(let s=0;s<r.length;s++){let a=r[s];Vee.test(a)===!0&&L_.hasOwnProperty(a)===!1&&jee.test(a)===!1?(n.length>0?(n[n.length-1]+=i,n.push(a)):n.push(i+a),i=""):i+=a}return i&&(n.length===0&&(n[0]=""),n[n.length-1]+=i),n=rM(n),n=nM(n),n=n.filter(s=>s),n},oM=Jee;var iM=/\p{Letter}/u,$m=/[\p{Number}\p{Currency_Symbol}]/u,Kee=/^[a-z]\.([a-z]\.)+/i,Yee=/[sn][']$/,Xee=function(t,e){let{prePunctuation:n,postPunctuation:r,emoticons:o}=e.one,i=t,s="",a="",l=Array.from(t);if(o.hasOwnProperty(t.trim()))return{str:t.trim(),pre:s,post:" "};let u=l.length;for(let f=0;f<u;f+=1){let p=l[0];if(n[p]!==!0){if((p==="+"||p==="-")&&$m.test(l[1])||p==="'"&&p.length===3&&$m.test(l[1])||iM.test(p)||$m.test(p))break;s+=l.shift()}}u=l.length;for(let f=0;f<u;f+=1){let p=l[l.length-1];if(r[p]!==!0){if(iM.test(p)||$m.test(p))break;p==="."&&Kee.test(i)===!0||p==="'"&&Yee.test(i)===!0||(a=l.pop()+a)}}return t=l.join(""),t===""&&(i=i.replace(/ *$/,f=>(a=f||"","")),t=i,s=""),{str:t,pre:s,post:a}},sM=Xee;var Qee=(t,e)=>{let{str:n,pre:r,post:o}=sM(t,e);return{text:n,pre:r,post:o,tags:new Set}},aM=Qee;var Zee=function(t,e){let n=e.model.one.unicode||{};t=t||"";let r=t.split("");return r.forEach((o,i)=>{n[o]&&(r[i]=n[o])}),r.join("")},lM=Zee;var ete=function(t){t=t||"",t=t.toLowerCase(),t=t.trim();let e=t;return t=t.replace(/[,;.!?]+$/,""),t=t.replace(/\u2026/g,"..."),t=t.replace(/\u2013/g,"-"),/^[:;]/.test(t)===!1&&(t=t.replace(/\.{3,}$/g,""),t=t.replace(/[",.!:;?)]+$/g,""),t=t.replace(/^['"(]+/g,"")),t=t.replace(/[\u200B-\u200D\uFEFF]/g,""),t=t.trim(),t===""&&(t=e),t=t.replace(/([0-9]),([0-9])/g,"$1$2"),t},uM=ete;var tte=/([A-Z]\.)+[A-Z]?,?$/,nte=/^[A-Z]\.,?$/,rte=/[A-Z]{2,}('s|,)?$/,ote=/([a-z]\.)+[a-z]\.?$/,ite=function(t){return tte.test(t)===!0||ote.test(t)===!0||nte.test(t)===!0||rte.test(t)===!0},ste=function(t){return ite(t)&&(t=t.replace(/\./g,"")),t},cM=ste;var ate=function(t,e){let n=e.methods.one.killUnicode,r=t.text||"";r=uM(r),r=n(r,e),r=cM(r),t.normal=r},Vm=ate;var lte=function(t,e){let{methods:n,model:r}=e,{splitSentences:o,splitTerms:i,splitWhitespace:s}=n.one.tokenize;return t=t||"",t=o(t,e).map(l=>{let u=i(l,r);return u=u.map(f=>s(f,r)),u.forEach(f=>{Vm(f,e)}),u}),t},fM=lte;var ute=/[ .][A-Z]\.? *$/i,cte=/(?:\u2026|\.{2,}) *$/,fte=/\p{L}/u,dte=/\. *$/,hte=/^[A-Z]\. $/,pte=function(t,e){if(fte.test(t)===!1||ute.test(t)===!0||t.length===3&&hte.test(t)||cte.test(t)===!0)return!1;let r=t.replace(/[.!?\u203D\u2E18\u203C\u2047-\u2049] *$/,"").split(" "),o=r[r.length-1].toLowerCase();return!(e.hasOwnProperty(o)===!0&&dte.test(t)===!0)},dM=pte;var hM={one:{killUnicode:lM,tokenize:{splitSentences:ZD,isSentence:dM,splitTerms:oM,splitWhitespace:aM,fromString:fM}}};var mte={"&":"and","@":"at","%":"percent",plz:"please",bein:"being"},pM=mte;var mM=["approx","apt","bc","cyn","eg","esp","est","etc","ex","exp","prob","pron","gal","min","pseud","fig","jd","lat","lng","vol","fm","def","misc","plz","ea","ps","sec","pt","pref","pl","pp","qt","fr","sq","nee","ss","tel","temp","vet","ver","fem","masc","eng","adj","vb","rb","inf","situ","vivo","vitro","wr"];var gM=["adj","adm","adv","asst","atty","bldg","brig","capt","cmdr","comdr","cpl","det","dr","esq","gen","gov","hon","jr","llb","lt","maj","messrs","mlle","mme","mr","mrs","ms","mstr","phd","prof","pvt","rep","reps","res","rev","sen","sens","sfc","sgt","sir","sr","supt","surg"];var yM=["jan","feb","mar","apr","jun","jul","aug","sep","sept","oct","nov","dec"];var bM=["ad","al","arc","ba","bl","ca","cca","col","corp","ft","fy","ie","lit","ma","md","pd","tce"];var vM=["dept","univ","assn","bros","inc","ltd","co"];var wM=["rd","st","dist","mt","ave","blvd","cl","cres","hwy","ariz","cal","calif","colo","conn","fla","fl","ga","ida","ia","kan","kans","minn","neb","nebr","okla","penna","penn","pa","dak","tenn","tex","ut","vt","va","wis","wisc","wy","wyo","usafa","alta","ont","que","sask"];var _M=["dl","ml","gal","qt","pt","tbl","tsp","tbsp","km","dm","cm","mm","mi","td","hr","hrs","kg","hg","dg","cg","mg","\xB5g","lb","oz","sq ft","hz","mps","mph","kmph","kb","mb","tb","lx","lm","fl oz","yb"];var gte=[[mM],[_M,"Unit"],[bM,"Noun"],[gM,"Honorific"],[yM,"Month"],[vM,"Organization"],[wM,"Place"]],U_={},Tf={};gte.forEach(t=>{t[0].forEach(e=>{U_[e]=!0,Tf[e]="Abbreviation",t[1]!==void 0&&(Tf[e]=[Tf[e],t[1]])})});var EM=["anti","bi","co","contra","de","extra","infra","inter","intra","macro","micro","mis","mono","multi","peri","pre","pro","proto","pseudo","re","sub","supra","trans","tri","un","out","ex"].reduce((t,e)=>(t[e]=!0,t),{});var AM={like:!0,ish:!0,less:!0,able:!0,elect:!0,type:!0,designate:!0};var CM={"!":"\xA1","?":"\xBF\u0241",'"':'\u201C\u201D"\u275D\u275E',"'":"\u2018\u201B\u275B\u275C\u2019","-":"\u2014\u2013",a:"\xAA\xC0\xC1\xC2\xC3\xC4\xC5\xE0\xE1\xE2\xE3\xE4\xE5\u0100\u0101\u0102\u0103\u0104\u0105\u01CD\u01CE\u01DE\u01DF\u01E0\u01E1\u01FA\u01FB\u0200\u0201\u0202\u0203\u0226\u0227\u023A\u0386\u0391\u0394\u039B\u03AC\u03B1\u03BB\u0410\u0430\u0466\u0467\u04D0\u04D1\u04D2\u04D3\u019B\xE6",b:"\xDF\xFE\u0180\u0181\u0182\u0183\u0184\u0185\u0243\u0392\u03B2\u03D0\u03E6\u0411\u0412\u042A\u042C\u0432\u044A\u044C\u0462\u0463\u048C\u048D",c:"\xA2\xA9\xC7\xE7\u0106\u0107\u0108\u0109\u010A\u010B\u010C\u010D\u0186\u0187\u0188\u023B\u023C\u037B\u037C\u03F2\u03F9\u03FD\u03FE\u0421\u0441\u0454\u0480\u0481\u04AA\u04AB",d:"\xD0\u010E\u010F\u0110\u0111\u0189\u018A\u0221\u018B\u018C",e:"\xC8\xC9\xCA\xCB\xE8\xE9\xEA\xEB\u0112\u0113\u0114\u0115\u0116\u0117\u0118\u0119\u011A\u011B\u0190\u0204\u0205\u0206\u0207\u0228\u0229\u0246\u0247\u0388\u0395\u039E\u03A3\u03AD\u03B5\u03BE\u03F5\u0400\u0401\u0415\u0435\u0450\u0451\u04BC\u04BD\u04BE\u04BF\u04D6\u04D7\u1EC5",f:"\u0191\u0192\u03DC\u03DD\u04FA\u04FB\u0492\u0493\u017F",g:"\u011C\u011D\u011E\u011F\u0120\u0121\u0122\u0123\u0193\u01E4\u01E5\u01E6\u01E7\u01F4\u01F5",h:"\u0124\u0125\u0126\u0127\u0195\u01F6\u021E\u021F\u0389\u0397\u0402\u040A\u040B\u041D\u043D\u0452\u045B\u04A2\u04A3\u04A4\u04A5\u04BA\u04BB\u04C9\u04CA",I:"\xCC\xCD\xCE\xCF",i:"\xEC\xED\xEE\xEF\u0128\u0129\u012A\u012B\u012C\u012D\u012E\u012F\u0130\u0131\u0196\u0197\u0208\u0209\u020A\u020B\u038A\u0390\u03AA\u03AF\u03B9\u03CA\u0406\u0407\u0456\u0457i\u0307",j:"\u0134\u0135\u01F0\u0237\u0248\u0249\u03F3\u0408\u0458",k:"\u0136\u0137\u0138\u0198\u0199\u01E8\u01E9\u039A\u03BA\u040C\u0416\u041A\u0436\u043A\u045C\u049A\u049B\u049C\u049D\u049E\u049F\u04A0\u04A1",l:"\u0139\u013A\u013B\u013C\u013D\u013E\u013F\u0140\u0141\u0142\u019A\u01AA\u01C0\u01CF\u01D0\u0234\u023D\u0399\u04C0\u04CF",m:"\u039C\u03FA\u03FB\u041C\u043C\u04CD\u04CE",n:"\xD1\xF1\u0143\u0144\u0145\u0146\u0147\u0148\u0149\u014A\u014B\u019D\u019E\u01F8\u01F9\u0220\u0235\u039D\u03A0\u03AE\u03B7\u03DE\u040D\u0418\u0419\u041B\u041F\u0438\u0439\u043B\u043F\u045D\u048A\u048B\u04C5\u04C6\u04E2\u04E3\u04E4\u04E5\u03C0",o:"\xD2\xD3\xD4\xD5\xD6\xD8\xF0\xF2\xF3\xF4\xF5\xF6\xF8\u014C\u014D\u014E\u014F\u0150\u0151\u019F\u01A0\u01A1\u01D1\u01D2\u01EA\u01EB\u01EC\u01ED\u01FE\u01FF\u020C\u020D\u020E\u020F\u022A\u022B\u022C\u022D\u022E\u022F\u0230\u0231\u038C\u0398\u039F\u03B8\u03BF\u03C3\u03CC\u03D5\u03D8\u03D9\u03EC\u03F4\u041E\u0424\u043E\u0472\u0473\u04E6\u04E7\u04E8\u04E9\u04EA\u04EB",p:"\u01A4\u03A1\u03C1\u03F7\u03F8\u03FC\u0420\u0440\u048E\u048F\xDE",q:"\u024A\u024B",r:"\u0154\u0155\u0156\u0157\u0158\u0159\u01A6\u0210\u0211\u0212\u0213\u024C\u024D\u0403\u0413\u042F\u0433\u044F\u0453\u0490\u0491",s:"\u015A\u015B\u015C\u015D\u015E\u015F\u0160\u0161\u01A7\u01A8\u0218\u0219\u023F\u0405\u0455",t:"\u0162\u0163\u0164\u0165\u0166\u0167\u01AB\u01AC\u01AD\u01AE\u021A\u021B\u0236\u023E\u0393\u03A4\u03C4\u03EE\u0422\u0442",u:"\xD9\xDA\xDB\xDC\xF9\xFA\xFB\xFC\u0168\u0169\u016A\u016B\u016C\u016D\u016E\u016F\u0170\u0171\u0172\u0173\u01AF\u01B0\u01B1\u01B2\u01D3\u01D4\u01D5\u01D6\u01D7\u01D8\u01D9\u01DA\u01DB\u01DC\u0214\u0215\u0216\u0217\u0244\u03B0\u03C5\u03CB\u03CD",v:"\u03BD\u0474\u0475\u0476\u0477",w:"\u0174\u0175\u019C\u03C9\u03CE\u03D6\u03E2\u03E3\u0428\u0429\u0448\u0449\u0461\u047F",x:"\xD7\u03A7\u03C7\u03D7\u03F0\u0425\u0445\u04B2\u04B3\u04FC\u04FD\u04FE\u04FF",y:"\xDD\xFD\xFF\u0176\u0177\u0178\u01B3\u01B4\u0232\u0233\u024E\u024F\u038E\u03A5\u03AB\u03B3\u03C8\u03D2\u03D3\u03D4\u040E\u0423\u0443\u0447\u045E\u0470\u0471\u04AE\u04AF\u04B0\u04B1\u04EE\u04EF\u04F0\u04F1\u04F2\u04F3",z:"\u0179\u017A\u017B\u017C\u017D\u017E\u01B5\u01B6\u0224\u0225\u0240\u0396"},TM={};Object.keys(CM).forEach(function(t){CM[t].split("").forEach(function(e){TM[e]=t})});var SM=TM;var PM={"#":!0,"@":!0,_:!0,"\xB0":!0,"\u200B":!0,"\u200C":!0,"\u200D":!0,"\uFEFF":!0},IM={"%":!0,_:!0,"\xB0":!0,"\u200B":!0,"\u200C":!0,"\u200D":!0,"\uFEFF":!0},xM={"<3":!0,"</3":!0,"<\\3":!0,":^P":!0,":^p":!0,":^O":!0,":^3":!0};var kM={one:{aliases:pM,abbreviations:U_,prefixes:EM,suffixes:AM,prePunctuation:PM,postPunctuation:IM,lexicon:Tf,unicode:SM,emoticons:xM}};var RM=/\//,yte=/[a-z]\.[a-z]/i,bte=/[0-9]/,vte=function(t,e){let n=t.normal||t.text||t.machine,r=e.model.one.aliases;if(r.hasOwnProperty(n)&&(t.alias=t.alias||[],t.alias.push(r[n])),RM.test(n)&&!yte.test(n)&&!bte.test(n)){let o=n.split(RM);o.length<=3&&o.forEach(i=>{i=i.trim(),i!==""&&(t.alias=t.alias||[],t.alias.push(i))})}return t},NM=vte;var wte=/^\p{Letter}+-\p{Letter}+$/u,_te=function(t){let e=t.implicit||t.normal||t.text;e=e.replace(/[']s$/,""),e=e.replace(/s[']$/,"s"),e=e.replace(/([aeiou][ktrp])in'$/,"$1ing"),wte.test(e)&&(e=e.replace(/-/g,"")),e=e.replace(/^[#@]/,""),e!==t.normal&&(t.machine=e)},OM=_te;var Ete=function(t){let e=t.docs,n={};for(let r=0;r<e.length;r+=1)for(let o=0;o<e[r].length;o+=1){let i=e[r][o],s=i.machine||i.normal;n[s]=n[s]||0,n[s]+=1}for(let r=0;r<e.length;r+=1)for(let o=0;o<e[r].length;o+=1){let i=e[r][o],s=i.machine||i.normal;i.freq=n[s]}},DM=Ete;var Ate=function(t){let e=0,n=0,r=t.document;for(let o=0;o<r.length;o+=1)for(let i=0;i<r[o].length;i+=1){let s=r[o][i];s.offset={index:n,start:e+s.pre.length,length:s.text.length},e+=s.pre.length+s.text.length+s.post.length,n+=1}},MM=Ate;var Cte=function(t){let e=t.document;for(let n=0;n<e.length;n+=1)for(let r=0;r<e[n].length;r+=1)e[n][r].index=[n,r]},FM=Cte;var Tte=function(t){let e=0,n=t.docs;for(let r=0;r<n.length;r+=1)for(let o=0;o<n[r].length;o+=1)n[r][o].normal!==""&&(e+=1,n[r][o].wordCount=e)},LM=Tte;var B_=function(t,e){let n=t.docs;for(let r=0;r<n.length;r+=1)for(let o=0;o<n[r].length;o+=1)e(n[r][o],t.world)},Ste={alias:t=>B_(t,NM),machine:t=>B_(t,OM),normal:t=>B_(t,Vm),freq:DM,offset:MM,index:FM,wordCount:LM},UM=Ste;var BM={compute:UM,methods:hM,model:kM,hooks:["alias","machine","index","id"]};var Pte=function(t){let e=t.model.one.typeahead,n=t.docs;if(n.length===0||Object.keys(e).length===0)return;let r=n[n.length-1]||[],o=r[r.length-1];if(!o.post&&e.hasOwnProperty(o.normal)){let i=e[o.normal];o.implicit=i,o.machine=i,o.typeahead=!0,t.compute.preTagger&&t.last().unTag("*").compute(["lexicon","preTagger"])}},GM={typeahead:Pte};var Ite=function(){let t=this.docs;if(t.length===0)return this;let e=t[t.length-1]||[],n=e[e.length-1];return n.typeahead===!0&&n.machine&&(n.text=n.machine,n.normal=n.machine),this},xte=function(t){t.prototype.autoFill=Ite},HM=xte;var kte=function(t,e,n){let r={},o=[],i=n.prefixes||{};return t.forEach(s=>{s=s.toLowerCase().trim();let a=s.length;e.max&&a>e.max&&(a=e.max);for(let l=e.min;l<a;l+=1){let u=s.substring(0,l);if(!(e.safe&&n.model.one.lexicon.hasOwnProperty(u))){if(i.hasOwnProperty(u)===!0){o.push(u);continue}if(r.hasOwnProperty(u)===!0){o.push(u);continue}r[u]=s}}}),r=Object.assign({},i,r),o.forEach(s=>{delete r[s]}),r},qM=kte;var Rte=t=>Object.prototype.toString.call(t)==="[object Object]",Nte={safe:!0,min:3},Ote=function(t=[],e={}){let n=this.model();e=Object.assign({},Nte,e),Rte(t)&&(Object.assign(n.one.lexicon,t),t=Object.keys(t));let r=qM(t,e,this.world());return Object.keys(r).forEach(o=>{if(n.one.typeahead.hasOwnProperty(o)){delete n.one.typeahead[o];return}n.one.typeahead[o]=r[o]}),this},$M={typeahead:Ote};var Dte={one:{typeahead:{}}},VM={model:Dte,api:HM,lib:$M,compute:GM,hooks:["typeahead"]};an.extend(yN);an.extend(nD);an.extend(HO);an.extend(uD);an.extend($D);an.plugin(RN);an.extend(BM);an.extend(FN);an.plugin(KR);an.extend(JN);an.extend(VM);an.extend(VN);an.extend(_D);var Xo=an;var G_=`{{{pre_cursor}}}
{{{post_cursor}}} 
{{{active_sentence}}} 
{{{last_line}}}`;function H_(t,e=G_){let n=t.getCursor(),r=t.getRange({line:0,ch:0},n),o=t.getRange(n,{line:t.lastLine(),ch:t.getLine(t.lastLine()).length}),i=Xo(r).fullSentences().last().out("text"),s=t.getLine(t.lastLine());return Mte(e,{pre_cursor:r,post_cursor:o,active_sentence:i,last_line:s})}function Mte(t,e){return MR.render(t,e)}var bn=require("obsidian");var jm=class extends bn.Modal{constructor(e,n,r,o){super(e),this.plugin=n,this.providerType=r,this.modalEl.addClass("inscribe-provider-settings-modal"),this.onCloseCallback=o}onOpen(){this.renderProviderSettings()}async renderProviderSettings(){let{contentEl:e}=this;switch(e.empty(),this.providerType){case"ollama":this.renderOllamaSettings();break;case"openai":this.renderOpenAISettings();break;case"openai_compatible":this.renderOpenAICompatibleSettings();break;case"gemini":this.renderGeminiSettings();break;default:e.createEl("h2",{text:"Unknown provider type"});break}}async renderOllamaSettings(){let{contentEl:e}=this;e.empty(),this.setTitle("Ollama"),new bn.Setting(e).setName("Ollama host").setDesc("The host of the Ollama API").addText(n=>{n.setValue(this.plugin.settings.providers.ollama.host).onChange(async r=>{this.plugin.settings.providers.ollama.host=r,await this.plugin.saveSettings()})}),this.renderModelSettings(this.plugin.settings.providers.ollama),this.renderConnectionStatus(this.plugin.settings.providers.ollama)}async renderOpenAISettings(){let{contentEl:e}=this;e.empty(),this.setTitle("OpenAI"),new bn.Setting(e).setName("OpenAI API key").setDesc("The API key for OpenAI").addText(n=>{n.setValue(this.plugin.settings.providers.openai.apiKey).onChange(async r=>{this.plugin.settings.providers.openai.apiKey=r,await this.plugin.saveSettings()})}),this.renderModelSettings(this.plugin.settings.providers.openai),this.renderConnectionStatus(this.plugin.settings.providers.openai)}async renderOpenAICompatibleSettings(){let{contentEl:e}=this;e.empty(),this.setTitle("OpenAI compatible provider"),new bn.Setting(e).setName("API key").setDesc("The API key for OpenAI compatible provider").addText(n=>{n.setValue(this.plugin.settings.providers.openai_compatible.apiKey).onChange(async r=>{this.plugin.settings.providers.openai_compatible.apiKey=r,await this.plugin.saveSettings()})}),new bn.Setting(e).setName("Base URL").setDesc("The base URL for OpenAI Compatible Provider").addText(n=>{n.setValue(this.plugin.settings.providers.openai_compatible.baseUrl).onChange(async r=>{this.plugin.settings.providers.openai_compatible.baseUrl=r,await this.plugin.saveSettings()})}),this.renderModelSettings(this.plugin.settings.providers.openai_compatible),this.renderConnectionStatus(this.plugin.settings.providers.openai_compatible)}async renderGeminiSettings(){let{contentEl:e}=this;e.empty(),this.setTitle("Gemini"),new bn.Setting(e).setName("Gemini API key").setDesc("The API key for Gemini").addText(n=>{n.setValue(this.plugin.settings.providers.gemini.apiKey).onChange(async r=>{this.plugin.settings.providers.gemini.apiKey=r,await this.plugin.saveSettings()})}),this.renderModelSettings(this.plugin.settings.providers.gemini),this.renderConnectionStatus(this.plugin.settings.providers.gemini)}renderModelSettings(e){new bn.Setting(this.contentEl).setName("Available models").setDesc("Update the list of available models.").addExtraButton(n=>{n.setIcon("refresh-cw").setTooltip("Refresh models from provider").onClick(async()=>{e.models=await this.plugin.providerFactory.fetchModels(this.providerType),await this.plugin.saveSettings(),new bn.Notice("Models refreshed"),this.renderProviderSettings()})}).addTextArea(n=>{let r=JSON.stringify(e.models,null,2);n.inputEl.rows=12,n.setValue(r).setPlaceholder("[]").onChange(async o=>{try{let i=JSON.parse(o);e.models=i,await this.plugin.saveSettings()}catch(i){new bn.Notice("Invalid JSON format")}})})}renderConnectionStatus(e){new bn.Setting(this.contentEl).setName("Status").setDesc(`${e.configured?"Successful":"Failed"}`).addButton(n=>{n.setButtonText("Connection test").onClick(async()=>{n.setDisabled(!0).setButtonText("Testing..."),e.configured=await this.plugin.providerFactory.connectionTest(this.providerType),await this.plugin.saveSettings(),new bn.Notice(e.configured?"Connected!":"Failed to connect"),this.renderProviderSettings()})})}onClose(){let{contentEl:e}=this;e.empty(),this.onCloseCallback()}};var Sf=class extends Pe.PluginSettingTab{constructor(n){super(n.app,n);this.plugin=n}display(){this.containerEl.empty();let n=document.createElement("div");this.containerEl.appendChild(n);let r=document.createElement("div");r.addClass("inscribe-section"),this.containerEl.appendChild(r);let o=document.createElement("div");o.addClass("inscribe-section"),this.containerEl.appendChild(o);let i=document.createElement("div");i.addClass("inscribe-section"),this.containerEl.appendChild(i);let s=document.createElement("div");s.addClass("inscribe-section"),this.containerEl.appendChild(s),this.generalSection=new q_(n,this.plugin,this.display.bind(this)),this.suggestionControlSection=new $_(r,this.plugin),this.providersSection=new V_(o,this.app,this.plugin),this.pathConfigsSection=new W_(s,this.plugin),this.profilesSection=new j_(i,this.plugin,this.pathConfigsSection.render.bind(this.pathConfigsSection)),this.generalSection.render(),this.suggestionControlSection.render(),this.providersSection.render(),this.profilesSection.render(),this.pathConfigsSection.render()}},q_=class{constructor(e,n,r){this.container=e,this.plugin=n,this.displayFunc=r}async render(){this.container.empty(),new Pe.Setting(this.container).setName("Enabled").setDesc("Enable or disable completions globally").addToggle(e=>{e.setValue(this.plugin.settings.enabled).onChange(async n=>{this.plugin.settings.enabled=n,await this.plugin.saveSettings(),this.plugin.statusBarItem.render()})}),new Pe.Setting(this.container).setName("Reset settings").setDesc("Reset all settings to default").addButton(e=>{e.setWarning().setButtonText("Reset").setTooltip("Reset settings to default").onClick(async()=>{RR(this.plugin.settings),await this.plugin.saveSettings(),this.displayFunc(),this.plugin.statusBarItem.render(),new Pe.Notice("Settings reset to default")})})}},$_=class{constructor(e,n){this.container=e,this.plugin=n}async render(){this.container.empty(),new Pe.Setting(this.container).setHeading().setName("Suggestion control").setDesc("Configure how completions are triggered and accepted"),this.buildHotkeySetting("Acceptance hotkey","Hotkey to accept the current suggestion, autocompletion is disabled if set",this.plugin.settings.suggestionControl.acceptanceHotkey,async e=>{this.plugin.settings.suggestionControl.acceptanceHotkey=e||"Tab",await this.plugin.saveSettings()}),this.buildHotkeySetting("Manual activation key","Hotkey to manually trigger suggestions. Autocompletion is disabled if set. Full restart of the app is required to take effect.",this.plugin.settings.suggestionControl.manualActivationKey||"",async e=>{this.plugin.settings.suggestionControl.manualActivationKey=e||void 0,await this.plugin.saveSettings()}),new Pe.Setting(this.container).setName("Split strategy").setDesc("Choose how completions should be split and accepted").addDropdown(e=>{e.addOption("word","Word by Word").addOption("sentence","Sentence by Sentence").addOption("paragraph","Paragraph by Paragraph").addOption("full","Full Completion").setValue(this.plugin.settings.suggestionControl.splitStrategy).onChange(async n=>{this.plugin.settings.suggestionControl.splitStrategy=n,await this.plugin.saveSettings()})}),new Pe.Setting(this.container).setName("Suggestion delay").setDesc("Delay in milliseconds before fetching suggestions").addText(e=>{e.inputEl.setAttr("type","number"),e.setPlaceholder("500").setValue(String(this.plugin.settings.suggestionControl.delayMs)).onChange(async n=>{this.plugin.settings.suggestionControl.delayMs=parseInt(n)||0,await this.plugin.saveSettings()})}),new Pe.Setting(this.container).setName("Output limit").setDesc("Limit the number of sentences in the output").addText(e=>{e.inputEl.setAttr("type","number"),e.inputEl.setAttr("min","1"),e.setDisabled(!this.plugin.settings.suggestionControl.outputLimit.enabled),e.setValue(String(this.plugin.settings.suggestionControl.outputLimit.sentences)).onChange(async n=>{this.plugin.settings.suggestionControl.outputLimit.sentences=parseInt(n)||1,await this.plugin.saveSettings()})}).addToggle(e=>{e.setValue(this.plugin.settings.suggestionControl.outputLimit.enabled).onChange(async n=>{this.plugin.settings.suggestionControl.outputLimit.enabled=n,await this.plugin.saveSettings(),await this.render()})}),new Pe.Setting(this.container).setHeading().setName("Auto trigger rules").setDesc("Configure rules for when suggestions should be automatically triggered. Rules are skipped if manual activation is enabled."),new Pe.Setting(this.container).setName("Require non-empty line").setDesc("Only trigger when the current line has content").addToggle(e=>{e.setValue(this.plugin.settings.suggestionControl.activationRules.requireNonEmptyLine).onChange(async n=>{this.plugin.settings.suggestionControl.activationRules.requireNonEmptyLine=n,await this.plugin.saveSettings()})}),new Pe.Setting(this.container).setName("Require cursor not at start").setDesc("Don\u2019t trigger when the cursor is at the start of a line").addToggle(e=>{e.setValue(this.plugin.settings.suggestionControl.activationRules.requireCursorNotAtStart).onChange(async n=>{this.plugin.settings.suggestionControl.activationRules.requireCursorNotAtStart=n,await this.plugin.saveSettings()})}),new Pe.Setting(this.container).setName("Require space before cursor").setDesc("Auto trigger only if there\u2019s a space right before the cursor").addToggle(e=>{e.setValue(this.plugin.settings.suggestionControl.activationRules.requireSpaceBeforeCursor).onChange(async n=>{this.plugin.settings.suggestionControl.activationRules.requireSpaceBeforeCursor=n,await this.plugin.saveSettings()})})}buildHotkeySetting(e,n,r,o){let i;new Pe.Setting(this.container).setName(e).setDesc(n).addText(s=>{s.setPlaceholder("Click then press keys\u2026"),s.setValue(r||""),s.inputEl.readOnly=!0,i=s.inputEl,s.inputEl.addEventListener("keydown",async a=>{if(a.preventDefault(),a.stopPropagation(),a.key==="Escape"){s.setValue(""),await o("");return}let l=this.formatCombo(a);l&&(s.setValue(l),await o(l),setTimeout(()=>{document.activeElement===s.inputEl&&s.inputEl.blur()},10))})}).addExtraButton(s=>{s.setIcon("cross").setTooltip("Clear hotkey").onClick(async()=>{await o(""),await this.render()})}).addExtraButton(s=>{s.setIcon("refresh-ccw").setTooltip("Re-record: focus input then press keys").onClick(()=>{i==null||i.focus()})})}formatCombo(e){let n=[];e.metaKey&&n.push("Meta"),e.ctrlKey&&n.push("Ctrl"),e.altKey&&n.push("Alt"),e.shiftKey&&n.push("Shift");let r=this.normalizeKey(e.key);return r?(n.push(r),n.join("-")):""}normalizeKey(e){let n=e.toLowerCase();if(!["shift","meta","alt","control","ctrl"].includes(n))return n===" "?"Space":n==="arrowup"?"ArrowUp":n==="arrowdown"?"ArrowDown":n==="arrowleft"?"ArrowLeft":n==="arrowright"?"ArrowRight":n==="escape"?"Esc":n==="tab"?"Tab":e.length===1?e.toUpperCase():e}},V_=class{constructor(e,n,r){this.app=n,this.container=e,this.plugin=r}async render(){this.container.empty(),new Pe.Setting(this.container).setHeading().setName("Providers").setDesc("Configure your AI providers"),new Pe.Setting(this.container).setName("Ollama").setDesc("Local AI provider running on your machine").addButton(e=>this.createConfigureButton(e,"ollama",this.plugin.settings.providers.ollama.configured)),new Pe.Setting(this.container).setName("OpenAI").setDesc("OpenAI API").addButton(e=>this.createConfigureButton(e,"openai",this.plugin.settings.providers.openai.configured)),new Pe.Setting(this.container).setName("Gemini").setDesc("Google Gemini API").addButton(e=>this.createConfigureButton(e,"gemini",this.plugin.settings.providers.gemini.configured)),new Pe.Setting(this.container).setName("OpenAI compatible API").setDesc("Use any OpenAI compatible provider").addButton(e=>this.createConfigureButton(e,"openai_compatible",this.plugin.settings.providers.openai_compatible.configured))}createConfigureButton(e,n,r){r||e.setWarning(),e.setButtonText(r?"Configured":"Configure").setTooltip(r?"Provider configured":"Provider not configured").onClick(()=>{new jm(this.app,this.plugin,n,()=>{this.render()}).open()})}},j_=class{constructor(e,n,r){this.selectedProfileId=kr;this.container=e,this.plugin=n,this.onProfileUpdate=r}async render(){this.container.empty(),new Pe.Setting(this.container).setHeading().setName("Profiles").setDesc("Create and manage profiles for different use cases. Profiles can be assigned to specific paths."),new Pe.Setting(this.container).setName("Manage profile").setDesc("Select a profile to configure its settings").addDropdown(r=>this.profileDropdown(r)).addExtraButton(r=>this.createNewProfileButton(r)).addExtraButton(r=>this.createDeleteProfileButton(r));let e=this.plugin.settings.profiles[this.selectedProfileId];new Pe.Setting(this.container).setName("Profile name").setDesc(`${e.name} | Name of the profile`).addText(r=>{r.setDisabled(NR(this.selectedProfileId)),r.setValue(e.name).onChange(async o=>{e.name=o,await this.plugin.saveSettings()})}),new Pe.Setting(this.container).setName("AI provider").setDesc(`${e.name} | Choose your preferred AI provider`).addDropdown(r=>{r.addOption("ollama","Ollama").addOption("openai","OpenAI").addOption("gemini","Gemini").addOption("openai_compatible","OpenAI Compatible").setValue(e.provider).onChange(async o=>{e.provider=o,await this.plugin.saveSettings(),await this.render()})}),new Pe.Setting(this.container).setName("Model").setDesc(`${e.name} | Select the model to use for completions`).addDropdown(async r=>{let o=this.plugin.settings.providers[e.provider].models;r.addOptions(Object.fromEntries(o.map(i=>[i,i]))).setValue(e.completionOptions.model).onChange(async i=>{e.completionOptions.model=i,await this.plugin.saveSettings()})});let n=this.plugin.settings.providers[e.provider].temperature_range;new Pe.Setting(this.container).setName("Temperature").setDesc(`${e.name} | Control the randomness of completions (0 = deterministic, 1 = creative)`).addSlider(r=>{r.setLimits(n.min,n.max,.1).setValue(e.completionOptions.temperature).setDynamicTooltip().onChange(async o=>{e.completionOptions.temperature=o,await this.plugin.saveSettings()})}),new Pe.Setting(this.container).setName("System prompt").setDesc(`${e.name} | Set system prompt`).addTextArea(r=>{r.inputEl.addClass("inscribe-prompt-textarea"),r.inputEl.rows=7,r.setValue(e.completionOptions.systemPrompt).onChange(async o=>{e.completionOptions.systemPrompt=o,await this.plugin.saveSettings()})}),new Pe.Setting(this.container).setName("User prompt").setDesc(`${e.name} | User prompt template`).addExtraButton(r=>{r.setIcon("list").setTooltip("Insert mustache template variables").onClick(async()=>{let o=e.completionOptions.userPrompt+`
`+G_;e.completionOptions.userPrompt=o,await this.plugin.saveSettings(),await this.render()})}).addTextArea(r=>{r.inputEl.addClass("inscribe-prompt-textarea"),r.inputEl.rows=7,r.setValue(e.completionOptions.userPrompt).onChange(async o=>{e.completionOptions.userPrompt=o,await this.plugin.saveSettings()})})}profileDropdown(e){Object.entries(this.plugin.settings.profiles).forEach(([n,r])=>{e.addOption(n,r.name)}),e.setValue(this.selectedProfileId).onChange(async n=>{this.selectedProfileId=n,await this.render()})}createNewProfileButton(e){e.setIcon("plus").setTooltip("Create new profile").onClick(async()=>{this.selectedProfileId=kR(this.plugin.settings),await this.plugin.saveSettings(),await this.render(),this.onProfileUpdate()})}createDeleteProfileButton(e){let n=this.selectedProfileId===kr;e.setDisabled(n).setIcon("trash").setTooltip(n?"Cannot delete default profile":"Delete profile").onClick(async()=>{delete this.plugin.settings.profiles[this.selectedProfileId],this.selectedProfileId=kr,await this.plugin.saveSettings(),await this.render(),this.onProfileUpdate()})}},W_=class{constructor(e,n){this.container=e,this.plugin=n,this.tableContainer=document.createElement("div"),this.tableContainer.addClass("setting-item")}async render(){this.container.empty(),new Pe.Setting(this.container).setHeading().setName("Per-Path profile assignments").setDesc("You can assign profiles to paths. Paths are matched by prefix, with longer paths taking precedence. For example, '/Daily' will match all files in the Daily folder."),this.container.appendChild(this.tableContainer),await this.renderMappingsTable()}async renderMappingsTable(){this.tableContainer.empty();let e=this.tableContainer.createEl("table",{cls:"inscribe-mapping-table"}),n=e.createEl("tr");n.createEl("th",{text:"Path"}),n.createEl("th",{text:"Profile"}),n.createEl("th",{text:""}),n.createEl("th",{text:""});let r=e.createEl("tr"),o="",i=kr,s=r.createEl("td");new Pe.TextComponent(s).setPlaceholder("Enter path (e.g., Daily/Work)").onChange(f=>{o=f});let a=r.createEl("td"),l=new Pe.DropdownComponent(a).setValue(i);Object.entries(this.plugin.settings.profiles).forEach(([f,p])=>{l.addOption(f,p.name)}),l.onChange(f=>{i=f}),r.createEl("td");let u=r.createEl("td");new Pe.ButtonComponent(u).setIcon("plus").setTooltip("Add profile mapping").onClick(async()=>{if(!o){new Pe.Notice("Path cannot be empty");return}i_(this.plugin.settings,o,i),await this.plugin.saveSettings(),await this.render()}),Object.entries(this.plugin.settings.path_configs).forEach(([f,p])=>{let m=e.createEl("tr"),b=f===mu;m.createEl("td",{text:b?"Default (all paths)":f});let v=m.createEl("td"),w=new Pe.DropdownComponent(v);Object.entries(this.plugin.settings.profiles).forEach(([L,D])=>{w.addOption(L,D.name)}),w.setValue(p.profile),w.onChange(async L=>{i_(this.plugin.settings,f,L),await this.plugin.saveSettings()});let _=m.createEl("td");new Pe.ExtraButtonComponent(_).setIcon("trash").setDisabled(b).setTooltip("Delete mapping").onClick(async()=>{delete this.plugin.settings.path_configs[f],await this.plugin.saveSettings(),await this.render()});let R=m.createEl("td").createDiv();R.addClass("mapping-toggle-wrapper"),new Pe.ToggleComponent(R).setTooltip("Enable/disable mapping").setValue(p.enabled).onChange(async L=>{this.plugin.settings.path_configs[f].enabled=L,await this.plugin.saveSettings(),this.plugin.statusBarItem.render()})})}};var Wm=class{constructor(e){this.profileChangeCallbacks=[];this.plugin=e,this.app=this.plugin.app,this.settings=this.plugin.settings,this.update(this.getActiveFilePath()),this.plugin.registerEvent(this.app.workspace.on("file-open",n=>{n&&this.update(n.path)})),this.plugin.registerEvent(this.app.vault.on("rename",n=>{this.update(n.path)}))}getActiveProfile(){return this.activeProfile}getActivePath(){return this.activePath}getActivePathConfig(){return xm(this.settings,this.activePath)}getOptions(){return{delayMs:this.settings.suggestionControl.delayMs,splitStrategy:this.settings.suggestionControl.splitStrategy}}onProfileChange(e){this.profileChangeCallbacks.push(e)}update(e){[this.activePath,this.activeProfile]=this.resolveProfileFromPath(e),this.profileChangeCallbacks.forEach(n=>n(this.activeProfile))}getActiveFilePath(){let e=this.app.workspace.activeEditor;return!e||!e.file?"":e.file.path}resolveProfileFromPath(e){if(!this.settings.path_configs||Object.keys(this.settings.path_configs).length===0)return[mu,this.settings.profiles[kr]];let n=e.replace(/^\/+|\/+$/g,""),r="",o=kr,i="/";return Object.entries(this.settings.path_configs).forEach(([s,a])=>{let l=s.replace(/^\/+|\/+$/g,"");n.startsWith(l)&&l.length>r.length&&(r=l,o=a.profile,i=s)}),[i,this.settings.profiles[o]]}};function jM(t){var n;let e=t.state.field((n=window.CodeMirror.Vim)==null?void 0:n.vimStateField,!1);return e?e.mode==="insert":!1}function WM(t){var e,n,r;return((r=(n=(e=t==null?void 0:t.cm)==null?void 0:e.cm)==null?void 0:n.state)==null?void 0:r.keyMap)==="vim"}var zm={addendum:"addenda",corpus:"corpora",criterion:"criteria",curriculum:"curricula",genus:"genera",memorandum:"memoranda",opus:"opera",ovum:"ova",phenomenon:"phenomena",referendum:"referenda",alga:"algae",alumna:"alumnae",antenna:"antennae",formula:"formulae",larva:"larvae",nebula:"nebulae",vertebra:"vertebrae",analysis:"analyses",axis:"axes",diagnosis:"diagnoses",parenthesis:"parentheses",prognosis:"prognoses",synopsis:"synopses",thesis:"theses",neurosis:"neuroses",appendix:"appendices",index:"indices",matrix:"matrices",ox:"oxen",sex:"sexes",alumnus:"alumni",bacillus:"bacilli",cactus:"cacti",fungus:"fungi",hippopotamus:"hippopotami",libretto:"libretti",modulus:"moduli",nucleus:"nuclei",octopus:"octopi",radius:"radii",stimulus:"stimuli",syllabus:"syllabi",cookie:"cookies",calorie:"calories",auntie:"aunties",movie:"movies",pie:"pies",rookie:"rookies",tie:"ties",zombie:"zombies",leaf:"leaves",loaf:"loaves",thief:"thieves",foot:"feet",goose:"geese",tooth:"teeth",beau:"beaux",chateau:"chateaux",tableau:"tableaux",bus:"buses",gas:"gases",circus:"circuses",crisis:"crises",virus:"viruses",database:"databases",excuse:"excuses",abuse:"abuses",avocado:"avocados",barracks:"barracks",child:"children",clothes:"clothes",echo:"echoes",embargo:"embargoes",epoch:"epochs",deer:"deer",halo:"halos",man:"men",woman:"women",mosquito:"mosquitoes",mouse:"mice",person:"people",quiz:"quizzes",rodeo:"rodeos",shoe:"shoes",sombrero:"sombreros",stomach:"stomachs",tornado:"tornados",tuxedo:"tuxedos",volcano:"volcanoes"};var z_={Comparative:"true\xA6bett1f0;arth0ew0in0;er",Superlative:"true\xA6earlier",PresentTense:"true\xA6bests,sounds",Condition:"true\xA6lest,unless",PastTense:"true\xA6began,came,d4had,kneel3l2m0sa4we1;ea0sg2;nt;eap0i0;ed;id",Participle:"true\xA60:09;a06b01cZdXeat0fSgQhPoJprov0rHs7t6u4w1;ak0ithdra02o2r1;i02uY;k0v0;nd1pr04;ergoJoJ;ak0hHo3;e9h7lain,o6p5t4un3w1;o1um;rn;g,k;ol0reS;iQok0;ught,wn;ak0o1runk;ne,wn;en,wn;ewriNi1uJ;dd0s0;ut3ver1;do4se0t1;ak0h2;do2g1;roG;ne;ast0i7;iv0o1;ne,tt0;all0loBor1;bi3g2s1;ak0e0;iv0o9;dd0;ove,r1;a5eamt,iv0;hos0lu1;ng;e4i3lo2ui1;lt;wn;tt0;at0en,gun;r2w1;ak0ok0;is0;en",Gerund:"true\xA6accord0be0doin,go0result0stain0;ing",Expression:"true\xA6a0Yb0Uc0Sd0Oe0Mfarew0Lg0FhZjeez,lWmVnToOpLsJtIuFvEw7y0;a5e3i1u0;ck,p;k04p0;ee,pee;a0p,s;!h;!a,h,y;a5h2o1t0;af,f;rd up,w;atsoever,e1o0;a,ops;e,w;hoo,t;ery w06oi0L;gh,h0;! 0h,m;huh,oh;here nPsk,ut tut;h0ic;eesh,hh,it,oo;ff,h1l0ow,sst;ease,s,z;ew,ooey;h1i,mg,o0uch,w,y;h,o,ps;! 0h;hTmy go0wT;d,sh;a7evertheless,o0;!pe;eh,mm;ah,eh,m1ol0;!s;ao,fao;aCeBi9o2u0;h,mph,rra0zzC;h,y;l1o0;r6y9;la,y0;! 0;c1moCsmok0;es;ow;!p hip hoor0;ay;ck,e,llo,y;ha1i,lleluj0;ah;!ha;ah,ee4o1r0;eat scott,r;l1od0sh; grief,bye;ly;! whiz;ell;e0h,t cetera,ureka,ww,xcuse me;k,p;'oh,a0rat,uh;m0ng;mit,n0;!it;mon,o0;ngratulations,wabunga;a2oo1r0tw,ye;avo,r;!ya;h,m; 1h0ka,las,men,rgh,ye;!a,em,h,oy;la",Negative:"true\xA6n0;ever,o0;n,t",QuestionWord:"true\xA6how3wh0;at,e1ich,o0y;!m,se;n,re; come,'s",Reflexive:"true\xA6h4it5my5o1the0your2;ir1m1;ne3ur0;sel0;f,ves;er0im0;self",Plural:"true\xA6dick0gre0ones,records;ens","Unit|Noun":"true\xA6cEfDgChBinchAk9lb,m6newt5oz,p4qt,t1y0;ardEd;able1b0ea1sp;!l,sp;spo1;a,t,x;on9;!b,g,i1l,m,p0;h,s;!les;!b,elvin,g,m;!es;g,z;al,b;eet,oot,t;m,up0;!s",Value:"true\xA6a few",Imperative:"true\xA6bewa0come he0;re","Plural|Verb":"true\xA6leaves",Demonym:"true\xA60:15;1:12;a0Vb0Oc0Dd0Ce08f07g04h02iYjVkTlPmLnIomHpEqatari,rCs7t5u4v3welAz2;am0Gimbabwe0;enezuel0ietnam0I;gAkrai1;aiwTex0hai,rinida0Ju2;ni0Prkmen;a5cotti4e3ingapoOlovak,oma0Spaniard,udRw2y0W;ede,iss;negal0Cr09;sh;mo0uT;o5us0Jw2;and0;a2eru0Fhilippi0Nortugu07uerto r0S;kist3lesti1na2raguay0;ma1;ani;ami00i2orweP;caragu0geri2;an,en;a3ex0Lo2;ngo0Drocc0;cedo1la2;gasy,y07;a4eb9i2;b2thua1;e0Cy0;o,t01;azakh,eny0o2uwaiI;re0;a2orda1;ma0Ap2;anO;celandic,nd4r2sraeli,ta01vo05;a2iB;ni0qi;i0oneU;aiAin2ondur0unO;di;amEe2hanai0reek,uatemal0;or2rm0;gi0;ilipino,ren8;cuadoVgyp4mira3ngli2sto1thiopi0urope0;shm0;ti;ti0;aPominUut3;a9h6o4roat3ub0ze2;ch;!i0;lom2ngol5;bi0;a6i2;le0n2;ese;lifor1m2na3;bo2eroo1;di0;angladeshi,el6o4r3ul2;gaE;azi9it;li2s1;vi0;aru2gi0;si0;fAl7merBngol0r5si0us2;sie,tr2;a2i0;li0;genti2me1;ne;ba1ge2;ri0;ni0;gh0r2;ic0;an",Organization:"true\xA60:4Q;a3Tb3Bc2Od2He2Df27g1Zh1Ti1Pj1Nk1Ll1Gm12n0Po0Mp0Cqu0Br02sTtHuCv9w3xiaomi,y1;amaha,m1Bou1w1B;gov,tu3C;a4e2iki1orld trade organizati33;leaRped0O;lls fargo,st1;fie2Hinghou2R;l1rner br3U;gree3Jl street journ2Im1E;an halOeriz2Xisa,o1;dafo2Yl1;kswagMvo;b4kip,n2ps,s1;a tod3Aps;es3Mi1;lev3Fted natio3C;er,s; mobi32aco beRd bOe9gi frida3Lh3im horto3Amz,o1witt3D;shi49y1;ota,s r 05;e 1in lizzy;b3carpen3Jdaily ma3Dguess w2holli0s1w2;mashing pumpki35uprem0;ho;ea1lack eyed pe3Xyr0Q;ch bo3Dtl0;l2n3Qs1xas instrumen1U;co,la m1F;efoni0Kus;a8cientology,e5ieme2Ymirnoff,np,o3pice gir6quare0Ata1ubaru;rbuc1to34;ks;ny,undgard1;en;a2x pisto1;ls;g1Wrs;few2Minsbur31lesfor03msu2E;adiohead,b8e4o1yana3C;man empi1Xyal 1;b1dutch she4;ank;a3d 1max,vl20;bu1c2Ahot chili peppe2Ylobst2N;ll;ders dige1Ll madrid;c,s;ant3Aizn2Q;a8bs,e5fiz2Ihilip4i3r1;emier 1udenti1D;leagTo2K;nk floyd,zza hut; morrBs;psi2tro1uge0E;br33chi0Tn33;!co;lant2Un1yp16; 2ason27da2P;ld navy,pec,range juli2xf1;am;us;aAb9e6fl,h5i4o1sa,vid3wa;k2tre dame,vart1;is;ia;ke,ntendo,ss0QvZ;l,s;c,st1Otflix,w1; 1sweek;kids on the block,york0D;a,c;nd22s2t1;ional aca2Po,we0U;a,c02d0S;aDcdonalCe9i6lb,o3tv,y1;spa1;ce;b1Tnsanto,ody blu0t1;ley cr1or0T;ue;c2t1;as,subisO;helin,rosoft;dica2rcedes benz,talli1;ca;id,re;ds;cs milk,tt19z24;a3e1g,ittle caesa1P; ore09novo,x1;is,mark,us; 1bour party;pres0Dz boy;atv,fc,kk,lm,m1od1O;art;iffy lu0Roy divisi0Jpmorgan1sa;! cha09;bm,hop,k3n1tv;g,te1;l,rpol;ea;a5ewlett pack1Vi3o1sbc,yundai;me dep1n1P;ot;tac1zbollah;hi;lliburt08sbro;eneral 6hq,ithub,l5mb,o2reen d0Ou1;cci,ns n ros0;ldman sachs,o1;dye1g0H;ar;axo smith kli04encoW;electr0Nm1;oto0Z;a5bi,c barcelo4da,edex,i2leetwood m03o1rito l0G;rd,xcY;at,fa,nancial1restoZ; tim0;na;cebook,nnie mae;b0Asa,u3xxon1; m1m1;ob0J;!rosceptics;aiml0De5isney,o4u1;nkin donu2po0Zran dur1;an;ts;j,w jon0;a,f lepp12ll,peche mode,r spieg02stiny's chi1;ld;aJbc,hFiDloudflaCnn,o3r1;aigsli5eedence clearwater reviv1ossra09;al;c7inba6l4m1o0Est09;ca2p1;aq;st;dplSg1;ate;se;a c1o chanQ;ola;re;a,sco1tigroup;! systems;ev2i1;ck fil a,na daily;r1y;on;d2pital o1rls jr;ne;bury,ill1;ac;aEbc,eBf9l5mw,ni,o1p,rexiteeU;ei3mbardiIston 1;glo1pizza;be;ng;o2ue c1;roV;ckbuster video,omingda1;le; g1g1;oodriL;cht2e ge0rkshire hathaw1;ay;el;cardi,idu,nana republ3s1xt5y5;f,kin robbi1;ns;ic;bYcTdidSerosmith,iRlKmEnheuser busDol,ppleAr6s4u3v2y1;er;is,on;di,todesk;hland o1sociated E;il;b3g2m1;co;os;ys; compu1be0;te1;rs;ch;c,d,erican3t1;!r1;ak; ex1;pre1;ss; 5catel2ta1;ir;! lu1;ce1;nt;jazeera,qae1;da;g,rbnb;as;/dc,a3er,tivision1;! blizz1;ard;demy of scienc0;es;ba",Possessive:"true\xA6its,my,our0thy;!s","Noun|Verb":"true\xA60:9W;1:AA;2:96;3:A3;4:9R;5:A2;6:9K;7:8N;8:7L;9:A8;A:93;B:8D;C:8X;a9Ob8Qc7Id6Re6Gf5Sg5Hh55i4Xj4Uk4Rl4Em40n3Vo3Sp2Squ2Rr21s0Jt02u00vVwGyFzD;ip,oD;ne,om;awn,e6Fie68;aOeMhJiHoErD;ap,e9Oink2;nd0rDuC;kDry,sh5Hth;!shop;ck,nDpe,re,sh;!d,g;e86iD;p,sD;k,p0t2;aDed,lco8W;r,th0;it,lk,rEsDt4ve,x;h,te;!ehou1ra9;aGen5FiFoD;iDmAte,w;ce,d;be,ew,sA;cuum,l4B;pDr7;da5gra6Elo6A;aReQhrPiOoMrGuEwiDy5Z;n,st;nDrn;e,n7O;aGeFiEoDu6;t,ub2;bu5ck4Jgg0m,p;at,k,nd;ck,de,in,nsDp,v7J;f0i8R;ll,ne,p,r4Yss,t94uD;ch,r;ck,de,e,le,me,p,re;e5Wow,u6;ar,e,ll,mp0st,xt;g,lDng2rg7Ps5x;k,ly;a0Sc0Ne0Kh0Fi0Dk0Cl0Am08n06o05pXquaBtKuFwD;ea88iD;ng,pe,t4;bGit,m,ppErD;fa3ge,pri1v2U;lDo6S;e6Py;!je8;aMeLiKoHrEuDy2;dy,ff,mb2;a85eEiDo5Pugg2;ke,ng;am,ss,t4;ckEop,p,rD;e,m;ing,pi2;ck,nk,t4;er,m,p;ck,ff,ge,in,ke,lEmp,nd,p2rDte,y;!e,t;k,l;aJeIiHlGoFrDur,y;ay,e56inDu3;g,k2;ns8Bt;a5Qit;ll,n,r87te;ed,ll;m,n,rk;b,uC;aDee1Tow;ke,p;a5Je4FiDo53;le,rk;eep,iDou4;ce,p,t;ateboa7Ii;de,gnDl2Vnk,p,ze;!al;aGeFiEoDuff2;ck,p,re,w;ft,p,v0;d,i3Ylt0;ck,de,pe,re,ve;aEed,nDrv1It;se,t2N;l,r4t;aGhedu2oBrD;aEeDibb2o3Z;en,w;pe,t4;le,n,r2M;cDfegua72il,mp2;k,rifi3;aZeHhy6LiGoEuD;b,in,le,n,s5X;a6ck,ll,oDpe,u5;f,t;de,ng,ot,p,s1W;aTcSdo,el,fQgPje8lOmMnLo17pJque6sFturn,vDwa6V;eDi27;al,r1;er74oFpe8tEuD;lt,me;!a55;l71rt;air,eaDly,o53;l,t;dezvo2Zt;aDedy;ke,rk;ea1i4G;a6Iist0r5N;act6Yer1Vo71uD;nd,se;a38o6F;ch,s6G;c1Dge,iEke,lly,nDp1Wt1W;ge,k,t;n,se;es6Biv0;a04e00hYiXlToNrEsy4uD;mp,n4rcha1sh;aKeIiHoDu4O;be,ceFdu3fi2grDje8mi1p,te6;amDe6W;!me;ed,ss;ce,de,nt;sDy;er6Cs;cti3i1;iHlFoEp,re,sDuCw0;e,i5Yt;l,p;iDl;ce,sh;nt,s5V;aEce,e32uD;g,mp,n7;ce,nDy;!t;ck,le,n17pe,tNvot;a1oD;ne,tograph;ak,eFnErDt;fu55mA;!c32;!l,r;ckJiInHrFsEtDu1y;ch,e9;s,te;k,tD;!y;!ic;nt,r,se;!a7;bje8ff0il,oErDutli3Qver4B;bAd0ie9;ze;a4ReFoDur1;d,tD;e,i3;ed,gle8tD;!work;aMeKiIoEuD;rd0;ck,d3Rld,nEp,uDve;nt,th;it5EkD;ey;lk,n4Brr5CsDx;s,ta2B;asuBn4UrDss;ge,it;il,nFp,rk3WsEtD;ch,t0;h,k,t0;da5n0oeuvB;aLeJiHoEuD;mp,st;aEbby,ck,g,oDve;k,t;d,n;cDe,ft,mAnIst;en1k;aDc0Pe4vK;ch,d,k,p,se;bFcEnd,p,t4uD;gh,n4;e,k;el,o2U;eEiDno4E;ck,d,ll,ss;el,y;aEo1OuD;i3mp;m,zz;mpJnEr46ssD;ue;c1Rdex,fluGha2k,se2HteDvoi3;nt,rD;e6fa3viD;ew;en3;a8le2A;aJeHiGoEuD;g,nt;l3Ano2Dok,pDr1u1;!e;ghli1Fke,nt,re,t;aDd7lp;d,t;ck,mGndFrEsh,tDu9;ch,e;bo3Xm,ne4Eve6;!le;!m0;aMear,ift,lKossJrFuD;arDe4Alp,n;antee,d;aFiEoDumb2;uCwth;ll,nd,p;de,sp;ip;aBoDue;ss,w;g,in,me,ng,s,te,ze;aZeWiRlNoJrFuD;ck,el,nDss,zz;c38d;aEoDy;st,wn;cDgme,me,nchi1;tuB;cFg,il,ld,rD;ce,e29mDwa31;!at;us;aFe0Vip,oDy;at,ck,od,wD;!er;g,ke,me,re,sh,vo1E;eGgFlEnDre,sh,t,x;an3i0Q;e,m,t0;ht,uB;ld;aEeDn3;d,l;r,tuB;ce,il,ll,rm,vo2W;cho,d7ffe8nMsKxFyeD;!baD;ll;cGerci1hFpDtra8;eriDo0W;en3me9;au6ibA;el,han7u1;caDtima5;pe;count0d,vy;a01eSiMoJrEuDye;b,el,mp,pli2X;aGeFiEoD;ne,p;ft,ll,nk,p,ve;am,ss;ft,g,in;cEd7ubt,wnloD;ad;k,u0E;ge6p,sFt4vD;e,iDor3;de;char7gui1h,liEpD;at4lay,u5;ke;al,bKcJfeIlGmaCposAsEtaD;il;e07iD;gn,re;ay,ega5iD;ght;at,ct;li04rea1;a5ut;b,ma7n3rDte;e,t;a0Eent0Dh06irc2l03oKrFuD;be,e,rDt;b,e,l,ve;aGeFoEuDy;sh;p,ss,wd;dAep;ck,ft,sh;at,de,in,lTmMnFordina5py,re,st,uDv0;gh,nDp2rt;s01t;ceHdu8fli8glomeIsFtDveN;a8rD;a6ol;e9tru8;ct;ntDrn;ra5;bHfoGmFpD;leDouCromi1;me9;aCe9it,u5;rt;at,iD;ne;lap1oD;r,ur;aEiDoud,ub;ck,p;im,w;aEeDip;at,ck,er;iGllen7nErD;ge,m,t;ge,nD;el;n,r;er,re;ke,ll,mp,noe,pGrXsFtEuDve;se,ti0I;alog,ch;h,t;!tuB;re;a03eZiXlToPrHuEyD;pa11;bb2ck2dgEff0mp,rDst,zz;den,n;et;anJeHiFoadEuD;i1sh;ca6;be,d7;ge;aDed;ch,k;ch,d;aFg,mb,nEoDrd0tt2x,ycott;k,st,t;d,e;rd,st;aFeCiDoYur;nk,tz;nd;me;as,d,ke,nd,opsy,tD;!ch,e;aFef,lt,nDt;d,efA;it;r,t;ck,il,lan3nIrFsEtt2;le;e,h;!gDk;aDe;in;!d,g,k;bu1c05dZge,iYlVnTppQrLsIttGucEwaD;rd;tiD;on;aDempt;ck;k,sD;i6ocia5;st;chFmD;!oD;ur;!iD;ve;eEroa4;ch;al;chDg0sw0;or;aEt0;er;rm;d,m,r;dreHvD;an3oD;ca5;te;ce;ss;cDe,he,t;eFoD;rd,u9;nt;nt,ss;se",Actor:"true\xA60:7B;1:7G;2:6A;3:7F;4:7O;5:7K;a6Nb62c4Ud4Be41f3Sg3Bh30i2Uj2Qkin2Pl2Km26n1Zo1Sp0Vqu0Tr0JsQtJuHvEw8yo6;gi,ut6;h,ub0;aAe9i8o7r6;estl0it0;m2rk0;fe,nn0t2Bza2H;atherm2ld0;ge earn0it0nder0rri1;eter7i6oyF;ll5Qp,s3Z;an,ina2U;n6s0;c6Uder03;aoisea23e9herapi5iktok0o8r6ut1yco6S;a6endseLo43;d0mp,nscri0Bvel0;ddl0u1G;a0Qchn7en6na4st0;ag0;i3Oo0D;aiXcUeRhPiMki0mu26oJpGquaFtBu7wee6;p0theart;lt2per7r6;f0ge6Iviv1;h6inten0Ist5Ivis1;ero,um2;a8ep7r6;ang0eam0;bro2Nc2Ofa2Nmo2Nsi20;ff0tesm2;tt0;ec7ir2Do6;kesp59u0M;ia5Jt3;l7me6An,rcere6ul;r,ss;di0oi5;n7s6;sy,t0;g0n0;am2ephe1Iow6;girl,m2r2Q;cretInior cit3Fr6;gea4v6;a4it1;hol4Xi7reen6ulpt1;wr2C;e01on;l1nt;aEe9o8u6;l0nn6;er up,ingE;g40le mod3Zof0;a4Zc8fug2Ppo32searQv6;ere4Uolution6;ary;e6luYru22;ptio3T;bbi,dic5Vpp0;arter6e2Z;back;aYeWhSiRlOoKr8sycho7u6;nk,p31;logi5;aGeDiBo6;d9fess1g7ph47s6;pe2Ktitu51;en6ramm0;it1y;igy,uc0;est4Nme mini0Unce6s3E;!ss;a7si6;de4;ch0;ctiti39nk0P;dca0Oet,li6pula50rnst42;c2Itic6;al scie6i2;nti5;a6umb0;nn0y6;er,ma4Lwright;lgrim,one0;a8iloso7otogra7ra6ysi1V;se;ph0;ntom,rmaci5;r6ssi1T;form0s4O;i3El,nel3Yr8st1tr6wn;i6on;arWot;ent4Wi42tn0;ccupa4ffBp8r7ut6;ca5l0B;ac4Iganiz0ig2Fph2;er3t6;i1Jomet6;ri5;ic0spring;aBe9ie4Xo7u6;n,rser3J;b6mad,vi4V;le2Vo4D;i6mesis,phew;ce,ghb1;nny,rr3t1X;aEeDiAo7u6yst1Y;m8si16;der3gul,m7n6th0;arDk;!my;ni7s6;f02s0Jt0;on,st0;chan1Qnt1rcha4;gi9k0n8rtyr,t6y1;e,riar6;ch;ag0iac;ci2stra3I;a7e2Aieutena4o6;rd,s0v0;bor0d7ndlo6ss,urea3Fwy0ym2;rd;!y;!s28;e8o7u6;ggl0;gg0urna2U;st0;c3Hdol,llu3Ummigra4n6; l9c1Qfa4habi42nov3s7ve6;nt1stig3;pe0Nt6;a1Fig3ru0M;aw;airFeBistoAo8u6ygie1K;man6sba2H;!ita8;bo,st6usekN;age,e3P;ri2;ir,r6;m7o6;!ine;it;dress0sty2C;aLeIhostGirl26ladi3oCrand7u6;e5ru;c9daug0Jfa8m7pa6s2Y;!re4;a,o6;th0;hi1B;al7d6lf0;!de3A;ie,k6te26;eep0;!wr6;it0;isha,n6;i6tl04;us;mbl0rden0;aDella,iAo7r6;eela2Nie1P;e,re6ster pare4;be1Hm2r6st0;unn0;an2ZgZlmm17nanci0r6tt0;e6st la2H; marsh2OfigXm2;rm0th0;conoEdDlectriCm8n7x6;amin0cellency,i2A;emy,trepreneur,vironmenta1J;c8p6;er1loye6;e,r;ee;ci2;it1;mi5;aKeBi8ork,ri7u6we02;de,tche2H;ft0v0;ct3eti7plom2Hre6va;ct1;ci2ti2;aDcor3fencCi0InAput9s7tectLvel6;op0;ce1Ge6ign0;rt0;ee,y;iz6;en;em2;c1Ml0;d8nc0redev7ug6;ht0;il;!dy;a06e04fo,hXitizenWlToBr9u6;r3stomer6;! representat6;ive;e3it6;ic;lJmGnAord9rpor1Nu7w6;boy,ork0;n6ri0;ciTte1Q;in3;fidantAgressSs9t6;e0Kr6;ibut1o6;ll0;tab13ul1O;!e;edi2m6pos0rade;a0EeQissi6;on0;leag8on7um6;ni5;el;ue;e6own;an0r6;ic,k;!s;a9e7i6um;ld;erle6f;ad0;ir7nce6plFract0;ll1;m2wI;lebri6o;ty;dBptAr6shi0;e7pe6;nt0;r,t6;ak0;ain;et;aMeLiJlogg0oErBu6;dd0Fild0rgl9siness6;m2p7w6;om2;ers05;ar;i7o6;!k0th0;cklay0de,gadi0;hemi2oge8y6;!frie6;nd;ym2;an;cyc6sR;li5;atbox0ings;by,nk0r6;b0on7te6;nd0;!e07;c04dWge4nQpLrHsFtAu7yatull6;ah;nt7t6;h1oG;!ie;h8t6;e6orney;nda4;ie5le6;te;sis00tron6;aut,om0;chbis8isto7tis6;an,t;crU;hop;ost9p6;ari6rentiS;ti6;on;le;a9cest1im3nou8y6;bo6;dy;nc0;ly5rc6;hi5;mi8v6;entur0is1;er;ni7r6;al;str3;at1;or;counBquaintanArob9t6;ivi5or,re6;ss;st;at;ce;ta4;nt","Adj|Noun":"true\xA60:16;a1Db17c0Ud0Re0Mf0Dg0Ah08i06ju05l02mWnUoSpNrIsBt7u4v1watershed;a1ision0Z;gabo4nilla,ria1;b0Vnt;ndergr1pstairs;adua14ou1;nd;a3e1oken,ri0;en,r1;min0rori13;boo,n;age,e5ilv0Flack,o3quat,ta2u1well;bordina0Xper5;b0Lndard;ciali0Yl1vereign;e,ve16;cret,n1ri0;ior;a4e2ou1ubbiL;nd,tiY;ar,bBl0Wnt0p1side11;resent0Vublican;ci0Qsh;a4eriodic0last0Zotenti0r1;emi2incip0o1;!fession0;er,um;rall4st,tie0U;ff1pposi0Hv0;ens0Oi0C;agg01ov1uts;el;a5e3iniatJo1;bi01der07r1;al,t0;di1tr0N;an,um;le,riG;attOi2u1;sh;ber0ght,qC;stice,veniT;de0mpressioYn1;cumbe0Edividu0no0Dsta0Eterim;alf,o1umdrum;bby,melF;en2old,ra1;ph0Bve;er0ious;a7e5i4l3u1;git03t1;ure;uid;ne;llow,m1;aFiL;ir,t,vo1;riOuriO;l3p00x1;c1ecutUpeV;ess;d1iK;er;ar2e1;mographUrivO;k,l2;hiGlassSo2rude,unn1;ing;m5n1operK;creCstitueOte2vertab1;le;mpor1nt;ary;ic,m2p1;anion,lex;er2u1;ni8;ci0;al;e5lank,o4r1;i2u1;te;ef;ttom,urgeois;st;cadem9d6l2ntarct9r1;ab,ct8;e3tern1;at1;ive;rt;oles1ult;ce1;nt;ic","Adj|Past":"true\xA60:4Q;1:4C;2:4H;3:4E;a44b3Tc36d2Je29f20g1Wh1Si1Jj1Gkno1Fl1Am15n12o0Xp0Mqu0Kr08sLtEuAv9w4yellow0;a7ea6o4rinkl0;r4u3Y;n,ri0;k31th3;rp0sh0tZ;ari0e1O;n5p4s0;d1li1Rset;cov3derstood,i4;fi0t0;a8e3Rhr7i6ouTr4urn0wi4C;a4imm0ou2G;ck0in0pp0;ed,r0;eat2Qi37;m0nn0r4;get0ni2T;aOcKeIhGimFm0Hoak0pDt7u4;bsid3Ogge44s4;pe4ta2Y;ct0nd0;a8e7i2Eok0r5u4;ff0mp0nn0;ength2Hip4;ed,p0;am0reotyp0;in0t0;eci4ik0oH;al3Efi0;pRul1;a4ock0ut;d0r0;a4c1Jle2t31;l0s3Ut0;a6or5r4;at4e25;ch0;r0tt3;t4ut0;is2Mur1;aEe5o4;tt0;cAdJf2Bg9je2l8m0Knew0p7qu6s4;eTpe2t4;or0ri2;e3Dir0;e1lac0;at0e2Q;i0Rul1;eiv0o4ycl0;mme2Lrd0v3;in0lli0ti2A;a4ot0;li28;aCer30iBlAo9r5u4;mp0zzl0;e6i2Oo4;ce2Fd4lo1Anou30pos0te2v0;uc0;fe1CocCp0Iss0;i2Kli1L;ann0e2CuS;ck0erc0ss0;ck0i2Hr4st0;allLk0;bse7c6pp13rgan2Dver4;lo4whelm0;ok0;cupi0;rv0;aJe5o4;t0uri1A;ed0gle2;a6e5ix0o4ut0ys1N;di1Nt15u26;as0Clt0;n4rk0;ag0ufact0A;e6i5o4;ad0ck0st,v0;cens0m04st0;ft,v4;el0;tt0wn;a5o15u4;dg0s1B;gg0;llumSmpAn4sol1;br0cre1Ldebt0f8jZspir0t5v4;it0olv0;e4ox0Y;gr1n4re23;d0si15;e2l1o1Wuri1;li0o01r4;ov0;a6e1o4um03;ok0r4;ri0Z;mm3rm0;i6r5u4;a1Bid0;a0Ui0Rown;ft0;aAe9i8l6oc0Ir4;a4i0oz0Y;ctHg19m0;avo0Ju4;st3;ni08tt0x0;ar0;d0il0sc4;in1;dCl1mBn9quipp0s8x4;agger1c6p4te0T;a0Se4os0;ct0rie1D;it0;cap0tabliZ;cha0XgFha1As4;ur0;a0Zbarra0N;i0Buc1;aMeDi5r4;a01i0;gni08miniSre2s4;a9c6grun0Ft4;o4re0Hu17;rt0;iplWou4;nt0r4;ag0;bl0;cBdRf9l8p7ra6t5v4;elop0ot0;ail0ermQ;ng0;re07;ay0ight0;e4in0o0M;rr0;ay0enTor1;m5t0z4;ed,zl0;ag0p4;en0;aPeLhIlHo9r6u4;lt4r0stom03;iv1;a5owd0u4;sh0;ck0mp0;d0loAm7n4ok0v3;centr1f5s4troC;id3olid1;us0;b5pl4;ic1;in0;r0ur0;assi9os0utt3;ar5i4;ll0;g0m0;lebr1n6r4;ti4;fi0;tralJ;g0lcul1;aDewild3iCl9o7r5urn4;ed,t;ok4uis0;en;il0r0t4und;tl0;e5i4;nd0;ss0;as0;ffl0k0laMs0tt3;bPcNdKfIg0lFmaz0nDppBrm0ss9u5wa4;rd0;g5thor4;iz0;me4;nt0;o6u4;m0r0;li0re4;ci1;im1ticip1;at0;a5leg0t3;er0;rm0;fe2;ct0;ju5o7va4;nc0;st0;ce4knowledg0;pt0;and5so4;rb0;on0;ed",Singular:"true\xA60:5J;1:5H;2:4W;3:4S;4:52;5:57;6:5L;7:56;8:5B;a52b4Lc3Nd35e2Xf2Og2Jh28in24j23k22l1Um1Ln1Ho1Bp0Rqu0Qr0FsZtMuHvCw9x r58yo yo;a9ha3Po3Q;f3i4Rt0Gy9;! arou39;arCeAideo ga2Qo9;cabu4Jl5C;gOr9t;di4Zt1Y;iety,ni4P;nBp30rAs 9;do43s5E;bani1in0;coordinat3Ader9;estima1to24we41; rex,aKeJhHiFoErBuAv9;! show;m2On2rntLto1D;agedy,ib9o4E;e,u9;n0ta46;ni1p2rq3L;c,er,m9;etF;ing9ree26;!y;am,mp3F;ct2le6x return;aNcMeKhor4QiJkHoGpin off,tDuBy9;ll9ner7st4T;ab2X;b9i1n28per bowl,rro1X;st3Ltot0;atAipe2Go1Lrate7udent9;! lo0I;i39u1;ft ser4Lmeo1I;elet5i9;ll,r3V;b38gn2Tte;ab2Jc9min3B;t,urity gua2N;e6ho2Y;bbatic0la3Jndwi0Qpi5;av5eDhetor2iAo9;de6om,w;tAv9;erb2C;e,u0;bDcBf9publ2r10spi1;er9orm3;e6r0;i9ord label;p2Ht0;a1u46;estion mark,ot2F;aPeMhoLiIlGoErAu9yram1F;ddi3HpErpo1Js3J;eBo9;bl3Zs9;pe3Jta1;dic1Rmi1Fp1Qroga8ss relea1F;p9rt0;py;a9ebisci1;q2Dte;cn2eAg9;!gy;!r;ne call,tocoK;anut,dAr9t0yo1;cen3Jsp3K;al,est0;nop4rAt9;e,hog5;adi11i2V;atme0bj3FcBpia1rde0thers,utspok5ve9wn3;n,r9;ti0Pview;cuAe9;an;pi3;arBitAot9umb3;a2Fhi2R;e,ra1;cot2ra8;aFeCiAo9ur0;nopo4p18rni2Nsq1Rti36uld;c,li11n0As9tt5;chief,si34;dAnu,t9;al,i3;al,ic;gna1mm0nd15rsupi0te9yf4;ri0;aDegCiBu9;ddi1n9;ch;me,p09; Be0M;bor14y9; 9er;up;eyno1itt5;el4ourn0;cBdices,itia8ni25sAtel0Lvert9;eb1J;e28titu1;en8i2T;aIeEighDoAu9;man right,s22;me9rmoFsp1Ftb0K;! r9;un; scho0YriY;a9i1N;d9v5; start,pho9;ne;ndful,sh brown,v5ze;aBelat0Ilaci3r9ul4yp1S;an9enadi3id;a1Cd slam,ny;df4r9;l2ni1I;aGeti1HiFlu1oCrAun9;er0;ee market,i9onti3;ga1;l4ur9;so9;me;ePref4;br2mi4;conoFffi7gg,lecto0Rmbas1EnCpidem2s1Zth2venBxAyel9;id;ampZempl0Nte6;i19t;er7terp9;ri9;se;my;eLiEoBr9ump tru0U;agonf4i9;er,ve thru;cAg7i4or,ssi3wn9;side;to0EumenE;aEgniDnn3sAvide9;nd;conte6incen8p9tri11;osi9;ti0C;ta0H;le0X;athBcAf9ni0terre6;ault 05err0;al,im0;!b9;ed;aWeThMiLlJoDr9;edit caBuc9;ib9;le;rd;efficDke,lCmmuniqLnsApi3rr0t0Xus9yo1;in;erv9uI;ato02;ic,lQ;ie6;er7i9oth;e6n2;ty,vil wM;aDeqCick5ocoBr9;istmas car9ysanthemum;ol;la1;ue;ndeli3racteri9;st2;iAllEr9;e0tifica1;liZ;hi3nFpErCt9ucus;erpi9hedr0;ll9;ar;!bohyd9ri3;ra1;it0;aAe,nib0t9;on;l,ry;aMeLiop2leJoHrDu9;nny,r9tterf4;g9i0;la9;ry;eakAi9;ck;fa9throB;st;dy,ro9wl;ugh;mi9;sh;an,l4;nkiArri3;er;ng;cSdMlInFppeti1rDsBtt2utop9;sy;ic;ce6pe9;ct;r9sen0;ay;ecAoma4tiA;ly;do1;i5l9;er7y;gy;en; hominDjAvan9;tage;ec8;ti9;ve;em;cCeAqui9;tt0;ta1;te;iAru0;al;de6;nt","Person|Noun":"true\xA6a0Eb07c03dWeUfQgOhLjHkiGlFmCnBolive,p7r4s3trini06v1wa0;ng,rd,tts;an,enus,iol0;a,et;ky,onPumm09;ay,e1o0uby;bin,d,se;ed,x;a2e1o0;l,tt04;aLnJ;dYge,tR;at,orm;a0eloW;t0x,ya;!s;a9eo,iH;ng,tP;a2e1o0;lGy;an,w3;de,smi4y;a0erb,iOolBuntR;ll,z0;el;ail,e0iLuy;ne;a1ern,i0lo;elds,nn;ith,n0;ny;a0dEmir,ula,ve;rl;a4e3i1j,ol0;ly;ck,x0;ie;an,ja;i0wn;sy;am,h0liff,rystal;a0in,ristian;mbers,ri0;ty;a4e3i2o,r0ud;an0ook;dy;ll;nedict,rg;k0nks;er;l0rt;fredo,ma","Actor|Verb":"true\xA6aCb8c5doctor,engineAfool,g3host,judge,m2nerd,p1recruit,scout,ushAvolunteAwi0;mp,tneA;arent,ilot;an,ime;eek,oof,r0uide;adu8oom;ha1o0;ach,nscript,ok;mpion,uffeur;o2u0;lly,tch0;er;ss;ddi1ffili0rchite1;ate;ct",MaleName:"true\xA60:H6;1:FZ;2:DS;3:GQ;4:CZ;5:FV;6:GM;7:FP;8:GW;9:ET;A:C2;B:GD;aF8bE1cCQdBMeASfA1g8Yh88i7Uj6Sk6Bl5Mm48n3So3Ip33qu31r26s1Et0Ru0Ov0CwTxSyHzC;aCor0;cChC1karia,nAT;!hDkC;!aF6;!ar7CeF5;aJevgenBSoEuC;en,rFVsCu3FvEF;if,uf;nDs6OusC;ouf,s6N;aCg;s,tC;an,h0;hli,nCrosE1ss09;is,nC;!iBU;avi2ho5;aPeNiDoCyaEL;jcieBJlfgang,odrFutR;lFnC;f8TsC;lCt1;ow;bGey,frEhe4QlC;aE5iCy;am,e,s;ed8iC;d,ed;eAur;i,ndeD2rn2sC;!l9t1;lDyC;l1ne;lDtC;!er;aCHy;aKernDAiFladDoC;jteB0lodymyr;!iC;mFQsDB;cFha0ktBZnceDrgCOvC;a0ek;!nC;t,zo;!e4StBV;lCnC7sily;!entC;in9J;ghE2lCm70nax,ri,sm0;riCyss87;ch,k;aWeRhNiLoGrEuDyC;!l2roEDs1;n6r6E;avD0eCist0oy,um0;ntCRvBKy;bFdAWmCny;!asDmCoharu;aFFie,y;!z;iA6y;mCt4;!my,othy;adEeoDia0SomC;!as;!dor91;!de4;dFrC;enBKrC;anBJeCy;ll,nBI;!dy;dgh,ha,iCnn2req,tsu5V;cDAka;aYcotWeThPiMlobod0oKpenc2tEurDvenAEyCzym1;ed,lvest2;aj,e9V;anFeDuC;!aA;fan17phEQvCwaA;e77ie;!islaCl9;v,w;lom1rBuC;leymaDHta;dDgmu9UlCm1yabonga;as,v8B;!dhart8Yn9;aEeClo75;lCrm0;d1t1;h9Jne,qu1Jun,wn,yne;aDbastiEDk2Yl5Mpp,rgCth,ymoCU;e1Dio;m4n;!tC;!ie,y;eDPlFmEnCq67tosCMul;dCj2UtiA5;e01ro;!iATkeB6mC4u5;!ik,vato9K;aZeUheC8iRoGuDyC;an,ou;b99dDf4peAssC;!elEG;ol00y;an,bLc7MdJel,geIh0lHmGnEry,sDyC;!ce;ar7Ocoe,s;!aCnBU;ld,n;an,eo;a7Ef;l7Jr;e3Eg2n9olfo,riC;go;bBNeDH;cCl9;ar87c86h54kCo;!ey,ie,y;cFeA3gDid,ubByCza;an8Ln06;g85iC;naC6s;ep;ch8Kfa5hHin2je8HlGmFndEoHpha5sDul,wi36yC;an,mo8O;h9Im4;alDSol3O;iD0on;f,ph;ul;e9CinC;cy,t1;aOeLhilJiFrCyoG;aDeC;m,st1;ka85v2O;eDoC;tr;r8GtC;er,ro;!ipCl6H;!p6U;dCLrcy,tC;ar,e9JrC;!o7;b9Udra8So9UscAHtri62ulCv8I;!ie,o7;ctav6Ji2lImHndrBRrGsDtCum6wB;is,to;aDc6k6m0vCwaBE;al79;ma;i,vR;ar,er;aDeksandr,ivC;er,i2;f,v;aNeLguyBiFoCu3O;aDel,j4l0ma0rC;beAm0;h,m;cFels,g5i9EkDlC;es,s;!au,h96l78olaC;!i,y;hCkCol76;ol75;al,d,il,ls1vC;ilAF;hom,tC;e,hC;anCy;!a5i5;aYeViLoGuDyC;l4Nr1;hamDr84staC;fa,p6E;ed,mG;di10e,hamEis4JntDritz,sCussa;es,he;e,y;ad,ed,mC;ad,ed;cGgu5hai,kFlEnDtchC;!e8O;a9Pik;house,o7t1;ae73eC3ha8Iolaj;ah,hDkC;!ey,y;aDeC;al,l;el,l;hDlv3rC;le,ri8Ev4T;di,met;ay0c00gn4hWjd,ks2NlTmadZnSrKsXtDuric7VxC;imilBKwe8B;eHhEi69tCus,y69;!eo,hCia7;ew,i67;eDiC;as,eu,s;us,w;j,o;cHiGkFlEqu8Qsha83tCv3;iCy;!m,n;in,on;el,o7us;a6Yo7us;!elCin,o7us;!l8o;frAEi5Zny,u5;achDcoCik;lm;ai,y;amDdi,e5VmC;oud;adCm6W;ou;aulCi9P;ay;aWeOiMloyd,oJuDyC;le,nd1;cFdEiDkCth2uk;a7e;gi,s,z;ov7Cv6Hw6H;!as,iC;a6Een;g0nn52renDuCvA4we7D;!iS;!zo;am,n4oC;n5r;a9Yevi,la5KnHoFst2thaEvC;eCi;nte;bo;nCpo8V;!a82el,id;!nC;aAy;mEnd1rDsz73urenCwr6K;ce,t;ry,s;ar,beAont;aOeIhalHiFla4onr63rDu5SylC;e,s;istCzysztof;i0oph2;er0ngsl9p,rC;ilA9k,ollos;ed,id;en0iGnDrmCv4Z;it;!dDnCt1;e2Ny;ri4Z;r,th;cp2j4mEna8BrDsp6them,uC;ri;im,l;al,il;a03eXiVoFuC;an,lCst3;en,iC;an,en,o,us;aQeOhKkub4AnIrGsDzC;ef;eDhCi9Wue;!ua;!f,ph;dCge;i,on;!aCny;h,s,th6J;anDnC;!ath6Hie,n72;!nC;!es;!l,sCy;ph;o,qu3;an,mC;!i,m6V;d,ffFns,rCs4;a7JemDmai7QoCry;me,ni1H;i9Dy;!e73rC;ey,y;cKdBkImHrEsDvi2yC;dBs1;on,p2;ed,oDrCv67;e6Qod;d,s61;al,es5Wis1;a,e,oCub;b,v;ob,qu13;aTbNchiMgLke53lija,nuKonut,rIsEtCv0;ai,suC;ki;aDha0i8XmaCsac;el,il;ac,iaC;h,s;a,vinCw3;!g;k,nngu6X;nac1Xor;ka;ai,rahC;im;aReLoIuCyd6;beAgGmFsC;eyDsC;a3e3;in,n;ber5W;h,o;m2raDsse3wC;a5Pie;c49t1K;a0Qct3XiGnDrC;beAman08;dr7VrC;iCy2N;!k,q1R;n0Tt3S;bKlJmza,nIo,rEsDyC;a5KdB;an,s0;lEo67r2IuCv9;hi5Hki,tC;a,o;an,ey;k,s;!im;ib;a08e00iUlenToQrMuCyorgy;iHnFsC;!taC;f,vC;!e,o;n6tC;er,h2;do,lC;herDlC;auCerQ;me;aEegCov2;!g,orC;!io,y;dy,h7C;dfr9nza3XrDttfC;ri6C;an,d47;!n;acoGlEno,oCuseppe;rgiCvan6O;!o,s;be6Ies,lC;es;mo;oFrC;aDha4HrC;it,y;ld,rd8;ffErgC;!e7iCy;!os;!r9;bElBrCv3;eCla1Nr4Hth,y;th;e,rC;e3YielC;!i4;aXeSiQlOorrest,rCyod2E;aHedFiC;edDtC;s,z;ri18;!d42eri11riC;ck,k;nCs2;cEkC;ie,lC;in,yn;esLisC;!co,z3M;etch2oC;ri0yd;d5lConn;ip;deriFliEng,rC;dinaCg4nan0B;nd8;pe,x;co;bCdi,hd;iEriC;ce,zC;io;an,en,o;benez2dZfrYit0lTmMnJo3rFsteb0th0ugenEvCymBzra;an,eCge4D;ns,re3K;!e;gi,iDnCrol,v3w3;est8ie,st;cCk;!h,k;o0DriCzo;co,qC;ue;aHerGiDmC;aGe3A;lCrh0;!iC;a10o,s;s1y;nu5;beAd1iEliDm2t1viCwood;n,s;ot28s;!as,j5Hot,sC;ha;a3en;!dGg6mFoDua2QwC;a2Pin;arC;do;oZuZ;ie;a04eTiOmitrNoFrag0uEwDylC;an,l0;ay3Hig4D;a3Gdl9nc0st3;minFnDri0ugCvydGy2S;!lF;!a36nCov0;e1Eie,y;go,iDykC;as;cCk;!k;i,y;armuFetDll1mitri7neCon,rk;sh;er,m6riC;ch;id;andLepak,j0lbeAmetri4nIon,rGsEvDwCxt2;ay30ey;en,in;hawn,moC;nd;ek,riC;ck;is,nC;is,y;rt;re;an,le,mKnIrEvC;e,iC;!d;en,iEne0PrCyl;eCin,yl;l45n;n,o,us;!iCny;el,lo;iCon;an,en,on;a0Fe0Ch03iar0lRoJrFuDyrC;il,us;rtC;!is;aEistC;iaCob12;no;ig;dy,lInErC;ey,neliCy;s,us;nEor,rDstaC;nt3;ad;or;by,e,in,l3t1;aHeEiCyde;fCnt,ve;fo0Xt1;menDt4;us;s,t;rFuDyC;!t1;dCs;e,io;enC;ce;aHeGrisC;!toC;phCs;!eC;!r;st2t;d,rCs;b5leC;s,y;cDdrCs6;ic;il;lHmFrC;ey,lDroCy;ll;!o7t1;er1iC;lo;!eb,v3;a09eZiVjorn,laUoSrEuCyr1;ddy,rtKst2;er;aKeFiEuDyC;an,ce,on;ce,no;an,ce;nDtC;!t;dDtC;!on;an,on;dFnC;dDisC;lav;en,on;!foOl9y;bby,gd0rCyd;is;i0Lke;bElDshC;al;al,lL;ek;nIrCshoi;at,nEtC;!raC;m,nd;aDhaCie;rd;rd8;!iDjam3nCs1;ie,y;to;kaMlazs,nHrC;n9rDtC;!holomew;eCy;tt;ey;dCeD;ar,iC;le;ar1Nb1Dd16fon15gust3hm12i0Zja0Yl0Bm07nTputsiSrGsaFugustEveDyCziz;a0kh0;ry;o,us;hi;aMchiKiJjun,mHnEon,tCy0;em,hCie,ur8;ur;aDoC;!ld;ud,v;aCin;an,nd8;!el,ki;baCe;ld;ta;aq;aMdHgel8tCw6;hoFoC;iDnC;!i8y;ne;ny;er7rCy;eDzC;ej;!as,i,j,s,w;!s;s,tolC;iCy;!y;ar,iEmaCos;nu5r;el;ne,r,t;aVbSdBeJfHiGl01onFphonsEt1vC;aPin;on;e,o;so,zo;!sR;!onZrC;ed;c,jaHksFssaHxC;!andC;er,rC;e,os,u;andCei;ar,er,r;ndC;ro;en;eDrecC;ht;rt8;dd3in,n,sC;taC;ir;ni;dDm6;ar;an,en;ad,eC;d,t;in;so;aGi,olErDvC;ik;ian8;f8ph;!o;mCn;!a;dGeFraDuC;!bakr,lfazl;hCm;am;!l;allFel,oulaye,ulC;!lDrahm0;an;ah,o;ah;av,on",Uncountable:"true\xA60:2E;1:2L;2:33;a2Ub2Lc29d22e1Rf1Ng1Eh16i11j0Yk0Wl0Rm0Hn0Do0Cp03rZsLt9uran2Jv7w3you gu0E;a5his17i4oo3;d,l;ldlife,ne;rm8t1;apor,ernacul29i3;neg28ol1Otae;eDhBiAo8r4un3yranny;a,gst1B;aff2Oea1Ko4ue nor3;th;o08u3;bleshoot2Ose1Tt;night,othpas1Vwn3;foEsfoE;me off,n;er3und1;e,mod2S;a,nnis;aDcCeBhAi9ki8o7p6t4u3weepstak0;g1Unshi2Hshi;ati08e3;am,el;ace2Keci0;ap,cc1meth2C;n,ttl0;lk;eep,ingl0or1C;lf,na1Gri0;ene1Kisso1C;d0Wfe2l4nd,t3;i0Iurn;m1Ut;abi0e4ic3;e,ke15;c3i01laxa11search;ogni10rea10;a9e8hys7luto,o5re3ut2;amble,mis0s3ten20;en1Zs0L;l3rk;i28l0EyH; 16i28;a24tr0F;nt3ti0M;i0s;bstetri24vercrowd1Qxyg09;a5e4owada3utella;ys;ptu1Ows;il poliZtional securi2;aAe8o5u3;m3s1H;ps;n3o1K;ey,o3;gamy;a3cha0Elancholy,rchandi1Htallurgy;sl0t;chine3g1Aj1Hrs,thema1Q; learn1Cry;aught1e6i5ogi4u3;ck,g12;c,s1M;ce,ghtn18nguis1LteratWv1;ath1isVss;ara0EindergartPn3;icke0Aowled0Y;e3upit1;a3llyfiGwel0G;ns;ce,gnor6mp5n3;forma00ter3;net,sta07;atiSort3rov;an18;a7e6isto09o3ung1;ckey,mework,ne4o3rseradi8spitali2use arrest;ky;s2y;adquarteXre;ir,libut,ppiHs3;hi3te;sh;ene8l6o5r3um,ymnas11;a3eZ;niUss;lf,re;ut3yce0F;en; 3ti0W;edit0Hpo3;ol;aNicFlour,o4urnit3;ure;od,rgive3uri1wl;ness;arCcono0LducaBlectr9n7quip8thi0Pvery6x3;ist4per3;ti0B;en0J;body,o08th07;joy3tertain3;ment;ici2o3;ni0H;tiS;nings,th;emi02i6o4raugh3ynas2;ts;pe,wnstai3;rs;abet0ce,s3;honZrepu3;te;aDelciChAivi07l8o3urrency;al,ld w6mmenta5n3ral,ttIuscoB;fusiHt 3;ed;ry;ar;assi01oth0;es;aos,e3;eMwK;us;d,rO;a8i6lood,owlHread5u3;ntGtt1;er;!th;lliarJs3;on;g3ss;ga3;ge;cKdviJeroGirFmBn6ppeal court,r4spi3thleL;rin;ithmet3sen3;ic;i6y3;o4th3;ing;ne;se;en5n3;es2;ty;ds;craft;bi8d3nau7;yna3;mi6;ce;id,ous3;ti3;cs",Infinitive:"true\xA60:9G;1:9T;2:AD;3:90;4:9Z;5:84;6:AH;7:A9;8:92;9:A0;A:AG;B:AI;C:9V;D:8R;E:8O;F:97;G:6H;H:7D;a94b8Hc7Jd68e4Zf4Mg4Gh4Ai3Qj3Nk3Kl3Bm34nou48o2Vp2Equ2Dr1Es0CtZuTvRwI;aOeNiLors5rI;eJiI;ng,te;ak,st3;d5e8TthI;draw,er;a2d,ep;i2ke,nIrn;d1t;aIie;liADniAry;nJpI;ho8Llift;cov1dJear8Hfound8DlIplug,rav82tie,ve94;eaAo3X;erIo;cut,go,staAFvalA3w2G;aSeQhNoMrIu73;aIe72;ffi3Smp3nsI;aBfo7CpI;i8oD;pp3ugh5;aJiJrIwaD;eat5i2;nk;aImA0;ch,se;ck3ilor,keImp1r8L;! paD;a0Ic0He0Fh0Bi0Al08mugg3n07o05p02qu01tUuLwI;aJeeIim;p,t5;ll7Wy;bNccMffLggeCmmKppJrI;mouFpa6Zvi2;o0re6Y;ari0on;er,i4;e7Numb;li9KmJsiIveD;de,st;er9it;aMe8MiKrI;ang3eIi2;ng27w;fIng;f5le;b,gg1rI;t3ve;a4AiA;a4UeJit,l7DoI;il,of;ak,nd;lIot7Kw;icEve;atGeak,i0O;aIi6;m,y;ft,ng,t;aKi6CoJriIun;nk,v6Q;ot,rt5;ke,rp5tt1;eIll,nd,que8Gv1w;!k,m;aven9ul8W;dd5tis1Iy;a0FeKiJoI;am,t,ut;d,p5;a0Ab08c06d05f01group,hea00iZjoi4lXmWnVpTq3MsOtMup,vI;amp,eJiIo3B;sEve;l,rI;e,t;i8rI;ie2ofE;eLiKpo8PtIurfa4;o24rI;aHiBuctu8;de,gn,st;mb3nt;el,hra0lIreseF;a4e71;d1ew,o07;aHe3Fo2;a7eFiIo6Jy;e2nq41ve;mbur0nf38;r0t;inKleBocus,rJuI;el,rbiA;aBeA;an4e;aBu4;ei2k8Bla43oIyc3;gni39nci3up,v1;oot,uI;ff;ct,d,liIp;se,ze;tt3viA;aAenGit,o7;aWerUinpoiFlumm1LoTrLuI;b47ke,niArIt;poDsuI;aFe;eMoI;cKd,fe4XhibEmo7noJpo0sp1tru6vI;e,i6o5L;un4;la3Nu8;aGclu6dJf1occupy,sup0JvI;a6BeF;etermi4TiB;aGllu7rtr5Ksse4Q;cei2fo4NiAmea7plex,sIva6;eve8iCua6;mp1rItrol,ve;a6It6E;bOccuNmEpMutLverIwe;l07sJtu6Yu0wI;helm;ee,h1F;gr5Cnu2Cpa4;era7i4Ipo0;py,r;ey,seItaH;r2ss;aMe0ViJoIultiply;leCu6Pw;micJnIspla4;ce,g3us;!k;iIke,na9;m,ntaH;aPeLiIo0u3N;ke,ng1quIv5;eIi6S;fy;aKnIss5;d,gI;th5;rn,ve;ng2Gu1N;eep,idnJnI;e4Cow;ap;oHuI;gg3xtaI;po0;gno8mVnIrk;cTdRfQgeChPitia7ju8q1CsNtKun6EvI;a6eIo11;nt,rt,st;erJimi6BoxiPrI;odu4u6;aBn,pr03ru6C;iCpi8tIu8;all,il,ruB;abEibE;eCo3Eu0;iIul9;ca7;i7lu6;b5Xmer0pI;aLer4Uin9ly,oJrI;e3Ais6Bo2;rt,se,veI;riA;le,rt;aLeKiIoiCuD;de,jaInd1;ck;ar,iT;mp1ng,pp5raIve;ng5Mss;ath1et,iMle27oLrI;aJeIow;et;b,pp3ze;!ve5A;gg3ve;aTer45i5RlSorMrJuI;lf4Cndrai0r48;eJiIolic;ght5;e0Qsh5;b3XeLfeEgJsI;a3Dee;eIi2;!t;clo0go,shIwa4Z;ad3F;att1ee,i36;lt1st5;a0OdEl0Mm0FnXquip,rWsVtGvTxI;aRcPeDhOiNpJtIu6;ing0Yol;eKi8lIo0un9;aHoI;it,re;ct,di7l;st,t;a3oDu3B;e30lI;a10u6;lt,mi28;alua7oI;ke,l2;chew,pou0tab19;a0u4U;aYcVdTfSgQhan4joy,lPqOrNsuMtKvI;e0YisI;a9i50;er,i4rI;aHenGuC;e,re;iGol0F;ui8;ar9iC;a9eIra2ulf;nd1;or4;ang1oIu8;r0w;irc3lo0ou0ErJuI;mb1;oaGy4D;b3ct;bKer9pI;hasiIow1;ze;aKody,rI;a4oiI;d1l;lm,rk;ap0eBuI;ci40de;rIt;ma0Rn;a0Re04iKo,rIwind3;aw,ed9oI;wn;agno0e,ff1g,mi2Kne,sLvI;eIul9;rIst;ge,t;aWbVcQlod9mant3pNru3TsMtI;iIoDu37;lJngI;uiA;!l;ol2ua6;eJlIo0ro2;a4ea0;n0r0;a2Xe36lKoIu0S;uIv1;ra9;aIo0;im;a3Kur0;b3rm;af5b01cVduBep5fUliTmQnOpMrLsiCtaGvI;eIol2;lop;ch;a20i2;aDiBloIoD;re,y;oIy;te,un4;eJoI;liA;an;mEv1;a4i0Ao06raud,y;ei2iMla8oKrI;ee,yI;!pt;de,mIup3;missi34po0;de,ma7ph1;aJrief,uI;g,nk;rk;mp5rk5uF;a0Dea0h0Ai09l08oKrIurta1G;a2ea7ipp3uI;mb3;ales4e04habEinci6ll03m00nIrro6;cXdUfQju8no7qu1sLtKvI;eIin4;ne,r9y;aHin2Bribu7;er2iLoli2Epi8tJuI;lt,me;itu7raH;in;d1st;eKiJoIroFu0;rm;de,gu8rm;ss;eJoI;ne;mn,n0;eIlu6ur;al,i2;buCe,men4pI;eIi3ly;l,te;eBi6u6;r4xiC;ean0iT;rcumveFte;eJirp,oI;o0p;riAw;ncIre5t1ulk;el;a02eSi6lQoPrKuI;iXrIy;st,y;aLeaKiJoad5;en;ng;stfeLtX;ke;il,l11mba0WrrMth1;eIow;ed;!coQfrie1LgPhMliLqueaKstJtrIwild1;ay;ow;th;e2tt3;a2eJoI;ld;ad;!in,ui3;me;bysEckfi8ff3tI;he;b15c0Rd0Iff0Ggree,l0Cm09n03ppZrXsQttOuMvJwaE;it;eDoI;id;rt;gIto0X;meF;aIeCraB;ch,in;pi8sJtoI;niA;aKeIi04u8;mb3rt,ss;le;il;re;g0Hi0ou0rI;an9i2;eaKly,oiFrI;ai0o2;nt;r,se;aMi0GnJtI;icipa7;eJoIul;un4y;al;ly0;aJu0;se;lga08ze;iKlI;e9oIu6;t,w;gn;ix,oI;rd;a03jNmiKoJsoI;rb;pt,rn;niIt;st1;er;ouJuC;st;rn;cLhie2knowled9quiItiva7;es4re;ce;ge;eQliOoKrJusI;e,tom;ue;mIst;moJpI;any,liA;da7;ma7;te;pt;andPduBet,i6oKsI;coKol2;ve;liArt,uI;nd;sh;de;ct;on",Person:"true\xA60:1Q;a29b1Zc1Md1Ee18f15g13h0Ri0Qj0Nk0Jl0Gm09n06o05p00rPsItCusain bolt,v9w4xzibit,y1;anni,oko on2uji,v1;an,es;en,o;a3ednesday adams,i2o1;lfram,o0Q;ll ferrell,z khalifa;lt disn1Qr1;hol,r0G;a2i1oltai06;n dies0Zrginia wo17;lentino rossi,n goG;a4h3i2ripp,u1yra banks;lZpac shakur;ger woods,mba07;eresa may,or;kashi,t1ylor;um,ya1B;a5carlett johanss0h4i3lobodan milosevic,no2ocr1Lpider1uperm0Fwami; m0Em0E;op dogg,w whi1H;egfried,nbad;akespeaTerlock holm1Sia labeouf;ddam hussa16nt1;a cla11ig9;aAe6i5o3u1za;mi,n dmc,paul,sh limbau1;gh;bin hood,d stew16nald1thko;in0Mo;han0Yngo starr,valdo;ese witherspo0i1mbrandt;ll2nh1;old;ey,y;chmaninoff,ffi,iJshid,y roma1H;a4e3i2la16o1uff daddy;cahont0Ie;lar,p19;le,rZ;lm17ris hilt0;leg,prah winfr0Sra;a2e1iles cra1Bostradam0J; yo,l5tt06wmQ;pole0s;a5e4i2o1ubar03;by,lie5net,rriss0N;randa ju1tt romn0M;ly;rl0GssiaB;cklemo1rkov,s0ta hari,ya angelou;re;ady gaga,e1ibera0Pu;bron jam0Xch wale1e;sa;anye west,e3i1obe bryant;d cudi,efer suther1;la0P;ats,sha;a2effers0fk,k rowling,rr tolki1;en;ck the ripp0Mwaharlal nehru,y z;liTnez,ron m7;a7e5i3u1;lk hog5mphrey1sa01;! bog05;l1tl0H;de; m1dwig,nry 4;an;ile selassFlle ber4m3rrison1;! 1;ford;id,mo09;ry;ast0iannis,o1;odwPtye;ergus0lorence nightinga08r1;an1ederic chopN;s,z;ff5m2nya,ustaXzeki1;el;eril lagasse,i1;le zatop1nem;ek;ie;a6e4i2octor w1rake;ho;ck w1ego maradoC;olf;g1mi lovaOnzel washingt0;as;l1nHrth vadR;ai lNt0;a8h5lint0o1thulhu;n1olio;an,fuci1;us;on;aucKop2ristian baMy1;na;in;millo,ptain beefhe4r1;dinal wols2son1;! palmF;ey;art;a8e5hatt,i3oHro1;ck,n1;te;ll g1ng crosby;atB;ck,nazir bhut2rtil,yon1;ce;to;nksy,rack ob1;ama;l 6r3shton kutch2vril lavig8yn ra1;nd;er;chimed2istot1;le;es;capo2paci1;no;ne",Adjective:"true\xA60:AI;1:BS;2:BI;3:BA;4:A8;5:84;6:AV;7:AN;8:AF;9:7H;A:BQ;B:AY;C:BC;D:BH;E:9Y;aA2b9Ec8Fd7We79f6Ng6Eh61i4Xj4Wk4Tl4Im41n3Po36p2Oquart7Pr2Ds1Dt14uSvOwFye29;aMeKhIiHoF;man5oFrth7G;dADzy;despreB1n w97s86;acked1UoleF;!sa6;ather1PeFll o70ste1D;!k5;nt1Ist6Ate4;aHeGiFola5T;bBUce versa,gi3Lle;ng67rsa5R;ca1gBSluAV;lt0PnLpHrGsFttermoBL;ef9Ku3;b96ge1; Hb32pGsFtiAH;ca6ide d4R;er,i85;f52to da2;a0Fbeco0Hc0Bd04e02f01gu1XheaBGiXkn4OmUnTopp06pRrNsJtHus0wF;aFiel3K;nt0rra0P;app0eXoF;ld,uS;eHi37o5ApGuF;perv06spec39;e1ok9O;en,ttl0;eFu5;cogn06gul2RlGqu84sF;erv0olv0;at0en33;aFrecede0E;id,rallel0;am0otic0;aFet;rri0tF;ch0;nFq26vers3;sur0terFv7U;eFrupt0;st0;air,inish0orese98;mploy0n7Ov97xpF;ect0lain0;eHisFocume01ue;clFput0;os0;cid0rF;!a8Scov9ha8Jlyi8nea8Gprivileg0sMwF;aFei9I;t9y;hGircumcFonvin2U;is0;aFeck0;lleng0rt0;b20ppea85ssuGttend0uthorF;iz0;mi8;i4Ara;aLeIhoHip 25oGrF;anspare1encha1i2;geth9leADp notch,rpB;rny,ugh6H;ena8DmpGrFs6U;r49tia4;eCo8P;leFst4M;nt0;a0Dc09e07h06i04ki03l01mug,nobbi4XoVpRqueami4XtKuFymb94;bHccinAi generis,pFr5;erFre7N;! dup9b,vi70;du0li7Lp6IsFurb7J;eq9Atanda9X;aKeJi16o2QrGubboFy4Q;rn;aightFin5GungS; fFfF;or7V;adfa9Pri6;lwa6Ftu82;arHeGir6NlendBot Fry;on;c3Qe1S;k5se; call0lImb9phistic16rHuFviV;ndFth1B;proof;dBry;dFub6; o2A;e60ipF;pe4shod;ll0n d7R;g2HnF;ceEg6ist9;am3Se9;co1Zem5lfFn6Are7; suf4Xi43;aGholFient3A;ar5;rlFt4A;et;cr0me,tisfac7F;aOeIheumatoBiGoF;bu8Ztt7Gy3;ghtFv3; 1Sf6X;cJdu8PlInown0pro69sGtF;ard0;is47oF;lu2na1;e1Suc45;alcit8Xe1ondi2;bBci3mpa1;aSePicayu7laOoNrGuF;bl7Tnjabi;eKiIoF;b7VfGmi49pFxi2M;er,ort81;a7uD;maFor,sti7va2;!ry;ciDexis0Ima2CpaB;in55puli8G;cBid;ac2Ynt 3IrFti2;ma40tFv7W;!i3Z;i2YrFss7R;anoBtF; 5XiF;al,s5V;bSffQkPld OnMrLth9utKverF;!aIbMdHhGni75seas,t,wF;ei74rou74;a63e7A;ue;ll;do1Ger,si6A;d3Qg2Aotu5Z; bFbFe on o7g3Uli7;oa80;fashion0school;!ay; gua7XbFha5Uli7;eat;eHligGsF;ce7er0So1C;at0;diFse;a1e1;aOeNiMoGuF;anc0de; moEnHrthFt6V;!eFwe7L;a7Krn;chaGdescri7Iprof30sF;top;la1;ght5;arby,cessa4ighbor5wlyw0xt;k0usiaFv3;ti8;aQeNiLoHuF;dIltiF;facet0p6;deHlGnFot,rbBst;ochro4Xth5;dy;rn,st;ddle ag0nF;dbloZi,or;ag9diocEga,naGrFtropolit4Q;e,ry;ci8;cIgenta,inHj0Fkeshift,mmGnFri4Oscu61ver18;da5Dy;ali4Lo4U;!stream;abEho;aOeLiIoFumberi8;ngFuti1R;stan3RtF;erm,i4H;ghtGteraF;l,ry,te;heart0wei5O;ft JgFss9th3;al,eFi0M;nda4;nguBps0te5;apGind5noF;wi8;ut;ad0itte4uniW;ce co0Hgno6Mll0Cm04nHpso 2UrF;a2releF;va1; ZaYcoWdReQfOgrNhibi4Ri05nMoLsHtFvalu5M;aAeF;nDrdepe2K;a7iGolFuboI;ub6ve1;de,gF;nifica1;rdi5N;a2er;own;eriIiLluenVrF;ar0eq5H;pt,rt;eHiGoFul1O;or;e,reA;fiFpe26termi5E;ni2;mpFnsideCrreA;le2;ccuCdeq5Ene,ppr4J;fFsitu,vitro;ro1;mJpF;arHeGl15oFrop9;li2r11;n2LrfeA;ti3;aGeFi18;d4BnD;tuE;egGiF;c0YteC;al,iF;tiF;ma2;ld;aOelNiLoFuma7;a4meInHrrGsFur5;ti6;if4E;e58o3U; ma3GsF;ick;ghfalut2HspF;an49;li00pf33;i4llow0ndGrdFtM; 05coEworki8;sy,y;aLener44iga3Blob3oKrGuF;il1Nng ho;aFea1Fizzl0;cGtF;ef2Vis;ef2U;ld3Aod;iFuc2D;nf2R;aVeSiQlOoJrF;aGeFil5ug3;q43tf2O;gFnt3S;i6ra1;lk13oHrF; keeps,eFge0Vm9tu41;g0Ei2Ds3R;liF;sh;ag4Mowe4uF;e1or45;e4nF;al,i2;d Gmini7rF;ti6ve1;up;bl0lDmIr Fst pac0ux;oGreacF;hi8;ff;ed,ili0R;aXfVlTmQnOqu3rMthere3veryday,xF;aApIquisi2traHuF;be48lF;ta1;!va2L;edRlF;icF;it;eAstF;whi6; Famor0ough,tiE;rou2sui2;erGiF;ne1;ge1;dFe2Aoq34;er5;ficF;ie1;g9sF;t,ygF;oi8;er;aWeMiHoGrFue;ea4owY;ci6mina1ne,r31ti8ubQ;dact2Jfficult,m,sGverF;ge1se;creGePjoi1paCtF;a1inA;et,te; Nadp0WceMfiLgeneCliJmuEpeIreliAsGvoF;id,ut;pFtitu2ul1L;eCoF;nde1;ca2ghF;tf13;a1ni2;as0;facto;i5ngero0I;ar0Ce09h07i06l05oOrIuF;rmudgeon5stoma4teF;sy;ly;aIeHu1EystalF; cleFli7;ar;epy;fFv17z0;ty;erUgTloSmPnGrpoCunterclVveFy;rt;cLdJgr21jIsHtrF;aFi2;dic0Yry;eq1Yta1;oi1ug3;escenFuN;di8;a1QeFiD;it0;atoDmensuCpF;ass1SulF;so4;ni3ss3;e1niza1;ci1J;ockwiD;rcumspeAvil;eFintzy;e4wy;leGrtaF;in;ba2;diac,ef00;a00ePiLliJoGrFuck nak0;and new,isk,on22;gGldface,naF; fi05fi05;us;nd,tF;he;gGpartisFzarE;an;tiF;me;autifOhiNlLnHsFyoN;iWtselF;li8;eGiFt;gn;aFfi03;th;at0oF;v0w;nd;ul;ckwards,rF;e,rT; priori,b13c0Zd0Tf0Ng0Ihe0Hl09mp6nt06pZrTsQttracti0MuLvIwF;aGkF;wa1B;ke,re;ant garGeraF;ge;de;diIsteEtF;heFoimmu7;nt07;re;to4;hGlFtu2;eep;en;bitIchiv3roHtF;ifiFsy;ci3;ga1;ra4;ry;pFt;aHetizi8rF;oprF;ia2;llFre1;ed,i8;ng;iquFsy;at0e;ed;cohKiJkaHl,oGriFterX;ght;ne,of;li7;ne;ke,ve;olF;ic;ad;ain07gressiIi6rF;eeF;ab6;le;ve;fGraB;id;ectGlF;ue1;ioF;na2; JaIeGvF;erD;pt,qF;ua2;ma1;hoc,infinitum;cuCquiGtu3u2;al;esce1;ra2;erSjeAlPoNrKsGuF;nda1;e1olu2trF;aAuD;se;te;eaGuF;pt;st;aFve;rd;aFe;ze;ct;ra1;nt",Pronoun:"true\xA6elle,h3i2me,she,th0us,we,you;e0ou;e,m,y;!l,t;e,im",Preposition:"true\xA6aPbMcLdKexcept,fIinGmid,notwithstandiWoDpXqua,sCt7u4v2w0;/o,hereSith0;! whHin,oW;ersus,i0;a,s a vis;n1p0;!on;like,til;h1ill,oward0;!s;an,ereby,r0;ough0u;!oM;ans,ince,o that,uch G;f1n0ut;!to;!f;! 0to;effect,part;or,r0;om;espite,own,u3;hez,irca;ar1e0oBy;sides,tween;ri7;bo8cross,ft7lo6m4propos,round,s1t0;!op;! 0;a whole,long 0;as;id0ong0;!st;ng;er;ut",SportsTeam:"true\xA60:18;1:1E;2:1D;3:14;a1Db15c0Sd0Kfc dallas,g0Ihouston 0Hindiana0Gjacksonville jagua0k0El0Am01new UoRpKqueens parkJreal salt lake,sBt6utah jazz,vancouver whitecaps,w4yW;ashington 4h10;natio1Mredski2wizar0W;ampa bay 7e6o4;ronto 4ttenham hotspur;blue ja0Mrapto0;nnessee tita2xasD;buccanee0ra0K;a8eattle 6porting kansas0Wt4; louis 4oke0V;c1Drams;marine0s4;eah13ounH;cramento Rn 4;antonio spu0diego 4francisco gJjose earthquak1;char08paB; ran07;a9h6ittsburgh 5ortland t4;imbe0rail blaze0;pirat1steele0;il4oenix su2;adelphia 4li1;eagl1philNunE;dr1;akland 4klahoma city thunder,rlando magic;athle0Lrai4;de0;england 8orleans 7york 4;g5je3knYme3red bul0Xy4;anke1;ian3;pelica2sain3;patrio3revolut4;ion;anchEeAi4ontreal impact;ami 8lwaukee b7nnesota 4;t5vi4;kings;imberwolv1wi2;rewe0uc0J;dolphi2heat,marli2;mphis grizz4ts;li1;a6eic5os angeles 4;clippe0dodFlaB;esterV; galaxy,ke0;ansas city 4nF;chiefs,roya0D; pace0polis col3;astr05dynamo,rocke3texa2;olden state warrio0reen bay pac4;ke0;allas 8e4i04od6;nver 6troit 4;lio2pisto2ti4;ge0;broncYnugge3;cowbo5maver4;icZ;ys;arEelLhAincinnati 8leveland 6ol4;orado r4umbus crew sc;api7ocki1;brow2cavalie0guar4in4;dia2;bengaVre4;ds;arlotte horAicago 4;b5cubs,fire,wh4;iteB;ea0ulQ;diff4olina panthe0; city;altimore Alackburn rove0oston 6rooklyn 4uffalo bilN;ne3;ts;cel5red4; sox;tics;rs;oriol1rave2;rizona Ast8tlanta 4;brav1falco2h4;awA;ns;es;on villa,r4;os;c6di4;amondbac4;ks;ardi4;na4;ls",Unit:"true\xA6a07b04cXdWexVfTgRhePinYjoule0BkMlJmDnan08oCp9quart0Bsq ft,t7volts,w6y2ze3\xB01\xB50;g,s;c,f,n;dVear1o0;ttR; 0s 0;old;att,b;erNon0;!ne02;ascals,e1i0;cXnt00;rcent,tJ;hms,unceY;/s,e4i0m\xB2,\xB2,\xB3;/h,cro2l0;e0liK;!\xB2;grLsR;gCtJ;it1u0;menQx;erPreP;b5elvins,ilo1m0notO;/h,ph,\xB2;!byGgrEmCs;ct0rtzL;aJogrC;allonJb0ig3rB;ps;a0emtEl oz,t4;hrenheit,radG;aby9;eci3m1;aratDe1m0oulombD;\xB2,\xB3;lsius,nti0;gr2lit1m0;et0;er8;am7;b1y0;te5;l,ps;c2tt0;os0;econd1;re0;!s","Noun|Gerund":"true\xA60:3O;1:3M;2:3N;3:3D;4:32;5:2V;6:3E;7:3K;8:36;9:3J;A:3B;a3Pb37c2Jd27e23f1Vg1Sh1Mi1Ij1Gk1Dl18m13n11o0Wp0Pques0Sr0EsTtNunderMvKwFyDzB;eroi0oB;ni0o3P;aw2eB;ar2l3;aEed4hispe5i5oCrB;ap8est3i1;n0ErB;ki0r31;i1r2s9tc9;isualizi0oB;lunt1Vti0;stan4ta6;aFeDhin6iCraBy8;c6di0i2vel1M;mi0p8;aBs1;c9si0;l6n2s1;aUcReQhOiMkatKl2Wmo6nowJpeItFuCwB;ea5im37;b35f0FrB;fi0vB;e2Mi2J;aAoryt1KrCuB;d2KfS;etc9ugg3;l3n4;bCi0;ebBi0;oar4;gnBnAt1;a3i0;ip8oB;p8rte2u1;a1r27t1;hCo5reBulp1;a2Qe2;edu3oo3;i3yi0;aKeEi4oCuB;li0n2;oBwi0;fi0;aFcEhear7laxi0nDpor1sB;pon4tructB;r2Iu5;de5;or4yc3;di0so2;p8ti0;aFeacek20laEoCrBublis9;a1Teten4in1oces7;iso2siB;tio2;n2yi0;ckaAin1rB;ki0t1O;fEpeDrganiCvB;erco24ula1;si0zi0;ni0ra1;fe5;avi0QeBur7;gotia1twor6;aDeCi2oB;de3nito5;a2dita1e1ssaA;int0XnBrke1;ifUufactu5;aEeaDiBodAyi0;cen7f1mi1stB;e2i0;r2si0;n4ug9;iCnB;ea4it1;c6l3;ogAuB;dAgg3stif12;ci0llust0VmDnBro2;nova1sp0NterBven1;ac1vie02;agi2plo4;aDea1iCoBun1;l4w3;ki0ri0;nd3rB;roWvB;es1;aCene0Lli4rBui4;ee1ie0N;rde2the5;aHeGiDlCorBros1un4;e0Pmat1;ir1oo4;gh1lCnBs9;anZdi0;i0li0;e3nX;r0Zscina1;a1du01nCxB;erci7plo5;chan1di0ginB;ee5;aLeHiGoub1rCum8wB;el3;aDeCiB;bb3n6vi0;a0Qs7;wi0;rTscoDvi0;ba1coZlBvelo8;eCiB;ve5;ga1;nGti0;aVelebUhSlPoDrBur3yc3;aBos7yi0;f1w3;aLdi0lJmFnBo6pi0ve5;dDsCvinB;ci0;trBul1;uc1;muniDpB;lBo7;ai2;ca1;lBo5;ec1;c9ti0;ap8eaCimToBubT;ni0t9;ni0ri0;aBee5;n1t1;ra1;m8rCs1te5;ri0;vi0;aPeNitMlLoGrDuB;dge1il4llBr8;yi0;an4eat9oadB;cas1;di0;a1mEokB;i0kB;ee8;pi0;bi0;es7oa1;c9i0;gin2lonAt1;gi0;bysit1c6ki0tt3;li0;ki0;bando2cGdverti7gi0pproac9rgDssuCtB;trac1;mi0;ui0;hi0;si0;coun1ti0;ti0;ni0;ng",PhrasalVerb:"true\xA60:92;1:96;2:8H;3:8V;4:8A;5:83;6:85;7:98;8:90;9:8G;A:8X;B:8R;C:8U;D:8S;E:70;F:97;G:8Y;H:81;I:7H;J:79;a9Fb7Uc6Rd6Le6Jf5Ig50h4Biron0j47k40l3Em31n2Yo2Wp2Cquiet Hr1Xs0KtZuXvacuu6QwNyammerBzK;ero Dip LonK;e0k0;by,ov9up;aQeMhLiKor0Mrit19;mp0n3Fpe0r5s5;ackAeel Di0S;aLiKn33;gh 3Wrd0;n Dr K;do1in,oJ;it 79k5lk Lrm 69sh Kt83v60;aw3do1o7up;aw3in,oC;rgeBsK;e 2herE;a00eYhViRoQrMuKypP;ckErn K;do1in,oJup;aLiKot0y 30;ckl7Zp F;ck HdK;e 5Y;n7Wp 3Es5K;ck MdLe Kghten 6me0p o0Rre0;aw3ba4do1in,up;e Iy 2;by,oG;ink Lrow K;aw3ba4in,up;ba4ov9up;aKe 77ll62;m 2r 5M;ckBke Llk K;ov9shit,u47;aKba4do1in,leave,o4Dup;ba4ft9pa69w3;a0Vc0Te0Mh0Ii0Fl09m08n07o06p01quar5GtQuOwK;earMiK;ngLtch K;aw3ba4o8K; by;cKi6Bm 2ss0;k 64;aReQiPoNrKud35;aigh2Det75iK;ke 7Sng K;al6Yup;p Krm2F;by,in,oG;c3Ln3Lr 2tc4O;p F;c3Jmp0nd LrKveAy 2O;e Ht 2L;ba4do1up;ar3GeNiMlLrKurB;ead0ingBuc5;a49it 6H;c5ll o3Cn 2;ak Fe1Xll0;a3Bber 2rt0und like;ap 5Vow Duggl5;ash 6Noke0;eep NiKow 6;cLp K;o6Dup;e 68;in,oK;ff,v9;de19gn 4NnKt 6Gz5;gKkE; al6Ale0;aMoKu5W;ot Kut0w 7M;aw3ba4f48oC;c2WdeEk6EveA;e Pll1Nnd Orv5tK; Ktl5J;do1foLin,o7upK;!on;ot,r5Z;aw3ba4do1in,o33up;oCto;al66out0rK;ap65ew 6J;ilAv5;aXeUiSoOuK;b 5Yle0n Kstl5;aLba4do1inKo2Ith4Nu5P;!to;c2Xr8w3;ll Mot LpeAuK;g3Ind17;a2Wf3Po7;ar8in,o7up;ng 68p oKs5;ff,p18;aKelAinEnt0;c6Hd K;o4Dup;c27t0;aZeYiWlToQrOsyc35uK;ll Mn5Kt K;aKba4do1in,oJto47up;pa4Dw3;a3Jdo1in,o21to45up;attleBess KiNop 2;ah2Fon;iLp Kr4Zu1Gwer 6N;do1in,o6Nup;nt0;aLuK;gEmp 6;ce u20y 6D;ck Kg0le 4An 6p5B;oJup;el 5NncilE;c53ir 39n0ss MtLy K;ba4oG; Hc2R;aw3ba4in,oJ;pKw4Y;e4Xt D;aLerd0oK;dAt53;il Hrrow H;aTeQiPoLuK;ddl5ll I;c1FnkeyMp 6uthAve K;aKdo1in,o4Lup;l4Nw3; wi4K;ss0x 2;asur5e3SlLss K;a21up;t 6;ke Ln 6rKs2Ax0;k 6ryA;do,fun,oCsure,up;a02eViQoLuK;ck0st I;aNc4Fg MoKse0;k Kse4D;aft9ba4do1forw37in56o0Zu46;in,oJ;d 6;e NghtMnLsKve 00;ten F;e 2k 2; 2e46;ar8do1in;aMt LvelK; oC;do1go,in,o7up;nEve K;in,oK;pKut;en;c5p 2sh LtchBughAy K;do1o59;in4Po7;eMick Lnock K;do1oCup;oCup;eLy K;in,up;l Ip K;aw3ba4do1f04in,oJto,up;aMoLuK;ic5mpE;ke3St H;c43zz 2;a01eWiToPuK;nLrrKsh 6;y 2;keLt K;ar8do1;r H;lKneErse3K;d Ke 2;ba4dKfast,o0Cup;ear,o1;de Lt K;ba4on,up;aw3o7;aKlp0;d Ml Ir Kt 2;fKof;rom;f11in,o03uW;cPm 2nLsh0ve Kz2P;at,it,to;d Lg KkerP;do1in,o2Tup;do1in,oK;ut,v9;k 2;aZeTive Rloss IoMrLunK; f0S;ab hold,in43ow 2U; Kof 2I;aMb1Mit,oLr8th1IuK;nd9;ff,n,v9;bo7ft9hQw3;aw3bKdo1in,oJrise,up,w3;a4ir2H;ar 6ek0t K;aLb1Fdo1in,oKr8up;ff,n,ut,v9;cLhKl2Fr8t,w3;ead;ross;d aKng 2;bo7;a0Ee07iYlUoQrMuK;ck Ke2N;ar8up;eLighten KownBy 2;aw3oG;eKshe27; 2z5;g 2lMol Krk I;aKwi20;bo7r8;d 6low 2;aLeKip0;sh0;g 6ke0mKrKtten H;e F;gRlPnNrLsKzzle0;h F;e Km 2;aw3ba4up;d0isK;h 2;e Kl 1T;aw3fPin,o7;ht ba4ure0;ePnLsK;s 2;cMd K;fKoG;or;e D;d04l 2;cNll Krm0t1G;aLbKdo1in,o09sho0Eth08victim;a4ehi2O;pa0C;e K;do1oGup;at Kdge0nd 12y5;in,o7up;aOi1HoNrK;aLess 6op KuN;aw3b03in,oC;gBwB; Ile0ubl1B;m 2;a0Ah05l02oOrLut K;aw3ba4do1oCup;ackBeep LoKy0;ss Dwd0;by,do1in,o0Uup;me NoLuntK; o2A;k 6l K;do1oG;aRbQforOin,oNtKu0O;hLoKrue;geth9;rough;ff,ut,v9;th,wK;ard;a4y;paKr8w3;rt;eaLose K;in,oCup;n 6r F;aNeLiK;ll0pE;ck Der Kw F;on,up;t 2;lRncel0rOsMtch LveE; in;o1Nup;h Dt K;doubt,oG;ry LvK;e 08;aw3oJ;l Km H;aLba4do1oJup;ff,n,ut;r8w3;a0Ve0MiteAl0Fo04rQuK;bblNckl05il0Dlk 6ndl05rLsKtMy FzzA;t 00;n 0HsK;t D;e I;ov9;anWeaUiLush K;oGup;ghQng K;aNba4do1forMin,oLuK;nd9p;n,ut;th;bo7lKr8w3;ong;teK;n 2;k K;do1in,o7up;ch0;arTg 6iRn5oPrNssMttlLunce Kx D;aw3ba4;e 6; ar8;e H;do1;k Dt 2;e 2;l 6;do1up;d 2;aPeed0oKurt0;cMw K;aw3ba4do1o7up;ck;k K;in,oC;ck0nk0stA; oQaNef 2lt0nd K;do1ov9up;er;up;r Lt K;do1in,oCup;do1o7;ff,nK;to;ck Pil0nMrgLsK;h D;ainBe D;g DkB; on;in,o7;aw3do1in,oCup;ff,ut;ay;ct FdQir0sk MuctionA; oG;ff;ar8o7;ouK;nd; o7;d K;do1oKup;ff,n;wn;o7up;ut",ProperNoun:"true\xA6aIbDc8dalhousHe7f5gosford,h4iron maiden,kirby,landsdowne,m2nis,r1s0wembF;herwood,paldiB;iel,othwe1;cgi0ercedes,issy;ll;intBudsB;airview,lorence,ra0;mpt9nco;lmo,uro;a1h0;arlt6es5risti;rl0talina;et4i0;ng;arb3e0;et1nt0rke0;ley;on;ie;bid,jax","Person|Place":"true\xA6a8d6h4jordan,k3orlando,s1vi0;ctor9rgin9;a0ydney;lvador,mara,ntia4;ent,obe;amil0ous0;ton;arw2ie0;go;lexandr1ust0;in;ia",LastName:"true\xA60:BR;1:BF;2:B5;3:BH;4:AX;5:9Y;6:B6;7:BK;8:B0;9:AV;A:AL;B:8Q;C:8G;D:7K;E:BM;F:AH;aBDb9Zc8Wd88e81f7Kg6Wh64i60j5Lk4Vl4Dm39n2Wo2Op25quispe,r1Ls0Pt0Ev03wTxSyKzG;aIhGimmerm6A;aGou,u;ng,o;khar5ytsE;aKeun9BiHoGun;koya32shiBU;!lG;diGmaz;rim,z;maGng;da,g52mo83sGzaC;aChiBV;iao,u;aLeJiHoGright,u;jcA5lff,ng;lGmm0nkl0sniewsC;kiB1liams33s3;bGiss,lt0;b,er,st0;a6Vgn0lHtG;anabe,s3;k0sh,tG;e2Non;aLeKiHoGukD;gt,lk5roby5;dHllalGnogr3Kr1Css0val3S;ba,ob1W;al,ov4;lasHsel8W;lJn dIrgBEsHzG;qu7;ilyEqu7siljE;en b6Aijk,yk;enzueAIverde;aPeix1VhKi2j8ka43oJrIsui,uG;om5UrG;c2n0un1;an,emblA7ynisC;dorAMlst3Km4rrAth;atch0i8UoG;mHrG;are84laci79;ps3sG;en,on;hirDkah9Mnaka,te,varA;a06ch01eYhUiRmOoMtIuHvGzabo;en9Jobod3N;ar7bot4lliv2zuC;aIeHoG;i7Bj4AyanAB;ele,in2FpheBvens25;l8rm0;kol5lovy5re7Tsa,to,uG;ng,sa;iGy72;rn5tG;!h;l71mHnGrbu;at9cla9Egh;moBo7M;aIeGimizu;hu,vchG;en8Luk;la,r1G;gu9infe5YmGoh,pulveA7rra5P;jGyG;on5;evi6iltz,miHneid0roed0uGwarz;be3Elz;dHtG;!t,z;!t;ar4Th8ito,ka4OlJnGr4saCto,unde19v4;ch7dHtGz;a5Le,os;b53e16;as,ihDm4Po0Y;aVeSiPoJuHyG;a6oo,u;bio,iz,sG;so,u;bKc8Fdrigue67ge10j9YmJosevelt,sItHux,wG;e,li6;a9Ch;enb4Usi;a54e4L;erts15i93;bei4JcHes,vGzzo;as,e9;ci,hards12;ag2es,iHut0yG;es,nol5N;s,t0;dImHnGsmu97v6C;tan1;ir7os;ic,u;aUeOhMiJoHrGut8;asad,if6Zochazk27;lishc2GpGrti72u10we76;e3Aov51;cHe45nG;as,to;as70hl0;aGillips;k,m,n6I;a3Hde3Wete0Bna,rJtG;ersHrovGters54;!a,ic;!en,on;eGic,kiBss3;i9ra,tz,z;h86k,padopoulIrk0tHvG;ic,l4N;el,te39;os;bMconn2Ag2TlJnei6PrHsbor6XweBzG;dem7Rturk;ella4DtGwe6N;ega,iz;iGof7Hs8I;vGyn1R;ei9;aSri1;aPeNiJoGune50ym2;rHvGwak;ak4Qik5otn66;odahl,r4S;cholsZeHkolGls4Jx3;ic,ov84;ls1miG;!n1;ils3mG;co4Xec;gy,kaGray2sh,var38;jiGmu9shiG;ma;a07c04eZiWoMuHyeG;rs;lJnIrGssoli6S;atGp03r7C;i,ov4;oz,te58;d0l0;h2lOnNo0RrHsGza1A;er,s;aKeJiIoz5risHtG;e56on;!on;!n7K;au,i9no,t5J;!lA;r1Btgome59;i3El0;cracFhhail5kkeHlG;l0os64;ls1;hmeJiIj30lHn3Krci0ssiGyer2N;!er;n0Po;er,j0;dDti;cartHlG;aughl8e2;hy;dQe7Egnu68i0jer3TkPmNnMrItHyG;er,r;ei,ic,su21thews;iHkDquAroqu8tinG;ez,s;a5Xc,nG;!o;ci5Vn;a5UmG;ad5;ar5e6Kin1;rig77s1;aVeOiLoJuHyG;!nch;k4nGo;d,gu;mbarGpe3Fvr4we;di;!nGu,yana2B;coln,dG;b21holm,strom;bedEfeKhIitn0kaHn8rGw35;oy;!j;m11tG;in1on1;bvGvG;re;iGmmy,ng,rs2Qu,voie,ws3;ne,t1F;aZeYh2iWlUnez50oNrJuHvar2woG;k,n;cerGmar68znets5;a,o34;aHem0isGyeziu;h23t3O;m0sni4Fus3KvG;ch4O;bay57ch,rh0Usk16vaIwalGzl5;czGsC;yk;cIlG;!cGen4K;huk;!ev4ic,s;e8uiveG;rt;eff0kGl4mu9nnun1;ucF;ll0nnedy;hn,llKminsCne,pIrHstra3Qto,ur,yGzl5;a,s0;j0Rls22;l2oG;or;oe;aPenOha6im14oHuG;ng,r4;e32hInHrge32u6vG;anD;es,ss3;anHnsG;en,on,t3;nesGs1R;en,s1;kiBnings,s1;cJkob4EnGrv0E;kDsG;en,sG;en0Ion;ks3obs2A;brahimDglesi5Nke5Fl0Qno07oneIshikHto,vanoG;u,v54;awa;scu;aVeOiNjaltal8oIrist50uG;!aGb0ghAynh;m2ng;a6dz4fIjgaa3Hk,lHpUrGwe,x3X;ak1Gvat;mAt;er,fm3WmG;ann;ggiBtchcock;iJmingw4BnHrGss;nand7re9;deGriks1;rs3;kkiHnG;on1;la,n1;dz4g1lvoQmOns0ZqNrMsJuIwHyG;asFes;kiB;g1ng;anHhiG;mo14;i,ov0J;di6p0r10t;ue;alaG;in1;rs1;aVeorgUheorghe,iSjonRoLrJuGw3;errGnnar3Co,staf3Ctierr7zm2;a,eG;ro;ayli6ee2Lg4iffithGub0;!s;lIme0UnHodGrbachE;e,m2;calvAzale0S;dGubE;bGs0E;erg;aj,i;bs3l,mGordaO;en7;iev3U;gnMlJmaIndFo,rGsFuthi0;cGdn0za;ia;ge;eaHlG;agh0i,o;no;e,on;aVerQiLjeldsted,lKoIrHuG;chs,entAji41ll0;eem2iedm2;ntaGrt8urni0wl0;na;emi6orA;lipIsHtzgeraG;ld;ch0h0;ovG;!ic;hatDnanIrG;arGei9;a,i;deY;ov4;b0rre1D;dKinsJriksIsGvaB;cob3GpGtra3D;inoza,osiQ;en,s3;te8;er,is3warG;ds;aXePiNjurhuMoKrisco15uHvorakG;!oT;arte,boHmitru,nn,rGt3C;and,ic;is;g2he0Omingu7nErd1ItG;to;us;aGcki2Hmitr2Ossanayake,x3;s,z; JbnaIlHmirGrvisFvi,w2;!ov4;gado,ic;th;bo0groot,jo6lHsilGvriA;va;a cruz,e3uG;ca;hl,mcevsCnIt2WviG;dGes,s;ov,s3;ielsGku22;!en;ki;a0Be06hRiobQlarkPoIrGunningh1H;awfo0RivGuz;elli;h1lKntJoIrGs2Nx;byn,reG;a,ia;ke,p0;i,rer2K;em2liB;ns;!e;anu;aOeMiu,oIristGu6we;eGiaG;ns1;i,ng,p9uHwGy;!dH;dGng;huJ;!n,onGu6;!g;kJnIpm2ttHudhGv7;ry;erjee,o14;!d,g;ma,raboG;rty;bJl0Cng4rG;eghetHnG;a,y;ti;an,ota1C;cerAlder3mpbeLrIstGvadi0B;iGro;llo;doHl0Er,t0uGvalho;so;so,zo;ll;a0Fe01hYiXlUoNrKuIyG;rLtyG;qi;chan2rG;ke,ns;ank5iem,oGyant;oks,wG;ne;gdan5nIruya,su,uchaHyKziG;c,n5;rd;darGik;enG;ko;ov;aGond15;nco,zG;ev4;ancFshw16;a08oGuiy2;umGwmG;ik;ckRethov1gu,ktPnNrG;gJisInG;ascoGds1;ni;ha;er,mG;anG;!n;gtGit7nP;ss3;asF;hi;er,hG;am;b4ch,ez,hRiley,kk0ldw8nMrIshHtAu0;es;ir;bInHtlGua;ett;es,i0;ieYosa;dGik;a9yoG;padhyG;ay;ra;k,ng;ic;bb0Acos09d07g04kht05lZnPrLsl2tJyG;aHd8;in;la;chis3kiG;ns3;aImstro6sl2;an;ng;ujo,ya;dJgelHsaG;ri;ovG;!a;ersJov,reG;aGjEws;ss1;en;en,on,s3;on;eksejEiyEmeiIvG;ar7es;ez;da;ev;arwHuilG;ar;al;ams,l0;er;ta;as",Ordinal:"true\xA6eBf7nin5s3t0zeroE;enDhir1we0;lfCn7;d,t3;e0ixt8;cond,vent7;et0th;e6ie7;i2o0;r0urt3;tie4;ft1rst;ight0lev1;e0h,ie1;en0;th",Cardinal:"true\xA6bEeBf5mEnine7one,s4t0zero;en,h2rDw0;e0o;lve,n5;irt6ousands,ree;even2ix2;i3o0;r1ur0;!t2;ty;ft0ve;e2y;ight0lev1;!e0y;en;illions",Multiple:"true\xA6b3hundred,m3qu2se1t0;housand,r2;pt1xt1;adr0int0;illion",City:"true\xA60:74;1:61;2:6G;3:6J;4:5S;a68b53c4Id48e44f3Wg3Hh39i31j2Wk2Fl23m1Mn1Co19p0Wq0Ur0Os05tRuQvLwDxiBy9z5;a7h5i4Muri4O;a5e5ongsh0;ng3H;greb,nzib5G;ang2e5okoha3Sunfu;katerin3Hrev0;a5n0Q;m5Hn;arsBeAi6roclBu5;h0xi,zh5P;c7n5;d5nipeg,terth4;hoek,s1L;hi5Zkl3A;l63xford;aw;a8e6i5ladivost5Molgogr6L;en3lni6S;ni22r5;o3saill4N;lenc4Wncouv3Sr3ughn;lan bat1Crumqi,trecht;aFbilisi,eEheDiBo9r7u5;l21n63r5;in,ku;i5ondh62;es51poli;kyo,m2Zron1Pulo5;n,uS;an5jua3l2Tmisoa6Bra3;j4Tshui; hag62ssaloni2H;gucigal26hr0l av1U;briz,i6llinn,mpe56ng5rtu,shk2R;i3Esh0;an,chu1n0p2Eyu0;aEeDh8kopje,owe1Gt7u5;ra5zh4X;ba0Ht;aten is55ockholm,rasbou67uttga2V;an8e6i5;jiazhua1llo1m5Xy0;f50n5;ya1zh4H;gh3Kt4Q;att45o1Vv44;cramen16int ClBn5o paulo,ppo3Rrajevo; 7aa,t5;a 5o domin3E;a3fe,m1M;antonio,die3Cfrancisco,j5ped3Nsalvad0J;o5u0;se;em,t lake ci5Fz25;lou58peters24;a9e8i6o5;me,t59;ga,o5yadh;! de janei3F;cife,ims,nn3Jykjavik;b4Sip4lei2Inc2Pwalpindi;ingdao,u5;ez2i0Q;aFeEhDiCo9r7u6yong5;ya1;eb59ya1;a5etor3M;g52to;rt5zn0; 5la4Co;au prin0Melizabe24sa03;ls3Prae5Atts26;iladelph3Gnom pe1Aoenix;ki1tah tik3E;dua,lerYnaji,r4Ot5;na,r32;ak44des0Km1Mr6s5ttawa;a3Vlo;an,d06;a7ew5ing2Fovosibir1Jyc; 5cast36;del24orlea44taip14;g8iro4Wn5pl2Wshv33v0;ch6ji1t5;es,o1;a1o1;a6o5p4;ya;no,sa0W;aEeCi9o6u5;mb2Ani26sc3Y;gadishu,nt6s5;c13ul;evideo,pelli1Rre2Z;ami,l6n14s5;kolc,sissauga;an,waukee;cca,d5lbour2Mmph41ndo1Cssi3;an,ell2Xi3;cau,drAkass2Sl9n8r5shh4A;aca6ib5rakesh,se2L;or;i1Sy;a4EchFdal0Zi47;mo;id;aDeAi8o6u5vSy2;anMckn0Odhia3;n5s angel26;d2g bea1N;brev2Be3Lma5nz,sb2verpo28;!ss27; ma39i5;c5pzig;est16; p6g5ho2Wn0Cusan24;os;az,la33;aHharFiClaipeBo9rak0Du7y5;iv,o5;to;ala lump4n5;mi1sh0;hi0Hlka2Xpavog4si5wlo2;ce;da;ev,n5rkuk;gst2sha5;sa;k5toum;iv;bHdu3llakuric0Qmpa3Fn6ohsiu1ra5un1Iwaguc0Q;c0Pj;d5o,p4;ah1Ty;a7e6i5ohannesV;l1Vn0;dd36rusalem;ip4k5;ar2H;bad0mph1OnArkutUs7taXz5;mir,tapala5;pa;fah0l6tanb5;ul;am2Zi2H;che2d5;ianap2Mo20;aAe7o5yder2W; chi mi5ms,nolulu;nh;f6lsin5rakli2;ki;ei;ifa,lifax,mCn5rb1Dva3;g8nov01oi;aFdanEenDhCiPlasgBo9raz,u5;a5jr23;dal6ng5yaquil;zh1J;aja2Oupe;ld coa1Bthen5;bu2S;ow;ent;e0Uoa;sk;lw7n5za;dhi5gt1E;nag0U;ay;aisal29es,o8r6ukuya5;ma;ankfu5esno;rt;rt5sh0; wor6ale5;za;th;d5indhov0Pl paso;in5mont2;bur5;gh;aBe8ha0Xisp4o7resd0Lu5;b5esseldorf,nkirk,rb0shanbe;ai,l0I;ha,nggu0rtmu13;hradSl6nv5troit;er;hi;donghIe6k09l5masc1Zr es sala1KugavpiY;i0lU;gu,je2;aJebu,hAleve0Vo5raio02uriti1Q;lo7n6penhag0Ar5;do1Ok;akKst0V;gUm5;bo;aBen8i6ongqi1ristchur5;ch;ang m7ca5ttago1;go;g6n5;ai;du,zho1;ng5ttogr14;ch8sha,zh07;gliari,i9lga8mayenJn6pe town,r5tanO;acCdiff;ber1Ac5;un;ry;ro;aWeNhKirmingh0WoJr9u5;chareTdapeTenos air7r5s0tu0;g5sa;as;es;a9is6usse5;ls;ba6t5;ol;ne;sil8tisla7zzav5;il5;le;va;ia;goZst2;op6ubaneshw5;ar;al;iCl9ng8r5;g6l5n;in;en;aluru,hazi;fa6grade,o horizon5;te;st;ji1rut;ghd0BkFn9ot8r7s6yan n4;ur;el,r07;celo3i,ranquil09;ou;du1g6ja lu5;ka;alo6k5;ok;re;ng;ers5u;field;a05b02cc01ddis aba00gartaZhmedXizawl,lSmPnHqa00rEsBt7uck5;la5;nd;he7l5;an5;ta;ns;h5unci2;dod,gab5;at;li5;ngt2;on;a8c5kaOtwerp;hora6o3;na;ge;h7p5;ol5;is;eim;aravati,m0s5;terd5;am; 7buquerq6eppo,giers,ma5;ty;ue;basrah al qadim5mawsil al jadid5;ah;ab5;ad;la;ba;ra;idj0u dha5;bi;an;lbo6rh5;us;rg",Region:"true\xA60:2O;1:2L;2:2U;3:2F;a2Sb2Fc21d1Wes1Vf1Tg1Oh1Ki1Fj1Bk16l13m0Sn09o07pYqVrSsJtEuBverAw6y4zacatec2W;akut0o0Fu4;cat1k09;a5est 4isconsin,yomi1O;bengal,virgin0;rwick3shington4;! dc;acruz,mont;dmurt0t4;ah,tar4; 2Pa12;a6e5laxca1Vripu21u4;scaEva;langa2nnessee,x2J;bas10m4smQtar29;aulip2Hil nadu;a9elang07i7o5taf16u4ylh1J;ff02rr09s1E;me1Gno1Uuth 4;cZdY;ber0c4kkim,naloa;hu1ily;n5rawak,skatchew1xo4;ny; luis potosi,ta catari2;a4hodeA;j4ngp0C;asth1shahi;ingh29u4;e4intana roo;bec,en6retaro;aAe6rince edward4unjab; i4;sl0G;i,n5r4;ak,nambu0F;a0Rnsylv4;an0;ha0Pra4;!na;axa0Zdisha,h4klaho21ntar4reg7ss0Dx0I;io;aLeEo6u4;evo le4nav0X;on;r4tt18va scot0;f9mandy,th4; 4ampton3;c6d5yo4;rk3;ako1O;aroli2;olk;bras1Nva0Dw4; 6foundland4;! and labrad4;or;brunswick,hamp3jers5mexiTyork4;! state;ey;galPyarit;aAeghala0Mi6o4;nta2r4;dov0elos;ch6dlanDn5ss4zor11;issippi,ouri;as geraPneso18;ig1oac1;dhy12harasht0Gine,lac07ni5r4ssachusetts;anhao,i el,ylG;p4toba;ur;anca3e4incoln3ouisI;e4iR;ds;a6e5h4omi;aka06ul2;dah,lant1ntucky,ra01;bardino,lmyk0ns0Qr4;achay,el0nata0X;alis6har4iangxi;kh4;and;co;daho,llino7n4owa;d5gush4;et0;ia2;is;a6ert5i4un1;dalFm0D;ford3;mp3rya2waii;ansu,eorg0lou7oa,u4;an4izhou,jarat;ajuato,gdo4;ng;cester3;lori4uji1;da;sex;ageUe7o5uran4;go;rs4;et;lawaMrby3;aFeaEh9o4rim08umbr0;ahui7l6nnectic5rsi4ventry;ca;ut;i03orado;la;e5hattisgarh,i4uvash0;apRhuahua;chn5rke4;ss0;ya;ra;lGm4;bridge3peche;a9ihar,r8u4;ck4ryat0;ingham3;shi4;re;emen,itish columb0;h0ja cal8lk7s4v7;hkorto4que;st1;an;ar0;iforn0;ia;dygHguascalientes,lBndhr9r5ss4;am;izo2kans5un4;achal 7;as;na;a 4;pradesh;a6ber5t4;ai;ta;ba5s4;ka;ma;ea",Place:"true\xA60:4T;1:4V;2:44;3:4B;4:3I;a4Eb3Gc2Td2Ge26f25g1Vh1Ji1Fk1Cl14m0Vn0No0Jp08r04sTtNuLvJw7y5;a5o0Syz;kut1Bngtze;aDeChitBi9o5upatki,ycom2P;ki26o5;d5l1B;b3Ps5;i4to3Y;c0SllowbroCn5;c2Qgh2;by,chur1P;ed0ntw3Gs22;ke6r3St5;erf1f1; is0Gf3V;auxha3Mirgin is0Jost5;ok;laanbaatar,pto5xb3E;n,wn;a9eotihuac43h7ive49o6ru2Nsarskoe selo,u5;l2Dzigo47;nto,rquay,tt2J;am3e 5orn3E;bronx,hamptons;hiti,j mah0Iu1N;aEcotts bluff,eCfo,herbroQoApring9t7u5yd2F;dbu1Wn5;der03set3B;aff1ock2Nr5;atf1oud;hi37w24;ho,uth5; 1Iam1Zwo3E;a5i2O;f2Tt0;int lawrence riv3Pkhal2D;ayleigh,ed7i5oc1Z;chmo1Eo gran4ver5;be1Dfr09si4; s39cliffe,hi2Y;aCe9h8i5ompeii,utn2;c6ne5tcai2T; 2Pc0G;keri13t0;l,x;k,lh2mbr6n5r2J;n1Hzance;oke;cif38pahanaumokuak30r5;k5then0;si4w1K;ak7r6x5;f1l2X;ange county,d,f1inoco;mTw1G;e8i1Uo5;r5tt2N;th5wi0E; 0Sam19;uschwanste1Pw5; eng6a5h2market,po36;rk;la0P;a8co,e6i5uc;dt1Yll0Z;adow5ko0H;lands;chu picchu,gad2Ridsto1Ql8n7ple6r5;kh2; g1Cw11;hatt2Osf2B;ibu,t0ve1Z;a8e7gw,hr,in5owlOynd02;coln memori5dl2C;al;asi4w3;kefr7mbe1On5s,x;ca2Ig5si05;f1l27t0;ont;azan kreml14e6itchen2Gosrae,rasnoyar5ul;sk;ns0Hs1U;ax,cn,lf1n6ps5st;wiN;d5glew0Lverness;ian27ochina;aDeBi6kg,nd,ov5unti2H;d,enweep;gh6llc5;reL;bu03l5;and5;!s;r5yw0C;ef1tf1;libu24mp6r5stings;f1lem,row;stead,t0;aDodavari,r5uelph;avenAe5imsS;at 8en5; 6f1Fwi5;ch;acr3vall1H;brita0Flak3;hur5;st;ng3y villa0W;airhavHco,ra;aAgli9nf17ppi8u7ver6x5;et1Lf1;glad3t0;rope,st0;ng;nt0;rls1Ls5;t 5;e5si4;nd;aCe9fw,ig8o7ryd6u5xb;mfri3nstab00rh2tt0;en;nca18rcKv19wnt0B;by;n6r5vonpo1D;ry;!h2;nu8r5;l6t5;f1moor;ingt0;be;aLdg,eIgk,hClBo5royd0;l6m5rnwa0B;pt0;c7lingw6osse5;um;ood;he0S;earwat0St;a8el6i5uuk;chen itza,mney ro07natSricahua;m0Zt5;enh2;mor5rlottetPth2;ro;dar 5ntervilA;breaks,faZg5;rove;ld9m8r5versh2;lis6rizo pla5;in;le;bLpbellf1;weQ;aZcn,eNingl01kk,lackLolt0r5uckV;aGiAo5;ckt0ok5wns cany0;lyn,s5;i4to5;ne;de;dge6gh5;am,t0;n6t5;own;or5;th;ceb6m5;lNpt0;rid5;ge;bu5pool,wa8;rn;aconsfEdf1lBr9verly7x5;hi5;ll; hi5;lls;wi5;ck; air,l5;ingh2;am;ie5;ld;ltimore,rnsl6tters5;ea;ey;bLct0driadic,frica,ginJlGmFn9rc8s7tl6yleOzor3;es;!ant8;hcroft,ia; de triomphe,t6;adyr,ca8dov9tarct5;ic5; oce5;an;st5;er;ericas,s;be6dersh5hambra,list0;ot;rt0;cou5;rt;bot7i5;ngd0;on;sf1;ord",Country:"true\xA60:38;1:2L;2:3B;a2Xb2Ec22d1Ye1Sf1Mg1Ch1Ai14j12k0Zl0Um0Gn05om2pZqat1KrXsKtCu7v5wal4yemTz3;a25imbabwe;es,lis and futu2Y;a3enezue32ietnam;nuatu,tican city;gTk6nited 4ruXs3zbeE; 2Ca,sr;arab emirat0Kkingdom,states3;! of am2Y;!raiV;a8haCimor les0Co7rinidad 5u3;nis0rk3valu;ey,me2Zs and caic1V;and t3t3;oba1L;go,kel10nga;iw2ji3nz2T;ki2V;aDcotl1eCi9lov8o6pa2Dri lanka,u5w3yr0;az3edAitzerl1;il1;d2riname;lomon1Xmal0uth 3;afr2KkMsud2;ak0en0;erra leoFn3;gapo1Yt maart3;en;negLrb0ychellZ;int 3moa,n marino,udi arab0;hele26luc0mart21;epublic of ir0Eom2Euss0w3;an27;a4eIhilippinUitcairn1Mo3uerto riN;l1rtugF;ki2Dl4nama,pua new0Vra3;gu7;au,esti3;ne;aBe9i7or3;folk1Ith4w3;ay; k3ern mariana1D;or0O;caragua,ger3ue;!ia;p3ther1Aw zeal1;al;mib0u3;ru;a7exi6icro0Bo3yanm06;ldova,n3roc5zambA;a4gol0t3;enegro,serrat;co;cAdagasc01l7r5urit4yot3;te;an0i16;shall0Xtin3;ique;a4div3i,ta;es;wi,ys0;ao,ed02;a6e5i3uxembourg;b3echtenste12thu1G;er0ya;ban0Isotho;os,tv0;azakh1Fe4iriba04o3uwait,yrgyz1F;rXsovo;eling0Knya;a3erG;ma16p2;c7nd6r4s3taly,vory coast;le of m2rael;a3el1;n,q;ia,oJ;el1;aiTon3ungary;dur0Ng kong;aBermany,ha0QibraltAre8u3;a6ern5inea3ya0P;! biss3;au;sey;deloupe,m,tema0Q;e3na0N;ce,nl1;ar;bUmb0;a7i6r3;ance,ench 3;guia0Epoly3;nes0;ji,nl1;lklandUroeU;ast tim7cu6gypt,l salv6ngl1quatorial4ritr5st3thiop0;on0; guin3;ea;ad3;or;enmark,jibou5ominica4r con3;go;!n C;ti;aBentral african Ah8o5roat0u4yprRzech3; 9ia;ba,racao;c4lo3morQngo brazzaville,okGsta r04te de ivoiL;mb0;osE;i3ristmasG;le,na;republic;m3naUpe verde,ymanA;bod0ero3;on;aGeDhut2o9r5u3;lgar0r3;kina faso,ma,undi;azil,itish 3unei;virgin3; is3;lands;liv0nai5snia and herzegoviHtswaHuvet3; isl1;and;re;l3n8rmuG;ar3gium,ize;us;h4ngladesh,rbad3;os;am4ra3;in;as;fghaGlDmBn6r4ustr3zerbaij2;al0ia;genti3men0uba;na;dorra,g5t3;arct7igua and barbu3;da;o3uil3;la;er3;ica;b3ger0;an0;ia;ni3;st2;an",FirstName:"true\xA6aTblair,cQdOfrancoZgabMhinaLilya,jHkClBm6ni4quinn,re3s0;h0umit,yd;ay,e0iloh;a,lby;g9ne;co,ko0;!s;a1el0ina,org6;!okuhF;ds,naia,r1tt0xiB;i,y;ion,lo;ashawn,eif,uca;a3e1ir0rM;an;lsFn0rry;dall,yat5;i,sD;a0essIie,ude;i1m0;ie,mG;me;ta;rie0y;le;arcy,ev0;an,on;as1h0;arl8eyenne;ey,sidy;drien,kira,l4nd1ubr0vi;ey;i,r0;a,e0;a,y;ex2f1o0;is;ie;ei,is",WeekDay:"true\xA6fri2mon2s1t0wednesd3;hurs1ues1;aturd1und1;!d0;ay0;!s",Month:"true\xA6dec0february,july,nov0octo1sept0;em0;ber",Date:"true\xA6ago,on4som4t1week0yesterd5; end,ends;mr1o0;d2morrow;!w;ed0;ay",Duration:"true\xA6centurAd8h7m5q4se3w1y0;ear8r8;eek0k7;!end,s;ason,c5;tr,uarter;i0onth3;llisecond2nute2;our1r1;ay0ecade0;!s;ies,y",FemaleName:"true\xA60:J7;1:JB;2:IJ;3:IK;4:J1;5:IO;6:JS;7:JO;8:HB;9:JK;A:H4;B:I2;C:IT;D:JH;E:IX;F:BA;G:I4;aGTbFLcDRdD0eBMfB4gADh9Ti9Gj8Dk7Cl5Wm48n3Lo3Hp33qu32r29s15t0Eu0Cv02wVxiTyOzH;aLeIineb,oHsof3;e3Sf3la,ra;h2iKlIna,ynH;ab,ep;da,ma;da,h2iHra;nab;aKeJi0FolB7uIvH;et8onDP;i0na;le0sen3;el,gm3Hn,rGLs8W;aoHme0nyi;m5XyAD;aMendDZhiDGiH;dele9lJnH;if48niHo0;e,f47;a,helmi0lHma;a,ow;ka0nB;aNeKiHusa5;ck84kIl8oleAviH;anFenJ4;ky,toriBK;da,lA8rHs0;a,nHoniH9;a,iFR;leHnesH9;nILrH;i1y;g9rHs6xHA;su5te;aYeUhRiNoLrIuHy2;i,la;acJ3iHu0J;c3na,sH;hFta;nHr0F;iFya;aJffaEOnHs6;a,gtiH;ng;!nFSra;aIeHomasi0;a,l9Oo8Ares1;l3ndolwethu;g9Fo88rIssH;!a,ie;eHi,ri7;sa,za;bOlMmKnIrHs6tia0wa0;a60yn;iHya;a,ka,s6;arFe2iHm77ra;!ka;a,iH;a,t6;at6it6;a0Ecarlett,e0AhWiSkye,neza0oQri,tNuIyH;bIGlvi1;ha,mayIJniAsIzH;an3Net8ie,y;anHi7;!a,e,nH;aCe;aIeH;fan4l5Dphan6E;cI5r5;b3fiAAm0LnHphi1;d2ia,ja,ya;er2lJmon1nIobh8QtH;a,i;dy;lETv3;aMeIirHo0risFDy5;a,lDM;ba,e0i5lJrH;iHr6Jyl;!d8Ifa;ia,lDZ;hd,iMki2nJrIu0w0yH;la,ma,na;i,le9on,ron,yn;aIda,ia,nHon;a,on;!ya;k6mH;!aa;lJrItaye82vH;da,inj;e0ife;en1i0ma;anA9bLd5Oh1SiBkKlJmInd2rHs6vannaC;aCi0;ant6i2;lDOma,ome;ee0in8Tu2;in1ri0;a05eZhXiUoHuthDM;bScRghQl8LnPsJwIxH;anB3ie,y;an,e0;aIeHie,lD;ann7ll1marDGtA;!lHnn1;iHyn;e,nH;a,dF;da,i,na;ayy8G;hel67io;bDRerAyn;a,cIkHmas,nFta,ya;ki,o;h8Xki;ea,iannGMoH;da,n1P;an0bJemFgi0iInHta,y0;a8Bee;han86na;a,eH;cHkaC;a,ca;bi0chIe,i0mo0nHquETy0;di,ia;aERelHiB;!e,le;een4ia0;aPeOhMiLoJrHute6A;iHudenCV;scil3LyamvaB;lHrt3;i0ly;a,paluk;ilome0oebe,ylH;is,lis;ggy,nelope,r5t2;ige,m0VnKo5rvaDMtIulH;a,et8in1;ricHt4T;a,e,ia;do2i07;ctav3dIfD3is6ksa0lHphD3umC5yunbileg;a,ga,iv3;eHvAF;l3t8;aWeUiMoIurHy5;!ay,ul;a,eJor,rIuH;f,r;aCeEma;ll1mi;aNcLhariBQkKlaJna,sHta,vi;anHha;ur;!y;a,iDZki;hoGk9YolH;a,e4P;!mh;hir,lHna,risDEsreE;!a,lBV;asuMdLh3i6Dl5nKomi7rgEVtH;aHhal4;lHs6;i1ya;cy,et8;e9iF0ya;nngu2X;a0Ackenz4e02iMoJrignayani,uriDJyH;a,rH;a,iOlNna,tG;bi0i2llBJnH;a,iH;ca,ka,qD9;a,cUdo4ZkaTlOmi,nMrItzi,yH;ar;aJiIlH;anET;am;!l,nB;dy,eHh,n4;nhGrva;aKdJe0iCUlH;iHy;cent,e;red;!gros;!e5;ae5hH;ae5el3Z;ag5DgNi,lKrH;edi7AiIjem,on,yH;em,l;em,sCG;an4iHliCF;nHsCJ;a,da;!an,han;b09cASd07e,g05ha,i04ja,l02n00rLsoum5YtKuIv84xBKyHz4;bell,ra,soBB;d7rH;a,eE;h8Gild1t4;a,cUgQiKjor4l7Un4s6tJwa,yH;!aHbe6Xja9lAE;m,nBL;a,ha,in1;!aJbCGeIja,lDna,sHt63;!a,ol,sa;!l1D;!h,mInH;!a,e,n1;!awit,i;arJeIie,oHr48ueri8;!t;!ry;et46i3B;el4Xi7Cy;dHon,ue5;akranAy;ak,en,iHlo3S;a,ka,nB;a,re,s4te;daHg4;!l3E;alDd4elHge,isDJon0;ei9in1yn;el,le;a0Ne0CiXoQuLyH;d3la,nH;!a,dIe2OnHsCT;!a,e2N;a,sCR;aD4cJel0Pis1lIna,pHz;e,iA;a,u,wa;iHy;a0Se,ja,l2NnB;is,l1UrItt1LuHvel4;el5is1;aKeIi7na,rH;aADi7;lHn1tA;ei;!in1;aTbb9HdSepa,lNnKsJvIzH;!a,be5Ret8z4;!ia;a,et8;!a,dH;a,sHy;ay,ey,i,y;a,iJja,lH;iHy;aA8e;!aH;!nF;ia,ya;!nH;!a,ne;aPda,e0iNjYla,nMoKsJtHx93y5;iHt4;c3t3;e2PlCO;la,nHra;a,ie,o2;a,or1;a,gh,laH;!ni;!h,nH;a,d2e,n5V;cOdon9DiNkes6mi9Gna,rMtJurIvHxmi,y5;ern1in3;a,e5Aie,yn;as6iIoH;nya,ya;fa,s6;a,isA9;a,la;ey,ie,y;a04eZhXiOlASoNrJyH;lHra;a,ee,ie;istHy6I;a,en,iIyH;!na;!e,n5F;nul,ri,urtnB8;aOerNlB7mJrHzzy;a,stH;en,in;!berlImernH;aq;eHi,y;e,y;a,stE;!na,ra;aHei2ongordzol;dij1w5;el7UiKjsi,lJnIrH;a,i,ri;d2na,za;ey,i,lBLs4y;ra,s6;biAcARdiat7MeBAiSlQmPnyakuma1DrNss6NtKviAyH;!e,lH;a,eH;e,i8T;!a6HeIhHi4TlDri0y;ar8Her8Hie,leErBAy;!lyn8Ori0;a,en,iHl5Xoli0yn;!ma,nFs95;a5il1;ei8Mi,lH;e,ie;a,tl6O;a0AeZiWoOuH;anMdLlHst88;es,iH;a8NeHs8X;!n9tH;!a,te;e5Mi3My;a,iA;!anNcelDdMelGhan7VleLni,sIva0yH;a,ce;eHie;fHlDph7Y;a,in1;en,n1;i7y;!a,e,n45;lHng;!i1DlH;!i1C;anNle0nKrJsH;i8JsH;!e,i8I;i,ri;!a,elGif2CnH;a,et8iHy;!e,f2A;a,eJiInH;a,eIiH;e,n1;!t8;cMda,mi,nIque4YsminFvie2y9zH;min7;a7eIiH;ce,e,n1s;!lHs82t0F;e,le;inIk6HlDquelH;in1yn;da,ta;da,lRmPnOo0rNsIvaHwo0zaro;!a0lu,na;aJiIlaHob89;!n9R;do2;belHdo2;!a,e,l3B;a7Ben1i0ma;di2es,gr72ji;a9elBogH;en1;a,e9iHo0se;a0na;aSeOiJoHus7Kyacin2C;da,ll4rten24snH;a,i9U;lImaH;ri;aIdHlaI;a,egard;ry;ath1BiJlInrietArmi9sH;sa,t1A;en2Uga,mi;di;bi2Fil8MlNnMrJsItHwa,yl8M;i5Tt4;n60ti;iHmo51ri53;etH;!te;aCnaC;a,ey,l4;a02eWiRlPoNrKunJwH;enHyne1R;!dolD;ay,el;acieIetHiselB;a,chE;!la;ld1CogooH;sh;adys,enHor3yn2K;a,da,na;aKgi,lIna,ov8EselHta;a,e,le;da,liH;an;!n0;mLnJorgIrH;ald5Si,m3Etrud7;et8i4X;a,eHna;s29vieve;ma;bIle,mHrnet,yG;al5Si5;iIrielH;a,l1;!ja;aTeQiPlorOoz3rH;anJeIiH;da,eB;da,ja;!cH;esIiHoi0P;n1s66;!ca;a,enc3;en,o0;lIn0rnH;anB;ec3ic3;jr,nArKtHy7;emIiHma,oumaA;ha,ma,n;eh;ah,iBrah,za0;cr4Rd0Re0Qi0Pk0Ol07mXn54rUsOtNuMvHwa;aKelIiH;!e,ta;inFyn;!a;!ngel4V;geni1ni47;h5Yien9ta;mLperanKtH;eIhHrel5;er;l31r7;za;a,eralB;iHma,ne4Lyn;cHka,n;a,ka;aPeNiKmH;aHe21ie,y;!li9nuH;elG;lHn1;e7iHy;a,e,ja;lHrald;da,y;!nue5;aWeUiNlMma,no2oKsJvH;a,iH;na,ra;a,ie;iHuiH;se;a,en,ie,y;a0c3da,e,f,nMsJzaH;!betHveA;e,h;aHe,ka;!beH;th;!a,or;anor,nH;!a,i;!in1na;ate1Rta;leEs6;vi;eIiHna,wi0;e,th;l,n;aYeMh3iLjeneKoH;lor5Vminiq4Ln3FrHtt4;a,eEis,la,othHthy;ea,y;ba;an09naCon9ya;anQbPde,eOiMlJmetr3nHsir5M;a,iH;ce,se;a,iIla,orHphi9;es,is;a,l6F;dHrdH;re;!d5Ena;!b2ForaCraC;a,d2nH;!a,e;hl3i0l0GmNnLphn1rIvi1WyH;le,na;a,by,cIia,lH;a,en1;ey,ie;a,et8iH;!ca,el1Aka,z;arHia;is;a0Re0Nh04i02lUoJristIynH;di,th3;al,i0;lPnMrIurH;tn1D;aJd2OiHn2Ori9;!nH;a,e,n1;!l4;cepci5Cn4sH;tanHuelo;ce,za;eHleE;en,t8;aJeoIotH;il54;!pat2;ir7rJudH;et8iH;a,ne;a,e,iH;ce,sZ;a2er2ndH;i,y;aReNloe,rH;isJyH;stH;al;sy,tH;a1Sen,iHy;an1e,n1;deJlseIrH;!i7yl;a,y;li9;nMrH;isKlImH;ai9;a,eHot8;n1t8;!sa;d2elGtH;al,elG;cIlH;es8i47;el3ilH;e,ia,y;itlYlXmilWndVrMsKtHy5;aIeIhHri0;er1IleErDy;ri0;a38sH;a37ie;a,iOlLmeJolIrH;ie,ol;!e,in1yn;lHn;!a,la;a,eIie,otHy;a,ta;ne,y;na,s1X;a0Ii0I;a,e,l1;isAl4;in,yn;a0Ke02iZlXoUrH;andi7eRiJoIyH;an0nn;nwDoke;an3HdgMgiLtH;n31tH;!aInH;ey,i,y;ny;d,t8;etH;!t7;an0e,nH;da,na;bbi7glarIlo07nH;iAn4;ka;ancHythe;a,he;an1Clja0nHsm3M;iAtH;ou;aWcVlinUniArPssOtJulaCvH;!erlH;ey,y;hJsy,tH;e,iHy7;e,na;!anH;ie,y;!ie;nItHyl;ha,ie;adIiH;ce;et8i9;ay,da;ca,ky;!triH;ce,z;rbJyaH;rmH;aa;a2o2ra;a2Ub2Od25g21i1Sj5l18m0Zn0Boi,r06sWtVuPvOwa,yIzH;ra,u0;aKes6gJlIn,seH;!l;in;un;!nH;a,na;a,i2K;drLguJrIsteH;ja;el3;stH;in1;a,ey,i,y;aahua,he0;hIi2Gja,miAs2DtrH;id;aMlIraqHt21;at;eIi7yH;!n;e,iHy;gh;!nH;ti;iJleIo6piA;ta;en,n1t8;aHelG;!n1J;a01dje5eZgViTjRnKohito,toHya;inet8nH;el5ia;te;!aKeIiHmJ;e,ka;!mHtt7;ar4;!belIliHmU;sa;!l1;a,eliH;ca;ka,sHta;a,sa;elHie;a,iH;a,ca,n1qH;ue;!tH;a,te;!bImHstasiMya;ar3;el;aLberKeliJiHy;e,l3naH;!ta;a,ja;!ly;hGiIl3nB;da;a,ra;le;aWba,ePiMlKthJyH;a,c3sH;a,on,sa;ea;iHys0N;e,s0M;a,cIn1sHza;a,e,ha,on,sa;e,ia,ja;c3is6jaKksaKna,sJxH;aHia;!nd2;ia,saH;nd2;ra;ia;i0nIyH;ah,na;a,is,naCoud;la;c6da,leEmNnLsH;haClH;inHyY;g,n;!h;a,o,slH;ey;ee;en;at6g4nIusH;ti0;es;ie;aWdiTelMrH;eJiH;anMenH;a,e,ne;an0;na;!aLeKiIyH;nn;a,n1;a,e;!ne;!iH;de;e,lDsH;on;yn;!lH;i9yn;ne;aKbIiHrL;!e,gaK;ey,i7y;!e;gaH;il;dKliyJradhIs6;ha;ya;ah;a,ya",Honorific:"true\xA6director1field marsh2lieutenant1rear0sergeant major,vice0; admir1; gener0;al","Adj|Gerund":"true\xA60:3F;1:3H;2:31;3:2X;4:35;5:33;6:3C;7:2Z;8:36;9:29;a33b2Tc2Bd1Te1If19g12h0Zi0Rl0Nm0Gnu0Fo0Ap04rYsKtEuBvAw1Ayiel3;ar6e08;nBpA;l1Rs0B;fol3n1Zsett2;aEeDhrBi4ouc7rAwis0;e0Bif2oub2us0yi1;ea1SiA;l2vi1;l2mp0rr1J;nt1Vxi1;aMcreec7enten2NhLkyrocke0lo0Vmi2oJpHtDuBweA;e0Ul2;pp2ArA;gi1pri5roun3;aBea8iAri2Hun9;mula0r4;gge4rA;t2vi1;ark2eAraw2;e3llb2F;aAot7;ki1ri1;i9oc29;dYtisf6;aEeBive0oAus7;a4l2;assu4defi9fres7ig9juve07mai9s0vAwar3;ea2italiAol1G;si1zi1;gi1ll6mb2vi1;a6eDier23lun1VrAun2C;eBoA;mi5vo1Z;ce3s5vai2;n3rpleA;xi1;ffCpWutBverAwi1;arc7lap04p0Pri3whel8;goi1l6st1J;en3sA;et0;m2Jrtu4;aEeDiCoBuAyst0L;mb2;t1Jvi1;s5tiga0;an1Rl0n3smeri26;dAtu4;de9;aCeaBiAo0U;fesa0Tvi1;di1ni1;c1Fg19s0;llumiGmFnArri0R;cDfurHsCtBviA;go23ti1;e1Oimi21oxica0rig0V;pi4ul0;orpo20r0K;po5;na0;eaBorr02umilA;ia0;li1rtwar8;lFrA;atiDipCoBuelA;i1li1;undbrea10wi1;pi1;f6ng;a4ea8;a3etc7it0lEoCrBulfA;il2;ee1FighXust1L;rAun3;ebo3thco8;aCoA;a0wA;e4i1;mi1tte4;lectrJmHnExA;aCci0hBis0pA;an3lo3;aOila1B;c0spe1A;ab2coura0CdBergi13ga0Clive9ric7s02tA;hral2i0J;ea4u4;barras5er09pA;owe4;if6;aQeIiBrA;if0;sAzz6;aEgDhearCsen0tA;rAur11;ac0es5;te9;us0;ppoin0r8;biliGcDfi9gra3ligh0mBpres5sAvasG;erE;an3ea9orA;ali0L;a6eiBli9rA;ea5;vi1;ta0;maPri1s7un0zz2;aPhMlo5oAripp2ut0;mGnArrespon3;cer9fDspi4tA;inBrA;as0ibu0ol2;ui1;lic0u5;ni1;fDmCpA;eAromi5;l2ti1;an3;or0;aAil2;llenAnAr8;gi1;l8ptAri1;iva0;aff2eGin3lFoDrBuA;d3st2;eathtaAui5;ki1;gg2i2o8ri1unA;ci1;in3;co8wiA;lAtc7;de4;bsorVcOgonMlJmHnno6ppea2rFsA;pi4su4toA;nBun3;di1;is7;hi1;res0;li1;aFu5;si1;ar8lu4;ri1;mi1;iAzi1;zi1;cAhi1;eleDomA;moBpan6;yi1;da0;ra0;ti1;bi1;ng",Comparable:"true\xA60:3C;1:3Q;2:3F;a3Tb3Cc33d2Te2Mf2Ag1Wh1Li1Fj1Ek1Bl13m0Xn0So0Rp0Iqu0Gr07sHtCug0vAw4y3za0Q;el10ouN;ary,e6hi5i3ry;ck0Cde,l3n1ry,se;d,y;ny,te;a3i3R;k,ry;a3erda2ulgar;gue,in,st;a6en2Xhi5i4ouZr3;anqu2Cen1ue;dy,g36me0ny;ck,rs28;ll,me,rt,wd3I;aRcaPeOhMiLkin0BlImGoEpDt6u4w3;eet,ift;b3dd0Wperfi21rre28;sta26t21;a8e7iff,r4u3;pUr1;a4ict,o3;ng;ig2Vn0N;a1ep,rn;le,rk,te0;e1Si2Vright0;ci1Yft,l3on,re;emn,id;a3el0;ll,rt;e4i3y;g2Mm0Z;ek,nd2T;ck24l0mp1L;a3iRrill,y;dy,l01rp;ve0Jxy;n1Jr3;ce,y;d,fe,int0l1Hv0V;a8e6i5o3ude;mantic,o19sy,u3;gh;pe,t1P;a3d,mo0A;dy,l;gg4iFndom,p3re,w;id;ed;ai2i3;ck,et;hoAi1Fl9o8r5u3;ny,r3;e,p11;egna2ic4o3;fouSud;ey,k0;liXor;ain,easa2;ny;dd,i0ld,ranL;aive,e5i4o3u14;b0Sisy,rm0Ysy;bb0ce,mb0R;a3r1w;r,t;ad,e5ild,o4u3;nda12te;ist,o1;a4ek,l3;low;s0ty;a8e7i6o3ucky;f0Jn4o15u3ve0w10y0N;d,sy;e0g;ke0l,mp,tt0Eve0;e1Qwd;me,r3te;ge;e4i3;nd;en;ol0ui19;cy,ll,n3;secu6t3;e3ima4;llege2rmedia3;te;re;aAe7i6o5u3;ge,m3ng1C;bYid;me0t;gh,l0;a3fXsita2;dy,rWv3;en0y;nd13ppy,r3;d3sh;!y;aFenEhCiBlAoofy,r3;a8e6i5o3ue0Z;o3ss;vy;m,s0;at,e3y;dy,n;nd,y;ad,ib,ooD;a2d1;a3o3;st0;tDuiS;u1y;aCeebBi9l8o6r5u3;ll,n3r0N;!ny;aCesh,iend0;a3nd,rmD;my;at,ir7;erce,nan3;ci9;le;r,ul3;ty;a6erie,sse4v3xtre0B;il;nti3;al;r4s3;tern,y;ly,th0;appZe9i5ru4u3;mb;nk;r5vi4z3;zy;ne;e,ty;a3ep,n9;d3f,r;!ly;agey,h8l7o5r4u3;dd0r0te;isp,uel;ar3ld,mmon,st0ward0zy;se;evKou1;e3il0;ap,e3;sy;aHiFlCoAr5u3;ff,r0sy;ly;a6i3oad;g4llia2;nt;ht;sh,ve;ld,un3;cy;a4o3ue;nd,o1;ck,nd;g,tt3;er;d,ld,w1;dy;bsu6ng5we3;so3;me;ry;rd",Adverb:"true\xA6a08b05d00eYfSheQinPjustOkinda,likewiZmMnJoEpCquite,r9s5t2u0very,well;ltima01p0; to,wards5;h1iny bit,o0wiO;o,t6;en,us;eldom,o0uch;!me1rt0; of;how,times,w0C;a1e0;alS;ndomRth05;ar excellenEer0oint blank; Lhaps;f3n0utright;ce0ly;! 0;ag05moX; courGten;ewJo0; longWt 0;onHwithstand9;aybe,eanwhiNore0;!ovT;! aboX;deed,steY;lla,n0;ce;or3u0;ck1l9rther0;!moK;ing; 0evK;exampCgood,suH;n mas0vI;se;e0irect2; 2fini0;te0;ly;juAtrop;ackward,y 0;far,no0; means,w; GbroFd nauseam,gEl7ny5part,s4t 2w0;ay,hi0;le;be7l0mo7wor7;arge,ea6; soon,i4;mo0way;re;l 3mo2ongsi1ready,so,togeth0ways;er;de;st;b1t0;hat;ut;ain;ad;lot,posteriori",Conjunction:"true\xA6aXbTcReNhowMiEjust00noBo9p8supposing,t5wh0yet;e1il0o3;e,st;n1re0thN; if,by,vM;evL;h0il,o;erefOo0;!uU;lus,rovided th9;r0therwiM;! not; mattEr,w0;! 0;since,th4w7;f4n0; 0asmuch;as mIcaForder t0;h0o;at;! 0;only,t0w0;hen;!ev3;ith2ven0;! 0;if,tB;er;o0uz;s,z;e0ut,y the time;cau1f0;ore;se;lt3nd,s 0;far1if,m0soon1t2;uch0; as;hou0;gh",Currency:"true\xA6$,aud,bQcOdJeurIfHgbp,hkd,iGjpy,kElDp8r7s3usd,x2y1z0\xA2,\xA3,\xA5,\u0434\u0435\u043D,\u043B\u0432,\u0440\u0443\u0431,\u0E3F,\u20A1,\u20A8,\u20AC,\u20AD,\uFDFC;lotyQ\u0142;en,uanP;af,of;h0t5;e0il5;k0q0;elK;oubleJp,upeeJ;e2ound st0;er0;lingG;n0soF;ceEnies;empi7i7;n,r0wanzaCyatC;!onaBw;ls,nr;ori7ranc9;!os;en3i2kk,o0;b0ll2;ra5;me4n0rham4;ar3;e0ny;nt1;aht,itcoin0;!s",Determiner:"true\xA6aBboth,d9e6few,le5mu8neiDplenty,s4th2various,wh0;at0ich0;evC;a0e4is,ose;!t;everal,ome;!ast,s;a1l0very;!se;ch;e0u;!s;!n0;!o0y;th0;er","Adj|Present":"true\xA6a07b04cVdQeNfJhollIidRlEmCnarrIoBp9qua8r7s3t2uttFw0;aKet,ro0;ng,u08;endChin;e2hort,l1mooth,our,pa9tray,u0;re,speU;i2ow;cu6da02leSpaN;eplica01i02;ck;aHerfePr0;eseUime,omV;bscu1pen,wn;atu0e3odeH;re;a2e1ive,ow0;er;an;st,y;ow;a2i1oul,r0;ee,inge;rm;iIke,ncy,st;l1mpty,x0;emHpress;abo4ic7;amp,e2i1oub0ry,ull;le;ffu9re6;fu8libe0;raE;alm,l5o0;mpleCn3ol,rr1unterfe0;it;e0u7;ct;juga8sum7;ea1o0;se;n,r;ankru1lu0;nt;pt;li2pproxi0rticula1;ma0;te;ght","Person|Adj":"true\xA6b3du2earnest,frank,mi2r0san1woo1;an0ich,u1;dy;sty;ella,rown",Modal:"true\xA6c5lets,m4ought3sh1w0;ill,o5;a0o4;ll,nt;! to,a;ight,ust;an,o0;uld",Verb:"true\xA6born,cannot,gonna,has,keep tabs,msg","Person|Verb":"true\xA6b8ch7dr6foster,gra5ja9lan4ma2ni9ollie,p1rob,s0wade;kip,pike,t5ue;at,eg,ier2;ck,r0;k,shal;ce;ce,nt;ew;ase,u1;iff,l1ob,u0;ck;aze,ossom","Person|Date":"true\xA6a2j0sep;an0une;!uary;p0ugust,v0;ril"};var J_="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ",zM=J_.split("").reduce(function(t,e,n){return t[e]=n,t},{}),Fte=function(t){if(J_[t]!==void 0)return J_[t];let e=1,n=36,r="";for(;t>=n;t-=n,e++,n*=36);for(;e--;){let o=t%36;r=String.fromCharCode((o<10?48:55)+o)+r,t=(t-o)/36}return r},Lte=function(t){if(zM[t]!==void 0)return zM[t];let e=0,n=1,r=36,o=1;for(;n<t.length;e+=r,n++,r*=36);for(let i=t.length-1;i>=0;i--,o*=36){let s=t.charCodeAt(i)-48;s>10&&(s-=7),e+=s*o}return e},Pf={toAlphaCode:Fte,fromAlphaCode:Lte};var Ute=function(t){let e=new RegExp("([0-9A-Z]+):([0-9A-Z]+)");for(let n=0;n<t.nodes.length;n++){let r=e.exec(t.nodes[n]);if(!r){t.symCount=n;break}t.syms[Pf.fromAlphaCode(r[1])]=Pf.fromAlphaCode(r[2])}t.nodes=t.nodes.slice(t.symCount,t.nodes.length)},JM=Ute;var Bte=function(t,e,n){let r=Pf.fromAlphaCode(e);return r<t.symCount?t.syms[r]:n+r+1-t.symCount},Gte=function(t){let e=[],n=(r,o)=>{let i=t.nodes[r];i[0]==="!"&&(e.push(o),i=i.slice(1));let s=i.split(/([A-Z0-9,]+)/g);for(let a=0;a<s.length;a+=2){let l=s[a],u=s[a+1];if(!l)continue;let f=o+l;if(u===","||u===void 0){e.push(f);continue}let p=Bte(t,u,r);n(p,f)}};return n(0,""),e},Hte=function(t){let e={nodes:t.split(";"),syms:[],symCount:0};return t.match(":")&&JM(e),Gte(e)},KM=Hte;var qte=function(t){if(!t)return{};let e=t.split("|").reduce((r,o)=>{let i=o.split("\xA6");return r[i[0]]=i[1],r},{}),n={};return Object.keys(e).forEach(function(r){let o=KM(e[r]);r==="true"&&(r=!0);for(let i=0;i<o.length;i++){let s=o[i];n.hasOwnProperty(s)===!0?Array.isArray(n[s])===!1?n[s]=[n[s],r]:n[s].push(r):n[s]=r}}),n},K_=qte;var Or=["Possessive","Pronoun"],$te={"20th century fox":"Organization","7 eleven":"Organization","motel 6":"Organization",g8:"Organization",vh1:"Organization","76ers":"SportsTeam","49ers":"SportsTeam",q1:"Date",q2:"Date",q3:"Date",q4:"Date",km2:"Unit",m2:"Unit",dm2:"Unit",cm2:"Unit",mm2:"Unit",mile2:"Unit",in2:"Unit",yd2:"Unit",ft2:"Unit",m3:"Unit",dm3:"Unit",cm3:"Unit",in3:"Unit",ft3:"Unit",yd3:"Unit","at&t":"Organization","black & decker":"Organization","h & m":"Organization","johnson & johnson":"Organization","procter & gamble":"Organization","ben & jerry's":"Organization","&":"Conjunction",i:["Pronoun","Singular"],he:["Pronoun","Singular"],she:["Pronoun","Singular"],it:["Pronoun","Singular"],they:["Pronoun","Plural"],we:["Pronoun","Plural"],was:["Copula","PastTense"],is:["Copula","PresentTense"],are:["Copula","PresentTense"],am:["Copula","PresentTense"],were:["Copula","PastTense"],her:Or,his:Or,hers:Or,their:Or,theirs:Or,themselves:Or,your:Or,our:Or,ours:Or,my:Or,its:Or,vs:["Conjunction","Abbreviation"],if:["Condition","Preposition"],closer:"Comparative",closest:"Superlative",much:"Adverb",may:"Modal",babysat:"PastTense",blew:"PastTense",drank:"PastTense",drove:"PastTense",forgave:"PastTense",skiied:"PastTense",spilt:"PastTense",stung:"PastTense",swam:"PastTense",swung:"PastTense",guaranteed:"PastTense",shrunk:"PastTense",nears:"PresentTense",nearing:"Gerund",neared:"PastTense",no:["Negative","Expression"]},YM=$te;var Y_={"20th century fox":"Organization","7 eleven":"Organization","motel 6":"Organization","excuse me":"Expression","financial times":"Organization","guns n roses":"Organization","la z boy":"Organization","labour party":"Organization","new kids on the block":"Organization","new york times":"Organization","the guess who":"Organization","thin lizzy":"Organization","prime minister":"Actor","free market":"Singular","lay up":"Singular","living room":"Singular","living rooms":"Plural","spin off":"Singular","appeal court":"Uncountable","cold war":"Uncountable","gene pool":"Uncountable","machine learning":"Uncountable","nail polish":"Uncountable","time off":"Uncountable","take part":"Infinitive","bill gates":"Person","doctor who":"Person","dr who":"Person","he man":"Person","iron man":"Person","kid cudi":"Person","run dmc":"Person","rush limbaugh":"Person","snow white":"Person","tiger woods":"Person","brand new":"Adjective","en route":"Adjective","left wing":"Adjective","off guard":"Adjective","on board":"Adjective","part time":"Adjective","right wing":"Adjective","so called":"Adjective","spot on":"Adjective","straight forward":"Adjective","super duper":"Adjective","tip top":"Adjective","top notch":"Adjective","up to date":"Adjective","win win":"Adjective","brooklyn nets":"SportsTeam","chicago bears":"SportsTeam","houston astros":"SportsTeam","houston dynamo":"SportsTeam","houston rockets":"SportsTeam","houston texans":"SportsTeam","minnesota twins":"SportsTeam","orlando magic":"SportsTeam","san antonio spurs":"SportsTeam","san diego chargers":"SportsTeam","san diego padres":"SportsTeam","iron maiden":"ProperNoun","isle of man":"Country","united states":"Country","united states of america":"Country","prince edward island":"Region","cedar breaks":"Place","cedar falls":"Place","point blank":"Adverb","tiny bit":"Adverb","by the time":"Conjunction","no matter":"Conjunction","civil wars":"Plural","credit cards":"Plural","default rates":"Plural","free markets":"Plural","head starts":"Plural","home runs":"Plural","lay ups":"Plural","phone calls":"Plural","press releases":"Plural","record labels":"Plural","soft serves":"Plural","student loans":"Plural","tax returns":"Plural","tv shows":"Plural","video games":"Plural","took part":"PastTense","takes part":"PresentTense","taking part":"Gerund","taken part":"Participle","light bulb":"Noun","rush hour":"Noun","fluid ounce":"Unit","the rolling stones":"Organization"};var XM=[":(",":)",":P",":p",":O",";(",";)",";P",";p",";O",":3",":|",":/",":\\",":$",":*",":@",":-(",":-)",":-P",":-p",":-O",":-3",":-|",":-/",":-\\",":-$",":-*",":-@",":^(",":^)",":^P",":^p",":^O",":^3",":^|",":^/",":^\\",":^$",":^*",":^@","):","(:","$:","*:",")-:","(-:","$-:","*-:",")^:","(^:","$^:","*^:","<3","</3","<\\3","=("];var Vte={a:[[/(antenn|formul|nebul|vertebr|vit)a$/i,"$1ae"],[/ia$/i,"ia"]],e:[[/(kn|l|w)ife$/i,"$1ives"],[/(hive)$/i,"$1s"],[/([m|l])ouse$/i,"$1ice"],[/([m|l])ice$/i,"$1ice"]],f:[[/^(dwar|handkerchie|hoo|scar|whar)f$/i,"$1ves"],[/^((?:ca|e|ha|(?:our|them|your)?se|she|wo)l|lea|loa|shea|thie)f$/i,"$1ves"]],i:[[/(octop|vir)i$/i,"$1i"]],m:[[/([ti])um$/i,"$1a"]],n:[[/^(oxen)$/i,"$1"]],o:[[/(al|ad|at|er|et|ed)o$/i,"$1oes"]],s:[[/(ax|test)is$/i,"$1es"],[/(alias|status)$/i,"$1es"],[/sis$/i,"ses"],[/(bu)s$/i,"$1ses"],[/(sis)$/i,"ses"],[/^(?!talis|.*hu)(.*)man$/i,"$1men"],[/(octop|vir|radi|nucle|fung|cact|stimul)us$/i,"$1i"]],x:[[/(matr|vert|ind|cort)(ix|ex)$/i,"$1ices"],[/^(ox)$/i,"$1en"]],y:[[/([^aeiouy]|qu)y$/i,"$1ies"]],z:[[/(quiz)$/i,"$1zes"]]},If=Vte;var jte=/([xsz]|ch|sh)$/,Wte=function(t){let e=t[t.length-1];if(If.hasOwnProperty(e)===!0)for(let n=0;n<If[e].length;n+=1){let r=If[e][n][0];if(r.test(t)===!0)return t.replace(r,If[e][n][1])}return null},zte=function(t="",e){let{irregularPlurals:n,uncountable:r}=e.two;if(r.hasOwnProperty(t))return t;if(n.hasOwnProperty(t))return n[t];let o=Wte(t);return o!==null?o:jte.test(t)?t+"es":t+"s"},ha=zte;var Jte=/\|/,pa=YM,Jm={},Kte={two:{irregularPlurals:zm,uncountable:{}}};Object.keys(z_).forEach(t=>{let e=K_(z_[t]);if(!Jte.test(t)){Object.keys(e).forEach(n=>{pa[n]=t});return}Object.keys(e).forEach(n=>{if(Jm[n]=t,t==="Noun|Verb"){let r=ha(n,Kte);Jm[r]="Plural|Verb"}})});XM.forEach(t=>pa[t]="Emoticon");delete pa[""];delete pa[null];delete pa[" "];var Q="Singular",$e={beforeTags:{Determiner:Q,Possessive:Q,Acronym:Q,Noun:Q,Adjective:Q,PresentTense:Q,Gerund:Q,PastTense:Q,Infinitive:Q,Date:Q,Ordinal:Q,Demonym:Q},afterTags:{Value:Q,Modal:Q,Copula:Q,PresentTense:Q,PastTense:Q,Demonym:Q,Actor:Q},beforeWords:{the:Q,with:Q,without:Q,of:Q,for:Q,any:Q,all:Q,on:Q,cut:Q,cuts:Q,increase:Q,decrease:Q,raise:Q,drop:Q,save:Q,saved:Q,saves:Q,make:Q,makes:Q,made:Q,minus:Q,plus:Q,than:Q,another:Q,versus:Q,neither:Q,about:Q,favorite:Q,best:Q,daily:Q,weekly:Q,linear:Q,binary:Q,mobile:Q,lexical:Q,technical:Q,computer:Q,scientific:Q,security:Q,government:Q,popular:Q,formal:Q,no:Q,more:Q,one:Q,let:Q,her:Q,his:Q,their:Q,our:Q,us:Q,sheer:Q,monthly:Q,yearly:Q,current:Q,previous:Q,upcoming:Q,last:Q,next:Q,main:Q,initial:Q,final:Q,beginning:Q,end:Q,top:Q,bottom:Q,future:Q,past:Q,major:Q,minor:Q,side:Q,central:Q,peripheral:Q,public:Q,private:Q},afterWords:{of:Q,system:Q,aid:Q,method:Q,utility:Q,tool:Q,reform:Q,therapy:Q,philosophy:Q,room:Q,authority:Q,says:Q,said:Q,wants:Q,wanted:Q,is:Q,did:Q,do:Q,can:Q,wise:Q}};var ne="Infinitive",wt={beforeTags:{Modal:ne,Adverb:ne,Negative:ne,Plural:ne},afterTags:{Determiner:ne,Adverb:ne,Possessive:ne,Reflexive:ne,Preposition:ne,Cardinal:ne,Comparative:ne,Superlative:ne},beforeWords:{i:ne,we:ne,you:ne,they:ne,to:ne,please:ne,will:ne,have:ne,had:ne,would:ne,could:ne,should:ne,do:ne,did:ne,does:ne,can:ne,must:ne,us:ne,me:ne,let:ne,even:ne,when:ne,help:ne,he:ne,she:ne,it:ne,being:ne,bi:ne,co:ne,contra:ne,de:ne,inter:ne,intra:ne,mis:ne,pre:ne,out:ne,counter:ne,nobody:ne,somebody:ne,anybody:ne,everybody:ne},afterWords:{the:ne,me:ne,you:ne,him:ne,us:ne,her:ne,his:ne,them:ne,they:ne,it:ne,himself:ne,herself:ne,itself:ne,myself:ne,ourselves:ne,themselves:ne,something:ne,anything:ne,a:ne,an:ne,up:ne,down:ne,by:ne,out:ne,off:ne,under:ne,what:ne,all:ne,to:ne,because:ne,although:ne,how:ne,otherwise:ne,together:ne,though:ne,into:ne,yet:ne,more:ne,here:ne,there:ne,away:ne}};var Yte={beforeTags:Object.assign({},wt.beforeTags,$e.beforeTags,{}),afterTags:Object.assign({},wt.afterTags,$e.afterTags,{}),beforeWords:Object.assign({},wt.beforeWords,$e.beforeWords,{}),afterWords:Object.assign({},wt.afterWords,$e.afterWords,{})},QM=Yte;var ae="Adjective",ot={beforeTags:{Determiner:ae,Possessive:ae,Hyphenated:ae},afterTags:{Adjective:ae},beforeWords:{seem:ae,seemed:ae,seems:ae,feel:ae,feels:ae,felt:ae,stay:ae,appear:ae,appears:ae,appeared:ae,also:ae,over:ae,under:ae,too:ae,it:ae,but:ae,still:ae,really:ae,quite:ae,well:ae,very:ae,truly:ae,how:ae,deeply:ae,hella:ae,profoundly:ae,extremely:ae,so:ae,badly:ae,mostly:ae,totally:ae,awfully:ae,rather:ae,nothing:ae,something:ae,anything:ae,not:ae,me:ae,is:ae,face:ae,faces:ae,faced:ae,look:ae,looks:ae,looked:ae,reveal:ae,reveals:ae,revealed:ae,sound:ae,sounded:ae,sounds:ae,remains:ae,remained:ae,prove:ae,proves:ae,proved:ae,becomes:ae,stays:ae,tastes:ae,taste:ae,smells:ae,smell:ae,gets:ae,grows:ae,as:ae,rings:ae,radiates:ae,conveys:ae,convey:ae,conveyed:ae,of:ae},afterWords:{too:ae,also:ae,or:ae,enough:ae,as:ae}};var we="Gerund",fo={beforeTags:{Adverb:we,Preposition:we,Conjunction:we},afterTags:{Adverb:we,Possessive:we,Person:we,Pronoun:we,Determiner:we,Copula:we,Preposition:we,Conjunction:we,Comparative:we},beforeWords:{been:we,keep:we,continue:we,stop:we,am:we,be:we,me:we,began:we,start:we,starts:we,started:we,stops:we,stopped:we,help:we,helps:we,avoid:we,avoids:we,love:we,loves:we,loved:we,hate:we,hates:we,hated:we},afterWords:{you:we,me:we,her:we,him:we,his:we,them:we,their:we,it:we,this:we,there:we,on:we,about:we,for:we,up:we,down:we}};var Ge="Gerund",Ki="Adjective",Xte={beforeTags:Object.assign({},ot.beforeTags,fo.beforeTags,{Imperative:Ge,Infinitive:Ki,Plural:Ge}),afterTags:Object.assign({},ot.afterTags,fo.afterTags,{Noun:Ki}),beforeWords:Object.assign({},ot.beforeWords,fo.beforeWords,{is:Ki,are:Ge,was:Ki,of:Ki,suggest:Ge,suggests:Ge,suggested:Ge,recommend:Ge,recommends:Ge,recommended:Ge,imagine:Ge,imagines:Ge,imagined:Ge,consider:Ge,considered:Ge,considering:Ge,resist:Ge,resists:Ge,resisted:Ge,avoid:Ge,avoided:Ge,avoiding:Ge,except:Ki,accept:Ki,assess:Ge,explore:Ge,fear:Ge,fears:Ge,appreciate:Ge,question:Ge,help:Ge,embrace:Ge,with:Ki}),afterWords:Object.assign({},ot.afterWords,fo.afterWords,{to:Ge,not:Ge,the:Ge})},ZM=Xte;var eF={beforeTags:{Determiner:void 0,Cardinal:"Noun",PhrasalVerb:"Adjective"},afterTags:{}},Qte={beforeTags:Object.assign({},ot.beforeTags,$e.beforeTags,eF.beforeTags),afterTags:Object.assign({},ot.afterTags,$e.afterTags,eF.afterTags),beforeWords:Object.assign({},ot.beforeWords,$e.beforeWords,{are:"Adjective",is:"Adjective",was:"Adjective",be:"Adjective",off:"Adjective",out:"Adjective"}),afterWords:Object.assign({},ot.afterWords,$e.afterWords)},tF=Qte;var Te="PastTense",xf="Adjective",Km={beforeTags:{Adverb:Te,Pronoun:Te,ProperNoun:Te,Auxiliary:Te,Noun:Te},afterTags:{Possessive:Te,Pronoun:Te,Determiner:Te,Adverb:Te,Comparative:Te,Date:Te,Gerund:Te},beforeWords:{be:Te,who:Te,get:xf,had:Te,has:Te,have:Te,been:Te,it:Te,as:Te,for:xf,more:xf,always:xf},afterWords:{by:Te,back:Te,out:Te,in:Te,up:Te,down:Te,before:Te,after:Te,for:Te,the:Te,with:Te,as:Te,on:Te,at:Te,between:Te,to:Te,into:Te,us:Te,them:Te,his:Te,her:Te,their:Te,our:Te,me:Te,about:xf}},nF={beforeTags:Object.assign({},ot.beforeTags,Km.beforeTags),afterTags:Object.assign({},ot.afterTags,Km.afterTags),beforeWords:Object.assign({},ot.beforeWords,Km.beforeWords),afterWords:Object.assign({},ot.afterWords,Km.afterWords)};var Zte={afterTags:{Noun:"Adjective",Conjunction:void 0}},ene={beforeTags:Object.assign({},ot.beforeTags,wt.beforeTags,{Adverb:void 0,Negative:void 0}),afterTags:Object.assign({},ot.afterTags,wt.afterTags,Zte.afterTags),beforeWords:Object.assign({},ot.beforeWords,wt.beforeWords,{have:void 0,had:void 0,not:void 0,went:"Adjective",goes:"Adjective",got:"Adjective",be:"Adjective"}),afterWords:Object.assign({},ot.afterWords,wt.afterWords,{to:void 0,as:"Adjective"})},rF=ene;var Ym={beforeTags:{Copula:"Gerund",PastTense:"Gerund",PresentTense:"Gerund",Infinitive:"Gerund"},afterTags:{Value:"Gerund"},beforeWords:{are:"Gerund",were:"Gerund",be:"Gerund",no:"Gerund",without:"Gerund",you:"Gerund",we:"Gerund",they:"Gerund",he:"Gerund",she:"Gerund",us:"Gerund",them:"Gerund"},afterWords:{the:"Gerund",this:"Gerund",that:"Gerund",me:"Gerund",us:"Gerund",them:"Gerund"}},tne={beforeTags:Object.assign({},fo.beforeTags,$e.beforeTags,Ym.beforeTags),afterTags:Object.assign({},fo.afterTags,$e.afterTags,Ym.afterTags),beforeWords:Object.assign({},fo.beforeWords,$e.beforeWords,Ym.beforeWords),afterWords:Object.assign({},fo.afterWords,$e.afterWords,Ym.afterWords)},oF=tne;var Su="Singular",ma="Infinitive",nne={beforeTags:Object.assign({},wt.beforeTags,$e.beforeTags,{Adjective:Su,Particle:Su}),afterTags:Object.assign({},wt.afterTags,$e.afterTags,{ProperNoun:ma,Gerund:ma,Adjective:ma,Copula:Su}),beforeWords:Object.assign({},wt.beforeWords,$e.beforeWords,{is:Su,was:Su,of:Su,have:null}),afterWords:Object.assign({},wt.afterWords,$e.afterWords,{instead:ma,about:ma,his:ma,her:ma,to:null,by:null,in:null})},iF=nne;var Ve="Person",it={beforeTags:{Honorific:Ve,Person:Ve},afterTags:{Person:Ve,ProperNoun:Ve,Verb:Ve},ownTags:{ProperNoun:Ve},beforeWords:{hi:Ve,hey:Ve,yo:Ve,dear:Ve,hello:Ve},afterWords:{said:Ve,says:Ve,told:Ve,tells:Ve,feels:Ve,felt:Ve,seems:Ve,thinks:Ve,thought:Ve,spends:Ve,spendt:Ve,plays:Ve,played:Ve,sing:Ve,sang:Ve,learn:Ve,learned:Ve,wants:Ve,wanted:Ve}};var st="Month",rne="Person",Xm={beforeTags:{Date:st,Value:st},afterTags:{Date:st,Value:st},beforeWords:{by:st,in:st,on:st,during:st,after:st,before:st,between:st,until:st,til:st,sometime:st,of:st,this:st,next:st,last:st,previous:st,following:st,with:rne},afterWords:{sometime:st,in:st,of:st,until:st,the:st}},sF={beforeTags:Object.assign({},it.beforeTags,Xm.beforeTags),afterTags:Object.assign({},it.afterTags,Xm.afterTags),beforeWords:Object.assign({},it.beforeWords,Xm.beforeWords),afterWords:Object.assign({},it.afterWords,Xm.afterWords)};var one={beforeTags:Object.assign({},$e.beforeTags,it.beforeTags),afterTags:Object.assign({},$e.afterTags,it.afterTags),beforeWords:Object.assign({},$e.beforeWords,it.beforeWords,{i:"Infinitive",we:"Infinitive"}),afterWords:Object.assign({},$e.afterWords,it.afterWords)},aF=one;var ine={beforeTags:Object.assign({},$e.beforeTags,it.beforeTags,wt.beforeTags),afterTags:Object.assign({},$e.afterTags,it.afterTags,wt.afterTags),beforeWords:Object.assign({},$e.beforeWords,it.beforeWords,wt.beforeWords),afterWords:Object.assign({},$e.afterWords,it.afterWords,wt.afterWords)},lF=ine;var Bt="Place",Qm={beforeTags:{Place:Bt},afterTags:{Place:Bt,Abbreviation:Bt},beforeWords:{in:Bt,by:Bt,near:Bt,from:Bt,to:Bt},afterWords:{in:Bt,by:Bt,near:Bt,from:Bt,to:Bt,government:Bt,council:Bt,region:Bt,city:Bt}},sne={beforeTags:Object.assign({},Qm.beforeTags,it.beforeTags),afterTags:Object.assign({},Qm.afterTags,it.afterTags),beforeWords:Object.assign({},Qm.beforeWords,it.beforeWords),afterWords:Object.assign({},Qm.afterWords,it.afterWords)},uF=sne;var ane={beforeTags:Object.assign({},it.beforeTags,ot.beforeTags),afterTags:Object.assign({},it.afterTags,ot.afterTags),beforeWords:Object.assign({},it.beforeWords,ot.beforeWords),afterWords:Object.assign({},it.afterWords,ot.afterWords)},cF=ane;var sr="Unit",lne={beforeTags:{Value:sr},afterTags:{},beforeWords:{per:sr,every:sr,each:sr,square:sr,cubic:sr,sq:sr,metric:sr},afterWords:{per:sr,squared:sr,cubed:sr,long:sr}},fF=lne;var Pu={"Actor|Verb":QM,"Adj|Gerund":ZM,"Adj|Noun":tF,"Adj|Past":nF,"Adj|Present":rF,"Noun|Verb":iF,"Noun|Gerund":oF,"Person|Noun":aF,"Person|Date":sF,"Person|Verb":lF,"Person|Place":uF,"Person|Adj":cF,"Unit|Noun":fF},Zm=(t,e)=>{let n=Object.keys(t).reduce((r,o)=>(r[o]=t[o]==="Infinitive"?"PresentTense":"Plural",r),{});return Object.assign(n,e)};Pu["Plural|Verb"]={beforeWords:Zm(Pu["Noun|Verb"].beforeWords,{had:"Plural",have:"Plural"}),afterWords:Zm(Pu["Noun|Verb"].afterWords,{his:"PresentTense",her:"PresentTense",its:"PresentTense",in:null,to:null,is:"PresentTense",by:"PresentTense"}),beforeTags:Zm(Pu["Noun|Verb"].beforeTags,{Conjunction:"PresentTense",Noun:void 0,ProperNoun:"PresentTense"}),afterTags:Zm(Pu["Noun|Verb"].afterTags,{Gerund:"Plural",Noun:"PresentTense",Value:"PresentTense"})};var dF=Pu;var je="Adjective",Dt="Infinitive",ga="PresentTense",xe="Singular",Mt="PastTense",Iu="Adverb",Hn="Plural",ct="Actor",eg="Verb",Jt="Noun",une="ProperNoun",Dr="LastName",hF="Modal",Ye="Place",X_="Participle",pF=[null,null,{ea:xe,ia:Jt,ic:je,ly:Iu,"'n":eg,"'t":eg},{oed:Mt,ued:Mt,xed:Mt," so":Iu,"'ll":hF,"'re":"Copula",azy:je,eer:Jt,end:eg,ped:Mt,ffy:je,ify:Dt,ing:"Gerund",ize:Dt,ibe:Dt,lar:je,mum:je,nes:ga,nny:je,ous:je,que:je,ger:Jt,ber:Jt,rol:xe,sis:xe,ogy:xe,oid:xe,ian:xe,zes:ga,eld:Mt,ken:X_,ven:X_,ten:X_,ect:Dt,ict:Dt,ign:Dt,oze:Dt,ful:je,bal:je,ton:Jt,pur:Ye},{amed:Mt,aped:Mt,ched:Mt,lked:Mt,rked:Mt,reed:Mt,nded:Mt,mned:je,cted:Mt,dged:Mt,ield:xe,akis:Dr,cede:Dt,chuk:Dr,czyk:Dr,ects:ga,iend:xe,ends:eg,enko:Dr,ette:xe,iary:xe,wner:xe,fies:ga,fore:Iu,gate:Dt,gone:je,ices:Hn,ints:Hn,ruct:Dt,ines:Hn,ions:Hn,ners:Hn,pers:Hn,lers:Hn,less:je,llen:je,made:je,nsen:Dr,oses:ga,ould:hF,some:je,sson:Dr,ians:Hn,tion:xe,tage:Jt,ique:xe,tive:je,tors:Jt,vice:xe,lier:xe,fier:xe,wned:Mt,gent:xe,tist:ct,pist:ct,rist:ct,mist:ct,yist:ct,vist:ct,ists:ct,lite:xe,site:xe,rite:xe,mite:xe,bite:xe,mate:xe,date:xe,ndal:xe,vent:xe,uist:ct,gist:ct,note:xe,cide:xe,ence:xe,wide:je,vide:Dt,ract:Dt,duce:Dt,pose:Dt,eive:Dt,lyze:Dt,lyse:Dt,iant:je,nary:je,ghty:je,uent:je,erer:ct,bury:Ye,dorf:Jt,esty:Jt,wych:Ye,dale:Ye,folk:Ye,vale:Ye,abad:Ye,sham:Ye,wick:Ye,view:Ye},{elist:ct,holic:xe,phite:xe,tized:Mt,urned:Mt,eased:Mt,ances:Hn,bound:je,ettes:Hn,fully:Iu,ishes:ga,ities:Hn,marek:Dr,nssen:Dr,ology:Jt,osome:xe,tment:xe,ports:Hn,rough:je,tches:ga,tieth:"Ordinal",tures:Hn,wards:Iu,where:Iu,archy:Jt,pathy:Jt,opoly:Jt,embly:Jt,phate:Jt,ndent:xe,scent:xe,onist:ct,anist:ct,alist:ct,olist:ct,icist:ct,ounce:Dt,iable:je,borne:je,gnant:je,inant:je,igent:je,atory:je,rient:xe,dient:xe,maker:ct,burgh:Ye,mouth:Ye,ceter:Ye,ville:Ye,hurst:Ye,stead:Ye,endon:Ye,brook:Ye,shire:Ye,worth:Jt,field:une,ridge:Ye},{auskas:Dr,parent:xe,cedent:xe,ionary:xe,cklist:xe,brooke:Ye,keeper:ct,logist:ct,teenth:"Value",worker:ct,master:ct,writer:ct,brough:Ye,cester:Ye,ington:Ye,cliffe:Ye,ingham:Ye},{chester:Ye,logists:ct,opoulos:Dr,borough:Ye,sdottir:Dr}];var qn="Adjective",Xe="Noun",kf="Verb",mF=[null,null,{},{neo:Xe,bio:Xe,"de-":kf,"re-":kf,"un-":kf,"ex-":Xe},{anti:Xe,auto:Xe,faux:qn,hexa:Xe,kilo:Xe,mono:Xe,nano:Xe,octa:Xe,poly:Xe,semi:qn,tele:Xe,"pro-":qn,"mis-":kf,"dis-":kf,"pre-":qn},{anglo:Xe,centi:Xe,ethno:Xe,ferro:Xe,grand:Xe,hepta:Xe,hydro:Xe,intro:Xe,macro:Xe,micro:Xe,milli:Xe,nitro:Xe,penta:Xe,quasi:qn,radio:Xe,tetra:Xe,"omni-":qn,"post-":qn},{pseudo:qn,"extra-":qn,"hyper-":qn,"inter-":qn,"intra-":qn,"deca-":qn},{electro:Xe}];var ut="Adjective",tg="Infinitive",ng="PresentTense",Qo="Singular",ln="PastTense",gF="Adverb",Zo="Expression",yF="Actor",bF="Verb",vF="Noun",rg="LastName",wF={a:[[/.[aeiou]na$/,vF,"tuna"],[/.[oau][wvl]ska$/,rg],[/.[^aeiou]ica$/,Qo,"harmonica"],[/^([hyj]a+)+$/,Zo,"haha"]],c:[[/.[^aeiou]ic$/,ut]],d:[[/[aeiou](pp|ll|ss|ff|gg|tt|rr|bb|nn|mm)ed$/,ln,"popped"],[/.[aeo]{2}[bdgmnprvz]ed$/,ln,"rammed"],[/.[aeiou][sg]hed$/,ln,"gushed"],[/.[aeiou]red$/,ln,"hired"],[/.[aeiou]r?ried$/,ln,"hurried"],[/[^aeiou]ard$/,Qo,"steward"],[/[aeiou][^aeiou]id$/,ut,""],[/.[vrl]id$/,ut,"livid"],[/..led$/,ln,"hurled"],[/.[iao]sed$/,ln,""],[/[aeiou]n?[cs]ed$/,ln,""],[/[aeiou][rl]?[mnf]ed$/,ln,""],[/[aeiou][ns]?c?ked$/,ln,"bunked"],[/[aeiou]gned$/,ln],[/[aeiou][nl]?ged$/,ln],[/.[tdbwxyz]ed$/,ln],[/[^aeiou][aeiou][tvx]ed$/,ln],[/.[cdflmnprstv]ied$/,ln,"emptied"]],e:[[/.[lnr]ize$/,tg,"antagonize"],[/.[^aeiou]ise$/,tg,"antagonise"],[/.[aeiou]te$/,tg,"bite"],[/.[^aeiou][ai]ble$/,ut,"fixable"],[/.[^aeiou]eable$/,ut,"maleable"],[/.[ts]ive$/,ut,"festive"],[/[a-z]-like$/,ut,"woman-like"]],h:[[/.[^aeiouf]ish$/,ut,"cornish"],[/.v[iy]ch$/,rg,"..ovich"],[/^ug?h+$/,Zo,"ughh"],[/^uh[ -]?oh$/,Zo,"uhoh"],[/[a-z]-ish$/,ut,"cartoon-ish"]],i:[[/.[oau][wvl]ski$/,rg,"polish-male"]],k:[[/^(k){2}$/,Zo,"kkkk"]],l:[[/.[gl]ial$/,ut,"familial"],[/.[^aeiou]ful$/,ut,"fitful"],[/.[nrtumcd]al$/,ut,"natal"],[/.[^aeiou][ei]al$/,ut,"familial"]],m:[[/.[^aeiou]ium$/,Qo,"magnesium"],[/[^aeiou]ism$/,Qo,"schism"],[/^[hu]m+$/,Zo,"hmm"],[/^\d+ ?[ap]m$/,"Date","3am"]],n:[[/.[lsrnpb]ian$/,ut,"republican"],[/[^aeiou]ician$/,yF,"musician"],[/[aeiou][ktrp]in'$/,"Gerund","cookin'"]],o:[[/^no+$/,Zo,"noooo"],[/^(yo)+$/,Zo,"yoo"],[/^wo{2,}[pt]?$/,Zo,"woop"]],r:[[/.[bdfklmst]ler$/,"Noun"],[/[aeiou][pns]er$/,Qo],[/[^i]fer$/,tg],[/.[^aeiou][ao]pher$/,yF],[/.[lk]er$/,"Noun"],[/.ier$/,"Comparative"]],t:[[/.[di]est$/,"Superlative"],[/.[icldtgrv]ent$/,ut],[/[aeiou].*ist$/,ut],[/^[a-z]et$/,bF]],s:[[/.[^aeiou]ises$/,ng],[/.[rln]ates$/,ng],[/.[^z]ens$/,bF],[/.[lstrn]us$/,Qo],[/.[aeiou]sks$/,ng],[/.[aeiou]kes$/,ng],[/[aeiou][^aeiou]is$/,Qo],[/[a-z]'s$/,vF],[/^yes+$/,Zo]],v:[[/.[^aeiou][ai][kln]ov$/,rg]],y:[[/.[cts]hy$/,ut],[/.[st]ty$/,ut],[/.[tnl]ary$/,ut],[/.[oe]ry$/,Qo],[/[rdntkbhs]ly$/,gF],[/.(gg|bb|zz)ly$/,ut],[/...lly$/,gF],[/.[gk]y$/,ut],[/[bszmp]{2}y$/,ut],[/.[ai]my$/,ut],[/[ea]{2}zy$/,ut],[/.[^aeiou]ity$/,Qo]]};var Kt="Verb",nt="Noun",_F={leftTags:[["Adjective",nt],["Possessive",nt],["Determiner",nt],["Adverb",Kt],["Pronoun",Kt],["Value",nt],["Ordinal",nt],["Modal",Kt],["Superlative",nt],["Demonym",nt],["Honorific","Person"]],leftWords:[["i",Kt],["first",nt],["it",Kt],["there",Kt],["not",Kt],["because",nt],["if",nt],["but",nt],["who",Kt],["this",nt],["his",nt],["when",nt],["you",Kt],["very","Adjective"],["old",nt],["never",Kt],["before",nt],["a",nt],["the",nt],["been",Kt]],rightTags:[["Copula",nt],["PastTense",nt],["Conjunction",nt],["Modal",nt]],rightWords:[["there",Kt],["me",Kt],["man","Adjective"],["him",Kt],["it",Kt],["were",nt],["took",nt],["himself",Kt],["went",nt],["who",nt],["jr","Person"]]};var Yi={Comparative:{fwd:"3:ser,ier\xA61er:h,t,f,l,n\xA61r:e\xA62er:ss,or,om",both:"3er:ver,ear,alm\xA63ner:hin\xA63ter:lat\xA62mer:im\xA62er:ng,rm,mb\xA62ber:ib\xA62ger:ig\xA61er:w,p,k,d\xA6ier:y",rev:"1:tter,yer\xA62:uer,ver,ffer,oner,eler,ller,iler,ster,cer,uler,sher,ener,gher,aner,adder,nter,eter,rter,hter,rner,fter\xA63:oser,ooler,eafer,user,airer,bler,maler,tler,eater,uger,rger,ainer,urer,ealer,icher,pler,emner,icter,nser,iser\xA64:arser,viner,ucher,rosser,somer,ndomer,moter,oother,uarer,hiter\xA65:nuiner,esser,emier\xA6ar:urther",ex:"worse:bad\xA6better:good\xA64er:fair,gray,poor\xA61urther:far\xA63ter:fat,hot,wet\xA63der:mad,sad\xA63er:shy,fun\xA64der:glad\xA6:\xA64r:cute,dire,fake,fine,free,lame,late,pale,rare,ripe,rude,safe,sore,tame,wide\xA65r:eerie,stale"},Gerund:{fwd:"1:nning,tting,rring,pping,eing,mming,gging,dding,bbing,kking\xA62:eking,oling,eling,eming\xA63:velling,siting,uiting,fiting,loting,geting,ialing,celling\xA64:graming",both:"1:aing,iing,fing,xing,ying,oing,hing,wing\xA62:tzing,rping,izzing,bting,mning,sping,wling,rling,wding,rbing,uping,lming,wning,mping,oning,lting,mbing,lking,fting,hting,sking,gning,pting,cking,ening,nking,iling,eping,ering,rting,rming,cting,lping,ssing,nting,nding,lding,sting,rning,rding,rking\xA63:belling,siping,toming,yaking,uaking,oaning,auling,ooping,aiding,naping,euring,tolling,uzzing,ganing,haning,ualing,halling,iasing,auding,ieting,ceting,ouling,voring,ralling,garing,joring,oaming,oaking,roring,nelling,ooring,uelling,eaming,ooding,eaping,eeting,ooting,ooming,xiting,keting,ooking,ulling,airing,oaring,biting,outing,oiting,earing,naling,oading,eeding,ouring,eaking,aiming,illing,oining,eaning,onging,ealing,aining,eading\xA64:thoming,melling,aboring,ivoting,weating,dfilling,onoring,eriting,imiting,tialling,rgining,otoring,linging,winging,lleting,louding,spelling,mpelling,heating,feating,opelling,choring,welling,ymaking,ctoring,calling,peating,iloring,laiting,utoring,uditing,mmaking,loating,iciting,waiting,mbating,voiding,otalling,nsoring,nselling,ocusing,itoring,eloping\xA65:rselling,umpeting,atrolling,treating,tselling,rpreting,pringing,ummeting,ossoming,elmaking,eselling,rediting,totyping,onmaking,rfeiting,ntrolling\xA65e:chmaking,dkeeping,severing,erouting,ecreting,ephoning,uthoring,ravening,reathing,pediting,erfering,eotyping,fringing,entoring,ombining,ompeting\xA64e:emaking,eething,twining,rruling,chuting,xciting,rseding,scoping,edoring,pinging,lunging,agining,craping,pleting,eleting,nciting,nfining,ncoding,tponing,ecoding,writing,esaling,nvening,gnoring,evoting,mpeding,rvening,dhering,mpiling,storing,nviting,ploring\xA63e:tining,nuring,saking,miring,haling,ceding,xuding,rining,nuting,laring,caring,miling,riding,hoking,piring,lading,curing,uading,noting,taping,futing,paring,hading,loding,siring,guring,vading,voking,during,niting,laning,caping,luting,muting,ruding,ciding,juring,laming,caling,hining,uoting,liding,ciling,duling,tuting,puting,cuting,coring,uiding,tiring,turing,siding,rading,enging,haping,buting,lining,taking,anging,haring,uiring,coming,mining,moting,suring,viding,luding\xA62e:tring,zling,uging,oging,gling,iging,vring,fling,lging,obing,psing,pling,ubing,cling,dling,wsing,iking,rsing,dging,kling,ysing,tling,rging,eging,nsing,uning,osing,uming,using,ibing,bling,aging,ising,asing,ating\xA62ie:rlying\xA61e:zing,uing,cing,ving",rev:"ying:ie\xA61ing:se,ke,te,we,ne,re,de,pe,me,le,c,he\xA62ing:ll,ng,dd,ee,ye,oe,rg,us\xA62ning:un\xA62ging:og,ag,ug,ig,eg\xA62ming:um\xA62bing:ub,ab,eb,ob\xA63ning:lan,can,hin,pin,win\xA63ring:cur,lur,tir,tar,pur,car\xA63ing:ait,del,eel,fin,eat,oat,eem,lel,ool,ein,uin\xA63ping:rop,rap,top,uip,wap,hip,hop,lap,rip,cap\xA63ming:tem,wim,rim,kim,lim\xA63ting:mat,cut,pot,lit,lot,hat,set,pit,put\xA63ding:hed,bed,bid\xA63king:rek\xA63ling:cil,pel\xA63bing:rib\xA64ning:egin\xA64ing:isit,ruit,ilot,nsit,dget,rkel,ival,rcel\xA64ring:efer,nfer\xA64ting:rmit,mmit,ysit,dmit,emit,bmit,tfit,gret\xA64ling:evel,xcel,ivel\xA64ding:hred\xA65ing:arget,posit,rofit\xA65ring:nsfer\xA65ting:nsmit,orget,cquit\xA65ling:ancel,istil",ex:"3:adding,eating,aiming,aiding,airing,outing,gassing,setting,getting,putting,cutting,winning,sitting,betting,mapping,tapping,letting,bidding,hitting,tanning,netting,popping,fitting,capping,lapping,barring,banning,vetting,topping,rotting,tipping,potting,wetting,pitting,dipping,budding,hemming,pinning,jetting,kidding,padding,podding,sipping,wedding,bedding,donning,warring,penning,gutting,cueing,wadding,petting,ripping,napping,matting,tinning,binning,dimming,hopping,mopping,nodding,panning,rapping,ridding,sinning\xA64:selling,falling,calling,waiting,editing,telling,rolling,heating,boating,hanging,beating,coating,singing,tolling,felling,polling,discing,seating,voiding,gelling,yelling,baiting,reining,ruining,seeking,spanning,stepping,knitting,emitting,slipping,quitting,dialing,omitting,clipping,shutting,skinning,abutting,flipping,trotting,cramming,fretting,suiting\xA65:bringing,treating,spelling,stalling,trolling,expelling,rivaling,wringing,deterring,singeing,befitting,refitting\xA66:enrolling,distilling,scrolling,strolling,caucusing,travelling\xA67:installing,redefining,stencilling,recharging,overeating,benefiting,unraveling,programing\xA69:reprogramming\xA6is:being\xA62e:using,aging,owing\xA63e:making,taking,coming,noting,hiring,filing,coding,citing,doping,baking,coping,hoping,lading,caring,naming,voting,riding,mining,curing,lining,ruling,typing,boring,dining,firing,hiding,piling,taping,waning,baling,boning,faring,honing,wiping,luring,timing,wading,piping,fading,biting,zoning,daring,waking,gaming,raking,ceding,tiring,coking,wining,joking,paring,gaping,poking,pining,coring,liming,toting,roping,wiring,aching\xA64e:writing,storing,eroding,framing,smoking,tasting,wasting,phoning,shaking,abiding,braking,flaking,pasting,priming,shoring,sloping,withing,hinging\xA65e:defining,refining,renaming,swathing,fringing,reciting\xA61ie:dying,tying,lying,vying\xA67e:sunbathing"},Participle:{fwd:"1:mt\xA62:llen\xA63:iven,aken\xA6:ne\xA6y:in",both:"1:wn\xA62:me,aten\xA63:seen,bidden,isen\xA64:roven,asten\xA63l:pilt\xA63d:uilt\xA62e:itten\xA61im:wum\xA61eak:poken\xA61ine:hone\xA61ose:osen\xA61in:gun\xA61ake:woken\xA6ear:orn\xA6eal:olen\xA6eeze:ozen\xA6et:otten\xA6ink:unk\xA6ing:ung",rev:"2:un\xA6oken:eak\xA6ought:eek\xA6oven:eave\xA61ne:o\xA61own:ly\xA61den:de\xA61in:ay\xA62t:am\xA62n:ee\xA63en:all\xA64n:rive,sake,take\xA65n:rgive",ex:"2:been\xA63:seen,run\xA64:given,taken\xA65:shaken\xA62eak:broken\xA61ive:dove\xA62y:flown\xA63e:hidden,ridden\xA61eek:sought\xA61ake:woken\xA61eave:woven"},PastTense:{fwd:"1:tted,wed,gged,nned,een,rred,pped,yed,bbed,oed,dded,rd,wn,mmed\xA62:eed,nded,et,hted,st,oled,ut,emed,eled,lded,ken,rt,nked,apt,ant,eped,eked\xA63:eared,eat,eaded,nelled,ealt,eeded,ooted,eaked,eaned,eeted,mited,bid,uit,ead,uited,ealed,geted,velled,ialed,belled\xA64:ebuted,hined,comed\xA6y:ied\xA6ome:ame\xA6ear:ore\xA6ind:ound\xA6ing:ung,ang\xA6ep:pt\xA6ink:ank,unk\xA6ig:ug\xA6all:ell\xA6ee:aw\xA6ive:ave\xA6eeze:oze\xA6old:eld\xA6ave:ft\xA6ake:ook\xA6ell:old\xA6ite:ote\xA6ide:ode\xA6ine:one\xA6in:un,on\xA6eal:ole\xA6im:am\xA6ie:ay\xA6and:ood\xA61ise:rose\xA61eak:roke\xA61ing:rought\xA61ive:rove\xA61el:elt\xA61id:bade\xA61et:got\xA61y:aid\xA61it:sat\xA63e:lid\xA63d:pent",both:"1:aed,fed,xed,hed\xA62:sged,xted,wled,rped,lked,kied,lmed,lped,uped,bted,rbed,rked,wned,rled,mped,fted,mned,mbed,zzed,omed,ened,cked,gned,lted,sked,ued,zed,nted,ered,rted,rmed,ced,sted,rned,ssed,rded,pted,ved,cted\xA63:cled,eined,siped,ooned,uked,ymed,jored,ouded,ioted,oaned,lged,asped,iged,mured,oided,eiled,yped,taled,moned,yled,lit,kled,oaked,gled,naled,fled,uined,oared,valled,koned,soned,aided,obed,ibed,meted,nicked,rored,micked,keted,vred,ooped,oaded,rited,aired,auled,filled,ouled,ooded,ceted,tolled,oited,bited,aped,tled,vored,dled,eamed,nsed,rsed,sited,owded,pled,sored,rged,osed,pelled,oured,psed,oated,loned,aimed,illed,eured,tred,ioned,celled,bled,wsed,ooked,oiled,itzed,iked,iased,onged,ased,ailed,uned,umed,ained,auded,nulled,ysed,eged,ised,aged,oined,ated,used,dged,doned\xA64:ntied,efited,uaked,caded,fired,roped,halled,roked,himed,culed,tared,lared,tuted,uared,routed,pited,naked,miled,houted,helled,hared,cored,caled,tired,peated,futed,ciled,called,tined,moted,filed,sided,poned,iloted,honed,lleted,huted,ruled,cured,named,preted,vaded,sured,talled,haled,peded,gined,nited,uided,ramed,feited,laked,gured,ctored,unged,pired,cuted,voked,eloped,ralled,rined,coded,icited,vided,uaded,voted,mined,sired,noted,lined,nselled,luted,jured,fided,puted,piled,pared,olored,cided,hoked,enged,tured,geoned,cotted,lamed,uiled,waited,udited,anged,luded,mired,uired,raded\xA65:modelled,izzled,eleted,umpeted,ailored,rseded,treated,eduled,ecited,rammed,eceded,atrolled,nitored,basted,twined,itialled,ncited,gnored,ploded,xcited,nrolled,namelled,plored,efeated,redited,ntrolled,nfined,pleted,llided,lcined,eathed,ibuted,lloted,dhered,cceded\xA63ad:sled\xA62aw:drew\xA62ot:hot\xA62ke:made\xA62ow:hrew,grew\xA62ose:hose\xA62d:ilt\xA62in:egan\xA61un:ran\xA61ink:hought\xA61ick:tuck\xA61ike:ruck\xA61eak:poke,nuck\xA61it:pat\xA61o:did\xA61ow:new\xA61ake:woke\xA6go:went",rev:"3:rst,hed,hut,cut,set\xA64:tbid\xA65:dcast,eread,pread,erbid\xA6ought:uy,eek\xA61ied:ny,ly,dy,ry,fy,py,vy,by,ty,cy\xA61ung:ling,ting,wing\xA61pt:eep\xA61ank:rink\xA61ore:bear,wear\xA61ave:give\xA61oze:reeze\xA61ound:rind,wind\xA61ook:take,hake\xA61aw:see\xA61old:sell\xA61ote:rite\xA61ole:teal\xA61unk:tink\xA61am:wim\xA61ay:lie\xA61ood:tand\xA61eld:hold\xA62d:he,ge,re,le,leed,ne,reed,be,ye,lee,pe,we\xA62ed:dd,oy,or,ey,gg,rr,us,ew,to\xA62ame:ecome,rcome\xA62ped:ap\xA62ged:ag,og,ug,eg\xA62bed:ub,ab,ib,ob\xA62lt:neel\xA62id:pay\xA62ang:pring\xA62ove:trive\xA62med:um\xA62ode:rride\xA62at:ysit\xA63ted:mit,hat,mat,lat,pot,rot,bat\xA63ed:low,end,tow,und,ond,eem,lay,cho,dow,xit,eld,ald,uld,law,lel,eat,oll,ray,ank,fin,oam,out,how,iek,tay,haw,ait,vet,say,cay,bow\xA63d:ste,ede,ode,ete,ree,ude,ame,oke,ote,ime,ute,ade\xA63red:lur,cur,pur,car\xA63ped:hop,rop,uip,rip,lip,tep,top\xA63ded:bed,rod,kid\xA63ade:orbid\xA63led:uel\xA63ned:lan,can,kin,pan,tun\xA63med:rim,lim\xA64ted:quit,llot\xA64ed:pear,rrow,rand,lean,mand,anel,pand,reet,link,abel,evel,imit,ceed,ruit,mind,peal,veal,hool,head,pell,well,mell,uell,band,hear,weak\xA64led:nnel,qual,ebel,ivel\xA64red:nfer,efer,sfer\xA64n:sake,trew\xA64d:ntee\xA64ded:hred\xA64ned:rpin\xA65ed:light,nceal,right,ndear,arget,hread,eight,rtial,eboot\xA65d:edite,nvite\xA65ted:egret\xA65led:ravel",ex:"2:been,upped\xA63:added,aged,aided,aimed,aired,bid,died,dyed,egged,erred,eyed,fit,gassed,hit,lied,owed,pent,pied,tied,used,vied,oiled,outed,banned,barred,bet,canned,cut,dipped,donned,ended,feed,inked,jarred,let,manned,mowed,netted,padded,panned,pitted,popped,potted,put,set,sewn,sowed,tanned,tipped,topped,vowed,weed,bowed,jammed,binned,dimmed,hopped,mopped,nodded,pinned,rigged,sinned,towed,vetted\xA64:ached,baked,baled,boned,bored,called,caned,cared,ceded,cited,coded,cored,cubed,cured,dared,dined,edited,exited,faked,fared,filed,fined,fired,fuelled,gamed,gelled,hired,hoped,joked,lined,mined,named,noted,piled,poked,polled,pored,pulled,reaped,roamed,rolled,ruled,seated,shed,sided,timed,tolled,toned,voted,waited,walled,waned,winged,wiped,wired,zoned,yelled,tamed,lubed,roped,faded,mired,caked,honed,banged,culled,heated,raked,welled,banded,beat,cast,cooled,cost,dealt,feared,folded,footed,handed,headed,heard,hurt,knitted,landed,leaked,leapt,linked,meant,minded,molded,neared,needed,peaked,plodded,plotted,pooled,quit,read,rooted,sealed,seeded,seeped,shipped,shunned,skimmed,slammed,sparred,stemmed,stirred,suited,thinned,twinned,swayed,winked,dialed,abutted,blotted,fretted,healed,heeded,peeled,reeled\xA65:basted,cheated,equalled,eroded,exiled,focused,opined,pleated,primed,quoted,scouted,shored,sloped,smoked,sniped,spelled,spouted,routed,staked,stored,swelled,tasted,treated,wasted,smelled,dwelled,honored,prided,quelled,eloped,scared,coveted,sweated,breaded,cleared,debuted,deterred,freaked,modeled,pleaded,rebutted,speeded\xA66:anchored,defined,endured,impaled,invited,refined,revered,strolled,cringed,recast,thrust,unfolded\xA67:authored,combined,competed,conceded,convened,excreted,extruded,redefined,restored,secreted,rescinded,welcomed\xA68:expedited,infringed\xA69:interfered,intervened,persevered\xA610:contravened\xA6eat:ate\xA6is:was\xA6go:went\xA6are:were\xA63d:bent,lent,rent,sent\xA63e:bit,fled,hid,lost\xA63ed:bled,bred\xA62ow:blew,grew\xA61uy:bought\xA62tch:caught\xA61o:did\xA61ive:dove,gave\xA62aw:drew\xA62ed:fed\xA62y:flew,laid,paid,said\xA61ight:fought\xA61et:got\xA62ve:had\xA61ang:hung\xA62ad:led\xA62ght:lit\xA62ke:made\xA62et:met\xA61un:ran\xA61ise:rose\xA61it:sat\xA61eek:sought\xA61each:taught\xA61ake:woke,took\xA61eave:wove\xA62ise:arose\xA61ear:bore,tore,wore\xA61ind:bound,found,wound\xA62eak:broke\xA62ing:brought,wrung\xA61ome:came\xA62ive:drove\xA61ig:dug\xA61all:fell\xA62el:felt\xA64et:forgot\xA61old:held\xA62ave:left\xA61ing:rang,sang\xA61ide:rode\xA61ink:sank\xA61ee:saw\xA62ine:shone\xA64e:slid\xA61ell:sold,told\xA64d:spent\xA62in:spun\xA61in:won"},PresentTense:{fwd:"1:oes\xA61ve:as",both:"1:xes\xA62:zzes,ches,shes,sses\xA63:iases\xA62y:llies,plies\xA61y:cies,bies,ties,vies,nies,pies,dies,ries,fies\xA6:s",rev:"1ies:ly\xA62es:us,go,do\xA63es:cho,eto",ex:"2:does,goes\xA63:gasses\xA65:focuses\xA6is:are\xA63y:relies\xA62y:flies\xA62ve:has"},Superlative:{fwd:"1st:e\xA61est:l,m,f,s\xA61iest:cey\xA62est:or,ir\xA63est:ver",both:"4:east\xA65:hwest\xA65lest:erful\xA64est:weet,lgar,tter,oung\xA64most:uter\xA63est:ger,der,rey,iet,ong,ear\xA63test:lat\xA63most:ner\xA62est:pt,ft,nt,ct,rt,ht\xA62test:it\xA62gest:ig\xA61est:b,k,n,p,h,d,w\xA6iest:y",rev:"1:ttest,nnest,yest\xA62:sest,stest,rmest,cest,vest,lmest,olest,ilest,ulest,ssest,imest,uest\xA63:rgest,eatest,oorest,plest,allest,urest,iefest,uelest,blest,ugest,amest,yalest,ealest,illest,tlest,itest\xA64:cerest,eriest,somest,rmalest,ndomest,motest,uarest,tiffest\xA65:leverest,rangest\xA6ar:urthest\xA63ey:riciest",ex:"best:good\xA6worst:bad\xA65est:great\xA64est:fast,full,fair,dull\xA63test:hot,wet,fat\xA64nest:thin\xA61urthest:far\xA63est:gay,shy,ill\xA64test:neat\xA64st:late,wide,fine,safe,cute,fake,pale,rare,rude,sore,ripe,dire\xA66st:severe"},AdjToNoun:{fwd:"1:tistic,eable,lful,sful,ting,tty\xA62:onate,rtable,geous,ced,seful,ctful\xA63:ortive,ented\xA6arity:ear\xA6y:etic\xA6fulness:begone\xA61ity:re\xA61y:tiful,gic\xA62ity:ile,imous,ilous,ime\xA62ion:ated\xA62eness:iving\xA62y:trious\xA62ation:iring\xA62tion:vant\xA63ion:ect\xA63ce:mant,mantic\xA63tion:irable\xA63y:est,estic\xA63m:mistic,listic\xA63ess:ning\xA64n:utious\xA64on:rative,native,vative,ective\xA64ce:erant",both:"1:king,wing\xA62:alous,ltuous,oyful,rdous\xA63:gorous,ectable,werful,amatic\xA64:oised,usical,agical,raceful,ocused,lined,ightful\xA65ness:stful,lding,itous,nuous,ulous,otous,nable,gious,ayful,rvous,ntous,lsive,peful,entle,ciful,osive,leful,isive,ncise,reful,mious\xA65ty:ivacious\xA65ties:ubtle\xA65ce:ilient,adiant,atient\xA65cy:icient\xA65sm:gmatic\xA65on:sessive,dictive\xA65ity:pular,sonal,eative,entic\xA65sity:uminous\xA65ism:conic\xA65nce:mperate\xA65ility:mitable\xA65ment:xcited\xA65n:bitious\xA64cy:brant,etent,curate\xA64ility:erable,acable,icable,ptable\xA64ty:nacious,aive,oyal,dacious\xA64n:icious\xA64ce:vient,erent,stent,ndent,dient,quent,ident\xA64ness:adic,ound,hing,pant,sant,oing,oist,tute\xA64icity:imple\xA64ment:fined,mused\xA64ism:otic\xA64ry:dantic\xA64ity:tund,eral\xA64edness:hand\xA64on:uitive\xA64lity:pitable\xA64sm:eroic,namic\xA64sity:nerous\xA63th:arm\xA63ility:pable,bable,dable,iable\xA63cy:hant,nant,icate\xA63ness:red,hin,nse,ict,iet,ite,oud,ind,ied,rce\xA63ion:lute\xA63ity:ual,gal,volous,ial\xA63ce:sent,fensive,lant,gant,gent,lent,dant\xA63on:asive\xA63m:fist,sistic,iastic\xA63y:terious,xurious,ronic,tastic\xA63ur:amorous\xA63e:tunate\xA63ation:mined\xA63sy:rteous\xA63ty:ain\xA63ry:ave\xA63ment:azed\xA62ness:de,on,ue,rn,ur,ft,rp,pe,om,ge,rd,od,ay,ss,er,ll,oy,ap,ht,ld,ad,rt\xA62inousness:umous\xA62ity:neous,ene,id,ane\xA62cy:bate,late\xA62ation:ized\xA62ility:oble,ible\xA62y:odic\xA62e:oving,aring\xA62s:ost\xA62itude:pt\xA62dom:ee\xA62ance:uring\xA62tion:reet\xA62ion:oted\xA62sion:ending\xA62liness:an\xA62or:rdent\xA61th:ung\xA61e:uable\xA61ness:w,h,k,f\xA61ility:mble\xA61or:vent\xA61ement:ging\xA61tiquity:ncient\xA61ment:hed\xA6verty:or\xA6ength:ong\xA6eat:ot\xA6pth:ep\xA6iness:y",rev:"",ex:"5:forceful,humorous\xA68:charismatic\xA613:understanding\xA65ity:active\xA611ness:adventurous,inquisitive,resourceful\xA68on:aggressive,automatic,perceptive\xA67ness:amorous,fatuous,furtive,ominous,serious\xA65ness:ample,sweet\xA612ness:apprehensive,cantankerous,contemptuous,ostentatious\xA613ness:argumentative,conscientious\xA69ness:assertive,facetious,imperious,inventive,oblivious,rapacious,receptive,seditious,whimsical\xA610ness:attractive,expressive,impressive,loquacious,salubrious,thoughtful\xA63edom:boring\xA64ness:calm,fast,keen,tame\xA68ness:cheerful,gracious,specious,spurious,timorous,unctuous\xA65sity:curious\xA69ion:deliberate\xA68ion:desperate\xA66e:expensive\xA67ce:fragrant\xA63y:furious\xA69ility:ineluctable\xA66ism:mystical\xA68ity:physical,proactive,sensitive,vertical\xA65cy:pliant\xA67ity:positive\xA69ity:practical\xA612ism:professional\xA66ce:prudent\xA63ness:red\xA66cy:vagrant\xA63dom:wise"}};var cne=function(t,e={}){return e.hasOwnProperty(t)?e[t]:null},fne=function(t,e=[]){for(let n=0;n<e.length;n+=1)if(t.endsWith(e[n]))return t;return null},dne=function(t,e,n={}){e=e||{};let r=t.length-1;for(let o=r;o>=1;o-=1){let i=t.length-o,s=t.substring(i,t.length);if(e.hasOwnProperty(s)===!0)return t.slice(0,i)+e[s];if(n.hasOwnProperty(s)===!0)return t.slice(0,i)+n[s]}return e.hasOwnProperty("")?t+=e[""]:n.hasOwnProperty("")?t+=n[""]:null},hne=function(t="",e={}){let n=cne(t,e.ex);return n=n||fne(t,e.same),n=n||dne(t,e.fwd,e.both),n=n||t,n},Gt=hne;var EF=function(t){return Object.entries(t).reduce((e,n)=>(e[n[1]]=n[0],e),{})},pne=function(t={}){return{reversed:!0,both:EF(t.both),ex:EF(t.ex),fwd:t.rev||{}}},Xi=pne;var AF=/^([0-9]+)/,mne=function(t){let e={};return t.split("\xA6").forEach(n=>{let[r,o]=n.split(":");o=(o||"").split(","),o.forEach(i=>{e[i]=r})}),e},gne=function(t="",e=""){e=String(e);let n=e.match(AF);if(n===null)return e;let r=Number(n[1])||0;return t.substring(0,r)+e.replace(AF,"")},og=function(t){let e=mne(t);return Object.keys(e).reduce((n,r)=>(n[r]=gne(r,e[r]),n),{})},yne=function(t={}){return typeof t=="string"&&(t=JSON.parse(t)),t.fwd=og(t.fwd||""),t.both=og(t.both||""),t.rev=og(t.rev||""),t.ex=og(t.ex||""),t},ei=yne;var CF=ei(Yi.PastTense),TF=ei(Yi.PresentTense),SF=ei(Yi.Gerund),PF=ei(Yi.Participle),bne=Xi(CF),vne=Xi(TF),wne=Xi(SF),_ne=Xi(PF),IF=ei(Yi.Comparative),xF=ei(Yi.Superlative),Ene=Xi(IF),Ane=Xi(xF),Cne=ei(Yi.AdjToNoun),ig={fromPast:CF,fromPresent:TF,fromGerund:SF,fromParticiple:PF,toPast:bne,toPresent:vne,toGerund:wne,toParticiple:_ne,toComparative:IF,toSuperlative:xF,fromComparative:Ene,fromSuperlative:Ane,adjToNoun:Cne};var kF=[[/^[\w.]+@[\w.]+\.[a-z]{2,3}$/,"Email"],[/^(https?:\/\/|www\.)+\w+\.[a-z]{2,3}/,"Url","http.."],[/^[a-z0-9./].+\.(com|net|gov|org|ly|edu|info|biz|dev|ru|jp|de|in|uk|br|io|ai)/,"Url",".com"],[/^[PMCE]ST$/,"Timezone","EST"],[/^ma?c'[a-z]{3}/,"LastName","mc'neil"],[/^o'[a-z]{3}/,"LastName","o'connor"],[/^ma?cd[aeiou][a-z]{3}/,"LastName","mcdonald"],[/^(lol)+[sz]$/,"Expression","lol"],[/^wo{2,}a*h?$/,"Expression","wooah"],[/^(hee?){2,}h?$/,"Expression","hehe"],[/^(un|de|re)\\-[a-z\u00C0-\u00FF]{2}/,"Verb","un-vite"],[/^(m|k|cm|km)\/(s|h|hr)$/,"Unit","5 k/m"],[/^(ug|ng|mg)\/(l|m3|ft3)$/,"Unit","ug/L"],[/[^:/]\/\p{Letter}/u,"SlashedTerm","love/hate"]];var RF=[[/^#[\p{Number}_]*\p{Letter}/u,"HashTag"],[/^@\w{2,}$/,"AtMention"],[/^([A-Z]\.){2}[A-Z]?/i,["Acronym","Noun"],"F.B.I"],[/.{3}[lkmnp]in['`]$/,"Gerund","chillin'"],[/.{4}s['`]$/,"Possessive","flanders'"],[/^[\p{Emoji_Presentation}\p{Extended_Pictographic}]/u,"Emoji","emoji-class"]];var NF=[[/^@1?[0-9](am|pm)$/i,"Time","3pm"],[/^@1?[0-9]:[0-9]{2}(am|pm)?$/i,"Time","3:30pm"],[/^'[0-9]{2}$/,"Year"],[/^[012]?[0-9](:[0-5][0-9])(:[0-5][0-9])$/,"Time","3:12:31"],[/^[012]?[0-9](:[0-5][0-9])?(:[0-5][0-9])? ?(am|pm)$/i,"Time","1:12pm"],[/^[012]?[0-9](:[0-5][0-9])(:[0-5][0-9])? ?(am|pm)?$/i,"Time","1:12:31pm"],[/^[0-9]{4}-[0-9]{2}-[0-9]{2}T[0-9]{2}:[0-9]{2}/i,"Date","iso-date"],[/^[0-9]{1,4}-[0-9]{1,2}-[0-9]{1,4}$/,"Date","iso-dash"],[/^[0-9]{1,4}\/[0-9]{1,2}\/([0-9]{4}|[0-9]{2})$/,"Date","iso-slash"],[/^[0-9]{1,4}\.[0-9]{1,2}\.[0-9]{1,4}$/,"Date","iso-dot"],[/^[0-9]{1,4}-[a-z]{2,9}-[0-9]{1,4}$/i,"Date","12-dec-2019"],[/^utc ?[+-]?[0-9]+$/,"Timezone","utc-9"],[/^(gmt|utc)[+-][0-9]{1,2}$/i,"Timezone","gmt-3"],[/^[0-9]{3}-[0-9]{4}$/,"PhoneNumber","421-0029"],[/^(\+?[0-9][ -])?[0-9]{3}[ -]?[0-9]{3}-[0-9]{4}$/,"PhoneNumber","1-800-"],[/^[-+]?\p{Currency_Symbol}[-+]?[0-9]+(,[0-9]{3})*(\.[0-9]+)?([kmb]|bn)?\+?$/u,["Money","Value"],"$5.30"],[/^[-+]?[0-9]+(,[0-9]{3})*(\.[0-9]+)?\p{Currency_Symbol}\+?$/u,["Money","Value"],"5.30\xA3"],[/^[-+]?[$]?[0-9]([0-9,.])+(usd|eur|jpy|gbp|cad|aud|chf|cny|hkd|nzd|kr|rub)$/i,["Money","Value"],"$400usd"],[/^[-+]?[0-9]+(,[0-9]{3})*(\.[0-9]+)?\+?$/,["Cardinal","NumericValue"],"5,999"],[/^[-+]?[0-9]+(,[0-9]{3})*(\.[0-9]+)?(st|nd|rd|r?th)$/,["Ordinal","NumericValue"],"53rd"],[/^\.[0-9]+\+?$/,["Cardinal","NumericValue"],".73th"],[/^[-+]?[0-9]+(,[0-9]{3})*(\.[0-9]+)?%\+?$/,["Percent","Cardinal","NumericValue"],"-4%"],[/^\.[0-9]+%$/,["Percent","Cardinal","NumericValue"],".3%"],[/^[0-9]{1,4}\/[0-9]{1,4}(st|nd|rd|th)?s?$/,["Fraction","NumericValue"],"2/3rds"],[/^[0-9.]{1,3}[a-z]{0,2}[-][0-9]{1,3}[a-z]{0,2}$/,["Value","NumberRange"],"3-4"],[/^[0-9]{1,2}(:[0-9][0-9])?(am|pm)? ?[-] ?[0-9]{1,2}(:[0-9][0-9])?(am|pm)$/,["Time","NumberRange"],"3-4pm"],[/^[0-9.]+([a-z]{1,4})$/,"NumericValue","9km"]];var OF=["academy","administration","agence","agences","agencies","agency","airlines","airways","army","assoc","associates","association","assurance","authority","autorite","aviation","bank","banque","board","boys","brands","brewery","brotherhood","brothers","bureau","cafe","co","caisse","capital","care","cathedral","center","centre","chemicals","choir","chronicle","church","circus","clinic","clinique","club","co","coalition","coffee","collective","college","commission","committee","communications","community","company","comprehensive","computers","confederation","conference","conseil","consulting","containers","corporation","corps","corp","council","crew","data","departement","department","departments","design","development","directorate","division","drilling","education","eglise","electric","electricity","energy","ensemble","enterprise","enterprises","entertainment","estate","etat","faculty","faction","federation","financial","fm","foundation","fund","gas","gazette","girls","government","group","guild","herald","holdings","hospital","hotel","hotels","inc","industries","institut","institute","institutes","insurance","international","interstate","investment","investments","investors","journal","laboratory","labs","llc","ltd","limited","machines","magazine","management","marine","marketing","markets","media","memorial","ministere","ministry","military","mobile","motor","motors","musee","museum","news","observatory","office","oil","optical","orchestra","organization","partners","partnership","petrol","petroleum","pharmacare","pharmaceutical","pharmaceuticals","pizza","plc","police","politburo","polytechnic","post","power","press","productions","quartet","radio","reserve","resources","restaurant","restaurants","savings","school","securities","service","services","societe","subsidiary","society","sons","subcommittee","syndicat","systems","telecommunications","telegraph","television","times","tribunal","tv","union","university","utilities","workers"].reduce((t,e)=>(t[e]=!0,t),{});var DF=["atoll","basin","bay","beach","bluff","bog","camp","canyon","canyons","cape","cave","caves","cliffs","coast","cove","coves","crater","crossing","creek","desert","dune","dunes","downs","estates","escarpment","estuary","falls","fjord","fjords","forest","forests","glacier","gorge","gorges","grove","gulf","gully","highland","heights","hollow","hill","hills","inlet","island","islands","isthmus","junction","knoll","lagoon","lake","lakeshore","marsh","marshes","mount","mountain","mountains","narrows","peninsula","plains","plateau","pond","rapids","ravine","reef","reefs","ridge","river","rivers","sandhill","shoal","shore","shoreline","shores","strait","straits","springs","stream","swamp","tombolo","trail","trails","trench","valley","vallies","village","volcano","waterfall","watershed","wetland","woods","acres","burough","county","district","municipality","prefecture","province","region","reservation","state","territory","borough","metropolis","downtown","uptown","midtown","city","town","township","hamlet","country","kingdom","enclave","neighbourhood","neighborhood","kingdom","ward","zone","airport","amphitheater","arch","arena","auditorium","bar","barn","basilica","battlefield","bridge","building","castle","centre","coliseum","cineplex","complex","dam","farm","field","fort","garden","gardens","gymnasium","hall","house","levee","library","manor","memorial","monument","museum","gallery","palace","pillar","pits","plantation","playhouse","quarry","sportsfield","sportsplex","stadium","terrace","terraces","theater","tower","park","parks","site","ranch","raceway","sportsplex","ave","st","street","rd","road","lane","landing","crescent","cr","way","tr","terrace","avenue"].reduce((t,e)=>(t[e]=!0,t),{});var Rf=[[/([^v])ies$/i,"$1y"],[/(ise)s$/i,"$1"],[/(kn|[^o]l|w)ives$/i,"$1ife"],[/^((?:ca|e|ha|(?:our|them|your)?se|she|wo)l|lea|loa|shea|thie)ves$/i,"$1f"],[/^(dwar|handkerchie|hoo|scar|whar)ves$/i,"$1f"],[/(antenn|formul|nebul|vertebr|vit)ae$/i,"$1a"],[/(octop|vir|radi|nucle|fung|cact|stimul)(i)$/i,"$1us"],[/(buffal|tomat|tornad)(oes)$/i,"$1o"],[/(ause)s$/i,"$1"],[/(ease)s$/i,"$1"],[/(ious)es$/i,"$1"],[/(ouse)s$/i,"$1"],[/(ose)s$/i,"$1"],[/(..ase)s$/i,"$1"],[/(..[aeiu]s)es$/i,"$1"],[/(vert|ind|cort)(ices)$/i,"$1ex"],[/(matr|append)(ices)$/i,"$1ix"],[/([xo]|ch|ss|sh)es$/i,"$1"],[/men$/i,"man"],[/(n)ews$/i,"$1ews"],[/([ti])a$/i,"$1um"],[/([^aeiouy]|qu)ies$/i,"$1y"],[/(s)eries$/i,"$1eries"],[/(m)ovies$/i,"$1ovie"],[/(cris|ax|test)es$/i,"$1is"],[/(alias|status)es$/i,"$1"],[/(ss)$/i,"$1"],[/(ic)s$/i,"$1"],[/s$/i,""]];var Tne=function(t){return Object.keys(t).reduce((e,n)=>(e[t[n]]=n,e),{})},Sne=function(t,e){let{irregularPlurals:n}=e.two,r=Tne(n);if(r.hasOwnProperty(t))return r[t];for(let o=0;o<Rf.length;o++)if(Rf[o][0].test(t)===!0)return t=t.replace(Rf[o][0],Rf[o][1]),t;return t},Q_=Sne;var Pne=function(t,e){let n=[t],r=ha(t,e);r!==t&&n.push(r);let o=Q_(t,e);return o!==t&&n.push(o),n},MF={toPlural:ha,toSingular:Q_,all:Pne};var sg={Gerund:["ing"],Actor:["erer"],Infinitive:["ate","ize","tion","rify","then","ress","ify","age","nce","ect","ise","ine","ish","ace","ash","ure","tch","end","ack","and","ute","ade","ock","ite","ase","ose","use","ive","int","nge","lay","est","ain","ant","ent","eed","er","le","unk","ung","upt","en"],PastTense:["ept","ed","lt","nt","ew","ld"],PresentTense:["rks","cks","nks","ngs","mps","tes","zes","ers","les","acks","ends","ands","ocks","lays","eads","lls","els","ils","ows","nds","ays","ams","ars","ops","ffs","als","urs","lds","ews","ips","es","ts","ns"],Participle:["ken","wn"]};sg=Object.keys(sg).reduce((t,e)=>(sg[e].forEach(n=>t[n]=e),t),{});var Nf=sg;var Ine=function(t){let e=t.substring(t.length-3);if(Nf.hasOwnProperty(e)===!0)return Nf[e];let n=t.substring(t.length-2);return Nf.hasOwnProperty(n)===!0?Nf[n]:t.substring(t.length-1)==="s"?"PresentTense":null},ag=Ine;var xne=function(t,e){let n="",r={};e.one&&e.one.prefixes&&(r=e.one.prefixes);let[o,i]=t.split(/ /);return i&&r[o]===!0&&(n=o,o=i,i=""),{prefix:n,verb:o,particle:i}},FF={are:"be",were:"be",been:"be",is:"be",am:"be",was:"be",be:"be",being:"be"},kne=function(t,e,n){let{fromPast:r,fromPresent:o,fromGerund:i,fromParticiple:s}=e.two.models,{prefix:a,verb:l,particle:u}=xne(t,e),f="";if(n||(n=ag(t)),FF.hasOwnProperty(t))f=FF[t];else if(n==="Participle")f=Gt(l,s);else if(n==="PastTense")f=Gt(l,r);else if(n==="PresentTense")f=Gt(l,o);else if(n==="Gerund")f=Gt(l,i);else return t;return u&&(f+=" "+u),a&&(f=a+" "+f),f},Of=kne;var Rne=t=>/ /.test(t)?t.split(/ /):[t,""],Nne=function(t,e){let{toPast:n,toPresent:r,toGerund:o,toParticiple:i}=e.two.models;if(t==="be")return{Infinitive:t,Gerund:"being",PastTense:"was",PresentTense:"is"};let[s,a]=Rne(t),l={Infinitive:s,PastTense:Gt(s,n),PresentTense:Gt(s,r),Gerund:Gt(s,o),FutureTense:"will "+s},u=Gt(s,i);if(u!==t&&u!==l.PastTense){let f=e.one.lexicon||{};(f[u]==="Participle"||f[u]==="Adjective")&&(t==="play"&&(u="played"),l.Participle=u)}return a&&Object.keys(l).forEach(f=>{l[f]+=" "+a}),l},Df=Nne;var One=function(t,e){let n=Df(t,e);return delete n.FutureTense,Object.values(n).filter(r=>r)},LF={toInfinitive:Of,conjugate:Df,all:One};var Mf=function(t,e){let n=e.two.models.toSuperlative;return Gt(t,n)},Ff=function(t,e){let n=e.two.models.toComparative;return Gt(t,n)},UF=function(t,e){let n=e.two.models.fromComparative;return Gt(t,n)},BF=function(t,e){let n=e.two.models.fromSuperlative;return Gt(t,n)},GF=function(t,e){let n=e.two.models.adjToNoun;return Gt(t,n)};var Dne=function(t="",e=[]){let n=t.length,r=n<=6?n-1:6;for(let o=r;o>=1;o-=1){let i=t.substring(n-o,t.length);if(e[i.length].hasOwnProperty(i)===!0){let s=t.slice(0,n-o),a=e[i.length][i];return s+a}}return null},lg=Dne;var Ue="ically",Mne=new Set(["analyt"+Ue,"chem"+Ue,"class"+Ue,"clin"+Ue,"crit"+Ue,"ecolog"+Ue,"electr"+Ue,"empir"+Ue,"frant"+Ue,"grammat"+Ue,"ident"+Ue,"ideolog"+Ue,"log"+Ue,"mag"+Ue,"mathemat"+Ue,"mechan"+Ue,"med"+Ue,"method"+Ue,"method"+Ue,"mus"+Ue,"phys"+Ue,"phys"+Ue,"polit"+Ue,"pract"+Ue,"rad"+Ue,"satir"+Ue,"statist"+Ue,"techn"+Ue,"technolog"+Ue,"theoret"+Ue,"typ"+Ue,"vert"+Ue,"whims"+Ue]),Fne=[null,{},{ly:""},{ily:"y",bly:"ble",ply:"ple"},{ally:"al",rply:"rp"},{ually:"ual",ially:"ial",cally:"cal",eally:"eal",rally:"ral",nally:"nal",mally:"mal",eeply:"eep",eaply:"eap"},{ically:"ic"}],Lne=new Set(["early","only","hourly","daily","weekly","monthly","yearly","mostly","duly","unduly","especially","undoubtedly","conversely","namely","exceedingly","presumably","accordingly","overly","best","latter","little","long","low"]),HF={wholly:"whole",fully:"full",truly:"true",gently:"gentle",singly:"single",customarily:"customary",idly:"idle",publically:"public",quickly:"quick",superbly:"superb",cynically:"cynical",well:"good"},Une=function(t){return t.endsWith("ly")?Mne.has(t)?t.replace(/ically/,"ical"):Lne.has(t)?null:HF.hasOwnProperty(t)?HF[t]:lg(t,Fne)||t:null},qF=Une;var Bne=[null,{y:"ily"},{ly:"ly",ic:"ically"},{ial:"ially",ual:"ually",tle:"tly",ble:"bly",ple:"ply",ary:"arily"},{},{},{}],$F={cool:"cooly",whole:"wholly",full:"fully",good:"well",idle:"idly",public:"publicly",single:"singly",special:"especially"},Gne=function(t){if($F.hasOwnProperty(t))return $F[t];let e=lg(t,Bne);return e||(e=t+"ly"),e},Z_=Gne;var Hne=function(t,e){let n=[t];return n.push(Mf(t,e)),n.push(Ff(t,e)),n.push(Z_(t)),n=n.filter(r=>r),n=new Set(n),Array.from(n)},VF={toSuperlative:Mf,toComparative:Ff,toAdverb:Z_,toNoun:GF,fromAdverb:qF,fromSuperlative:BF,fromComparative:UF,all:Hne};var jF={noun:MF,verb:LF,adjective:VF};var eE={Singular:(t,e,n,r)=>{let o=r.one.lexicon,i=n.two.transform.noun.toPlural(t,r);o[i]||(e[i]=e[i]||"Plural")},Actor:(t,e,n,r)=>{let o=r.one.lexicon,i=n.two.transform.noun.toPlural(t,r);o[i]||(e[i]=e[i]||["Plural","Actor"])},Comparable:(t,e,n,r)=>{let o=r.one.lexicon,{toSuperlative:i,toComparative:s}=n.two.transform.adjective,a=i(t,r);o[a]||(e[a]=e[a]||"Superlative");let l=s(t,r);o[l]||(e[l]=e[l]||"Comparative"),e[t]="Adjective"},Demonym:(t,e,n,r)=>{let o=n.two.transform.noun.toPlural(t,r);e[o]=e[o]||["Demonym","Plural"]},Infinitive:(t,e,n,r)=>{let o=r.one.lexicon,i=n.two.transform.verb.conjugate(t,r);Object.entries(i).forEach(s=>{!o[s[1]]&&!e[s[1]]&&s[0]!=="FutureTense"&&(e[s[1]]=s[0])})},PhrasalVerb:(t,e,n,r)=>{let o=r.one.lexicon;e[t]=["PhrasalVerb","Infinitive"];let i=r.one._multiCache,[s,a]=t.split(" ");o[s]||(e[s]=e[s]||"Infinitive");let l=n.two.transform.verb.conjugate(s,r);delete l.FutureTense,Object.entries(l).forEach(u=>{if(u[0]==="Actor"||u[1]==="")return;!e[u[1]]&&!o[u[1]]&&(e[u[1]]=u[0]),i[u[1]]=2;let f=u[1]+" "+a;e[f]=e[f]||[u[0],"PhrasalVerb"]})},Multiple:(t,e)=>{e[t]=["Multiple","Cardinal"],e[t+"th"]=["Multiple","Ordinal"],e[t+"ths"]=["Multiple","Fraction"]},Cardinal:(t,e)=>{e[t]=["TextValue","Cardinal"]},Ordinal:(t,e)=>{e[t]=["TextValue","Ordinal"],e[t+"s"]=["TextValue","Fraction"]},Place:(t,e)=>{e[t]=["Place","ProperNoun"]},Region:(t,e)=>{e[t]=["Region","ProperNoun"]}};var qne=function(t,e){let{methods:n,model:r}=e,o={},i={};return Object.keys(t).forEach(s=>{let a=t[s];s=s.toLowerCase().trim(),s=s.replace(/'s\b/,"");let l=s.split(/ /);l.length>1&&(i[l[0]]===void 0||l.length>i[l[0]])&&(i[l[0]]=l.length),eE.hasOwnProperty(a)===!0&&eE[a](s,o,n,r),o[s]=o[s]||a}),delete o[""],delete o[null],delete o[" "],{lex:o,_multi:i}},WF=qne;var $ne=function(t,e){let n=/^[0-9]+$/,r=t[e];if(!r)return!1;let o=new Set(["may","april","august","jan"]);if(r.normal==="like"||o.has(r.normal)||r.tags.has("Place")||r.tags.has("Date"))return!1;if(t[e-1]){let s=t[e-1];if(s.tags.has("Date")||o.has(s.normal)||s.tags.has("Adjective")||r.tags.has("Adjective"))return!1}let i=r.normal;return!((i.length===1||i.length===2||i.length===4)&&n.test(i))},Vne=function(t){let e=/[,:;]/,n=[];return t.forEach(r=>{let o=0;r.forEach((i,s)=>{e.test(i.post)&&$ne(r,s+1)&&(n.push(r.slice(o,s+1)),o=s+1)}),o<r.length&&n.push(r.slice(o,r.length))}),n},zF=Vne;var JF={e:["mice","louse","antennae","formulae","nebulae","vertebrae","vitae"],i:["tia","octopi","viri","radii","nuclei","fungi","cacti","stimuli"],n:["men"],t:["feet"]},jne=new Set(["israelis","menus","logos"]),Wne=["bus","mas","was","ias","xas","vas","cis","lis","nis","ois","ris","sis","tis","xis","aus","cus","eus","fus","gus","ius","lus","nus","das","ous","pus","rus","sus","tus","xus","aos","igos","ados","ogos","'s","ss"],zne=function(t){if(!t||t.length<=3)return!1;if(jne.has(t))return!0;let e=t[t.length-1];return JF.hasOwnProperty(e)?JF[e].find(n=>t.endsWith(n)):!(e!=="s"||Wne.find(n=>t.endsWith(n)))},ug=zne;var Lf={two:{quickSplit:zF,expandLexicon:WF,transform:jF,looksPlural:ug}};var Jne=function(t){let{irregularPlurals:e}=t.two,{lexicon:n}=t.one;return Object.entries(e).forEach(r=>{n[r[0]]=n[r[0]]||"Singular",n[r[1]]=n[r[1]]||"Plural"}),t},KF=Jne;var tE={one:{lexicon:{}},two:{models:ig}},Kne={"Actor|Verb":"Actor","Adj|Gerund":"Adjective","Adj|Noun":"Adjective","Adj|Past":"Adjective","Adj|Present":"Adjective","Noun|Verb":"Singular","Noun|Gerund":"Gerund","Person|Noun":"Noun","Person|Date":"Month","Person|Verb":"FirstName","Person|Place":"Person","Person|Adj":"Comparative","Plural|Verb":"Plural","Unit|Noun":"Noun"},QF=function(t,e){let n={model:e,methods:Lf},{lex:r,_multi:o}=Lf.two.expandLexicon(t,n);return Object.assign(e.one.lexicon,r),Object.assign(e.one._multiCache,o),e},Yne=function(t,e){return Object.keys(t).forEach(n=>{t[n]==="Uncountable"&&(e.two.uncountable[n]=!0,t[n]="Uncountable")}),e},YF=function(t,e,n){let r=Df(t,tE);e[r.PastTense]=e[r.PastTense]||"PastTense",e[r.Gerund]=e[r.Gerund]||"Gerund",n===!0&&(e[r.PresentTense]=e[r.PresentTense]||"PresentTense")},XF=function(t,e,n){let r=Mf(t,n);e[r]=e[r]||"Superlative";let o=Ff(t,n);e[o]=e[o]||"Comparative"},Xne=function(t,e,n){let r=ha(t,n);e[r]=e[r]||"Plural"},Qne=function(t,e){let n={},r=e.one.lexicon;return Object.keys(t).forEach(o=>{let i=t[o];if(n[o]=Kne[i],(i==="Noun|Verb"||i==="Person|Verb"||i==="Actor|Verb")&&YF(o,r,!1),i==="Adj|Present"&&(YF(o,r,!0),XF(o,r,e)),i==="Person|Adj"&&XF(o,r,e),i==="Adj|Gerund"||i==="Noun|Gerund"){let s=Of(o,tE,"Gerund");r[s]||(n[s]="Infinitive")}if((i==="Noun|Gerund"||i==="Adj|Noun"||i==="Person|Noun")&&Xne(o,r,e),i==="Adj|Past"){let s=Of(o,tE,"PastTense");r[s]||(n[s]="Infinitive")}}),e=QF(n,e),e},Zne=function(t){return t=QF(t.one.lexicon,t),t=Yne(t.one.lexicon,t),t=Qne(t.two.switches,t),t=KF(t),t},ZF=Zne;var nE={one:{_multiCache:{},lexicon:pa,frozenLex:Y_},two:{irregularPlurals:zm,models:ig,suffixPatterns:pF,prefixPatterns:mF,endsWith:wF,neighbours:_F,regexNormal:kF,regexText:RF,regexNumbers:NF,switches:Jm,clues:dF,uncountable:{},orgWords:OF,placeWords:DF}};nE=ZF(nE);var e2=nE;var ere=function(t,e,n,r){let o=r.methods.one.setTag;if(e===0&&t.length>=3){let i=/:/;if(t[0].post.match(i)){let a=t[1];if(a.tags.has("Value")||a.tags.has("Email")||a.tags.has("PhoneNumber"))return;o([t[0]],"Expression",r,null,"2-punct-colon''")}}},t2=ere;var tre=function(t,e,n,r){let o=r.methods.one.setTag;t[e].post==="-"&&t[e+1]&&o([t[e],t[e+1]],"Hyphenated",r,null,"1-punct-hyphen''")},n2=tre;var r2=/^(under|over|mis|re|un|dis|semi)-?/,nre=function(t,e,n){let r=n.two.switches,o=t[e];if(r.hasOwnProperty(o.normal)){o.switch=r[o.normal];return}if(r2.test(o.normal)){let i=o.normal.replace(r2,"");i.length>3&&r.hasOwnProperty(i)&&(o.switch=r[i])}},o2=nre;var rre=(t,e,n="")=>{let r=s=>"\x1B[33m\x1B[3m"+s+"\x1B[0m",o=s=>"\x1B[3m"+s+"\x1B[0m",i=t.text||"["+t.implicit+"]";typeof e!="string"&&e.length>2&&(e=e.slice(0,2).join(", #")+" +"),e=typeof e!="string"?e.join(", #"):e,console.log(` ${r(i).padEnd(24)} \x1B[32m\u2192\x1B[0m #${e.padEnd(22)}  ${o(n)}`)},ore=function(t,e,n){if(!e||e.length===0||t.frozen===!0)return;let r=typeof process=="undefined"||!process.env?self.env||{}:process.env;r&&r.DEBUG_TAGS&&rre(t,e,n),t.tags=t.tags||new Set,typeof e=="string"?t.tags.add(e):e.forEach(o=>t.tags.add(o))},ze=ore;var ire=["Acronym","Abbreviation","ProperNoun","Uncountable","Possessive","Pronoun","Activity","Honorific","Month"],sre=function(t){!t.tags.has("Noun")||t.tags.has("Plural")||t.tags.has("Singular")||ire.find(e=>t.tags.has(e))||(ug(t.normal)?ze(t,"Plural","3-plural-guess"):ze(t,"Singular","3-singular-guess"))},are=function(t){let e=t.tags;if(e.has("Verb")&&e.size===1){let n=ag(t.normal);n&&ze(t,n,"3-verb-tense-guess")}},lre=function(t,e,n){let r=t[e],o=Array.from(r.tags);for(let i=0;i<o.length;i+=1)if(n.one.tagSet[o[i]]){let s=n.one.tagSet[o[i]].parents;ze(r,s,` -inferred by #${o[i]}`)}sre(r),are(r,n)},ho=lre;var ure=/^\p{Lu}[\p{Ll}']/u,cre=/[0-9]/,fre=["Date","Month","WeekDay","Unit","Expression"],dre=/[IVX]/,hre=/^[IVXLCDM]{2,}$/,pre=/^M{0,4}(CM|CD|D?C{0,3})(XC|XL|L?X{0,3})(IX|IV|V?I{0,3})$/,mre={li:!0,dc:!0,md:!0,dm:!0,ml:!0},gre=function(t,e,n){let r=t[e];r.index=r.index||[0,0];let o=r.index[1],i=r.text||"";return o!==0&&ure.test(i)===!0&&cre.test(i)===!1?fre.find(s=>r.tags.has(s))||r.pre.match(/["']$/)||r.normal==="the"?null:(ho(t,e,n),!r.tags.has("Noun")&&!r.frozen&&r.tags.clear(),ze(r,"ProperNoun","2-titlecase"),!0):i.length>=2&&hre.test(i)&&dre.test(i)&&pre.test(i)&&!mre[r.normal]?(ze(r,"RomanNumeral","2-xvii"),!0):null},i2=gre;var s2=function(t="",e=[]){let n=t.length,r=7;n<=r&&(r=n-1);for(let o=r;o>1;o-=1){let i=t.substring(n-o,n);if(e[i.length].hasOwnProperty(i)===!0)return e[i.length][i]}return null},yre=function(t,e,n){let r=t[e];if(r.tags.size===0){let o=s2(r.normal,n.two.suffixPatterns);if(o!==null)return ze(r,o,"2-suffix"),r.confidence=.7,!0;if(r.implicit&&(o=s2(r.implicit,n.two.suffixPatterns),o!==null))return ze(r,o,"2-implicit-suffix"),r.confidence=.7,!0}return null},a2=yre;var l2=/['`]/,rE=function(t,e){for(let n=0;n<e.length;n+=1)if(e[n][0].test(t)===!0)return e[n];return null},bre=function(t="",e){let n=t[t.length-1];if(e.hasOwnProperty(n)===!0){let r=e[n]||[];for(let o=0;o<r.length;o+=1)if(r[o][0].test(t)===!0)return r[o]}return null},vre=function(t,e,n,r){let o=r.methods.one.setTag,{regexText:i,regexNormal:s,regexNumbers:a,endsWith:l}=n.two,u=t[e],f=u.machine||u.normal,p=u.text;l2.test(u.post)&&!l2.test(u.pre)&&(p+=u.post.trim());let m=rE(p,i)||rE(f,s);return!m&&/[0-9]/.test(f)&&(m=rE(f,a)),!m&&u.tags.size===0&&(m=bre(f,l)),m?(o([u],m[1],r,null,`2-regex-'${m[2]||m[0]}'`),u.confidence=.6,!0):null},u2=vre;var wre=function(t="",e=[]){let n=t.length,r=7;r>n-3&&(r=n-3);for(let o=r;o>2;o-=1){let i=t.substring(0,o);if(e[i.length].hasOwnProperty(i)===!0)return e[i.length][i]}return null},_re=function(t,e,n){let r=t[e];if(r.tags.size===0){let o=wre(r.normal,n.two.prefixPatterns);if(o!==null)return ze(r,o,"2-prefix"),r.confidence=.5,!0}return null},c2=_re;var Ere=1400,Are=2100,Cre=new Set(["in","on","by","until","for","to","during","throughout","through","within","before","after","of","this","next","last","circa","around","post","pre","budget","classic","plan","may"]),f2=function(t){if(!t)return!1;let e=t.normal||t.implicit;return!!(Cre.has(e)||t.tags.has("Date")||t.tags.has("Month")||t.tags.has("WeekDay")||t.tags.has("Year")||t.tags.has("ProperNoun"))},d2=function(t){return t?!!(t.tags.has("Ordinal")||t.tags.has("Cardinal")&&t.normal.length<3||t.normal==="is"||t.normal==="was"):!1},h2=function(t){return t&&(t.tags.has("Date")||t.tags.has("Month")||t.tags.has("WeekDay")||t.tags.has("Year"))},Tre=function(t,e){let n=t[e];if(n.tags.has("NumericValue")&&n.tags.has("Cardinal")&&n.normal.length===4){let r=Number(n.normal);if(r&&!isNaN(r)&&r>Ere&&r<Are){let o=t[e-1],i=t[e+1];if(f2(o)||f2(i))return ze(n,"Year","2-tagYear");if(r>=1920&&r<2025){if(d2(o)||d2(i))return ze(n,"Year","2-tagYear-close");if(h2(t[e-2])||h2(t[e+2]))return ze(n,"Year","2-tagYear-far");if(o&&(o.tags.has("Determiner")||o.tags.has("Possessive"))&&i&&i.tags.has("Noun")&&!i.tags.has("Plural"))return ze(n,"Year","2-tagYear-noun")}}}return null},p2=Tre;var Sre=function(t,e,n,r){let o=r.methods.one.setTag,i=t[e],s=["PastTense","PresentTense","Auxiliary","Modal","Particle"];i.tags.has("Verb")&&(s.find(l=>i.tags.has(l))||o([i],"Infinitive",r,null,"2-verb-type''"))},m2=Sre;var g2=/^[A-Z]('s|,)?$/,y2=/^[A-Z-]+$/,b2=/^[A-Z]+s$/,Pre=/([A-Z]\.)+[A-Z]?,?$/,Ire=/[A-Z]{2,}('s|,)?$/,xre=/([a-z]\.)+[a-z]\.?$/,v2={I:!0,A:!0},kre={la:!0,ny:!0,us:!0,dc:!0,gb:!0},Rre=function(t,e){let n=t.text;if(y2.test(n)===!1)if(n.length>3&&b2.test(n)===!0)n=n.replace(/s$/,"");else return!1;return n.length>5||v2.hasOwnProperty(n)||e.one.lexicon.hasOwnProperty(t.normal)?!1:Pre.test(n)===!0||xre.test(n)===!0||g2.test(n)===!0||Ire.test(n)===!0},Nre=function(t,e,n){let r=t[e];return r.tags.has("RomanNumeral")||r.tags.has("Acronym")||r.frozen?null:Rre(r,n)?(r.tags.clear(),ze(r,["Acronym","Noun"],"3-no-period-acronym"),kre[r.normal]===!0&&ze(r,"Place","3-place-acronym"),b2.test(r.text)===!0&&ze(r,"Plural","3-plural-acronym"),!0):!v2.hasOwnProperty(r.text)&&g2.test(r.text)?(r.tags.clear(),ze(r,["Acronym","Noun"],"3-one-letter-acronym"),!0):r.tags.has("Organization")&&r.text.length<=3?(ze(r,"Acronym","3-org-acronym"),!0):r.tags.has("Organization")&&y2.test(r.text)&&r.text.length<=6?(ze(r,"Acronym","3-titlecase-acronym"),!0):null},w2=Nre;var _2=function(t,e){if(!t)return null;let n=e.find(r=>t.normal===r[0]);return n?n[1]:null},E2=function(t,e){if(!t)return null;let n=e.find(r=>t.tags.has(r[0]));return n?n[1]:null},Ore=function(t,e,n){let{leftTags:r,leftWords:o,rightWords:i,rightTags:s}=n.two.neighbours,a=t[e];if(a.tags.size===0){let l=null;if(l=l||_2(t[e-1],o),l=l||_2(t[e+1],i),l=l||E2(t[e-1],r),l=l||E2(t[e+1],s),l)return ze(a,l,"3-[neighbour]"),ho(t,e,n),t[e].confidence=.2,!0}return null},A2=Ore;var Dre=t=>/^\p{Lu}[\p{Ll}']/u.test(t),C2=function(t,e,n){return!t||t.tags.has("FirstName")||t.tags.has("Place")?!1:t.tags.has("ProperNoun")||t.tags.has("Organization")||t.tags.has("Acronym")?!0:!n&&Dre(t.text)?e===0?t.tags.has("Singular"):!0:!1},Mre=function(t,e,n,r){let o=n.model.two.orgWords,i=n.methods.one.setTag,s=t[e],a=s.machine||s.normal;if(o[a]===!0&&C2(t[e-1],e-1,r)){i([t[e]],"Organization",n,null,"3-[org-word]");for(let l=e;l>=0&&C2(t[l],l,r);l-=1)i([t[l]],"Organization",n,null,"3-[org-word]")}return null},T2=Mre;var Fre=t=>/^\p{Lu}[\p{Ll}']/u.test(t),Lre=/'s$/,S2=new Set(["athletic","city","community","eastern","federal","financial","great","historic","historical","local","memorial","municipal","national","northern","provincial","southern","state","western","spring","pine","sunset","view","oak","maple","spruce","cedar","willow"]),Ure=new Set(["center","centre","way","range","bar","bridge","field","pit"]),P2=function(t,e,n){if(!t)return!1;let r=t.tags;return r.has("Organization")||r.has("Possessive")||Lre.test(t.normal)?!1:r.has("ProperNoun")||r.has("Place")?!0:!n&&Fre(t.text)?e===0?r.has("Singular"):!0:!1},Bre=function(t,e,n,r){let o=n.model.two.placeWords,i=n.methods.one.setTag,s=t[e],a=s.machine||s.normal;if(o[a]===!0){for(let l=e-1;l>=0;l-=1)if(!S2.has(t[l].normal)){if(P2(t[l],l,r)){i(t.slice(l,e+1),"Place",n,null,"3-[place-of-foo]");continue}break}if(Ure.has(a))return!1;for(let l=e+1;l<t.length;l+=1){if(P2(t[l],l,r))return i(t.slice(e,l+1),"Place",n,null,"3-[foo-place]"),!0;if(!(t[l].normal==="of"||S2.has(t[l].normal)))break}}return null},I2=Bre;var Gre=function(t,e,n){let r=!1,o=t[e].tags;(o.size===0||o.size===1&&(o.has("Hyphenated")||o.has("HashTag")||o.has("Prefix")||o.has("SlashedTerm")))&&(r=!0),r&&(ze(t[e],"Noun","3-[fallback]"),ho(t,e,n),t[e].confidence=.1)},x2=Gre;var Hre=/^[A-Z][a-z]/,Mr=(t,e)=>t[e].tags.has("ProperNoun")&&Hre.test(t[e].text)?"Noun":null,k2=(t,e,n)=>e===0&&!t[1]?n:null,qre=function(t,e){return!t[e+1]&&t[e-1]&&t[e-1].tags.has("Determiner")?"Noun":null},$re=function(t,e,n){return e===0&&t.length>3?n:null},Vre={"Adj|Gerund":(t,e)=>Mr(t,e),"Adj|Noun":(t,e)=>Mr(t,e)||qre(t,e),"Actor|Verb":(t,e)=>Mr(t,e),"Adj|Past":(t,e)=>Mr(t,e),"Adj|Present":(t,e)=>Mr(t,e),"Noun|Gerund":(t,e)=>Mr(t,e),"Noun|Verb":(t,e)=>e>0&&Mr(t,e)||k2(t,e,"Infinitive"),"Plural|Verb":(t,e)=>Mr(t,e)||k2(t,e,"PresentTense")||$re(t,e,"Plural"),"Person|Noun":(t,e)=>Mr(t,e),"Person|Verb":(t,e)=>e!==0?Mr(t,e):null,"Person|Adj":(t,e)=>e===0&&t.length>1||Mr(t,e)?"Person":null},oE=Vre;var iE=typeof process=="undefined"||!process.env?self.env||{}:process.env,R2=/^(under|over|mis|re|un|dis|semi)-?/,N2=(t,e)=>{if(!t||!e)return null;let n=t.normal||t.implicit,r=null;return e.hasOwnProperty(n)&&(r=e[n]),r&&iE.DEBUG_TAGS&&console.log(`
  \x1B[2m\x1B[3m     \u2193 - '${n}' \x1B[0m`),r},O2=(t,e={},n)=>{if(!t||!e)return null;let o=Array.from(t.tags).sort((i,s)=>{let a=n[i]?n[i].parents.length:0,l=n[s]?n[s].parents.length:0;return a>l?-1:1}).find(i=>e[i]);return o&&iE.DEBUG_TAGS&&console.log(`  \x1B[2m\x1B[3m      \u2193 - '${t.normal||t.implicit}' (#${o})  \x1B[0m`),o=e[o],o},jre=function(t,e,n,r){var a;if(!n)return null;let o=((a=t[e-1])==null?void 0:a.text)!=="also"?e-1:Math.max(0,e-2),i=r.one.tagSet,s=N2(t[e+1],n.afterWords);return s=s||N2(t[o],n.beforeWords),s=s||O2(t[o],n.beforeTags,i),s=s||O2(t[e+1],n.afterTags,i),s},Wre=function(t,e,n){let r=n.model,o=n.methods.one.setTag,{switches:i,clues:s}=r.two,a=t[e],l=a.normal||a.implicit||"";if(R2.test(l)&&!i[l]&&(l=l.replace(R2,"")),a.switch){let u=a.switch;if(a.tags.has("Acronym")||a.tags.has("PhrasalVerb"))return;let f=jre(t,e,s[u],r);oE[u]&&(f=oE[u](t,e)||f),f?(o([a],f,n,null,`3-[switch] (${u})`),ho(t,e,r)):iE.DEBUG_TAGS&&console.log(`
 -> X  - '${l}'  : (${u})  `)}},D2=Wre;var zre={there:!0,this:!0,it:!0,him:!0,her:!0,us:!0},Jre=function(t,e){let n=e.methods.one.setTag,r=e.model.one._multiCache||{},o=t[0];if((o.switch==="Noun|Verb"||o.tags.has("Infinitive"))&&t.length>=2){if(t.length<4&&!zre[t[1].normal]||!o.tags.has("PhrasalVerb")&&r.hasOwnProperty(o.normal))return;(t[1].tags.has("Noun")||t[1].tags.has("Determiner"))&&(!t.slice(1,3).some(l=>l.tags.has("Verb"))||o.tags.has("#PhrasalVerb"))&&n([o],"Imperative",e,null,"3-[imperative]")}},M2=Jre;var Kre=function(t){if(t.filter(n=>!n.tags.has("ProperNoun")).length<=3)return!1;let e=/^[a-z]/;return t.every(n=>!e.test(n.text))},Yre=function(t,e,n){t.forEach(r=>{t2(r,0,e,n)})},Xre=function(t,e,n,r){for(let o=0;o<t.length;o+=1)t[o].frozen!==!0&&(o2(t,o,e),r===!1&&i2(t,o,e),a2(t,o,e),u2(t,o,e,n),c2(t,o,e),p2(t,o,e))},Qre=function(t,e,n,r){for(let o=0;o<t.length;o+=1){let i=w2(t,o,e);ho(t,o,e),i=i||A2(t,o,e),i=i||x2(t,o,e)}for(let o=0;o<t.length;o+=1)t[o].frozen!==!0&&(T2(t,o,n,r),I2(t,o,n,r),D2(t,o,n),m2(t,o,e,n),n2(t,o,e,n));M2(t,n)},Zre=function(t){let{methods:e,model:n,world:r}=t,o=t.docs;Yre(o,n,r);let i=e.two.quickSplit(o);for(let s=0;s<i.length;s+=1){let a=i[s],l=Kre(a);Xre(a,n,r,l),Qre(a,n,r,l)}return i},F2=Zre;var L2={Possessive:t=>{let e=t.machine||t.normal||t.text;return e=e.replace(/'s$/,""),e},Plural:(t,e)=>{let n=t.machine||t.normal||t.text;return e.methods.two.transform.noun.toSingular(n,e.model)},Copula:()=>"is",PastTense:(t,e)=>{let n=t.machine||t.normal||t.text;return e.methods.two.transform.verb.toInfinitive(n,e.model,"PastTense")},Gerund:(t,e)=>{let n=t.machine||t.normal||t.text;return e.methods.two.transform.verb.toInfinitive(n,e.model,"Gerund")},PresentTense:(t,e)=>{let n=t.machine||t.normal||t.text;return t.tags.has("Infinitive")?n:e.methods.two.transform.verb.toInfinitive(n,e.model,"PresentTense")},Comparative:(t,e)=>{let n=t.machine||t.normal||t.text;return e.methods.two.transform.adjective.fromComparative(n,e.model)},Superlative:(t,e)=>{let n=t.machine||t.normal||t.text;return e.methods.two.transform.adjective.fromSuperlative(n,e.model)},Adverb:(t,e)=>{let{fromAdverb:n}=e.methods.two.transform.adjective,r=t.machine||t.normal||t.text;return n(r)}},eoe=function(t){let e=t.world,n=Object.keys(L2);t.docs.forEach(r=>{for(let o=0;o<r.length;o+=1){let i=r[o];for(let s=0;s<n.length;s+=1)if(i.tags.has(n[s])){let a=L2[n[s]],l=a(i,e);i.normal!==l&&(i.root=l);break}}})},U2=eoe;var B2={Adverb:"RB",Comparative:"JJR",Superlative:"JJS",Adjective:"JJ",TO:"Conjunction",Modal:"MD",Auxiliary:"MD",Gerund:"VBG",PastTense:"VBD",Participle:"VBN",PresentTense:"VBZ",Infinitive:"VB",Particle:"RP",Verb:"VB",Pronoun:"PRP",Cardinal:"CD",Conjunction:"CC",Determiner:"DT",Preposition:"IN",QuestionWord:"WP",Expression:"UH",Possessive:"POS",ProperNoun:"NNP",Person:"NNP",Place:"NNP",Organization:"NNP",Singular:"NN",Plural:"NNS",Noun:"NN",There:"EX"},toe=function(t){if(t.tags.has("ProperNoun")&&t.tags.has("Plural"))return"NNPS";if(t.tags.has("Possessive")&&t.tags.has("Pronoun"))return"PRP$";if(t.normal==="there")return"EX";if(t.normal==="to")return"TO";let e=t.tagRank||[];for(let n=0;n<e.length;n+=1)if(B2.hasOwnProperty(e[n]))return B2[e[n]];return null},noe=function(t){t.compute("tagRank"),t.docs.forEach(e=>{e.forEach(n=>{n.penn=toe(n)})})},G2=noe;var H2={preTagger:F2,root:U2,penn:G2};var sE=["Person","Place","Organization"],q2={Noun:{not:["Verb","Adjective","Adverb","Value","Determiner"]},Singular:{is:"Noun",not:["Plural","Uncountable"]},ProperNoun:{is:"Noun"},Person:{is:"Singular",also:["ProperNoun"],not:["Place","Organization","Date"]},FirstName:{is:"Person"},MaleName:{is:"FirstName",not:["FemaleName","LastName"]},FemaleName:{is:"FirstName",not:["MaleName","LastName"]},LastName:{is:"Person",not:["FirstName"]},Honorific:{is:"Person",not:["FirstName","LastName","Value"]},Place:{is:"Singular",not:["Person","Organization"]},Country:{is:"Place",also:["ProperNoun"],not:["City"]},City:{is:"Place",also:["ProperNoun"],not:["Country"]},Region:{is:"Place",also:["ProperNoun"]},Address:{},Organization:{is:"ProperNoun",not:["Person","Place"]},SportsTeam:{is:"Organization"},School:{is:"Organization"},Company:{is:"Organization"},Plural:{is:"Noun",not:["Singular","Uncountable"]},Uncountable:{is:"Noun"},Pronoun:{is:"Noun",not:sE},Actor:{is:"Noun",not:["Place","Organization"]},Activity:{is:"Noun",not:["Person","Place"]},Unit:{is:"Noun",not:sE},Demonym:{is:"Noun",also:["ProperNoun"],not:sE},Possessive:{is:"Noun"},Reflexive:{is:"Pronoun"}};var $2={Verb:{not:["Noun","Adjective","Adverb","Value","Expression"]},PresentTense:{is:"Verb",not:["PastTense","FutureTense"]},Infinitive:{is:"PresentTense",not:["Gerund"]},Imperative:{is:"Verb",not:["PastTense","Gerund","Copula"]},Gerund:{is:"PresentTense",not:["Copula"]},PastTense:{is:"Verb",not:["PresentTense","Gerund","FutureTense"]},FutureTense:{is:"Verb",not:["PresentTense","PastTense"]},Copula:{is:"Verb"},Modal:{is:"Verb",not:["Infinitive"]},Participle:{is:"PastTense"},Auxiliary:{is:"Verb",not:["PastTense","PresentTense","Gerund","Conjunction"]},PhrasalVerb:{is:"Verb"},Particle:{is:"PhrasalVerb",not:["PastTense","PresentTense","Copula","Gerund"]},Passive:{is:"Verb"}};var V2={Value:{not:["Verb","Adjective","Adverb"]},Ordinal:{is:"Value",not:["Cardinal"]},Cardinal:{is:"Value",not:["Ordinal"]},Fraction:{is:"Value",not:["Noun"]},Multiple:{is:"TextValue"},RomanNumeral:{is:"Cardinal",not:["TextValue"]},TextValue:{is:"Value",not:["NumericValue"]},NumericValue:{is:"Value",not:["TextValue"]},Money:{is:"Cardinal"},Percent:{is:"Value"}};var j2={Date:{not:["Verb","Adverb","Adjective"]},Month:{is:"Date",also:["Noun"],not:["Year","WeekDay","Time"]},WeekDay:{is:"Date",also:["Noun"]},Year:{is:"Date",not:["RomanNumeral"]},FinancialQuarter:{is:"Date",not:"Fraction"},Holiday:{is:"Date",also:["Noun"]},Season:{is:"Date"},Timezone:{is:"Date",also:["Noun"],not:["ProperNoun"]},Time:{is:"Date",not:["AtMention"]},Duration:{is:"Date",also:["Noun"]}};var roe=["Noun","Verb","Adjective","Adverb","Value","QuestionWord"],W2={Adjective:{not:["Noun","Verb","Adverb","Value"]},Comparable:{is:"Adjective"},Comparative:{is:"Adjective"},Superlative:{is:"Adjective",not:["Comparative"]},NumberRange:{},Adverb:{not:["Noun","Verb","Adjective","Value"]},Determiner:{not:["Noun","Verb","Adjective","Adverb","QuestionWord","Conjunction"]},Conjunction:{not:roe},Preposition:{not:["Noun","Verb","Adjective","Adverb","QuestionWord","Determiner"]},QuestionWord:{not:["Determiner"]},Currency:{is:"Noun"},Expression:{not:["Noun","Adjective","Verb","Adverb"]},Abbreviation:{},Url:{not:["HashTag","PhoneNumber","Verb","Adjective","Value","AtMention","Email","SlashedTerm"]},PhoneNumber:{not:["HashTag","Verb","Adjective","Value","AtMention","Email"]},HashTag:{},AtMention:{is:"Noun",not:["HashTag","Email"]},Emoji:{not:["HashTag","Verb","Adjective","Value","AtMention"]},Emoticon:{not:["HashTag","Verb","Adjective","Value","AtMention","SlashedTerm"]},SlashedTerm:{not:["Emoticon","Url","Value"]},Email:{not:["HashTag","Verb","Adjective","Value","AtMention"]},Acronym:{not:["Plural","RomanNumeral","Pronoun","Date"]},Negative:{not:["Noun","Adjective","Value","Expression"]},Condition:{not:["Verb","Adjective","Noun","Value"]},There:{not:["Verb","Adjective","Noun","Value","Conjunction","Preposition"]},Prefix:{not:["Abbreviation","Acronym","ProperNoun"]},Hyphenated:{}};var ooe=Object.assign({},q2,$2,V2,j2,W2),z2=ooe;var J2={compute:H2,methods:Lf,model:e2,tags:z2,hooks:["preTagger"]};var ioe=/[,)"';:\-.]/,ti=function(t,e){if(!t.found)return;let n=t.termList();for(let r=0;r<n.length-1;r++){let o=n[r];if(ioe.test(o.post))return}n[0].implicit=n[0].normal,n[0].text+=e,n[0].normal+=e,n.slice(1).forEach(r=>{r.implicit=r.normal,r.text="",r.normal=""});for(let r=0;r<n.length-1;r++)n[r].post=n[r].post.replace(/ /,"")},soe=function(){let t=this.not("@hasContraction"),e=t.match("(we|they|you) are");return ti(e,"'re"),e=t.match("(he|she|they|it|we|you) will"),ti(e,"'ll"),e=t.match("(he|she|they|it|we) is"),ti(e,"'s"),e=t.match("#Person is"),ti(e,"'s"),e=t.match("#Person would"),ti(e,"'d"),e=t.match("(is|was|had|would|should|could|do|does|have|has|can) not"),ti(e,"n't"),e=t.match("(i|we|they) have"),ti(e,"'ve"),e=t.match("(would|should|could) have"),ti(e,"'ve"),e=t.match("i am"),ti(e,"'m"),e=t.match("going to"),this},K2=soe;var aoe=/^\p{Lu}[\p{Ll}']/u,loe=function(t=""){return t=t.replace(/^ *[a-z\u00C0-\u00FF]/,e=>e.toUpperCase()),t},uoe=function(t){class e extends t{constructor(r,o,i){super(r,o,i),this.viewType="Contraction"}expand(){return this.docs.forEach(r=>{let o=aoe.test(r[0].text);r.forEach((i,s)=>{i.text=i.implicit||"",delete i.implicit,s<r.length-1&&i.post===""&&(i.post+=" "),i.dirty=!0}),o&&(r[0].text=loe(r[0].text))}),this.compute("normal"),this}}t.prototype.contractions=function(){let n=this.match("@hasContraction+");return new e(this.document,n.pointer)},t.prototype.contract=K2},Y2=uoe;var coe=function(t,e,n){let[r,o]=e;!n||n.length===0||(n=n.map((i,s)=>(i.implicit=i.text,i.machine=i.text,i.pre="",i.post="",i.text="",i.normal="",i.index=[r,o+s],i)),n[0]&&(n[0].pre=t[r][o].pre,n[n.length-1].post=t[r][o].post,n[0].text=t[r][o].text,n[0].normal=t[r][o].normal),t[r].splice(o,1,...n))},X2=coe;var foe=/'/,doe=new Set(["been","become"]),hoe=new Set(["what","how","when","if","too"]),poe=new Set(["too","also","enough"]),moe=(t,e)=>{for(let n=e+1;n<t.length;n+=1){let r=t[n];if(doe.has(r.normal))return"has";if(hoe.has(r.normal)||r.tags.has("Gerund")||r.tags.has("Determiner")||r.tags.has("Adjective")||r.switch==="Adj|Past"&&t[n+1]&&(poe.has(t[n+1].normal)||t[n+1].tags.has("Preposition")))return"is";if(r.tags.has("PastTense"))return t[n+1]&&t[n+1].normal==="for"?"is":"has"}return"is"},goe=function(t,e){let n=t[e].normal.split(foe)[0];if(n==="let")return[n,"us"];if(n==="there"){let r=t[e+1];if(r&&r.tags.has("Plural"))return[n,"are"]}return moe(t,e)==="has"?[n,"has"]:[n,"is"]},Q2=goe;var yoe=/'/,boe=new Set(["better","done","before","it","had"]),voe=new Set(["have","be"]),woe=(t,e)=>{for(let n=e+1;n<t.length;n+=1){let r=t[n];if(boe.has(r.normal))return"had";if(voe.has(r.normal))return"would";if(r.tags.has("PastTense")||r.switch==="Adj|Past")return"had";if(r.tags.has("PresentTense")||r.tags.has("Infinitive"))return"would";if(r.tags.has("#Determiner"))return"had";if(r.tags.has("Adjective"))return"would"}return!1},_oe=function(t,e){let n=t[e].normal.split(yoe)[0];return n==="how"||n==="what"?[n,"did"]:woe(t,e)==="had"?[n,"had"]:[n,"would"]},Z2=_oe;var Eoe=function(t,e){for(let n=e-1;n>=0;n-=1)if(t[n].tags.has("Noun")||t[n].tags.has("Pronoun")||t[n].tags.has("Plural")||t[n].tags.has("Singular"))return t[n];return null},Aoe=function(t,e){if(t[e].normal==="ain't"||t[e].normal==="aint"){if(t[e+1]&&t[e+1].normal==="never")return["have"];let r=Eoe(t,e);if(r){if(r.normal==="we"||r.normal==="they")return["are","not"];if(r.normal==="i")return["am","not"];if(r.tags&&r.tags.has("Plural"))return["are","not"]}return["is","not"]}return[t[e].normal.replace(/n't/,""),"not"]},eL=Aoe;var Coe={that:!0,there:!0,let:!0,here:!0,everywhere:!0},Toe={in:!0,by:!0,for:!0},Soe=new Set(["too","also","enough","about"]),Poe=new Set(["is","are","did","were","could","should","must","had","have"]),Ioe=(t,e)=>{let n=t[e];if(Coe.hasOwnProperty(n.machine||n.normal))return!1;if(n.tags.has("Possessive"))return!0;if(n.tags.has("QuestionWord")||n.normal==="he's"||n.normal==="she's")return!1;let r=t[e+1];if(!r)return!0;if(n.normal==="it's")return!!r.tags.has("#Noun");if(r.switch=="Noun|Gerund"){let o=t[e+2];return o?o.tags.has("Copula")?!0:(o.normal==="on"||o.normal==="in",!1):!!(n.tags.has("Actor")||n.tags.has("ProperNoun"))}if(r.tags.has("Verb"))return r.tags.has("Infinitive")?!0:r.tags.has("Gerund")?!1:!!r.tags.has("PresentTense");if(r.switch==="Adj|Noun"){let o=t[e+2];if(!o)return!1;if(Poe.has(o.normal))return!0;if(Soe.has(o.normal))return!1}if(r.tags.has("Noun")){let o=r.machine||r.normal;return!(o==="here"||o==="there"||o==="everywhere"||r.tags.has("Possessive")||r.tags.has("ProperNoun")&&!n.tags.has("ProperNoun"))}if(t[e-1]&&Toe[t[e-1].normal]===!0)return!0;if(r.tags.has("Adjective")){let o=t[e+2];if(!o)return!1;if(o.tags.has("Noun")&&!o.tags.has("Pronoun")){let i=r.normal;return!(i==="above"||i==="below"||i==="behind")}return o.switch==="Noun|Verb"}return!!r.tags.has("Value")},tL=Ioe;var nL=/'/,xoe=function(t){t.forEach((e,n)=>{e.index&&(e.index[1]=n)})},koe=function(t,e,n,r){let o=e.update();o.document=[t];let i=n+r;n>0&&(n-=1),t[i]&&(i+=1),o.ptrs=[[0,n,i]],o.compute(["freeze","lexicon","preTagger","unfreeze"]),xoe(t)},rL={d:(t,e)=>Z2(t,e),t:(t,e)=>eL(t,e),s:(t,e,n)=>tL(t,e)?n.methods.one.setTag([t[e]],"Possessive",n,null,"2-contraction"):Q2(t,e)},Roe=function(t,e){let n=e.fromText(t.join(" "));return n.compute("id"),n.docs[0]},Noe=t=>{let{world:e,document:n}=t;n.forEach((r,o)=>{for(let i=r.length-1;i>=0;i-=1){if(r[i].implicit)continue;let s=null;nL.test(r[i].normal)===!0&&(s=r[i].normal.split(nL)[1]);let a=null;if(rL.hasOwnProperty(s)&&(a=rL[s](r,i,e)),a){a=Roe(a,t),X2(n,[o,i],a),koe(n[o],t,i,a.length);continue}}})},oL={contractionTwo:Noe};var iL={compute:oL,api:Y2,hooks:["contractionTwo"]};var sL=[{match:"[(all|both)] #Determiner #Noun",group:0,tag:"Noun",reason:"all-noun"},{match:"#Copula [(just|alone)]$",group:0,tag:"Adjective",reason:"not-adverb"},{match:"#Singular is #Adverb? [#PastTense$]",group:0,tag:"Adjective",reason:"is-filled"},{match:"[#PastTense] #Singular is",group:0,tag:"Adjective",reason:"smoked-poutine"},{match:"[#PastTense] #Plural are",group:0,tag:"Adjective",reason:"baked-onions"},{match:"well [#PastTense]",group:0,tag:"Adjective",reason:"well-made"},{match:"#Copula [fucked up?]",group:0,tag:"Adjective",reason:"swears-adjective"},{match:"#Singular (seems|appears) #Adverb? [#PastTense$]",group:0,tag:"Adjective",reason:"seems-filled"},{match:"#Copula #Adjective? [(out|in|through)]$",group:0,tag:"Adjective",reason:"still-out"},{match:"^[#Adjective] (the|your) #Noun",group:0,notIf:"(all|even)",tag:"Infinitive",reason:"shut-the"},{match:"the [said] #Noun",group:0,tag:"Adjective",reason:"the-said-card"},{match:"[#Hyphenated (#Hyphenated && #PastTense)] (#Noun|#Conjunction)",group:0,tag:"Adjective",notIf:"#Adverb",reason:"faith-based"},{match:"[#Hyphenated (#Hyphenated && #Gerund)] (#Noun|#Conjunction)",group:0,tag:"Adjective",notIf:"#Adverb",reason:"self-driving"},{match:"[#PastTense (#Hyphenated && #PhrasalVerb)] (#Noun|#Conjunction)",group:0,tag:"Adjective",reason:"dammed-up"},{match:"(#Hyphenated && #Value) fold",tag:"Adjective",reason:"two-fold"},{match:"must (#Hyphenated && #Infinitive)",tag:"Adjective",reason:"must-win"},{match:"(#Hyphenated && #Infinitive) #Hyphenated",tag:"Adjective",notIf:"#PhrasalVerb",reason:"vacuum-sealed"},{match:"too much",tag:"Adverb Adjective",reason:"bit-4"},{match:"a bit much",tag:"Determiner Adverb Adjective",reason:"bit-3"},{match:"[(un|contra|extra|inter|intra|macro|micro|mid|mis|mono|multi|pre|sub|tri|ex)] #Adjective",group:0,tag:["Adjective","Prefix"],reason:"un-skilled"}];var Ooe="(dark|bright|flat|light|soft|pale|dead|dim|faux|little|wee|sheer|most|near|good|extra|all)",aL="(hard|fast|late|early|high|right|deep|close|direct)",lL=[{match:"#Adverb [#Adverb] (and|or|then)",group:0,tag:"Adjective",reason:"kinda-sparkly-and"},{match:`[${Ooe}] #Adjective`,group:0,tag:"Adverb",reason:"dark-green"},{match:"#Copula [far too] #Adjective",group:0,tag:"Adverb",reason:"far-too"},{match:"#Copula [still] (in|#Gerund|#Adjective)",group:0,tag:"Adverb",reason:"was-still-walking"},{match:`#Plural ${aL}`,tag:"#PresentTense #Adverb",reason:"studies-hard"},{match:`#Verb [${aL}] !#Noun?`,group:0,notIf:"(#Copula|get|got|getting|become|became|becoming|feel|feels|feeling|#Determiner|#Preposition)",tag:"Adverb",reason:"shops-direct"},{match:"[#Plural] a lot",tag:"PresentTense",reason:"studies-a-lot"}];var uL=[{match:"as [#Gerund] as",group:0,tag:"Adjective",reason:"as-gerund-as"},{match:"more [#Gerund] than",group:0,tag:"Adjective",reason:"more-gerund-than"},{match:"(so|very|extremely) [#Gerund]",group:0,tag:"Adjective",reason:"so-gerund"},{match:"(found|found) it #Adverb? [#Gerund]",group:0,tag:"Adjective",reason:"found-it-gerund"},{match:"a (little|bit|wee) bit? [#Gerund]",group:0,tag:"Adjective",reason:"a-bit-gerund"},{match:"#Gerund [#Gerund]",group:0,tag:"Adjective",notIf:"(impersonating|practicing|considering|assuming)",reason:"looking-annoying"},{match:"(looked|look|looks) #Adverb? [%Adj|Gerund%]",group:0,tag:"Adjective",notIf:"(impersonating|practicing|considering|assuming)",reason:"looked-amazing"},{match:"[%Adj|Gerund%] #Determiner",group:0,tag:"Gerund",reason:"developing-a"},{match:"#Possessive [%Adj|Gerund%] #Noun",group:0,tag:"Adjective",reason:"leading-manufacturer"},{match:"%Noun|Gerund% %Adj|Gerund%",tag:"Gerund #Adjective",reason:"meaning-alluring"},{match:"(face|embrace|reveal|stop|start|resume) %Adj|Gerund%",tag:"#PresentTense #Adjective",reason:"face-shocking"},{match:"(are|were) [%Adj|Gerund%] #Plural",group:0,tag:"Adjective",reason:"are-enduring-symbols"}];var cL=[{match:"#Determiner [#Adjective] #Copula",group:0,tag:"Noun",reason:"the-adj-is"},{match:"#Adjective [#Adjective] #Copula",group:0,tag:"Noun",reason:"adj-adj-is"},{match:"(his|its) [%Adj|Noun%]",group:0,tag:"Noun",notIf:"#Hyphenated",reason:"his-fine"},{match:"#Copula #Adverb? [all]",group:0,tag:"Noun",reason:"is-all"},{match:"(have|had) [#Adjective] #Preposition .",group:0,tag:"Noun",reason:"have-fun"},{match:"#Gerund (giant|capital|center|zone|application)",tag:"Noun",reason:"brewing-giant"},{match:"#Preposition (a|an) [#Adjective]$",group:0,tag:"Noun",reason:"an-instant"},{match:"no [#Adjective] #Modal",group:0,tag:"Noun",reason:"no-golden"},{match:"[brand #Gerund?] new",group:0,tag:"Adverb",reason:"brand-new"},{match:"(#Determiner|#Comparative|new|different) [kind]",group:0,tag:"Noun",reason:"some-kind"},{match:"#Possessive [%Adj|Noun%] #Noun",group:0,tag:"Adjective",reason:"her-favourite"},{match:"must && #Hyphenated .",tag:"Adjective",reason:"must-win"},{match:"#Determiner [#Adjective]$",tag:"Noun",notIf:"(this|that|#Comparative|#Superlative)",reason:"the-south"},{match:"(#Noun && #Hyphenated) (#Adjective && #Hyphenated)",tag:"Adjective",notIf:"(this|that|#Comparative|#Superlative)",reason:"company-wide"},{match:"#Determiner [#Adjective] (#Copula|#Determiner)",notIf:"(#Comparative|#Superlative)",group:0,tag:"Noun",reason:"the-poor"},{match:"[%Adj|Noun%] #Noun",notIf:"(#Pronoun|#ProperNoun)",group:0,tag:"Adjective",reason:"stable-foundations"}];var fL=[{match:"(slowly|quickly) [#Adjective]",group:0,tag:"Verb",reason:"slowly-adj"},{match:"does (#Adverb|not)? [#Adjective]",group:0,tag:"PresentTense",reason:"does-mean"},{match:"[(fine|okay|cool|ok)] by me",group:0,tag:"Adjective",reason:"okay-by-me"},{match:"i (#Adverb|do)? not? [mean]",group:0,tag:"PresentTense",reason:"i-mean"},{match:"will #Adjective",tag:"Auxiliary Infinitive",reason:"will-adj"},{match:"#Pronoun [#Adjective] #Determiner #Adjective? #Noun",group:0,tag:"Verb",reason:"he-adj-the"},{match:"#Copula [%Adj|Present%] to #Verb",group:0,tag:"Verb",reason:"adj-to"},{match:"#Copula [#Adjective] (well|badly|quickly|slowly)",group:0,tag:"Verb",reason:"done-well"},{match:"#Adjective and [#Gerund] !#Preposition?",group:0,tag:"Adjective",reason:"rude-and-x"},{match:"#Copula #Adverb? (over|under) [#PastTense]",group:0,tag:"Adjective",reason:"over-cooked"},{match:"#Copula #Adjective+ (and|or) [#PastTense]$",group:0,tag:"Adjective",reason:"bland-and-overcooked"},{match:"got #Adverb? [#PastTense] of",group:0,tag:"Adjective",reason:"got-tired-of"},{match:"(seem|seems|seemed|appear|appeared|appears|feel|feels|felt|sound|sounds|sounded) (#Adverb|#Adjective)? [#PastTense]",group:0,tag:"Adjective",reason:"felt-loved"},{match:"(seem|feel|seemed|felt) [#PastTense #Particle?]",group:0,tag:"Adjective",reason:"seem-confused"},{match:"a (bit|little|tad) [#PastTense #Particle?]",group:0,tag:"Adjective",reason:"a-bit-confused"},{match:"not be [%Adj|Past% #Particle?]",group:0,tag:"Adjective",reason:"do-not-be-confused"},{match:"#Copula just [%Adj|Past% #Particle?]",group:0,tag:"Adjective",reason:"is-just-right"},{match:"as [#Infinitive] as",group:0,tag:"Adjective",reason:"as-pale-as"},{match:"[%Adj|Past%] and #Adjective",group:0,tag:"Adjective",reason:"faled-and-oppressive"},{match:"or [#PastTense] #Noun",group:0,tag:"Adjective",notIf:"(#Copula|#Pronoun)",reason:"or-heightened-emotion"},{match:"(become|became|becoming|becomes) [#Verb]",group:0,tag:"Adjective",reason:"become-verb"},{match:"#Possessive [#PastTense] #Noun",group:0,tag:"Adjective",reason:"declared-intentions"},{match:"#Copula #Pronoun [%Adj|Present%]",group:0,tag:"Adjective",reason:"is-he-cool"},{match:"#Copula [%Adj|Past%] with",group:0,tag:"Adjective",notIf:"(associated|worn|baked|aged|armed|bound|fried|loaded|mixed|packed|pumped|filled|sealed)",reason:"is-crowded-with"},{match:"#Copula #Adverb? [%Adj|Present%]$",group:0,tag:"Adjective",reason:"was-empty$"}];var dL=[{match:"[still] #Adjective",group:0,tag:"Adverb",reason:"still-advb"},{match:"[still] #Verb",group:0,tag:"Adverb",reason:"still-verb"},{match:"[so] #Adjective",group:0,tag:"Adverb",reason:"so-adv"},{match:"[way] #Comparative",group:0,tag:"Adverb",reason:"way-adj"},{match:"[way] #Adverb #Adjective",group:0,tag:"Adverb",reason:"way-too-adj"},{match:"[all] #Verb",group:0,tag:"Adverb",reason:"all-verb"},{match:"#Verb  [like]",group:0,notIf:"(#Modal|#PhrasalVerb)",tag:"Adverb",reason:"verb-like"},{match:"(barely|hardly) even",tag:"Adverb",reason:"barely-even"},{match:"[even] #Verb",group:0,tag:"Adverb",reason:"even-walk"},{match:"[even] #Comparative",group:0,tag:"Adverb",reason:"even-worse"},{match:"[even] (#Determiner|#Possessive)",group:0,tag:"#Adverb",reason:"even-the"},{match:"even left",tag:"#Adverb #Verb",reason:"even-left"},{match:"[way] #Adjective",group:0,tag:"#Adverb",reason:"way-over"},{match:"#PresentTense [(hard|quick|bright|slow|fast|backwards|forwards)]",notIf:"#Copula",group:0,tag:"Adverb",reason:"lazy-ly"},{match:"[much] #Adjective",group:0,tag:"Adverb",reason:"bit-1"},{match:"#Copula [#Adverb]$",group:0,tag:"Adjective",reason:"is-well"},{match:"a [(little|bit|wee) bit?] #Adjective",group:0,tag:"Adverb",reason:"a-bit-cold"},{match:"[(super|pretty)] #Adjective",group:0,tag:"Adverb",reason:"super-strong"},{match:"(become|fall|grow) #Adverb? [#PastTense]",group:0,tag:"Adjective",reason:"overly-weakened"},{match:"(a|an) #Adverb [#Participle] #Noun",group:0,tag:"Adjective",reason:"completely-beaten"},{match:"#Determiner #Adverb? [close]",group:0,tag:"Adjective",reason:"a-close"},{match:"#Gerund #Adverb? [close]",group:0,tag:"Adverb",notIf:"(getting|becoming|feeling)",reason:"being-close"},{match:"(the|those|these|a|an) [#Participle] #Noun",group:0,tag:"Adjective",reason:"blown-motor"},{match:"(#PresentTense|#PastTense) [back]",group:0,tag:"Adverb",notIf:"(#PhrasalVerb|#Copula)",reason:"charge-back"},{match:"#Verb [around]",group:0,tag:"Adverb",notIf:"#PhrasalVerb",reason:"send-around"},{match:"[later] #PresentTense",group:0,tag:"Adverb",reason:"later-say"},{match:"#Determiner [well] !#PastTense?",group:0,tag:"Noun",reason:"the-well"},{match:"#Adjective [enough]",group:0,tag:"Adverb",reason:"high-enough"}];var hL=[{match:"#Holiday (day|eve)",tag:"Holiday",reason:"holiday-day"},{match:"#Value of #Month",tag:"Date",reason:"value-of-month"},{match:"#Cardinal #Month",tag:"Date",reason:"cardinal-month"},{match:"#Month #Value to #Value",tag:"Date",reason:"value-to-value"},{match:"#Month the #Value",tag:"Date",reason:"month-the-value"},{match:"(#WeekDay|#Month) #Value",tag:"Date",reason:"date-value"},{match:"#Value (#WeekDay|#Month)",tag:"Date",reason:"value-date"},{match:"(#TextValue && #Date) #TextValue",tag:"Date",reason:"textvalue-date"},{match:"#Month #NumberRange",tag:"Date",reason:"aug 20-21"},{match:"#WeekDay #Month #Ordinal",tag:"Date",reason:"week mm-dd"},{match:"#Month #Ordinal #Cardinal",tag:"Date",reason:"mm-dd-yyy"},{match:"(#Place|#Demonmym|#Time) (standard|daylight|central|mountain)? time",tag:"Timezone",reason:"std-time"},{match:"(eastern|mountain|pacific|central|atlantic) (standard|daylight|summer)? time",tag:"Timezone",reason:"eastern-time"},{match:"#Time [(eastern|mountain|pacific|central|est|pst|gmt)]",group:0,tag:"Timezone",reason:"5pm-central"},{match:"(central|western|eastern) european time",tag:"Timezone",reason:"cet"}];var pL=[{match:"[sun] the #Ordinal",tag:"WeekDay",reason:"sun-the-5th"},{match:"[sun] #Date",group:0,tag:"WeekDay",reason:"sun-feb"},{match:"#Date (on|this|next|last|during)? [sun]",group:0,tag:"WeekDay",reason:"1pm-sun"},{match:"(in|by|before|during|on|until|after|of|within|all) [sat]",group:0,tag:"WeekDay",reason:"sat"},{match:"(in|by|before|during|on|until|after|of|within|all) [wed]",group:0,tag:"WeekDay",reason:"wed"},{match:"(in|by|before|during|on|until|after|of|within|all) [march]",group:0,tag:"Month",reason:"march"},{match:"[sat] #Date",group:0,tag:"WeekDay",reason:"sat-feb"},{match:"#Preposition [(march|may)]",group:0,tag:"Month",reason:"in-month"},{match:"(this|next|last) (march|may) !#Infinitive?",tag:"#Date #Month",reason:"this-month"},{match:"(march|may) the? #Value",tag:"#Month #Date #Date",reason:"march-5th"},{match:"#Value of? (march|may)",tag:"#Date #Date #Month",reason:"5th-of-march"},{match:"[(march|may)] .? #Date",group:0,tag:"Month",reason:"march-and-feb"},{match:"#Date .? [(march|may)]",group:0,tag:"Month",reason:"feb-and-march"},{match:"#Adverb [(march|may)]",group:0,tag:"Verb",reason:"quickly-march"},{match:"[(march|may)] #Adverb",group:0,tag:"Verb",reason:"march-quickly"},{match:"#Value (am|pm)",tag:"Time",reason:"2-am"}];var Doe="(feel|sense|process|rush|side|bomb|bully|challenge|cover|crush|dump|exchange|flow|function|issue|lecture|limit|march|process)",mL=[{match:"(the|any) [more]",group:0,tag:"Singular",reason:"more-noun"},{match:"[more] #Noun",group:0,tag:"Adjective",reason:"more-noun"},{match:"(right|rights) of .",tag:"Noun",reason:"right-of"},{match:"a [bit]",group:0,tag:"Singular",reason:"bit-2"},{match:"a [must]",group:0,tag:"Singular",reason:"must-2"},{match:"(we|us) [all]",group:0,tag:"Noun",reason:"we all"},{match:"due to [#Verb]",group:0,tag:"Noun",reason:"due-to"},{match:"some [#Verb] #Plural",group:0,tag:"Noun",reason:"determiner6"},{match:"#Possessive #Ordinal [#PastTense]",group:0,tag:"Noun",reason:"first-thought"},{match:"(the|this|those|these) #Adjective [%Verb|Noun%]",group:0,tag:"Noun",notIf:"#Copula",reason:"the-adj-verb"},{match:"(the|this|those|these) #Adverb #Adjective [#Verb]",group:0,tag:"Noun",reason:"determiner4"},{match:"the [#Verb] #Preposition .",group:0,tag:"Noun",reason:"determiner1"},{match:"(a|an|the) [#Verb] of",group:0,tag:"Noun",reason:"the-verb-of"},{match:"#Determiner #Noun of [#Verb]",group:0,tag:"Noun",notIf:"#Gerund",reason:"noun-of-noun"},{match:"#PastTense #Preposition [#PresentTense]",group:0,notIf:"#Gerund",tag:"Noun",reason:"ended-in-ruins"},{match:"#Conjunction [u]",group:0,tag:"Pronoun",reason:"u-pronoun-2"},{match:"[u] #Verb",group:0,tag:"Pronoun",reason:"u-pronoun-1"},{match:"#Determiner [(western|eastern|northern|southern|central)] #Noun",group:0,tag:"Noun",reason:"western-line"},{match:"(#Singular && @hasHyphen) #PresentTense",tag:"Noun",reason:"hyphen-verb"},{match:"is no [#Verb]",group:0,tag:"Noun",reason:"is-no-verb"},{match:"do [so]",group:0,tag:"Noun",reason:"so-noun"},{match:"#Determiner [(shit|damn|hell)]",group:0,tag:"Noun",reason:"swears-noun"},{match:"to [(shit|hell)]",group:0,tag:"Noun",reason:"to-swears"},{match:"(the|these) [#Singular] (were|are)",group:0,tag:"Plural",reason:"singular-were"},{match:"a #Noun+ or #Adverb+? [#Verb]",group:0,tag:"Noun",reason:"noun-or-noun"},{match:"(the|those|these|a|an) #Adjective? [#PresentTense #Particle?]",group:0,tag:"Noun",notIf:"(seem|appear|include|#Gerund|#Copula)",reason:"det-inf"},{match:"#Noun #Actor",tag:"Actor",notIf:"(#Person|#Pronoun)",reason:"thing-doer"},{match:"#Gerund #Actor",tag:"Actor",reason:"gerund-doer"},{match:"co #Singular",tag:"Actor",reason:"co-noun"},{match:"[#Noun+] #Actor",group:0,tag:"Actor",notIf:"(#Honorific|#Pronoun|#Possessive)",reason:"air-traffic-controller"},{match:"(urban|cardiac|cardiovascular|respiratory|medical|clinical|visual|graphic|creative|dental|exotic|fine|certified|registered|technical|virtual|professional|amateur|junior|senior|special|pharmaceutical|theoretical)+ #Noun? #Actor",tag:"Actor",reason:"fine-artist"},{match:"#Noun+ (coach|chef|king|engineer|fellow|personality|boy|girl|man|woman|master)",tag:"Actor",reason:"dance-coach"},{match:"chief . officer",tag:"Actor",reason:"chief-x-officer"},{match:"chief of #Noun+",tag:"Actor",reason:"chief-of-police"},{match:"senior? vice? president of #Noun+",tag:"Actor",reason:"president-of"},{match:"#Determiner [sun]",group:0,tag:"Singular",reason:"the-sun"},{match:"#Verb (a|an) [#Value]$",group:0,tag:"Singular",reason:"did-a-value"},{match:"the [(can|will|may)]",group:0,tag:"Singular",reason:"the can"},{match:"#FirstName #Acronym? (#Possessive && #LastName)",tag:"Possessive",reason:"name-poss"},{match:"#Organization+ #Possessive",tag:"Possessive",reason:"org-possessive"},{match:"#Place+ #Possessive",tag:"Possessive",reason:"place-possessive"},{match:"#Possessive #PresentTense #Particle?",notIf:"(#Gerund|her)",tag:"Noun",reason:"possessive-verb"},{match:"(my|our|their|her|his|its) [(#Plural && #Actor)] #Noun",tag:"Possessive",reason:"my-dads"},{match:"#Value of a [second]",group:0,unTag:"Value",tag:"Singular",reason:"10th-of-a-second"},{match:"#Value [seconds]",group:0,unTag:"Value",tag:"Plural",reason:"10-seconds"},{match:"in [#Infinitive]",group:0,tag:"Singular",reason:"in-age"},{match:"a [#Adjective] #Preposition",group:0,tag:"Noun",reason:"a-minor-in"},{match:"#Determiner [#Singular] said",group:0,tag:"Actor",reason:"the-actor-said"},{match:`#Determiner #Noun [${Doe}] !(#Preposition|to|#Adverb)?`,group:0,tag:"Noun",reason:"the-noun-sense"},{match:"[#PresentTense] (of|by|for) (a|an|the) #Noun #Copula",group:0,tag:"Plural",reason:"photographs-of"},{match:"#Infinitive and [%Noun|Verb%]",group:0,tag:"Infinitive",reason:"fight and win"},{match:"#Noun and [#Verb] and #Noun",group:0,tag:"Noun",reason:"peace-and-flowers"},{match:"the #Cardinal [%Adj|Noun%]",group:0,tag:"Noun",reason:"the-1992-classic"},{match:"#Copula the [%Adj|Noun%] #Noun",group:0,tag:"Adjective",reason:"the-premier-university"},{match:"i #Verb [me] #Noun",group:0,tag:"Possessive",reason:"scottish-me"},{match:"[#PresentTense] (music|class|lesson|night|party|festival|league|ceremony)",group:0,tag:"Noun",reason:"dance-music"},{match:"[wit] (me|it)",group:0,tag:"Presposition",reason:"wit-me"},{match:"#PastTense #Possessive [#Verb]",group:0,tag:"Noun",notIf:"(saw|made)",reason:"left-her-boots"},{match:"#Value [%Plural|Verb%]",group:0,tag:"Plural",notIf:"(one|1|a|an)",reason:"35-signs"},{match:"had [#PresentTense]",group:0,tag:"Noun",notIf:"(#Gerund|come|become)",reason:"had-time"},{match:"%Adj|Noun% %Noun|Verb%",tag:"#Adjective #Noun",notIf:"#ProperNoun #Noun",reason:"instant-access"},{match:"#Determiner [%Adj|Noun%] #Conjunction",group:0,tag:"Noun",reason:"a-rep-to"},{match:"#Adjective #Noun [%Plural|Verb%]$",group:0,tag:"Plural",notIf:"#Pronoun",reason:"near-death-experiences"},{match:"#Possessive #Noun [%Plural|Verb%]$",group:0,tag:"Plural",reason:"your-guild-colors"}];var gL=[{match:"(this|that|the|a|an) [#Gerund #Infinitive]",group:0,tag:"Singular",reason:"the-planning-process"},{match:"(that|the) [#Gerund #PresentTense]",group:0,ifNo:"#Copula",tag:"Plural",reason:"the-paving-stones"},{match:"#Determiner [#Gerund] #Noun",group:0,tag:"Adjective",reason:"the-gerund-noun"},{match:"#Pronoun #Infinitive [#Gerund] #PresentTense",group:0,tag:"Noun",reason:"tipping-sucks"},{match:"#Adjective [#Gerund]",group:0,tag:"Noun",notIf:"(still|even|just)",reason:"early-warning"},{match:"[#Gerund] #Adverb? not? #Copula",group:0,tag:"Activity",reason:"gerund-copula"},{match:"#Copula [(#Gerund|#Activity)] #Copula",group:0,tag:"Gerund",reason:"are-doing-is"},{match:"[#Gerund] #Modal",group:0,tag:"Activity",reason:"gerund-modal"},{match:"#Singular for [%Noun|Gerund%]",group:0,tag:"Gerund",reason:"noun-for-gerund"},{match:"#Comparative (for|at) [%Noun|Gerund%]",group:0,tag:"Gerund",reason:"better-for-gerund"},{match:"#PresentTense the [#Gerund]",group:0,tag:"Noun",reason:"keep-the-touching"}];var yL=[{match:"#Infinitive (this|that|the) [#Infinitive]",group:0,tag:"Noun",reason:"do-this-dance"},{match:"#Gerund #Determiner [#Infinitive]",group:0,tag:"Noun",reason:"running-a-show"},{match:"#Determiner (only|further|just|more|backward) [#Infinitive]",group:0,tag:"Noun",reason:"the-only-reason"},{match:"(the|this|a|an) [#Infinitive] #Adverb? #Verb",group:0,tag:"Noun",reason:"determiner5"},{match:"#Determiner #Adjective #Adjective? [#Infinitive]",group:0,tag:"Noun",reason:"a-nice-inf"},{match:"#Determiner #Demonym [#PresentTense]",group:0,tag:"Noun",reason:"mexican-train"},{match:"#Adjective #Noun+ [#Infinitive] #Copula",group:0,tag:"Noun",reason:"career-move"},{match:"at some [#Infinitive]",group:0,tag:"Noun",reason:"at-some-inf"},{match:"(go|goes|went) to [#Infinitive]",group:0,tag:"Noun",reason:"goes-to-verb"},{match:"(a|an) #Adjective? #Noun [#Infinitive] (#Preposition|#Noun)",group:0,notIf:"from",tag:"Noun",reason:"a-noun-inf"},{match:"(a|an) #Noun [#Infinitive]$",group:0,tag:"Noun",reason:"a-noun-inf2"},{match:"#Gerund #Adjective? for [#Infinitive]",group:0,tag:"Noun",reason:"running-for"},{match:"about [#Infinitive]",group:0,tag:"Singular",reason:"about-love"},{match:"#Plural on [#Infinitive]",group:0,tag:"Noun",reason:"on-stage"},{match:"any [#Infinitive]",group:0,tag:"Noun",reason:"any-charge"},{match:"no [#Infinitive]",group:0,tag:"Noun",reason:"no-doubt"},{match:"number of [#PresentTense]",group:0,tag:"Noun",reason:"number-of-x"},{match:"(taught|teaches|learns|learned) [#PresentTense]",group:0,tag:"Noun",reason:"teaches-x"},{match:"(try|use|attempt|build|make) [#Verb #Particle?]",notIf:"(#Copula|#Noun|sure|fun|up)",group:0,tag:"Noun",reason:"do-verb"},{match:"^[#Infinitive] (is|was)",group:0,tag:"Noun",reason:"checkmate-is"},{match:"#Infinitive much [#Infinitive]",group:0,tag:"Noun",reason:"get-much"},{match:"[cause] #Pronoun #Verb",group:0,tag:"Conjunction",reason:"cause-cuz"},{match:"the #Singular [#Infinitive] #Noun",group:0,tag:"Noun",notIf:"#Pronoun",reason:"cardio-dance"},{match:"#Determiner #Modal [#Noun]",group:0,tag:"PresentTense",reason:"should-smoke"},{match:"this [#Plural]",group:0,tag:"PresentTense",notIf:"(#Preposition|#Date)",reason:"this-verbs"},{match:"#Noun that [#Plural]",group:0,tag:"PresentTense",notIf:"(#Preposition|#Pronoun|way)",reason:"voice-that-rocks"},{match:"that [#Plural] to",group:0,tag:"PresentTense",notIf:"#Preposition",reason:"that-leads-to"},{match:"(let|make|made) (him|her|it|#Person|#Place|#Organization)+ [#Singular] (a|an|the|it)",group:0,tag:"Infinitive",reason:"let-him-glue"},{match:"#Verb (all|every|each|most|some|no) [#PresentTense]",notIf:"#Modal",group:0,tag:"Noun",reason:"all-presentTense"},{match:"(had|have|#PastTense) #Adjective [#PresentTense]",group:0,tag:"Noun",notIf:"better",reason:"adj-presentTense"},{match:"#Value #Adjective [#PresentTense]",group:0,tag:"Noun",notIf:"#Copula",reason:"one-big-reason"},{match:"#PastTense #Adjective+ [#PresentTense]",group:0,tag:"Noun",notIf:"(#Copula|better)",reason:"won-wide-support"},{match:"(many|few|several|couple) [#PresentTense]",group:0,tag:"Noun",notIf:"#Copula",reason:"many-poses"},{match:"#Determiner #Adverb #Adjective [%Noun|Verb%]",group:0,tag:"Noun",notIf:"#Copula",reason:"very-big-dream"},{match:"from #Noun to [%Noun|Verb%]",group:0,tag:"Noun",reason:"start-to-finish"},{match:"(for|with|of) #Noun (and|or|not) [%Noun|Verb%]",group:0,tag:"Noun",notIf:"#Pronoun",reason:"for-food-and-gas"},{match:"#Adjective #Adjective [#PresentTense]",group:0,tag:"Noun",notIf:"#Copula",reason:"adorable-little-store"},{match:"#Gerund #Adverb? #Comparative [#PresentTense]",group:0,tag:"Noun",notIf:"#Copula",reason:"higher-costs"},{match:"(#Noun && @hasComma) #Noun (and|or) [#PresentTense]",group:0,tag:"Noun",notIf:"#Copula",reason:"noun-list"},{match:"(many|any|some|several) [#PresentTense] for",group:0,tag:"Noun",reason:"any-verbs-for"},{match:"to #PresentTense #Noun [#PresentTense] #Preposition",group:0,tag:"Noun",reason:"gas-exchange"},{match:"#PastTense (until|as|through|without) [#PresentTense]",group:0,tag:"Noun",reason:"waited-until-release"},{match:"#Gerund like #Adjective? [#PresentTense]",group:0,tag:"Plural",reason:"like-hot-cakes"},{match:"some #Adjective [#PresentTense]",group:0,tag:"Noun",reason:"some-reason"},{match:"for some [#PresentTense]",group:0,tag:"Noun",reason:"for-some-reason"},{match:"(same|some|the|that|a) kind of [#PresentTense]",group:0,tag:"Noun",reason:"some-kind-of"},{match:"(same|some|the|that|a) type of [#PresentTense]",group:0,tag:"Noun",reason:"some-type-of"},{match:"#Gerund #Adjective #Preposition [#PresentTense]",group:0,tag:"Noun",reason:"doing-better-for-x"},{match:"(get|got|have) #Comparative [#PresentTense]",group:0,tag:"Noun",reason:"got-better-aim"},{match:"whose [#PresentTense] #Copula",group:0,tag:"Noun",reason:"whos-name-was"},{match:"#PhrasalVerb #Particle #Preposition [#PresentTense]",group:0,tag:"Noun",reason:"given-up-on-x"},{match:"there (are|were) #Adjective? [#PresentTense]",group:0,tag:"Plural",reason:"there-are"},{match:"#Value [#PresentTense] of",group:0,notIf:"(one|1|#Copula|#Infinitive)",tag:"Plural",reason:"2-trains"},{match:"[#PresentTense] (are|were) #Adjective",group:0,tag:"Plural",reason:"compromises-are-possible"},{match:"^[(hope|guess|thought|think)] #Pronoun #Verb",group:0,tag:"Infinitive",reason:"suppose-i"},{match:"#Possessive #Adjective [#Verb]",group:0,tag:"Noun",notIf:"#Copula",reason:"our-full-support"},{match:"[(tastes|smells)] #Adverb? #Adjective",group:0,tag:"PresentTense",reason:"tastes-good"},{match:"#Copula #Gerund [#PresentTense] !by?",group:0,tag:"Noun",notIf:"going",reason:"ignoring-commute"},{match:"#Determiner #Adjective? [(shed|thought|rose|bid|saw|spelt)]",group:0,tag:"Noun",reason:"noun-past"},{match:"how to [%Noun|Verb%]",group:0,tag:"Infinitive",reason:"how-to-noun"},{match:"which [%Noun|Verb%] #Noun",group:0,tag:"Infinitive",reason:"which-boost-it"},{match:"#Gerund [%Plural|Verb%]",group:0,tag:"Plural",reason:"asking-questions"},{match:"(ready|available|difficult|hard|easy|made|attempt|try) to [%Noun|Verb%]",group:0,tag:"Infinitive",reason:"ready-to-noun"},{match:"(bring|went|go|drive|run|bike) to [%Noun|Verb%]",group:0,tag:"Noun",reason:"bring-to-noun"},{match:"#Modal #Noun [%Noun|Verb%]",group:0,tag:"Infinitive",reason:"would-you-look"},{match:"#Copula just [#Infinitive]",group:0,tag:"Noun",reason:"is-just-spam"},{match:"^%Noun|Verb% %Plural|Verb%",tag:"Imperative #Plural",reason:"request-copies"},{match:"#Adjective #Plural and [%Plural|Verb%]",group:0,tag:"#Plural",reason:"pickles-and-drinks"},{match:"#Determiner #Year [#Verb]",group:0,tag:"Noun",reason:"the-1968-film"},{match:"#Determiner [#PhrasalVerb #Particle]",group:0,tag:"Noun",reason:"the-break-up"},{match:"#Determiner [%Adj|Noun%] #Noun",group:0,tag:"Adjective",notIf:"(#Pronoun|#Possessive|#ProperNoun)",reason:"the-individual-goals"},{match:"[%Noun|Verb%] or #Infinitive",group:0,tag:"Infinitive",reason:"work-or-prepare"},{match:"to #Infinitive [#PresentTense]",group:0,tag:"Noun",notIf:"(#Gerund|#Copula|help)",reason:"to-give-thanks"},{match:"[#Noun] me",group:0,tag:"Verb",reason:"kills-me"},{match:"%Plural|Verb% %Plural|Verb%",tag:"#PresentTense #Plural",reason:"removes-wrinkles"}];var bL=[{match:"#Money and #Money #Currency?",tag:"Money",reason:"money-and-money"},{match:"#Value #Currency [and] #Value (cents|ore|centavos|sens)",group:0,tag:"money",reason:"and-5-cents"},{match:"#Value (mark|rand|won|rub|ore)",tag:"#Money #Currency",reason:"4-mark"},{match:"a pound",tag:"#Money #Unit",reason:"a-pound"},{match:"#Value (pound|pounds)",tag:"#Money #Unit",reason:"4-pounds"}];var vL=[{match:"[(half|quarter)] of? (a|an)",group:0,tag:"Fraction",reason:"millionth"},{match:"#Adverb [half]",group:0,tag:"Fraction",reason:"nearly-half"},{match:"[half] the",group:0,tag:"Fraction",reason:"half-the"},{match:"#Cardinal and a half",tag:"Fraction",reason:"and-a-half"},{match:"#Value (halves|halfs|quarters)",tag:"Fraction",reason:"two-halves"},{match:"a #Ordinal",tag:"Fraction",reason:"a-quarter"},{match:"[#Cardinal+] (#Fraction && /s$/)",tag:"Fraction",reason:"seven-fifths"},{match:"[#Cardinal+ #Ordinal] of .",group:0,tag:"Fraction",reason:"ordinal-of"},{match:"[(#NumericValue && #Ordinal)] of .",group:0,tag:"Fraction",reason:"num-ordinal-of"},{match:"(a|one) #Cardinal?+ #Ordinal",tag:"Fraction",reason:"a-ordinal"},{match:"#Cardinal+ out? of every? #Cardinal",tag:"Fraction",reason:"out-of"}];var wL=[{match:"#Cardinal [second]",tag:"Unit",reason:"one-second"},{match:"!once? [(a|an)] (#Duration|hundred|thousand|million|billion|trillion)",group:0,tag:"Value",reason:"a-is-one"},{match:"1 #Value #PhoneNumber",tag:"PhoneNumber",reason:"1-800-Value"},{match:"#NumericValue #PhoneNumber",tag:"PhoneNumber",reason:"(800) PhoneNumber"},{match:"#Demonym #Currency",tag:"Currency",reason:"demonym-currency"},{match:"#Value [(buck|bucks|grand)]",group:0,tag:"Currency",reason:"value-bucks"},{match:"[#Value+] #Currency",group:0,tag:"Money",reason:"15 usd"},{match:"[second] #Noun",group:0,tag:"Ordinal",reason:"second-noun"},{match:"#Value+ [#Currency]",group:0,tag:"Unit",reason:"5-yan"},{match:"#Value [(foot|feet)]",group:0,tag:"Unit",reason:"foot-unit"},{match:"#Value [#Abbreviation]",group:0,tag:"Unit",reason:"value-abbr"},{match:"#Value [k]",group:0,tag:"Unit",reason:"value-k"},{match:"#Unit an hour",tag:"Unit",reason:"unit-an-hour"},{match:"(minus|negative) #Value",tag:"Value",reason:"minus-value"},{match:"#Value (point|decimal) #Value",tag:"Value",reason:"value-point-value"},{match:"#Determiner [(half|quarter)] #Ordinal",group:0,tag:"Value",reason:"half-ordinal"},{match:"#Multiple+ and #Value",tag:"Value",reason:"magnitude-and-value"},{match:"#Value #Unit [(per|an) (hr|hour|sec|second|min|minute)]",group:0,tag:"Unit",reason:"12-miles-per-second"},{match:"#Value [(square|cubic)] #Unit",group:0,tag:"Unit",reason:"square-miles"}];var _L=[{match:"#Copula [(#Noun|#PresentTense)] #LastName",group:0,tag:"FirstName",reason:"copula-noun-lastname"},{match:"(sister|pope|brother|father|aunt|uncle|grandpa|grandfather|grandma) #ProperNoun",tag:"Person",reason:"lady-titlecase",safe:!0},{match:"#FirstName [#Determiner #Noun] #LastName",group:0,tag:"Person",reason:"first-noun-last"},{match:"#ProperNoun (b|c|d|e|f|g|h|j|k|l|m|n|o|p|q|r|s|t|u|v|w|x|y|z) #ProperNoun",tag:"Person",reason:"titlecase-acronym-titlecase",safe:!0},{match:"#Acronym #LastName",tag:"Person",reason:"acronym-lastname",safe:!0},{match:"#Person (jr|sr|md)",tag:"Person",reason:"person-honorific"},{match:"#Honorific #Acronym",tag:"Person",reason:"Honorific-TitleCase"},{match:"#Person #Person the? #RomanNumeral",tag:"Person",reason:"roman-numeral"},{match:"#FirstName [/^[^aiurck]$/]",group:0,tag:["Acronym","Person"],reason:"john-e"},{match:"#Noun van der? #Noun",tag:"Person",reason:"van der noun",safe:!0},{match:"(king|queen|prince|saint|lady) of #Noun",tag:"Person",reason:"king-of-noun",safe:!0},{match:"(prince|lady) #Place",tag:"Person",reason:"lady-place"},{match:"(king|queen|prince|saint) #ProperNoun",tag:"Person",notIf:"#Place",reason:"saint-foo"},{match:"al (#Person|#ProperNoun)",tag:"Person",reason:"al-borlen",safe:!0},{match:"#FirstName de #Noun",tag:"Person",reason:"bill-de-noun"},{match:"#FirstName (bin|al) #Noun",tag:"Person",reason:"bill-al-noun"},{match:"#FirstName #Acronym #ProperNoun",tag:"Person",reason:"bill-acronym-title"},{match:"#FirstName #FirstName #ProperNoun",tag:"Person",reason:"bill-firstname-title"},{match:"#Honorific #FirstName? #ProperNoun",tag:"Person",reason:"dr-john-Title"},{match:"#FirstName the #Adjective",tag:"Person",reason:"name-the-great"},{match:"#ProperNoun (van|al|bin) #ProperNoun",tag:"Person",reason:"title-van-title",safe:!0},{match:"#ProperNoun (de|du) la? #ProperNoun",tag:"Person",notIf:"#Place",reason:"title-de-title"},{match:"#Singular #Acronym #LastName",tag:"#FirstName #Person .",reason:"title-acro-noun",safe:!0},{match:"[#ProperNoun] #Person",group:0,tag:"Person",reason:"proper-person",safe:!0},{match:"#Person [#ProperNoun #ProperNoun]",group:0,tag:"Person",notIf:"#Possessive",reason:"three-name-person",safe:!0},{match:"#FirstName #Acronym? [#ProperNoun]",group:0,tag:"LastName",notIf:"#Possessive",reason:"firstname-titlecase"},{match:"#FirstName [#FirstName]",group:0,tag:"LastName",reason:"firstname-firstname"},{match:"#FirstName #Acronym #Noun",tag:"Person",reason:"n-acro-noun",safe:!0},{match:"#FirstName [(de|di|du|van|von)] #Person",group:0,tag:"LastName",reason:"de-firstname"},{match:"[(lieutenant|corporal|sergeant|captain|qeen|king|admiral|major|colonel|marshal|president|queen|king)+] #ProperNoun",group:0,tag:"Honorific",reason:"seargeant-john"},{match:"[(private|general|major|rear|prime|field|count|miss)] #Honorific? #Person",group:0,tag:["Honorific","Person"],reason:"ambg-honorifics"},{match:"#Honorific #FirstName [#Singular]",group:0,tag:"LastName",notIf:"#Possessive",reason:"dr-john-foo",safe:!0},{match:"[(his|her) (majesty|honour|worship|excellency|honorable)] #Person",group:0,tag:"Honorific",reason:"his-excellency"},{match:"#Honorific #Actor",tag:"Honorific",reason:"Lieutenant colonel"},{match:"(first|second|third|1st|2nd|3rd) #Actor",tag:"Honorific",reason:"first lady"},{match:"#Person #RomanNumeral",tag:"Person",reason:"louis-IV"}];var EL=[{match:"#FirstName #Noun$",tag:". #LastName",notIf:"(#Possessive|#Organization|#Place|#Pronoun|@hasTitleCase)",reason:"firstname-noun"},{match:"%Person|Date% #Acronym? #ProperNoun",tag:"Person",reason:"jan-thierson"},{match:"%Person|Noun% #Acronym? #ProperNoun",tag:"Person",reason:"switch-person",safe:!0},{match:"%Person|Noun% #Organization",tag:"Organization",reason:"olive-garden"},{match:"%Person|Verb% #Acronym? #ProperNoun",tag:"Person",reason:"verb-propernoun",ifNo:"#Actor"},{match:"[%Person|Verb%] (will|had|has|said|says|told|did|learned|wants|wanted)",group:0,tag:"Person",reason:"person-said"},{match:"[%Person|Place%] (harbor|harbour|pier|town|city|place|dump|landfill)",group:0,tag:"Place",reason:"sydney-harbour"},{match:"(west|east|north|south) [%Person|Place%]",group:0,tag:"Place",reason:"east-sydney"},{match:"#Modal [%Person|Verb%]",group:0,tag:"Verb",reason:"would-mark"},{match:"#Adverb [%Person|Verb%]",group:0,tag:"Verb",reason:"really-mark"},{match:"[%Person|Verb%] (#Adverb|#Comparative)",group:0,tag:"Verb",reason:"drew-closer"},{match:"%Person|Verb% #Person",tag:"Person",reason:"rob-smith"},{match:"%Person|Verb% #Acronym #ProperNoun",tag:"Person",reason:"rob-a-smith"},{match:"[will] #Verb",group:0,tag:"Modal",reason:"will-verb"},{match:"(will && @isTitleCase) #ProperNoun",tag:"Person",reason:"will-name"},{match:"(#FirstName && !#Possessive) [#Singular] #Verb",group:0,safe:!0,tag:"LastName",reason:"jack-layton"},{match:"^[#Singular] #Person #Verb",group:0,safe:!0,tag:"Person",reason:"sherwood-anderson"},{match:"(a|an) [#Person]$",group:0,unTag:"Person",reason:"a-warhol"}];var AL=[{match:"#Copula (pretty|dead|full|well|sure) (#Adjective|#Noun)",tag:"#Copula #Adverb #Adjective",reason:"sometimes-adverb"},{match:"(#Pronoun|#Person) (had|#Adverb)? [better] #PresentTense",group:0,tag:"Modal",reason:"i-better"},{match:"(#Modal|i|they|we|do) not? [like]",group:0,tag:"PresentTense",reason:"modal-like"},{match:"#Noun #Adverb? [left]",group:0,tag:"PastTense",reason:"left-verb"},{match:"will #Adverb? not? #Adverb? [be] #Gerund",group:0,tag:"Copula",reason:"will-be-copula"},{match:"will #Adverb? not? #Adverb? [be] #Adjective",group:0,tag:"Copula",reason:"be-copula"},{match:"[march] (up|down|back|toward)",notIf:"#Date",group:0,tag:"Infinitive",reason:"march-to"},{match:"#Modal [march]",group:0,tag:"Infinitive",reason:"must-march"},{match:"[may] be",group:0,tag:"Verb",reason:"may-be"},{match:"[(subject|subjects|subjected)] to",group:0,tag:"Verb",reason:"subject to"},{match:"[home] to",group:0,tag:"PresentTense",reason:"home to"},{match:"[open] #Determiner",group:0,tag:"Infinitive",reason:"open-the"},{match:"(were|was) being [#PresentTense]",group:0,tag:"PastTense",reason:"was-being"},{match:"(had|has|have) [been /en$/]",group:0,tag:"Auxiliary Participle",reason:"had-been-broken"},{match:"(had|has|have) [been /ed$/]",group:0,tag:"Auxiliary PastTense",reason:"had-been-smoked"},{match:"(had|has) #Adverb? [been] #Adverb? #PastTense",group:0,tag:"Auxiliary",reason:"had-been-adj"},{match:"(had|has) to [#Noun] (#Determiner|#Possessive)",group:0,tag:"Infinitive",reason:"had-to-noun"},{match:"have [#PresentTense]",group:0,tag:"PastTense",notIf:"(come|gotten)",reason:"have-read"},{match:"(does|will|#Modal) that [work]",group:0,tag:"PastTense",reason:"does-that-work"},{match:"[(sound|sounds)] #Adjective",group:0,tag:"PresentTense",reason:"sounds-fun"},{match:"[(look|looks)] #Adjective",group:0,tag:"PresentTense",reason:"looks-good"},{match:"[(start|starts|stop|stops|begin|begins)] #Gerund",group:0,tag:"Verb",reason:"starts-thinking"},{match:"(have|had) read",tag:"Modal #PastTense",reason:"read-read"},{match:"(is|was|were) [(under|over) #PastTense]",group:0,tag:"Adverb Adjective",reason:"was-under-cooked"},{match:"[shit] (#Determiner|#Possessive|them)",group:0,tag:"Verb",reason:"swear1-verb"},{match:"[damn] (#Determiner|#Possessive|them)",group:0,tag:"Verb",reason:"swear2-verb"},{match:"[fuck] (#Determiner|#Possessive|them)",group:0,tag:"Verb",reason:"swear3-verb"},{match:"#Plural that %Noun|Verb%",tag:". #Preposition #Infinitive",reason:"jobs-that-work"},{match:"[works] for me",group:0,tag:"PresentTense",reason:"works-for-me"},{match:"as #Pronoun [please]",group:0,tag:"Infinitive",reason:"as-we-please"},{match:"[(co|mis|de|inter|intra|pre|re|un|out|under|over|counter)] #Verb",group:0,tag:["Verb","Prefix"],notIf:"(#Copula|#PhrasalVerb)",reason:"co-write"},{match:"#PastTense and [%Adj|Past%]",group:0,tag:"PastTense",reason:"dressed-and-left"},{match:"[%Adj|Past%] and #PastTense",group:0,tag:"PastTense",reason:"dressed-and-left"},{match:"#Copula #Pronoun [%Adj|Past%]",group:0,tag:"Adjective",reason:"is-he-stoked"},{match:"to [%Noun|Verb%] #Preposition",group:0,tag:"Infinitive",reason:"to-dream-of"}];var CL=[{match:"will (#Adverb|not)+? [have] (#Adverb|not)+? #Verb",group:0,tag:"Auxiliary",reason:"will-have-vb"},{match:"[#Copula] (#Adverb|not)+? (#Gerund|#PastTense)",group:0,tag:"Auxiliary",reason:"copula-walking"},{match:"[(#Modal|did)+] (#Adverb|not)+? #Verb",group:0,tag:"Auxiliary",reason:"modal-verb"},{match:"#Modal (#Adverb|not)+? [have] (#Adverb|not)+? [had] (#Adverb|not)+? #Verb",group:0,tag:"Auxiliary",reason:"would-have"},{match:"[(has|had)] (#Adverb|not)+? #PastTense",group:0,tag:"Auxiliary",reason:"had-walked"},{match:"[(do|does|did|will|have|had|has|got)] (not|#Adverb)+? #Verb",group:0,tag:"Auxiliary",reason:"have-had"},{match:"[about to] #Adverb? #Verb",group:0,tag:["Auxiliary","Verb"],reason:"about-to"},{match:"#Modal (#Adverb|not)+? [be] (#Adverb|not)+? #Verb",group:0,tag:"Auxiliary",reason:"would-be"},{match:"[(#Modal|had|has)] (#Adverb|not)+? [been] (#Adverb|not)+? #Verb",group:0,tag:"Auxiliary",reason:"had-been"},{match:"[(be|being|been)] #Participle",group:0,tag:"Auxiliary",reason:"being-driven"},{match:"[may] #Adverb? #Infinitive",group:0,tag:"Auxiliary",reason:"may-want"},{match:"#Copula (#Adverb|not)+? [(be|being|been)] #Adverb+? #PastTense",group:0,tag:"Auxiliary",reason:"being-walked"},{match:"will [be] #PastTense",group:0,tag:"Auxiliary",reason:"will-be-x"},{match:"[(be|been)] (#Adverb|not)+? #Gerund",group:0,tag:"Auxiliary",reason:"been-walking"},{match:"[used to] #PresentTense",group:0,tag:"Auxiliary",reason:"used-to-walk"},{match:"#Copula (#Adverb|not)+? [going to] #Adverb+? #PresentTense",group:0,tag:"Auxiliary",reason:"going-to-walk"},{match:"#Imperative [(me|him|her)]",group:0,tag:"Reflexive",reason:"tell-him"},{match:"(is|was) #Adverb? [no]",group:0,tag:"Negative",reason:"is-no"},{match:"[(been|had|became|came)] #PastTense",group:0,notIf:"#PhrasalVerb",tag:"Auxiliary",reason:"been-told"},{match:"[(being|having|getting)] #Verb",group:0,tag:"Auxiliary",reason:"being-born"},{match:"[be] #Gerund",group:0,tag:"Auxiliary",reason:"be-walking"},{match:"[better] #PresentTense",group:0,tag:"Modal",notIf:"(#Copula|#Gerund)",reason:"better-go"},{match:"even better",tag:"Adverb #Comparative",reason:"even-better"}];var TL=[{match:"(#Verb && @hasHyphen) up",tag:"PhrasalVerb",reason:"foo-up"},{match:"(#Verb && @hasHyphen) off",tag:"PhrasalVerb",reason:"foo-off"},{match:"(#Verb && @hasHyphen) over",tag:"PhrasalVerb",reason:"foo-over"},{match:"(#Verb && @hasHyphen) out",tag:"PhrasalVerb",reason:"foo-out"},{match:"[#Verb (in|out|up|down|off|back)] (on|in)",notIf:"#Copula",tag:"PhrasalVerb Particle",reason:"walk-in-on"},{match:"(lived|went|crept|go) [on] for",group:0,tag:"PhrasalVerb",reason:"went-on"},{match:"#Verb (up|down|in|on|for)$",tag:"PhrasalVerb #Particle",notIf:"#PhrasalVerb",reason:"come-down$"},{match:"help [(stop|end|make|start)]",group:0,tag:"Infinitive",reason:"help-stop"},{match:"#PhrasalVerb (in && #Particle) #Determiner",tag:"#Verb #Preposition #Determiner",unTag:"PhrasalVerb",reason:"work-in-the"},{match:"[(stop|start|finish|help)] #Gerund",group:0,tag:"Infinitive",reason:"start-listening"},{match:"#Verb (him|her|it|us|himself|herself|itself|everything|something) [(up|down)]",group:0,tag:"Adverb",reason:"phrasal-pronoun-advb"}];var aE="(i|we|they)",SL=[{match:"^do not? [#Infinitive #Particle?]",notIf:aE,group:0,tag:"Imperative",reason:"do-eat"},{match:"^please do? not? [#Infinitive #Particle?]",group:0,tag:"Imperative",reason:"please-go"},{match:"^just do? not? [#Infinitive #Particle?]",group:0,tag:"Imperative",reason:"just-go"},{match:"^[#Infinitive] it #Comparative",notIf:aE,group:0,tag:"Imperative",reason:"do-it-better"},{match:"^[#Infinitive] it (please|now|again|plz)",notIf:aE,group:0,tag:"Imperative",reason:"do-it-please"},{match:"^[#Infinitive] (#Adjective|#Adverb)$",group:0,tag:"Imperative",notIf:"(so|such|rather|enough)",reason:"go-quickly"},{match:"^[#Infinitive] (up|down|over) #Determiner",group:0,tag:"Imperative",reason:"turn-down"},{match:"^[#Infinitive] (your|my|the|a|an|any|each|every|some|more|with|on)",group:0,notIf:"like",tag:"Imperative",reason:"eat-my-shorts"},{match:"^[#Infinitive] (him|her|it|us|me|there)",group:0,tag:"Imperative",reason:"tell-him"},{match:"^[#Infinitive] #Adjective #Noun$",group:0,tag:"Imperative",reason:"avoid-loud-noises"},{match:"^[#Infinitive] (#Adjective|#Adverb)? and #Infinitive",group:0,tag:"Imperative",reason:"call-and-reserve"},{match:"^(go|stop|wait|hurry) please?$",tag:"Imperative",reason:"go"},{match:"^(somebody|everybody) [#Infinitive]",group:0,tag:"Imperative",reason:"somebody-call"},{match:"^let (us|me) [#Infinitive]",group:0,tag:"Imperative",reason:"lets-leave"},{match:"^[(shut|close|open|start|stop|end|keep)] #Determiner #Noun",group:0,tag:"Imperative",reason:"shut-the-door"},{match:"^[#PhrasalVerb #Particle] #Determiner #Noun",group:0,tag:"Imperative",reason:"turn-off-the-light"},{match:"^[go] to .",group:0,tag:"Imperative",reason:"go-to-toronto"},{match:"^#Modal you [#Infinitive]",group:0,tag:"Imperative",reason:"would-you-"},{match:"^never [#Infinitive]",group:0,tag:"Imperative",reason:"never-stop"},{match:"^come #Infinitive",tag:"Imperative",notIf:"on",reason:"come-have"},{match:"^come and? #Infinitive",tag:"Imperative . Imperative",notIf:"#PhrasalVerb",reason:"come-and-have"},{match:"^stay (out|away|back)",tag:"Imperative",reason:"stay-away"},{match:"^[(stay|be|keep)] #Adjective",group:0,tag:"Imperative",reason:"stay-cool"},{match:"^[keep it] #Adjective",group:0,tag:"Imperative",reason:"keep-it-cool"},{match:"^do not [#Infinitive]",group:0,tag:"Imperative",reason:"do-not-be"},{match:"[#Infinitive] (yourself|yourselves)",group:0,tag:"Imperative",reason:"allow-yourself"},{match:"[#Infinitive] what .",group:0,tag:"Imperative",reason:"look-what"},{match:"^[#Infinitive] #Gerund",group:0,tag:"Imperative",reason:"keep-playing"},{match:"^[#Infinitive] (to|for|into|toward|here|there)",group:0,tag:"Imperative",reason:"go-to"},{match:"^[#Infinitive] (and|or) #Infinitive",group:0,tag:"Imperative",reason:"inf-and-inf"},{match:"^[%Noun|Verb%] to",group:0,tag:"Imperative",reason:"commit-to"},{match:"^[#Infinitive] #Adjective? #Singular #Singular",group:0,tag:"Imperative",reason:"maintain-eye-contact"},{match:"do not (forget|omit|neglect) to [#Infinitive]",group:0,tag:"Imperative",reason:"do-not-forget"},{match:"^[(ask|wear|pay|look|help|show|watch|act|fix|kill|stop|start|turn|try|win)] #Noun",group:0,tag:"Imperative",reason:"pay-attention"}];var PL=[{match:"(that|which) were [%Adj|Gerund%]",group:0,tag:"Gerund",reason:"that-were-growing"},{match:"#Gerund [#Gerund] #Plural",group:0,tag:"Adjective",reason:"hard-working-fam"}];var IL=[{match:"(got|were|was|is|are|am) (#PastTense|#Participle)",tag:"Passive",reason:"got-walked"},{match:"(was|were|is|are|am) being (#PastTense|#Participle)",tag:"Passive",reason:"was-being"},{match:"(had|have|has) been (#PastTense|#Participle)",tag:"Passive",reason:"had-been"},{match:"will be being? (#PastTense|#Participle)",tag:"Passive",reason:"will-be-cleaned"},{match:"#Noun [(#PastTense|#Participle)] by (the|a) #Noun",group:0,tag:"Passive",reason:"suffered-by"}];var Moe=[{match:"u r",tag:"#Pronoun #Copula",reason:"u r"},{match:"#Noun [(who|whom)]",group:0,tag:"Determiner",reason:"captain-who"},{match:"[had] #Noun+ #PastTense",group:0,tag:"Condition",reason:"had-he"},{match:"[were] #Noun+ to #Infinitive",group:0,tag:"Condition",reason:"were-he"},{match:"some sort of",tag:"Adjective Noun Conjunction",reason:"some-sort-of"},{match:"of some sort",tag:"Conjunction Adjective Noun",reason:"of-some-sort"},{match:"[such] (a|an|is)? #Noun",group:0,tag:"Determiner",reason:"such-skill"},{match:"[right] (before|after|in|into|to|toward)",group:0,tag:"#Adverb",reason:"right-into"},{match:"#Preposition [about]",group:0,tag:"Adjective",reason:"at-about"},{match:"(are|#Modal|see|do|for) [ya]",group:0,tag:"Pronoun",reason:"are-ya"},{match:"[long live] .",group:0,tag:"#Adjective #Infinitive",reason:"long-live"},{match:"[plenty] of",group:0,tag:"#Uncountable",reason:"plenty-of"},{match:"(always|nearly|barely|practically) [there]",group:0,tag:"Adjective",reason:"always-there"},{match:"[there] (#Adverb|#Pronoun)? #Copula",group:0,tag:"There",reason:"there-is"},{match:"#Copula [there] .",group:0,tag:"There",reason:"is-there"},{match:"#Modal #Adverb? [there]",group:0,tag:"There",reason:"should-there"},{match:"^[do] (you|we|they)",group:0,tag:"QuestionWord",reason:"do-you"},{match:"^[does] (he|she|it|#ProperNoun)",group:0,tag:"QuestionWord",reason:"does-he"},{match:"#Determiner #Noun+ [who] #Verb",group:0,tag:"Preposition",reason:"the-x-who"},{match:"#Determiner #Noun+ [which] #Verb",group:0,tag:"Preposition",reason:"the-x-which"},{match:"a [while]",group:0,tag:"Noun",reason:"a-while"},{match:"guess who",tag:"#Infinitive #QuestionWord",reason:"guess-who"},{match:"[fucking] !#Verb",group:0,tag:"#Gerund",reason:"f-as-gerund"}],xL=Moe;var kL=[{match:"university of #Place",tag:"Organization",reason:"university-of-Foo"},{match:"#Noun (&|n) #Noun",tag:"Organization",reason:"Noun-&-Noun"},{match:"#Organization of the? #ProperNoun",tag:"Organization",reason:"org-of-place",safe:!0},{match:"#Organization #Country",tag:"Organization",reason:"org-country"},{match:"#ProperNoun #Organization",tag:"Organization",notIf:"#FirstName",reason:"titlecase-org"},{match:"#ProperNoun (ltd|co|inc|dept|assn|bros)",tag:"Organization",reason:"org-abbrv"},{match:"the [#Acronym]",group:0,tag:"Organization",reason:"the-acronym",safe:!0},{match:"government of the? [#Place+]",tag:"Organization",reason:"government-of-x"},{match:"(health|school|commerce) board",tag:"Organization",reason:"school-board"},{match:"(nominating|special|conference|executive|steering|central|congressional) committee",tag:"Organization",reason:"special-comittee"},{match:"(world|global|international|national|#Demonym) #Organization",tag:"Organization",reason:"global-org"},{match:"#Noun+ (public|private) school",tag:"School",reason:"noun-public-school"},{match:"#Place+ #SportsTeam",tag:"SportsTeam",reason:"place-sportsteam"},{match:"(dc|atlanta|minnesota|manchester|newcastle|sheffield) united",tag:"SportsTeam",reason:"united-sportsteam"},{match:"#Place+ fc",tag:"SportsTeam",reason:"fc-sportsteam"},{match:"#Place+ #Noun{0,2} (club|society|group|team|committee|commission|association|guild|crew)",tag:"Organization",reason:"place-noun-society"}];var RL=[{match:"(west|north|south|east|western|northern|southern|eastern)+ #Place",tag:"Region",reason:"west-norfolk"},{match:"#City [(al|ak|az|ar|ca|ct|dc|fl|ga|id|il|nv|nh|nj|ny|oh|pa|sc|tn|tx|ut|vt|pr)]",group:0,tag:"Region",reason:"us-state"},{match:"portland [or]",group:0,tag:"Region",reason:"portland-or"},{match:"#ProperNoun+ (cliff|place|range|pit|place|point|room|grounds|ruins)",tag:"Place",reason:"foo-point"},{match:"in [#ProperNoun] #Place",group:0,tag:"Place",reason:"propernoun-place"},{match:"#Value #Noun (st|street|rd|road|crescent|cr|way|tr|terrace|avenue|ave)",tag:"Address",reason:"address-st"},{match:"(port|mount|mt) #ProperName",tag:"Place",reason:"port-name"}];var NL=[{match:"[so] #Noun",group:0,tag:"Conjunction",reason:"so-conj"},{match:"[(who|what|where|why|how|when)] #Noun #Copula #Adverb? (#Verb|#Adjective)",group:0,tag:"Conjunction",reason:"how-he-is-x"},{match:"#Copula [(who|what|where|why|how|when)] #Noun",group:0,tag:"Conjunction",reason:"when-he"},{match:"#Verb [that] #Pronoun",group:0,tag:"Conjunction",reason:"said-that-he"},{match:"#Noun [that] #Copula",group:0,tag:"Conjunction",reason:"that-are"},{match:"#Noun [that] #Verb #Adjective",group:0,tag:"Conjunction",reason:"that-seem"},{match:"#Noun #Copula not? [that] #Adjective",group:0,tag:"Adverb",reason:"that-adj"},{match:"#Verb #Adverb? #Noun [(that|which)]",group:0,tag:"Preposition",reason:"that-prep"},{match:"@hasComma [which] (#Pronoun|#Verb)",group:0,tag:"Preposition",reason:"which-copula"},{match:"#Noun [like] #Noun",group:0,tag:"Preposition",reason:"noun-like"},{match:"^[like] #Determiner",group:0,tag:"Preposition",reason:"like-the"},{match:"a #Noun [like] (#Noun|#Determiner)",group:0,tag:"Preposition",reason:"a-noun-like"},{match:"#Adverb [like]",group:0,tag:"Verb",reason:"really-like"},{match:"(not|nothing|never) [like]",group:0,tag:"Preposition",reason:"nothing-like"},{match:"#Infinitive #Pronoun [like]",group:0,tag:"Preposition",reason:"treat-them-like"},{match:"[#QuestionWord] (#Pronoun|#Determiner)",group:0,tag:"Preposition",reason:"how-he"},{match:"[#QuestionWord] #Participle",group:0,tag:"Preposition",reason:"when-stolen"},{match:"[how] (#Determiner|#Copula|#Modal|#PastTense)",group:0,tag:"QuestionWord",reason:"how-is"},{match:"#Plural [(who|which|when)] .",group:0,tag:"Preposition",reason:"people-who"}];var OL=[{match:"holy (shit|fuck|hell)",tag:"Expression",reason:"swears-expression"},{match:"^[(well|so|okay|now)] !#Adjective?",group:0,tag:"Expression",reason:"well-"},{match:"^come on",tag:"Expression",reason:"come-on"},{match:"(say|says|said) [sorry]",group:0,tag:"Expression",reason:"say-sorry"},{match:"^(ok|alright|shoot|hell|anyways)",tag:"Expression",reason:"ok-"},{match:"^(say && @hasComma)",tag:"Expression",reason:"say-"},{match:"^(like && @hasComma)",tag:"Expression",reason:"like-"},{match:"^[(dude|man|girl)] #Pronoun",group:0,tag:"Expression",reason:"dude-i"}];var Foe=[].concat(IL,sL,lL,uL,cL,dL,pL,hL,mL,gL,yL,bL,vL,wL,_L,EL,AL,fL,CL,TL,SL,PL,xL,kL,RL,NL,OL),DL={two:{matches:Foe}};var lE=null,Loe=function(t){let{world:e}=t,{model:n,methods:r}=e;lE=lE||r.one.buildNet(n.two.matches,e);let i=r.two.quickSplit(t.document).map(a=>{let l=a[0];return[l.index[0],l.index[1],l.index[1]+a.length]}),s=t.update(i);return s.cache(),s.sweep(lE),t.uncache(),t.unfreeze(),t},Uoe=t=>t.compute(["freeze","lexicon","preTagger","postTagger","unfreeze"]),ML={postTagger:Loe,tagger:Uoe};var Boe=t=>Math.round(t*100)/100;function FL(t){t.prototype.confidence=function(){let e=0,n=0;return this.docs.forEach(r=>{r.forEach(o=>{n+=1,e+=o.confidence||1})}),n===0?1:Boe(e/n)},t.prototype.tagger=function(){return this.compute(["tagger"])}}var Goe={api:FL,compute:ML,model:DL,hooks:["postTagger"]},LL=Goe;var Hoe=function(t){return Object.keys(t.hooks).filter(e=>!e.startsWith("#")&&!e.startsWith("%"))},qoe=function(t,e){let n=Hoe(e);if(n.length===0)return t;t._cache||t.cache();let r=t._cache;return t.filter((o,i)=>n.some(s=>r[i].has(s)))},UL=qoe;var $oe=function(t,e){let n=e;typeof e=="string"&&(n=this.buildNet([{match:e}]));let r=this.tokenize(t),o=UL(r,n);return o.found?(o.compute(["index","tagger"]),o.match(e)):r.none()},BL=$oe;var GL={lib:{lazy:BL}};var Voe=function(t,e){let n=t.methods.two.transform.verb.conjugate,r=n(e,t.model);return t.has("#Gerund")?r.Gerund:t.has("#PastTense")?r.PastTense:t.has("#PresentTense")?r.PresentTense:t.has("#Gerund")?r.Gerund:e},joe=function(t,e){let n=e;return t.forEach(r=>{r.has("#Infinitive")||(n=Voe(r,e)),r.replaceWith(n)}),t},HL=joe;var Woe=function(t,e){let n=e;if(t.has("#Plural")){let r=t.methods.two.transform.noun.toPlural;n=r(e,t.model)}t.replaceWith(n,{possessives:!0})},zoe=function(t,e){let{toAdverb:n}=t.methods.two.transform.adjective,o=n(e);o&&t.replaceWith(o)},Joe=function(t,e){let{toComparative:n,toSuperlative:r}=t.methods.two.transform.adjective,o=e;t.has("#Comparative")?o=n(o,t.model):t.has("#Superlative")&&(o=r(o,t.model)),o&&t.replaceWith(o)},Koe=function(t,e,n){let r=t.split(/ /g).map(i=>i.toLowerCase().trim());r=r.filter(i=>i),r=r.map(i=>`{${i}}`).join(" ");let o=this.match(r);return n&&(o=o.if(n)),o.has("#Verb")?HL(o,e):o.has("#Noun")?Woe(o,e):o.has("#Adverb")?zoe(o,e):o.has("#Adjective")?Joe(o,e):this},qL=Koe;var Yoe=function(t){t.prototype.swap=qL},$L={api:Yoe};Xo.plugin(J2);Xo.plugin(iL);Xo.plugin(LL);Xo.plugin(GL);Xo.plugin($L);var vn=Xo;var xu=function(t){let{fromComparative:e,fromSuperlative:n}=t.methods.two.transform.adjective,r=t.text("normal");return t.has("#Comparative")?e(r,t.model):t.has("#Superlative")?n(r,t.model):r},Xoe=function(t){class e extends t{constructor(r,o,i){super(r,o,i),this.viewType="Adjectives"}json(r={}){let{toAdverb:o,toNoun:i,toSuperlative:s,toComparative:a}=this.methods.two.transform.adjective;return r.normal=!0,this.map(l=>{let u=l.toView().json(r)[0]||{},f=xu(l);return u.adjective={adverb:o(f,this.model),noun:i(f,this.model),superlative:s(f,this.model),comparative:a(f,this.model)},u},[])}adverbs(){return this.before("#Adverb+$").concat(this.after("^#Adverb+"))}conjugate(r){let{toComparative:o,toSuperlative:i,toNoun:s,toAdverb:a}=this.methods.two.transform.adjective;return this.getNth(r).map(l=>{let u=xu(l);return{Adjective:u,Comparative:o(u,this.model),Superlative:i(u,this.model),Noun:s(u,this.model),Adverb:a(u,this.model)}},[])}toComparative(r){let{toComparative:o}=this.methods.two.transform.adjective;return this.getNth(r).map(i=>{let s=xu(i),a=o(s,this.model);return i.replaceWith(a)})}toSuperlative(r){let{toSuperlative:o}=this.methods.two.transform.adjective;return this.getNth(r).map(i=>{let s=xu(i),a=o(s,this.model);return i.replaceWith(a)})}toAdverb(r){let{toAdverb:o}=this.methods.two.transform.adjective;return this.getNth(r).map(i=>{let s=xu(i),a=o(s,this.model);return i.replaceWith(a)})}toNoun(r){let{toNoun:o}=this.methods.two.transform.adjective;return this.getNth(r).map(i=>{let s=xu(i),a=o(s,this.model);return i.replaceWith(a)})}}t.prototype.adjectives=function(n){let r=this.match("#Adjective");return r=r.getNth(n),new e(r.document,r.pointer)},t.prototype.superlatives=function(n){let r=this.match("#Superlative");return r=r.getNth(n),new e(r.document,r.pointer)},t.prototype.comparatives=function(n){let r=this.match("#Comparative");return r=r.getNth(n),new e(r.document,r.pointer)}},VL={api:Xoe};var Qoe=function(t){return t.compute("root").text("root")},Zoe=function(t){class e extends t{constructor(r,o,i){super(r,o,i),this.viewType="Adverbs"}conjugate(r){return this.getNth(r).map(o=>{let i=Qoe(o);return{Adverb:o.text("normal"),Adjective:i}},[])}json(r={}){let o=this.methods.two.transform.adjective.fromAdverb;return r.normal=!0,this.map(i=>{let s=i.toView().json(r)[0]||{};return s.adverb={adjective:o(s.normal)},s},[])}}t.prototype.adverbs=function(n){let r=this.match("#Adverb");return r=r.getNth(n),new e(r.document,r.pointer)}},jL={api:Zoe};var eie=function(t){let e=t.match("@hasComma");return e=e.filter(n=>{if(n.growLeft(".").wordCount()===1||n.growRight(". .").wordCount()===1)return!1;let r=n.grow(".");return r=r.ifNo("@hasComma @hasComma"),r=r.ifNo("@hasComma (and|or) ."),r=r.ifNo("(#City && @hasComma) #Country"),r=r.ifNo("(#WeekDay && @hasComma) #Date"),r=r.ifNo("(#Date+ && @hasComma) #Value"),r=r.ifNo("(#Adjective && @hasComma) #Adjective"),r.found}),t.splitAfter(e)},tie=function(t){let e=t.parentheses();return e=e.filter(n=>n.wordCount()>=3&&n.has("#Verb")&&n.has("#Noun")),t.splitOn(e)},nie=function(t){let e=t.quotations();return e=e.filter(n=>n.wordCount()>=3&&n.has("#Verb")&&n.has("#Noun")),t.splitOn(e)},rie=function(t){let e=this;e=tie(e),e=nie(e),e=eie(e),e=e.splitAfter("(@hasEllipses|@hasSemicolon|@hasDash|@hasColon)"),e=e.splitAfter("^#Pronoun (said|says)"),e=e.splitBefore("(said|says) #ProperNoun$"),e=e.splitBefore(". . if .{4}"),e=e.splitBefore("and while"),e=e.splitBefore("now that"),e=e.splitBefore("ever since"),e=e.splitBefore("(supposing|although)"),e=e.splitBefore("even (while|if|though)"),e=e.splitBefore("(whereas|whose)"),e=e.splitBefore("as (though|if)"),e=e.splitBefore("(til|until)");let n=e.match("#Verb .* [but] .* #Verb",0);n.found&&(e=e.splitBefore(n));let r=e.if("if .{2,9} then .").match("then");return e=e.splitBefore(r),typeof t=="number"&&(e=e.get(t)),e},WL=rie;var oie=function(t){let e=[],n=null;return t.clauses().docs.forEach(i=>{i.forEach(s=>{!s.chunk||s.chunk!==n?(n=s.chunk,e.push([s.index[0],s.index[1],s.index[1]+1])):e[e.length-1][2]=s.index[1]+1}),n=null}),t.update(e)},zL=oie;var iie=function(t){class e extends t{constructor(r,o,i){super(r,o,i),this.viewType="Chunks"}isVerb(){return this.filter(r=>r.has("<Verb>"))}isNoun(){return this.filter(r=>r.has("<Noun>"))}isAdjective(){return this.filter(r=>r.has("<Adjective>"))}isPivot(){return this.filter(r=>r.has("<Pivot>"))}debug(){return this.toView().debug("chunks"),this}update(r){let o=new e(this.document,r);return o._cache=this._cache,o}}t.prototype.chunks=function(n){let r=zL(this);return r=r.getNth(n),new e(this.document,r.pointer)},t.prototype.clauses=WL},JL=iie;var KL={this:"Noun",then:"Pivot"},sie=function(t){for(let e=0;e<t.length;e+=1)for(let n=0;n<t[e].length;n+=1){let r=t[e][n];if(KL.hasOwnProperty(r.normal)===!0){r.chunk=KL[r.normal];continue}if(r.tags.has("Verb")){r.chunk="Verb";continue}if(r.tags.has("Noun")||r.tags.has("Determiner")){r.chunk="Noun";continue}if(r.tags.has("Value")){r.chunk="Noun";continue}if(r.tags.has("QuestionWord")){r.chunk="Pivot";continue}}},YL=sie;var aie=function(t){for(let e=0;e<t.length;e+=1)for(let n=0;n<t[e].length;n+=1){let r=t[e][n];if(r.chunk)continue;let o=t[e][n+1],i=t[e][n-1];if(r.tags.has("Adjective")){if(i&&i.tags.has("Copula")){r.chunk="Adjective";continue}if(i&&i.tags.has("Determiner")){r.chunk="Noun";continue}if(o&&o.tags.has("Noun")){r.chunk="Noun";continue}continue}if(r.tags.has("Adverb")||r.tags.has("Negative")){if(i&&i.tags.has("Adjective")){r.chunk="Adjective";continue}if(i&&i.tags.has("Verb")){r.chunk="Verb";continue}if(o&&o.tags.has("Adjective")){r.chunk="Adjective";continue}if(o&&o.tags.has("Verb")){r.chunk="Verb";continue}}}},XL=aie;var lie=[{match:"[that] #Determiner #Noun",group:0,chunk:"Pivot"},{match:"#PastTense [that]",group:0,chunk:"Pivot"},{match:"[so] #Determiner",group:0,chunk:"Pivot"},{match:"#Copula #Adverb+? [#Adjective]",group:0,chunk:"Adjective"},{match:"#Adjective and #Adjective",chunk:"Adjective"},{match:"#Adverb+ and #Adverb #Verb",chunk:"Verb"},{match:"#Gerund #Adjective$",chunk:"Verb"},{match:"#Gerund to #Verb",chunk:"Verb"},{match:"#PresentTense and #PresentTense",chunk:"Verb"},{match:"#Adverb #Negative",chunk:"Verb"},{match:"(want|wants|wanted) to #Infinitive",chunk:"Verb"},{match:"#Verb #Reflexive",chunk:"Verb"},{match:"#Verb [to] #Adverb? #Infinitive",group:0,chunk:"Verb"},{match:"[#Preposition] #Gerund",group:0,chunk:"Verb"},{match:"#Infinitive [that] <Noun>",group:0,chunk:"Verb"},{match:"#Noun of #Determiner? #Noun",chunk:"Noun"},{match:"#Value+ #Adverb? #Adjective",chunk:"Noun"},{match:"the [#Adjective] #Noun",chunk:"Noun"},{match:"#Singular in #Determiner? #Singular",chunk:"Noun"},{match:"#Plural [in] #Determiner? #Noun",group:0,chunk:"Pivot"},{match:"#Noun and #Determiner? #Noun",notIf:"(#Possessive|#Pronoun)",chunk:"Noun"}],uE=null,uie=function(t,e,n){let{methods:r}=n;uE=uE||r.one.buildNet(lie,n),t.sweep(uE)},QL=uie;var cE=function(t,e){if((typeof process=="undefined"||!process.env?self.env||{}:process.env).DEBUG_CHUNKS){let r=(t.normal+"'").padEnd(8);console.log(`  | '${r}  \u2192  \x1B[34m${e.padEnd(12)}\x1B[0m \x1B[2m -fallback- \x1B[0m`)}t.chunk=e},cie=function(t){for(let e=0;e<t.length;e+=1)for(let n=0;n<t[e].length;n+=1){let r=t[e][n];r.chunk===void 0&&(r.tags.has("Conjunction")||r.tags.has("Preposition")?cE(r,"Pivot"):r.tags.has("Adverb")?cE(r,"Verb"):r.chunk="Noun")}},ZL=cie;var fie=function(t){let e=[],n=null;t.forEach(r=>{for(let o=0;o<r.length;o+=1){let i=r[o];n&&i.chunk===n?e[e.length-1].terms.push(i):(e.push({chunk:i.chunk,terms:[i]}),n=i.chunk)}}),e.forEach(r=>{r.chunk==="Verb"&&(r.terms.find(i=>i.tags.has("Verb"))||r.terms.forEach(i=>i.chunk=null))})},eU=fie;var die=function(t){let{document:e,world:n}=t;YL(e),XL(e),QL(t,e,n),ZL(e,n),eU(e,n)},tU={chunks:die};var nU={compute:tU,api:JL,hooks:["chunks"]};var cg=/\./g,hie=function(t){class e extends t{constructor(r,o,i){super(r,o,i),this.viewType="Acronyms"}strip(){return this.docs.forEach(r=>{r.forEach(o=>{o.text=o.text.replace(cg,""),o.normal=o.normal.replace(cg,"")})}),this}addPeriods(){return this.docs.forEach(r=>{r.forEach(o=>{o.text=o.text.replace(cg,""),o.normal=o.normal.replace(cg,""),o.text=o.text.split("").join(".")+".",o.normal=o.normal.split("").join(".")+"."})}),this}}t.prototype.acronyms=function(n){let r=this.match("#Acronym");return r=r.getNth(n),new e(r.document,r.pointer)}},rU=hie;var oU=/\(/,iU=/\)/,pie=function(t,e){for(;e<t.length;e+=1)if(t[e].post&&iU.test(t[e].post)){let[,n]=t[e].index;return n=n||0,n}return null},sU=function(t){let e=[];return t.docs.forEach(n=>{let r=!1;for(let o=0;o<n.length;o+=1){let i=n[o];if(!r&&i.pre&&oU.test(i.pre)){let s=pie(n,o);if(s!==null){let[a,l]=n[o].index;e.push([a,l,s+1,n[o].id]),o=s}}}}),t.update(e)},aU=function(t){return t.docs.forEach(e=>{e[0].pre=e[0].pre.replace(oU,"");let n=e[e.length-1];n.post=n.post.replace(iU,"")}),t};var mie=function(t){class e extends t{constructor(r,o,i){super(r,o,i),this.viewType="Possessives"}strip(){return aU(this)}}t.prototype.parentheses=function(n){let r=sU(this);return r=r.getNth(n),new e(r.document,r.pointer)}},lU=mie;var uU=/'s$/,gie=function(t){let e=t.match("#Possessive+");return e.has("#Person")&&(e=e.growLeft("#Person+")),e.has("#Place")&&(e=e.growLeft("#Place+")),e.has("#Organization")&&(e=e.growLeft("#Organization+")),e},yie=function(t){class e extends t{constructor(r,o,i){super(r,o,i),this.viewType="Possessives"}strip(){return this.docs.forEach(r=>{r.forEach(o=>{o.text=o.text.replace(uU,""),o.normal=o.normal.replace(uU,"")})}),this}}t.prototype.possessives=function(n){let r=gie(this);return r=r.getNth(n),new e(r.document,r.pointer)}},cU=yie;var fg={'"':'"',"\uFF02":"\uFF02","'":"'","\u201C":"\u201D","\u2018":"\u2019","\u201F":"\u201D","\u201B":"\u2019","\u201E":"\u201D","\u2E42":"\u201D","\u201A":"\u2019","\xAB":"\xBB","\u2039":"\u203A","\u2035":"\u2032","\u2036":"\u2033","\u2037":"\u2034","\u301D":"\u301E","`":"\xB4","\u301F":"\u301E"},fE=RegExp("["+Object.keys(fg).join("")+"]"),bie=RegExp("["+Object.values(fg).join("")+"]"),vie=function(t,e){let n=t[e].pre.match(fE)[0]||"";if(!n||!fg[n])return null;let r=fg[n];for(;e<t.length;e+=1)if(t[e].post&&t[e].post.match(r))return e;return null},fU=function(t){let e=[];return t.docs.forEach(n=>{let r=!1;for(let o=0;o<n.length;o+=1){let i=n[o];if(!r&&i.pre&&fE.test(i.pre)){let s=vie(n,o);if(s!==null){let[a,l]=n[o].index;e.push([a,l,s+1,n[o].id]),o=s}}}}),t.update(e)},dU=function(t){t.docs.forEach(e=>{e[0].pre=e[0].pre.replace(fE,"");let n=e[e.length-1];n.post=n.post.replace(bie,"")})};var wie=function(t){class e extends t{constructor(r,o,i){super(r,o,i),this.viewType="Possessives"}strip(){return dU(this)}}t.prototype.quotations=function(n){let r=fU(this);return r=r.getNth(n),new e(r.document,r.pointer)}},hU=wie;var _ie=function(t){let e=this.splitAfter("@hasComma");return e=e.match("#PhoneNumber+"),e=e.getNth(t),e},Eie=[["hyphenated","@hasHyphen ."],["hashTags","#HashTag"],["emails","#Email"],["emoji","#Emoji"],["emoticons","#Emoticon"],["atMentions","#AtMention"],["urls","#Url"],["conjunctions","#Conjunction"],["prepositions","#Preposition"],["abbreviations","#Abbreviation"],["honorifics","#Honorific"]],Aie=[["emojis","emoji"],["atmentions","atMentions"]],Cie=function(t){Eie.forEach(e=>{t.prototype[e[0]]=function(n){let r=this.match(e[1]);return typeof n=="number"?r.get(n):r}}),t.prototype.phoneNumbers=_ie,Aie.forEach(e=>{t.prototype[e[0]]=t.prototype[e[1]]})},pU=Cie;var Tie=/\//,Sie=function(t){class e extends t{constructor(r,o,i){super(r,o,i),this.viewType="Slashes"}split(){return this.map(r=>{let i=r.text().split(Tie);return r=r.replaceWith(i.join(" ")),r.growRight("("+i.join("|")+")+")})}}t.prototype.slashes=function(n){let r=this.match("#SlashedTerm");return r=r.getNth(n),new e(r.document,r.pointer)}},mU=Sie;var gU={api:function(t){rU(t),lU(t),cU(t),hU(t),pU(t),mU(t)}};var dg=function(t,e){t.docs.forEach(n=>{n.forEach(e)})},dE={case:t=>{dg(t,e=>{e.text=e.text.toLowerCase()})},unicode:t=>{let e=t.world,n=e.methods.one.killUnicode;dg(t,r=>r.text=n(r.text,e))},whitespace:t=>{dg(t,e=>{e.post=e.post.replace(/\s+/g," "),e.post=e.post.replace(/\s([.,?!:;])/g,"$1"),e.pre=e.pre.replace(/\s+/g,"")})},punctuation:t=>{dg(t,r=>{r.post=r.post.replace(/[-]/g," "),r.post=r.post.replace(/[,:;]/g,""),r.post=r.post.replace(/\.{2,}/g,""),r.post=r.post.replace(/\?{2,}/g,"?"),r.post=r.post.replace(/!{2,}/g,"!"),r.post=r.post.replace(/\?!+/g,"?")});let e=t.docs,n=e[e.length-1];if(n&&n.length>0){let r=n[n.length-1];r.post=r.post.replace(/ /g,"")}},contractions:t=>{t.contractions().expand()},acronyms:t=>{t.acronyms().strip()},parentheses:t=>{t.parentheses().strip()},possessives:t=>{t.possessives().strip()},quotations:t=>{t.quotations().strip()},emoji:t=>{t.emojis().remove()},honorifics:t=>{t.match("#Honorific+ #Person").honorifics().remove()},adverbs:t=>{t.adverbs().remove()},nouns:t=>{t.nouns().toSingular()},verbs:t=>{t.verbs().toInfinitive()},numbers:t=>{t.numbers().toNumber()},debullet:t=>{let e=/^\s*([-*])\s*$/;return t.docs.forEach(n=>{e.test(n[0].pre)&&(n[0].pre=n[0].pre.replace(e,""))}),t}};var hE=t=>t.split("|").reduce((e,n)=>(e[n]=!0,e),{}),pE="unicode|punctuation|whitespace|acronyms",yU="|case|contractions|parentheses|quotations|emoji|honorifics|debullet",Pie="|possessives|adverbs|nouns|verbs",Iie={light:hE(pE),medium:hE(pE+yU),heavy:hE(pE+yU+Pie)};function bU(t){t.prototype.normalize=function(e="light"){return typeof e=="string"&&(e=Iie[e]),Object.keys(e).forEach(n=>{dE.hasOwnProperty(n)&&dE[n](this,e[n])}),this}}var vU={api:bU};var xie=function(t){let e=t.clauses().match("<Noun>"),n=e.match("@hasComma");return n=n.not("#Place"),n.found&&(e=e.splitAfter(n)),e=e.splitOn("#Expression"),e=e.splitOn("(he|she|we|you|they|i)"),e=e.splitOn("(#Noun|#Adjective) [(he|him|she|it)]",0),e=e.splitOn("[(he|him|she|it)] (#Determiner|#Value)",0),e=e.splitBefore("#Noun [(the|a|an)] #Adjective? #Noun",0),e=e.splitOn("[(here|there)] #Noun",0),e=e.splitOn("[#Noun] (here|there)",0),e=e.splitBefore("(our|my|their|your)"),e=e.splitOn("#Noun [#Determiner]",0),e=e.if("#Noun"),e},wU=xie;var _U=["after","although","as if","as long as","as","because","before","even if","even though","ever since","if","in order that","provided that","since","so that","than","that","though","unless","until","what","whatever","when","whenever","where","whereas","wherever","whether","which","whichever","who","whoever","whom","whomever","whose"],kie=function(t){if(t.before("#Preposition$").found)return!0;if(!t.before().found)return!1;for(let n=0;n<_U.length;n+=1)if(t.has(_U[n]))return!0;return!1},EU=kie;var Rie="(#Pronoun|#Place|#Value|#Person|#Uncountable|#Month|#WeekDay|#Holiday|#Possessive)",Nie=function(t,e){if(t.has("#Plural")||t.has("#Noun and #Noun")||t.has("(we|they)"))return!0;if(e.has(Rie)===!0||t.has("#Singular"))return!1;let n=e.text("normal");return n.length>3&&n.endsWith("s")&&!n.endsWith("ss")},AU=Nie;var Oie=function(t){let e=t.clone();return e=e.match("#Noun+"),e=e.remove("(#Adjective|#Preposition|#Determiner|#Value)"),e=e.not("#Possessive"),e=e.first(),e.found?e:t},Die=function(t){let e=Oie(t);return{determiner:t.match("#Determiner").eq(0),adjectives:t.match("#Adjective"),number:t.values(),isPlural:AU(t,e),isSubordinate:EU(t),root:e}},po=Die;var CU=t=>t.text(),Mie=t=>t.json({terms:!1,normal:!0}).map(e=>e.normal),Fie=function(t){let e=null;if(!t.found)return e;let n=t.values(0);return n.found?(n.parse()[0]||{}).num:e},Lie=function(t){let e=po(t);return{root:CU(e.root),number:Fie(e.number),determiner:CU(e.determiner),adjectives:Mie(e.adjectives),isPlural:e.isPlural,isSubordinate:e.isSubordinate}},TU=Lie;var Uie=function(t){return!t.has("^(#Uncountable|#ProperNoun|#Place|#Pronoun|#Acronym)+$")},hg=Uie;var Bie={tags:!0},Gie=function(t,e){if(e.isPlural===!0||(e.root.has("#Possessive")&&(e.root=e.root.possessives().strip()),!hg(e.root)))return t;let{methods:n,model:r}=t.world,{toPlural:o}=n.two.transform.noun,i=e.root.text({keepPunct:!1}),s=o(i,r);t.match(e.root).replaceWith(s,Bie).tag("Plural","toPlural"),e.determiner.has("(a|an)")&&t.remove(e.determiner);let a=e.root.after("not? #Adverb+? [#Copula]",0);return a.found&&(a.has("is")?t.replace(a,"are"):a.has("was")&&t.replace(a,"were")),t},SU=Gie;var Hie={tags:!0},qie=function(t,e){if(e.isPlural===!1)return t;let{methods:n,model:r}=t.world,{toSingular:o}=n.two.transform.noun,i=e.root.text("normal"),s=o(i,r);return t.replace(e.root,s,Hie).tag("Singular","toPlural"),t},PU=qie;var $ie=function(t){class e extends t{constructor(r,o,i){super(r,o,i),this.viewType="Nouns"}parse(r){return this.getNth(r).map(po)}json(r){let o=typeof r=="object"?r:{};return this.getNth(r).map(i=>{let s=i.toView().json(o)[0]||{};return o&&o.noun!==!1&&(s.noun=TU(i)),s},[])}conjugate(r){let o=this.world.methods.two.transform.noun;return this.getNth(r).map(i=>{let s=po(i),a=s.root.compute("root").text("root"),l={Singular:a};return hg(s.root)&&(l.Plural=o.toPlural(a,this.model)),l.Singular===l.Plural&&delete l.Plural,l},[])}isPlural(r){return this.filter(i=>po(i).isPlural).getNth(r)}isSingular(r){return this.filter(i=>!po(i).isPlural).getNth(r)}adjectives(r){let o=this.update([]);return this.forEach(i=>{let s=po(i).adjectives;s.found&&(o=o.concat(s))}),o.getNth(r)}toPlural(r){return this.getNth(r).map(o=>SU(o,po(o)))}toSingular(r){return this.getNth(r).map(o=>{let i=po(o);return PU(o,i)})}update(r){let o=new e(this.document,r);return o._cache=this._cache,o}}t.prototype.nouns=function(n){let r=wU(this);return r=r.getNth(n),new e(this.document,r.pointer)}},IU=$ie;var xU={api:IU};var Vie=function(t,e){let n=t.match("#Fraction+");return n=n.filter(r=>!r.lookBehind("#Value and$").found),n=n.notIf("#Value seconds"),typeof e=="number"&&(n=n.eq(e)),n},kU=Vie;var jie=t=>{let e=[{reg:/^(minus|negative)[\s-]/i,mult:-1},{reg:/^(a\s)?half[\s-](of\s)?/i,mult:.5}];for(let n=0;n<e.length;n++)if(e[n].reg.test(t)===!0)return{amount:e[n].mult,str:t.replace(e[n].reg,"")};return{amount:1,str:t}},RU=jie;var ft={ones:{zeroth:0,first:1,second:2,third:3,fourth:4,fifth:5,sixth:6,seventh:7,eighth:8,ninth:9,zero:0,one:1,two:2,three:3,four:4,five:5,six:6,seven:7,eight:8,nine:9},teens:{tenth:10,eleventh:11,twelfth:12,thirteenth:13,fourteenth:14,fifteenth:15,sixteenth:16,seventeenth:17,eighteenth:18,nineteenth:19,ten:10,eleven:11,twelve:12,thirteen:13,fourteen:14,fifteen:15,sixteen:16,seventeen:17,eighteen:18,nineteen:19},tens:{twentieth:20,thirtieth:30,fortieth:40,fourtieth:40,fiftieth:50,sixtieth:60,seventieth:70,eightieth:80,ninetieth:90,twenty:20,thirty:30,forty:40,fourty:40,fifty:50,sixty:60,seventy:70,eighty:80,ninety:90},multiples:{hundredth:100,thousandth:1e3,millionth:1e6,billionth:1e9,trillionth:1e12,quadrillionth:1e15,quintillionth:1e18,sextillionth:1e21,septillionth:1e24,hundred:100,thousand:1e3,million:1e6,billion:1e9,trillion:1e12,quadrillion:1e15,quintillion:1e18,sextillion:1e21,septillion:1e24,grand:1e3}};var Wie=(t,e)=>{if(ft.ones.hasOwnProperty(t)){if(e.ones||e.teens)return!1}else if(ft.teens.hasOwnProperty(t)){if(e.ones||e.teens||e.tens)return!1}else if(ft.tens.hasOwnProperty(t)&&(e.ones||e.teens||e.tens))return!1;return!0},NU=Wie;var zie=function(t){let e="0.";for(let n=0;n<t.length;n++){let r=t[n];if(ft.ones.hasOwnProperty(r)===!0)e+=ft.ones[r];else if(ft.teens.hasOwnProperty(r)===!0)e+=ft.teens[r];else if(ft.tens.hasOwnProperty(r)===!0)e+=ft.tens[r];else if(/^[0-9]$/.test(r)===!0)e+=r;else return 0}return parseFloat(e)},OU=zie;var Jie=t=>(t=t.replace(/1st$/,"1"),t=t.replace(/2nd$/,"2"),t=t.replace(/3rd$/,"3"),t=t.replace(/([4567890])r?th$/,"$1"),t=t.replace(/^[$]/,""),t=t.replace(/[%$]$/,""),t=t.replace(/,/g,""),t=t.replace(/([0-9])([a-z\u00C0-\u00FF]{1,2})$/,"$1"),t),DU=Jie;var Kie=/^([0-9,. ]+)\/([0-9,. ]+)$/,MU={"a few":3,"a couple":2,"a dozen":12,"two dozen":24,zero:0},pg=t=>Object.keys(t).reduce((e,n)=>(e+=t[n],e),0),Yie=function(t){if(MU.hasOwnProperty(t)===!0)return MU[t];if(t==="a"||t==="an")return 1;let e=RU(t);t=e.str;let n=null,r={},o=0,i=!1,s=t.split(/[ -]/);for(let a=0;a<s.length;a++){let l=s[a];if(l=DU(l),!l||l==="and")continue;if(l==="-"||l==="negative"){i=!0;continue}if(l.charAt(0)==="-"&&(i=!0,l=l.substring(1)),l==="point")return o+=pg(r),o+=OU(s.slice(a+1,s.length)),o*=e.amount,o;let u=l.match(Kie);if(u){let f=parseFloat(u[1].replace(/[, ]/g,"")),p=parseFloat(u[2].replace(/[, ]/g,""));p&&(o+=f/p||0);continue}if(ft.tens.hasOwnProperty(l)&&r.ones&&Object.keys(r).length===1&&(o=r.ones*100,r={}),NU(l,r)===!1)return null;if(/^[0-9.]+$/.test(l))r.ones=parseFloat(l);else if(ft.ones.hasOwnProperty(l)===!0)r.ones=ft.ones[l];else if(ft.teens.hasOwnProperty(l)===!0)r.teens=ft.teens[l];else if(ft.tens.hasOwnProperty(l)===!0)r.tens=ft.tens[l];else if(ft.multiples.hasOwnProperty(l)===!0){let f=ft.multiples[l];if(f===n)return null;if(f===100&&s[a+1]!==void 0){let p=s[a+1];ft.multiples[p]&&(f*=ft.multiples[p],a+=1)}n===null||f<n?(o+=(pg(r)||1)*f,n=f,r={}):(o+=pg(r),n=f,o=(o||1)*f,r={})}}return o+=pg(r),o*=e.amount,o*=i?-1:1,o===0&&Object.keys(r).length===0?null:o},Uf=Yie;var FU=/s$/,Bf=function(t){let e=t.text("reduced");return Uf(e)},mg={half:2,halve:2,quarter:4},Xie=function(t){let n=t.text("reduced").match(/^([-+]?[0-9]+)\/([-+]?[0-9]+)(st|nd|rd|th)?s?$/);return n&&n[1]&&n[0]?{numerator:Number(n[1]),denominator:Number(n[2])}:null},Qie=function(t){let e=t.match("[<num>#Value+] out of every? [<den>#Value+]");if(e.found!==!0)return null;let{num:n,den:r}=e.groups();return!n||!r||(n=Bf(n),r=Bf(r),!n||!r)?null:typeof n=="number"&&typeof r=="number"?{numerator:n,denominator:r}:null},Zie=function(t){let e=t.match("[<num>(#Cardinal|a)+] [<den>#Fraction+]");if(e.found!==!0)return null;let{num:n,den:r}=e.groups();n.has("a")?n=1:n=Bf(n);let o=r.text("reduced");return FU.test(o)&&(o=o.replace(FU,""),r=r.replaceWith(o)),mg.hasOwnProperty(o)?r=mg[o]:r=Bf(r),typeof n=="number"&&typeof r=="number"?{numerator:n,denominator:r}:null},ese=function(t){let e=t.match("^#Ordinal$");return e.found!==!0?null:t.lookAhead("^of .")?{numerator:1,denominator:Bf(e)}:null},tse=function(t){let e=t.text("reduced");return mg.hasOwnProperty(e)?{numerator:1,denominator:mg[e]}:null},nse=t=>{let e=Math.round(t*1e3)/1e3;return e===0&&t!==0?t:e},rse=function(t){t=t.clone();let e=tse(t)||Xie(t)||Qie(t)||Zie(t)||ese(t)||null;return e!==null&&e.numerator&&e.denominator&&(e.decimal=e.numerator/e.denominator,e.decimal=nse(e.decimal)),e},Fr=rse;var ose=function(t){if(t<1e6)return String(t);let e;return typeof t=="number"?e=t.toFixed(0):e=t,e.indexOf("e+")===-1?e:e.replace(".","").split("e+").reduce(function(n,r){return n+Array(r-n.length+2).join(0)})},Gf=ose;var Hf=[["ninety",90],["eighty",80],["seventy",70],["sixty",60],["fifty",50],["forty",40],["thirty",30],["twenty",20]],mE=["","one","two","three","four","five","six","seven","eight","nine","ten","eleven","twelve","thirteen","fourteen","fifteen","sixteen","seventeen","eighteen","nineteen"],LU=[[1e24,"septillion"],[1e20,"hundred sextillion"],[1e21,"sextillion"],[1e20,"hundred quintillion"],[1e18,"quintillion"],[1e17,"hundred quadrillion"],[1e15,"quadrillion"],[1e14,"hundred trillion"],[1e12,"trillion"],[1e11,"hundred billion"],[1e9,"billion"],[1e8,"hundred million"],[1e6,"million"],[1e5,"hundred thousand"],[1e3,"thousand"],[100,"hundred"],[1,"one"]];var ise=function(t){let e=t,n=[];return LU.forEach(r=>{if(t>=r[0]){let o=Math.floor(e/r[0]);e-=o*r[0],o&&n.push({unit:r[1],count:o})}}),n},sse=function(t){let e=[];if(t>100)return e;for(let n=0;n<Hf.length;n++)t>=Hf[n][1]&&(t-=Hf[n][1],e.push(Hf[n][0]));return mE[t]&&e.push(mE[t]),e},ase=t=>{let e=["zero","one","two","three","four","five","six","seven","eight","nine"],n=[],o=Gf(t).match(/\.([0-9]+)/);if(!o||!o[0])return n;n.push("point");let i=o[0].split("");for(let s=0;s<i.length;s++)n.push(e[i[s]]);return n},lse=function(t){let e=t.num;if(e===0||e==="0")return"zero";e>1e21&&(e=Gf(e));let n=[];e<0&&(n.push("minus"),e=Math.abs(e));let r=ise(e);for(let o=0;o<r.length;o++){let i=r[o].unit;i==="one"&&(i="",n.length>1&&n.push("and")),n=n.concat(sse(r[o].count)),n.push(i)}return n=n.concat(ase(e)),n=n.filter(o=>o),n.length===0&&(n[0]=""),n.join(" ")},ni=lse;var use=function(t){if(!t.numerator||!t.denominator)return"";let e=ni({num:t.numerator}),n=ni({num:t.denominator});return`${e} out of ${n}`},UU=use;var BU={one:"first",two:"second",three:"third",five:"fifth",eight:"eighth",nine:"ninth",twelve:"twelfth",twenty:"twentieth",thirty:"thirtieth",forty:"fortieth",fourty:"fourtieth",fifty:"fiftieth",sixty:"sixtieth",seventy:"seventieth",eighty:"eightieth",ninety:"ninetieth"},cse=t=>{let e=ni(t).split(" "),n=e[e.length-1];return BU.hasOwnProperty(n)?e[e.length-1]=BU[n]:e[e.length-1]=n.replace(/y$/,"i")+"th",e.join(" ")},gg=cse;var fse=function(t){if(!t.numerator||!t.denominator)return"";let e=ni({num:t.numerator}),n=gg({num:t.denominator});return t.denominator===2&&(n="half"),e&&n?(t.numerator!==1&&(n+="s"),`${e} ${n}`):""},GU=fse;var dse=function(t){class e extends t{constructor(r,o,i){super(r,o,i),this.viewType="Fractions"}parse(r){return this.getNth(r).map(Fr)}get(r){return this.getNth(r).map(Fr)}json(r){return this.getNth(r).map(o=>{let i=o.toView().json(r)[0],s=Fr(o);return i.fraction=s,i},[])}toDecimal(r){return this.getNth(r).forEach(o=>{let{decimal:i}=Fr(o);o=o.replaceWith(String(i),!0),o.tag("NumericValue"),o.unTag("Fraction")}),this}toFraction(r){return this.getNth(r).forEach(o=>{let i=Fr(o);if(i&&typeof i.numerator=="number"&&typeof i.denominator=="number"){let s=`${i.numerator}/${i.denominator}`;this.replace(o,s)}}),this}toOrdinal(r){return this.getNth(r).forEach(o=>{let i=Fr(o),s=GU(i);o.after("^#Noun").found&&(s+=" of"),o.replaceWith(s)}),this}toCardinal(r){return this.getNth(r).forEach(o=>{let i=Fr(o),s=UU(i);o.replaceWith(s)}),this}toPercentage(r){return this.getNth(r).forEach(o=>{let{decimal:i}=Fr(o),s=i*100;s=Math.round(s*100)/100,o.replaceWith(`${s}%`)}),this}}t.prototype.fractions=function(n){let r=kU(this);return r=r.getNth(n),new e(this.document,r.pointer)}},HU=dse;var hse="one|two|three|four|five|six|seven|eight|nine",Qi="twenty|thirty|forty|fifty|sixty|seventy|eighty|ninety|fourty",pse="eleven|twelve|thirteen|fourteen|fifteen|sixteen|seventeen|eighteen|nineteen",mse=function(t){let e=t.match("#Value+");if(e.has("#NumericValue #NumericValue")&&(e.has("#Value @hasComma #Value")?e.splitAfter("@hasComma"):e.has("#NumericValue #Fraction")?e.splitAfter("#NumericValue #Fraction"):e=e.splitAfter("#NumericValue")),e.has("#Value #Value #Value")&&!e.has("#Multiple")&&e.has("("+Qi+") #Cardinal #Cardinal")&&(e=e.splitAfter("("+Qi+") #Cardinal")),e.has("#Value #Value")){e.has("#NumericValue #NumericValue")&&(e=e.splitOn("#Year")),e.has("("+Qi+") ("+pse+")")&&(e=e.splitAfter("("+Qi+")"));let n=e.match("#Cardinal #Cardinal");if(n.found&&!e.has("(point|decimal|#Fraction)")&&!n.has("#Cardinal (#Multiple|point|decimal)")){let r=e.has(`(${hse}) (${Qi})`),o=n.has("("+Qi+") #Cardinal"),i=n.has("#Multiple #Value");!r&&!o&&!i&&n.terms().forEach(s=>{e=e.splitOn(s)})}e.match("#Ordinal #Ordinal").match("#TextValue").found&&!e.has("#Multiple")&&(e.has("("+Qi+") #Ordinal")||(e=e.splitAfter("#Ordinal"))),e=e.splitBefore("#Ordinal [#Cardinal]",0),e.has("#TextValue #NumericValue")&&!e.has("("+Qi+"|#Multiple)")&&(e=e.splitBefore("#TextValue #NumericValue"))}return e=e.splitAfter("#NumberRange"),e=e.splitBefore("#Year"),e},yg=mse;var gse=function(t,e){t=t.replace(/,/g,"");let n=t.split(/([0-9.,]*)/),[r,o]=n,i=n.slice(2).join("");return o!==""&&e.length<2?(o=Number(o||t),typeof o!="number"&&(o=null),i=i||"",(i==="st"||i==="nd"||i==="rd"||i==="th")&&(i=""),{prefix:r||"",num:o,suffix:i}):null},yse=function(t){if(typeof t=="string")return{num:Uf(t)};let e=t.text("reduced"),n=t.growRight("#Unit").match("#Unit$").text("machine"),r=/[0-9],[0-9]/.test(t.text("text"));if(t.terms().length===1&&!t.has("#Multiple")){let a=gse(e,t);if(a!==null)return a.hasComma=r,a.unit=n,a}let o=t.match("#Fraction{2,}$");o=o.found===!1?t.match("^#Fraction$"):o;let i=null;o.found&&(o.has("#Value and #Value #Fraction")&&(o=o.match("and #Value #Fraction")),i=Fr(o),t=t.not(o),t=t.not("and$"),e=t.text("reduced"));let s=0;return e&&(s=Uf(e)||0),i&&i.decimal&&(s+=i.decimal),{hasComma:r,prefix:"",num:s,suffix:"",isOrdinal:t.has("#Ordinal"),isText:t.has("#TextValue"),isFraction:t.has("#Fraction"),isMoney:t.has("#Money"),unit:n}},Pt=yse;var bse=function(t){let e=t.num;if(!e&&e!==0)return null;let n=e%100;if(n>10&&n<20)return String(e)+"th";let r={0:"th",1:"st",2:"nd",3:"rd"},o=Gf(e),i=o.slice(o.length-1,o.length);return r[i]?o+=r[i]:o+="th",o},qU=bse;var $U={"\xA2":"cents",$:"dollars","\xA3":"pounds","\xA5":"yen","\u20AC":"euros","\u20A1":"col\xF3n","\u0E3F":"baht","\u20AD":"kip","\u20A9":"won","\u20B9":"rupees","\u20BD":"ruble","\u20BA":"liras"},VU={"%":"percent","\xB0":"degrees"},vse=function(t){let e={suffix:"",prefix:t.prefix};return $U.hasOwnProperty(t.prefix)&&(e.suffix+=" "+$U[t.prefix],e.prefix=""),VU.hasOwnProperty(t.suffix)&&(e.suffix+=" "+VU[t.suffix]),e.suffix&&t.num===1&&(e.suffix=e.suffix.replace(/s$/,"")),!e.suffix&&t.suffix&&(e.suffix+=" "+t.suffix),e},gE=vse;var wse=function(t,e){if(e==="TextOrdinal"){let{prefix:r,suffix:o}=gE(t);return r+gg(t)+o}if(e==="Ordinal")return t.prefix+qU(t)+t.suffix;if(e==="TextCardinal"){let{prefix:r,suffix:o}=gE(t);return r+ni(t)+o}let n=t.num;return t.hasComma&&(n=n.toLocaleString()),t.prefix+String(n)+t.suffix},Zi=wse;var _se=t=>Object.prototype.toString.call(t)==="[object Array]",Ese=function(t){if(typeof t=="string"||typeof t=="number"){let e={};return e[t]=!0,e}return _se(t)?t.reduce((e,n)=>(e[n]=!0,e),{}):t||{}},Ase=function(t,e={}){return e=Ese(e),t.filter(n=>{let{unit:r}=Pt(n);return!!(r&&e[r]===!0)})},jU=Ase;var Cse=function(t){class e extends t{constructor(r,o,i){super(r,o,i),this.viewType="Numbers"}parse(r){return this.getNth(r).map(Pt)}get(r){return this.getNth(r).map(Pt).map(o=>o.num)}json(r){let o=typeof r=="object"?r:{};return this.getNth(r).map(i=>{let s=i.toView().json(o)[0],a=Pt(i);return s.number={prefix:a.prefix,num:a.num,suffix:a.suffix,hasComma:a.hasComma,unit:a.unit},s},[])}units(){return this.growRight("#Unit").match("#Unit$")}isUnit(r){return jU(this,r)}isOrdinal(){return this.if("#Ordinal")}isCardinal(){return this.if("#Cardinal")}toNumber(){let r=this.map(o=>{if(!this.has("#TextValue"))return o;let i=Pt(o);if(i.num===null)return o;let s=o.has("#Ordinal")?"Ordinal":"Cardinal",a=Zi(i,s);return o.replaceWith(a,{tags:!0}),o.tag("NumericValue")});return new e(r.document,r.pointer)}toLocaleString(){return this.forEach(o=>{let i=Pt(o);if(i.num===null)return;let s=i.num.toLocaleString();if(o.has("#Ordinal")){let l=Zi(i,"Ordinal").match(/[a-z]+$/);l&&(s+=l[0]||"")}o.replaceWith(s,{tags:!0})}),this}toText(){let o=this.map(i=>{if(i.has("#TextValue"))return i;let s=Pt(i);if(s.num===null)return i;let a=i.has("#Ordinal")?"TextOrdinal":"TextCardinal",l=Zi(s,a);return i.replaceWith(l,{tags:!0}),i.tag("TextValue"),i});return new e(o.document,o.pointer)}toCardinal(){let o=this.map(i=>{if(!i.has("#Ordinal"))return i;let s=Pt(i);if(s.num===null)return i;let a=i.has("#TextValue")?"TextCardinal":"Cardinal",l=Zi(s,a);return i.replaceWith(l,{tags:!0}),i.tag("Cardinal"),i});return new e(o.document,o.pointer)}toOrdinal(){let o=this.map(i=>{if(i.has("#Ordinal"))return i;let s=Pt(i);if(s.num===null)return i;let a=i.has("#TextValue")?"TextOrdinal":"Ordinal",l=Zi(s,a);return i.replaceWith(l,{tags:!0}),i.tag("Ordinal"),i});return new e(o.document,o.pointer)}isEqual(r){return this.filter(o=>Pt(o).num===r)}greaterThan(r){return this.filter(o=>Pt(o).num>r)}lessThan(r){return this.filter(o=>Pt(o).num<r)}between(r,o){return this.filter(i=>{let s=Pt(i).num;return s>r&&s<o})}set(r){if(r===void 0)return this;typeof r=="string"&&(r=Pt(r).num);let i=this.map(s=>{let a=Pt(s);if(a.num=r,a.num===null)return s;let l=s.has("#Ordinal")?"Ordinal":"Cardinal";s.has("#TextValue")&&(l=s.has("#Ordinal")?"TextOrdinal":"TextCardinal");let u=Zi(a,l);return a.hasComma&&l==="Cardinal"&&(u=Number(u).toLocaleString()),s=s.not("#Currency"),s.replaceWith(u,{tags:!0}),s});return new e(i.document,i.pointer)}add(r){if(!r)return this;typeof r=="string"&&(r=Pt(r).num);let i=this.map(s=>{let a=Pt(s);if(a.num===null)return s;a.num+=r;let l=s.has("#Ordinal")?"Ordinal":"Cardinal";a.isText&&(l=s.has("#Ordinal")?"TextOrdinal":"TextCardinal");let u=Zi(a,l);return s.replaceWith(u,{tags:!0}),s});return new e(i.document,i.pointer)}subtract(r,o){return this.add(r*-1,o)}increment(r){return this.add(1,r)}decrement(r){return this.add(-1,r)}update(r){let o=new e(this.document,r);return o._cache=this._cache,o}}e.prototype.toNice=e.prototype.toLocaleString,e.prototype.isBetween=e.prototype.between,e.prototype.minus=e.prototype.subtract,e.prototype.plus=e.prototype.add,e.prototype.equals=e.prototype.isEqual,t.prototype.numbers=function(n){let r=yg(this);return r=r.getNth(n),new e(this.document,r.pointer)},t.prototype.percentages=function(n){let r=yg(this);return r=r.filter(o=>o.has("#Percent")||o.after("^percent")),r=r.getNth(n),new e(this.document,r.pointer)},t.prototype.money=function(n){let r=yg(this);return r=r.filter(o=>o.has("#Money")||o.after("^#Currency")),r=r.getNth(n),new e(this.document,r.pointer)},t.prototype.values=t.prototype.numbers},WU=Cse;var Tse=function(t){HU(t),WU(t)},zU={api:Tse};var Sse={people:!0,emails:!0,phoneNumbers:!0,places:!0},Pse=function(t={}){return t=Object.assign({},Sse,t),t.people!==!1&&this.people().replaceWith("\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588"),t.emails!==!1&&this.emails().replaceWith("\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588"),t.places!==!1&&this.places().replaceWith("\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588"),t.phoneNumbers!==!1&&this.phoneNumbers().replaceWith("\u2588\u2588\u2588\u2588\u2588\u2588\u2588"),this},Ise={api:function(t){t.prototype.redact=Pse}},JU=Ise;var xse=function(t){let e=t.clauses();return/\.\.$/.test(t.out("text"))||t.has("^#QuestionWord")&&t.has("@hasComma")?!1:!!(t.has("or not$")||t.has("^#QuestionWord")||t.has("^(do|does|did|is|was|can|could|will|would|may) #Noun")||t.has("^(have|must) you")||e.has("(do|does|is|was) #Noun+ #Adverb? (#Adjective|#Infinitive)$"))},kse=function(t){let e=/\?/,{document:n}=t;return t.filter(r=>{let o=r.docs[0]||[],i=o[o.length-1];return!i||n[i.index[0]].length!==o.length?!1:e.test(i.post)?!0:xse(r)})},KU=kse;var Rse="(after|although|as|because|before|if|since|than|that|though|when|whenever|where|whereas|wherever|whether|while|why|unless|until|once)",Nse="(that|which|whichever|who|whoever|whom|whose|whomever)",Ose=function(t){let e=t;return e.length===1||(e=e.if("#Verb"),e.length===1)||(e=e.ifNo(Rse),e=e.ifNo("^even (if|though)"),e=e.ifNo("^so that"),e=e.ifNo("^rather than"),e=e.ifNo("^provided that"),e.length===1)||(e=e.ifNo(Nse),e.length===1)||(e=e.ifNo("(^despite|^during|^before|^through|^throughout)"),e.length===1)||(e=e.ifNo("^#Gerund"),e.length===1)?e:(e.length===0&&(e=t),e.eq(0))},YU=Ose;var Dse=function(t){let e=null;return t.has("#PastTense")?e="PastTense":t.has("#FutureTense")?e="FutureTense":t.has("#PresentTense")&&(e="PresentTense"),{tense:e}},Mse=function(t){let e=t.clauses(),r=YU(e).chunks(),o=t.none(),i=t.none(),s=t.none();return r.forEach((a,l)=>{if(l===0&&!a.has("<Verb>")){o=a;return}if(!i.found&&a.has("<Verb>")){i=a;return}i.found&&(s=s.concat(a))}),i.found&&!o.found&&(o=i.before("<Noun>+").first()),{subj:o,verb:i,pred:s,grammar:Dse(i)}},es=Mse;var Fse=function(t){let e=t.verbs(),n=e.eq(0);if(n.has("#PastTense"))return t;if(n.toPastTense(),e.length>1){e=e.slice(1),e=e.filter(o=>!o.lookBehind("to$").found),e=e.if("#PresentTense"),e=e.notIf("#Gerund");let r=t.match("to #Verb+ #Conjunction #Verb").terms();e=e.not(r),e.found&&e.verbs().toPastTense()}return t},XU=Fse;var Lse=function(t){let e=t.verbs();return e.eq(0).toPresentTense(),e.length>1&&(e=e.slice(1),e=e.filter(r=>!r.lookBehind("to$").found),e=e.notIf("#Gerund"),e.found&&e.verbs().toPresentTense()),t},QU=Lse;var Use=function(t){let e=t.verbs();if(e.eq(0).toFutureTense(),t=t.fullSentence(),e=t.verbs(),e.length>1){e=e.slice(1);let r=e.filter(o=>o.lookBehind("to$").found?!1:o.has("#Copula #Gerund")?!0:o.has("#Gerund")?!1:o.has("#Copula")?!0:!(o.has("#PresentTense")&&!o.has("#Infinitive")&&o.lookBefore("(he|she|it|that|which)$").found));r.found&&r.forEach(o=>{if(o.has("#Copula")){o.match("was").replaceWith("is"),o.match("is").replaceWith("will be");return}o.toInfinitive()})}return t},ZU=Use;var eB=function(t){return t.verbs().first().toNegative().compute("chunks"),t},tB=function(t){return t.verbs().first().toPositive().compute("chunks"),t};var Bse=function(t){return t.verbs().toInfinitive(),t},nB=Bse;var Gse=function(t){class e extends t{constructor(o,i,s){super(o,i,s),this.viewType="Sentences"}json(o={}){return this.map(i=>{let s=i.toView().json(o)[0]||{},{subj:a,verb:l,pred:u,grammar:f}=es(i);return s.sentence={subject:a.text("normal"),verb:l.text("normal"),predicate:u.text("normal"),grammar:f},s},[])}toPastTense(o){return this.getNth(o).map(i=>{let s=es(i);return XU(i,s)})}toPresentTense(o){return this.getNth(o).map(i=>{let s=es(i);return QU(i,s)})}toFutureTense(o){return this.getNth(o).map(i=>{let s=es(i);return i=ZU(i,s),i})}toInfinitive(o){return this.getNth(o).map(i=>{let s=es(i);return nB(i,s)})}toNegative(o){return this.getNth(o).map(i=>{let s=es(i);return eB(i,s)})}toPositive(o){return this.getNth(o).map(i=>{let s=es(i);return tB(i,s)})}isQuestion(o){return this.questions(o)}isExclamation(o){return this.filter(s=>s.lastTerm().has("@hasExclamation")).getNth(o)}isStatement(o){return this.filter(s=>!s.isExclamation().found&&!s.isQuestion().found).getNth(o)}update(o){let i=new e(this.document,o);return i._cache=this._cache,i}}e.prototype.toPresent=e.prototype.toPresentTense,e.prototype.toPast=e.prototype.toPastTense,e.prototype.toFuture=e.prototype.toFutureTense;let n={sentences:function(r){let o=this.map(i=>i.fullSentence());return o=o.getNth(r),new e(this.document,o.pointer)},questions:function(r){return KU(this).getNth(r)}};Object.assign(t.prototype,n)},rB=Gse;var oB={api:rB};var Hse=function(t){let e=t.splitAfter("@hasComma");e=e.match("#Honorific+? #Person+");let n=e.match("#Possessive").notIf("(his|her)");return e=e.splitAfter(n),e},iB=Hse;var qse=function(t){let e={};e.firstName=t.match("#FirstName+"),e.lastName=t.match("#LastName+"),e.honorific=t.match("#Honorific+");let n=e.lastName,r=e.firstName;return(!r.found||!n.found)&&!r.found&&!n.found&&t.has("^#Honorific .$")&&(e.lastName=t.match(".$")),e},yE=qse;var ar="male",un="female",sB={mr:ar,mrs:un,miss:un,madam:un,king:ar,queen:un,duke:ar,duchess:un,baron:ar,baroness:un,count:ar,countess:un,prince:ar,princess:un,sire:ar,dame:un,lady:un,ayatullah:ar,congressman:ar,congresswoman:un,"first lady":un,mx:null},$se=function(t,e){let{firstName:n,honorific:r}=t;if(n.has("#FemaleName"))return un;if(n.has("#MaleName"))return ar;if(r.found){let i=r.text("normal");if(i=i.replace(/\./g,""),sB.hasOwnProperty(i))return sB[i];if(/^her /.test(i))return un;if(/^his /.test(i))return ar}let o=e.after();if(!o.has("#Person")&&o.has("#Pronoun")){let i=o.match("#Pronoun");if(i.has("(they|their)"))return null;let s=i.has("(he|his)"),a=i.has("(she|her|hers)");if(s&&!a)return ar;if(a&&!s)return un}return null},aB=$se;var Vse=function(t){class e extends t{constructor(r,o,i){super(r,o,i),this.viewType="People"}parse(r){return this.getNth(r).map(yE)}json(r){let o=typeof r=="object"?r:{};return this.getNth(r).map(i=>{let s=i.toView().json(o)[0],a=yE(i);return s.person={firstName:a.firstName.text("normal"),lastName:a.lastName.text("normal"),honorific:a.honorific.text("normal"),presumed_gender:aB(a,i)},s},[])}presumedMale(){return this.filter(r=>r.has("(#MaleName|mr|mister|sr|jr|king|pope|prince|sir)"))}presumedFemale(){return this.filter(r=>r.has("(#FemaleName|mrs|miss|queen|princess|madam)"))}update(r){let o=new e(this.document,r);return o._cache=this._cache,o}}t.prototype.people=function(n){let r=iB(this);return r=r.getNth(n),new e(this.document,r.pointer)}},lB=Vse;var jse=function(t){let e=t.match("(#Place|#Address)+"),n=e.match("@hasComma");return n=n.filter(r=>r.has("(asia|africa|europe|america)$")?!0:!(r.has("(#City|#Region|#ProperNoun)$")&&r.after("^(#Country|#Region)").found)),e=e.splitAfter(n),e},uB=jse;var Wse=function(t){t.prototype.places=function(e){let n=uB(this);return n=n.getNth(e),new t(this.document,n.pointer)}},cB=Wse;var zse=function(t){t.prototype.organizations=function(e){return this.match("#Organization+").getNth(e)}},fB=zse;var Jse=function(t){let e=this.clauses(),n=e.people();return n=n.concat(e.places()),n=n.concat(e.organizations()),n=n.not("(someone|man|woman|mother|brother|sister|father)"),n=n.sort("seq"),n=n.getNth(t),n},Kse=function(t){t.prototype.topics=Jse},dB=Kse;var Yse=function(t){lB(t),cB(t),fB(t),dB(t)},hB={api:Yse};var Xse=function(t){let e=t.match("<Verb>");return e=e.not("#Conjunction"),e=e.not("#Preposition"),e=e.splitAfter("@hasComma"),e=e.splitAfter("[(do|did|am|was|is|will)] (is|was)",0),e=e.splitBefore("(#Verb && !#Copula) [being] #Verb",0),e=e.splitBefore("#Verb [to be] #Verb",0),e=e.splitAfter("[help] #PresentTense",0),e=e.splitBefore("(#PresentTense|#PastTense) [#Copula]$",0),e=e.splitBefore("(#PresentTense|#PastTense) [will be]$",0),e=e.splitBefore("(#PresentTense|#PastTense) [(had|has)]",0),e=e.not("#Reflexive$"),e=e.not("#Adjective"),e=e.splitAfter("[#PastTense] #PastTense",0),e=e.splitAfter("[#PastTense] #Auxiliary+ #PastTense",0),e=e.splitAfter("#Copula [#Gerund] #PastTense",0),e=e.if("#Verb"),e.has("(#Verb && !#Auxiliary) #Adverb+? #Copula")&&(e=e.splitBefore("#Copula")),e},pB=Xse;var Qse=function(t){let e=t;return t.wordCount()>1&&(e=t.not("(#Negative|#Auxiliary|#Modal|#Adverb|#Prefix)")),e.length>1&&!e.has("#Phrasal #Particle")&&(e=e.last()),e=e.not("(want|wants|wanted) to"),e.found||(e=t.not("#Negative")),e},mB=Qse;var Zse=function(t,e){let n={pre:t.none(),post:t.none()};if(!t.has("#Adverb"))return n;let r=t.splitOn(e);return r.length===3?{pre:r.eq(0).adverbs(),post:r.eq(2).adverbs()}:r.eq(0).isDoc(e)?(n.post=r.eq(1).adverbs(),n):(n.pre=r.eq(0).adverbs(),n)},gB=Zse;var eae=function(t,e){let n=t.splitBefore(e);if(n.length<=1)return t.none();let r=n.eq(0);return r=r.not("(#Adverb|#Negative|#Prefix)"),r},tae=function(t){return t.match("#Negative")},nae=function(t){if(!t.has("(#Particle|#PhrasalVerb)"))return{verb:t.none(),particle:t.none()};let e=t.match("#Particle$");return{verb:t.not(e),particle:e}},rae=function(t){let e=t.clone();e.contractions().expand();let n=mB(e);return{root:n,prefix:e.match("#Prefix"),adverbs:gB(e,n),auxiliary:eae(e,n),negative:tae(e),phrasal:nae(n)}},$n=rae;var Lr={tense:"PresentTense"},bg={conditional:!0},ri={tense:"FutureTense"},ku={progressive:!0},Ft={tense:"PastTense"},Ru={complete:!0,progressive:!1},ts={passive:!0},oae={plural:!0},iae={plural:!1},sae=function(t){let e={};return t.forEach(n=>{Object.assign(e,n)}),e},yB={imperative:[["#Imperative",[]]],"want-infinitive":[["^(want|wants|wanted) to #Infinitive$",[Lr]],["^wanted to #Infinitive$",[Ft]],["^will want to #Infinitive$",[ri]]],"gerund-phrase":[["^#PastTense #Gerund$",[Ft]],["^#PresentTense #Gerund$",[Lr]],["^#Infinitive #Gerund$",[Lr]],["^will #Infinitive #Gerund$",[ri]],["^have #PastTense #Gerund$",[Ft]],["^will have #PastTense #Gerund$",[Ft]]],"simple-present":[["^#PresentTense$",[Lr]],["^#Infinitive$",[Lr]]],"simple-past":[["^#PastTense$",[Ft]]],"simple-future":[["^will #Adverb? #Infinitive",[ri]]],"present-progressive":[["^(is|are|am) #Gerund$",[Lr,ku]]],"past-progressive":[["^(was|were) #Gerund$",[Ft,ku]]],"future-progressive":[["^will be #Gerund$",[ri,ku]]],"present-perfect":[["^(has|have) #PastTense$",[Ft,Ru]]],"past-perfect":[["^had #PastTense$",[Ft,Ru]],["^had #PastTense to #Infinitive",[Ft,Ru]]],"future-perfect":[["^will have #PastTense$",[ri,Ru]]],"present-perfect-progressive":[["^(has|have) been #Gerund$",[Ft,ku]]],"past-perfect-progressive":[["^had been #Gerund$",[Ft,ku]]],"future-perfect-progressive":[["^will have been #Gerund$",[ri,ku]]],"passive-past":[["(got|were|was) #Passive",[Ft,ts]],["^(was|were) being #Passive",[Ft,ts]],["^(had|have) been #Passive",[Ft,ts]]],"passive-present":[["^(is|are|am) #Passive",[Lr,ts]],["^(is|are|am) being #Passive",[Lr,ts]],["^has been #Passive",[Lr,ts]]],"passive-future":[["will have been #Passive",[ri,ts,bg]],["will be being? #Passive",[ri,ts,bg]]],"present-conditional":[["would be #PastTense",[Lr,bg]]],"past-conditional":[["would have been #PastTense",[Ft,bg]]],"auxiliary-future":[["(is|are|am|was) going to (#Infinitive|#PresentTense)",[ri]]],"auxiliary-past":[["^did #Infinitive$",[Ft,iae]],["^used to #Infinitive$",[Ft,Ru]]],"auxiliary-present":[["^(does|do) #Infinitive$",[Lr,Ru,oae]]],"modal-past":[["^(could|must|should|shall) have #PastTense$",[Ft]]],"modal-infinitive":[["^#Modal #Infinitive$",[]]],infinitive:[["^#Infinitive$",[]]]},bB=[];Object.keys(yB).map(t=>{yB[t].forEach(e=>{bB.push({name:t,match:e[0],data:sae(e[1])})})});var bE=bB;var aae=function(t,e){return t=t.clone(),e.adverbs.post&&e.adverbs.post.found&&t.remove(e.adverbs.post),e.adverbs.pre&&e.adverbs.pre.found&&t.remove(e.adverbs.pre),t.has("#Negative")&&(t=t.remove("#Negative")),t.has("#Prefix")&&(t=t.remove("#Prefix")),e.root.has("#PhrasalVerb #Particle")&&t.remove("#Particle$"),t=t.not("#Adverb"),t},lae=function(t){return!!(t.has("#Infinitive")&&t.growLeft("to").has("^to #Infinitive"))},uae=function(t,e){let n={};t=aae(t,e);for(let r=0;r<bE.length;r+=1){let o=bE[r];if(t.has(o.match)===!0){n.form=o.name,Object.assign(n,o.data);break}}return n.form||t.has("^#Verb$")&&(n.form="infinitive"),n.tense||(n.tense=e.root.has("#PastTense")?"PastTense":"PresentTense"),n.copula=e.root.has("#Copula"),n.isInfinitive=lae(t),n},Ur=uae;var vB=function(t){return t.length<=1?!1:(t.parse()[0]||{}).isSubordinate},cae=function(t){let e=t.clauses();return e=e.filter((n,r)=>!(n.has("^(if|unless|while|but|for|per|at|by|that|which|who|from)")||r>0&&n.has("^#Verb . #Noun+$")||r>0&&n.has("^#Adverb"))),e.length===0?t:e},fae=function(t){let e=t.before();e=cae(e);let n=e.nouns(),r=n.last(),o=r.match("(i|he|she|we|you|they)");if(o.found)return o.nouns();let i=n.if("^(that|this|those)");return i.found||n.found===!1&&(i=e.match("^(that|this|those)"),i.found)?i:(r=n.last(),vB(r)&&(n.remove(r),r=n.last()),vB(r)&&(n.remove(r),r=n.last()),r)},dae=function(t,e){return e.has("(are|were|does)")||t.has("(those|they|we)")?!0:t.found&&t.isPlural?t.isPlural().found:!1},hae=function(t){let e=fae(t);return{subject:e,plural:dae(e,t)}},wn=hae;var We=t=>t,Nu=(t,e)=>{let n=wn(t,e),r=n.subject;return r.has("i")||r.has("we")?!0:n.plural},wB=(t,e)=>{let{subject:n,plural:r}=wn(t,e);return r||n.has("we")?"were":"was"},ya=function(t,e){if(t.has("were"))return"are";let{subject:n,plural:r}=wn(t,e);return n.has("i")?"am":n.has("we")||r?"are":"is"},Ou=function(t,e){let n=wn(t,e),r=n.subject;return r.has("i")||r.has("we")||n.plural?"do":"does"},gt=function(t){if(t.has("#Infinitive"))return"Infinitive";if(t.has("#Participle"))return"Participle";if(t.has("#PastTense"))return"PastTense";if(t.has("#Gerund"))return"Gerund";if(t.has("#PresentTense"))return"PresentTense"},qf=function(t,e){let{toInfinitive:n}=t.methods.two.transform.verb,r=e.root.text({keepPunct:!1});return r=n(r,t.model,gt(t)),r&&t.replace(e.root,r),t},vE=t=>t.has("will not")?t.replace("will not","have not"):t.remove("will");var _B=function(t){if(!t||!t.isView)return[];let e={normal:!0,terms:!1,text:!1};return t.json(e).map(n=>n.normal)},EB=function(t){return!t||!t.isView?"":t.text("normal")},pae=function(t){let{toInfinitive:e}=t.methods.two.transform.verb,n=t.text("normal");return e(n,t.model,gt(t))},mae=function(t){let e=$n(t);t=t.clone().toView();let n=Ur(t,e);return{root:e.root.text(),preAdverbs:_B(e.adverbs.pre),postAdverbs:_B(e.adverbs.post),auxiliary:EB(e.auxiliary),negative:e.negative.found,prefix:EB(e.prefix),infinitive:pae(e.root),grammar:n}},AB=mae;var gae={tags:!0},yae=function(t,e){let{toInfinitive:n}=t.methods.two.transform.verb,{root:r,auxiliary:o}=e,i=o.terms().harden(),s=r.text("normal");if(s=n(s,t.model,gt(r)),s&&t.replace(r,s,gae).tag("Verb").firstTerm().tag("Infinitive"),i.found&&t.remove(i),e.negative.found){t.has("not")||t.prepend("not");let a=Ou(t,e);t.prepend(a)}return t.fullSentence().compute(["freeze","lexicon","preTagger","postTagger","unfreeze","chunks"]),t},CB=yae;var lr={tags:!0},oi={noAux:(t,e)=>(e.auxiliary.found&&(t=t.remove(e.auxiliary)),t),simple:(t,e)=>{let{conjugate:n,toInfinitive:r}=t.methods.two.transform.verb,o=e.root;if(o.has("#Modal"))return t;let i=o.text({keepPunct:!1});return i=r(i,t.model,gt(o)),i=n(i,t.model).PastTense,i=i==="been"?"was":i,i==="was"&&(i=wB(t,e)),i&&t.replace(o,i,lr),t},both:function(t,e){return e.negative.found?(t.replace("will","did"),t):(t=oi.simple(t,e),t=oi.noAux(t,e),t)},hasHad:t=>(t.replace("has","had",lr),t),hasParticiple:(t,e)=>{let{conjugate:n,toInfinitive:r}=t.methods.two.transform.verb,o=e.root,i=o.text("normal");return i=r(i,t.model,gt(o)),n(i,t.model).Participle}},TB={infinitive:oi.simple,"simple-present":oi.simple,"simple-past":We,"simple-future":oi.both,"present-progressive":t=>(t.replace("are","were",lr),t.replace("(is|are|am)","was",lr),t),"past-progressive":We,"future-progressive":(t,e)=>(t.match(e.root).insertBefore("was"),t.remove("(will|be)"),t),"present-perfect":oi.hasHad,"past-perfect":We,"future-perfect":(t,e)=>(t.match(e.root).insertBefore("had"),t.has("will")&&(t=vE(t)),t.remove("have"),t),"present-perfect-progressive":oi.hasHad,"past-perfect-progressive":We,"future-perfect-progressive":t=>(t.remove("will"),t.replace("have","had",lr),t),"passive-past":t=>(t.replace("have","had",lr),t),"passive-present":t=>(t.replace("(is|are)","was",lr),t),"passive-future":(t,e)=>(e.auxiliary.has("will be")&&(t.match(e.root).insertBefore("had been"),t.remove("(will|be)")),e.auxiliary.has("will have been")&&(t.replace("have","had",lr),t.remove("will")),t),"present-conditional":t=>(t.replace("be","have been"),t),"past-conditional":We,"auxiliary-future":t=>(t.replace("(is|are|am)","was",lr),t),"auxiliary-past":We,"auxiliary-present":t=>(t.replace("(do|does)","did",lr),t),"modal-infinitive":(t,e)=>(t.has("can")?t.replace("can","could",lr):(oi.simple(t,e),t.match("#Modal").insertAfter("have").tag("Auxiliary")),t),"modal-past":We,"want-infinitive":t=>(t.replace("(want|wants)","wanted",lr),t.remove("will"),t),"gerund-phrase":(t,e)=>(e.root=e.root.not("#Gerund$"),oi.simple(t,e),vE(t),t)},bae=function(t,e,n){return TB.hasOwnProperty(n)&&(t=TB[n](t,e),t.fullSentence().compute(["tagger","chunks"])),t},SB=bae;var wE=function(t,e){let n=wn(t,e),r=n.subject;return r.has("(i|we|you)")?"have":n.plural===!1||r.has("he")||r.has("she")||r.has("#Person")?"has":"have"},_E=(t,e)=>{let{conjugate:n,toInfinitive:r}=t.methods.two.transform.verb,{root:o,auxiliary:i}=e;if(o.has("#Modal"))return t;let s=o.text({keepPunct:!1});s=r(s,t.model,gt(o));let a=n(s,t.model);if(s=a.Participle||a.PastTense,s){t=t.replace(o,s);let l=wE(t,e);t.prepend(l).match(l).tag("Auxiliary"),t.remove(i)}return t},PB={infinitive:_E,"simple-present":_E,"simple-future":(t,e)=>t.replace("will",wE(t,e)),"present-perfect":We,"past-perfect":We,"future-perfect":(t,e)=>t.replace("will have",wE(t,e)),"present-perfect-progressive":We,"past-perfect-progressive":We,"future-perfect-progressive":We},vae=function(t,e,n){return PB.hasOwnProperty(n)?(t=PB[n](t,e),t.fullSentence().compute(["tagger","chunks"]),t):(t=_E(t,e,n),t.fullSentence().compute(["tagger","chunks"]),t)},IB=vae;var ii={tags:!0},Du=(t,e)=>{let{conjugate:n,toInfinitive:r}=t.methods.two.transform.verb,o=e.root,i=o.text("normal");return i=r(i,t.model,gt(o)),Nu(t,e)===!1&&(i=n(i,t.model).PresentTense),o.has("#Copula")&&(i=ya(t,e)),i&&(t=t.replace(o,i,ii),t.not("#Particle").tag("PresentTense")),t},xB=(t,e)=>{let{conjugate:n,toInfinitive:r}=t.methods.two.transform.verb,o=e.root,i=o.text("normal");return i=r(i,t.model,gt(o)),Nu(t,e)===!1&&(i=n(i,t.model).Gerund),i&&(t=t.replace(o,i,ii),t.not("#Particle").tag("Gerund")),t},wae=(t,e)=>{let{toInfinitive:n}=t.methods.two.transform.verb,r=e.root,o=e.root.text("normal");return o=n(o,t.model,gt(r)),o&&(t=t.replace(e.root,o,ii)),t},kB={infinitive:Du,"simple-present":(t,e)=>{let{conjugate:n}=t.methods.two.transform.verb,{root:r}=e;if(r.has("#Infinitive")){let i=wn(t,e).subject;if(Nu(t,e)||i.has("i"))return t;let s=r.text("normal"),a=n(s,t.model).PresentTense;s!==a&&t.replace(r,a,ii)}else return Du(t,e);return t},"simple-past":Du,"simple-future":(t,e)=>{let{root:n,auxiliary:r}=e;if(r.has("will")&&n.has("be")){let o=ya(t,e);t.replace(n,o),t=t.remove("will"),t.replace("not "+o,o+" not")}else Du(t,e),t=t.remove("will");return t},"present-progressive":We,"past-progressive":(t,e)=>{let n=ya(t,e);return t.replace("(were|was)",n,ii)},"future-progressive":t=>(t.match("will").insertBefore("is"),t.remove("be"),t.remove("will")),"present-perfect":(t,e)=>(Du(t,e),t=t.remove("(have|had|has)"),t),"past-perfect":(t,e)=>{let r=wn(t,e).subject;return Nu(t,e)||r.has("i")?(t=qf(t,e),t.remove("had"),t):(t.replace("had","has",ii),t)},"future-perfect":t=>(t.match("will").insertBefore("has"),t.remove("have").remove("will")),"present-perfect-progressive":We,"past-perfect-progressive":t=>t.replace("had","has",ii),"future-perfect-progressive":t=>(t.match("will").insertBefore("has"),t.remove("have").remove("will")),"passive-past":(t,e)=>{let n=ya(t,e);return t.has("(had|have|has)")&&t.has("been")?(t.replace("(had|have|has)",n,ii),t.replace("been","being"),t):t.replace("(got|was|were)",n)},"passive-present":We,"passive-future":t=>(t.replace("will","is"),t.replace("be","being")),"present-conditional":We,"past-conditional":t=>(t.replace("been","be"),t.remove("have")),"auxiliary-future":(t,e)=>(xB(t,e),t.remove("(going|to)"),t),"auxiliary-past":(t,e)=>{if(e.auxiliary.has("did")){let n=Ou(t,e);return t.replace(e.auxiliary,n),t}return xB(t,e),t.replace(e.auxiliary,"is"),t},"auxiliary-present":We,"modal-infinitive":We,"modal-past":(t,e)=>(wae(t,e),t.remove("have")),"gerund-phrase":(t,e)=>(e.root=e.root.not("#Gerund$"),Du(t,e),t.remove("(will|have)")),"want-infinitive":(t,e)=>{let n="wants";return Nu(t,e)&&(n="want"),t.replace("(want|wanted|wants)",n,ii),t.remove("will"),t}},_ae=function(t,e,n){return kB.hasOwnProperty(n)&&(t=kB[n](t,e),t.fullSentence().compute(["tagger","chunks"])),t},RB=_ae;var DB={tags:!0},vg=(t,e)=>{let{toInfinitive:n}=t.methods.two.transform.verb,{root:r,auxiliary:o}=e;if(r.has("#Modal"))return t;let i=r.text("normal");return i=n(i,t.model,gt(r)),i&&(t=t.replace(r,i,DB),t.not("#Particle").tag("Verb")),t.prepend("will").match("will").tag("Auxiliary"),t.remove(o),t},NB=(t,e)=>{let{conjugate:n,toInfinitive:r}=t.methods.two.transform.verb,{root:o,auxiliary:i}=e,s=o.text("normal");return s=r(s,t.model,gt(o)),s&&(s=n(s,t.model).Gerund,t.replace(o,s,DB),t.not("#Particle").tag("PresentTense")),t.remove(i),t.prepend("will be").match("will be").tag("Auxiliary"),t},OB={infinitive:vg,"simple-present":vg,"simple-past":vg,"simple-future":We,"present-progressive":NB,"past-progressive":NB,"future-progressive":We,"present-perfect":t=>(t.match("(have|has)").replaceWith("will have"),t),"past-perfect":t=>t.replace("(had|has)","will have"),"future-perfect":We,"present-perfect-progressive":t=>t.replace("has","will have"),"past-perfect-progressive":t=>t.replace("had","will have"),"future-perfect-progressive":We,"passive-past":t=>t.has("got")?t.replace("got","will get"):t.has("(was|were)")?(t.replace("(was|were)","will be"),t.remove("being")):t.has("(have|has|had) been")?t.replace("(have|has|had) been","will be"):t,"passive-present":t=>(t.replace("being","will be"),t.remove("(is|are|am)"),t),"passive-future":We,"present-conditional":t=>t.replace("would","will"),"past-conditional":t=>t.replace("would","will"),"auxiliary-future":We,"auxiliary-past":t=>t.has("used")&&t.has("to")?(t.replace("used","will"),t.remove("to")):(t.replace("did","will"),t),"auxiliary-present":t=>t.replace("(do|does)","will"),"modal-infinitive":We,"modal-past":We,"gerund-phrase":(t,e)=>(e.root=e.root.not("#Gerund$"),vg(t,e),t.remove("(had|have)")),"want-infinitive":t=>(t.replace("(want|wants|wanted)","will want"),t)},Eae=function(t,e,n){return t.has("will")||t.has("going to")||OB.hasOwnProperty(n)&&(t=OB[n](t,e),t.fullSentence().compute(["tagger","chunks"])),t},MB=Eae;var Aae={tags:!0},Cae=function(t,e){let{toInfinitive:n,conjugate:r}=t.methods.two.transform.verb,{root:o,auxiliary:i}=e;if(t.has("#Gerund"))return t;let s=o.text("normal");s=n(s,t.model,gt(o));let a=r(s,t.model).Gerund;if(a){let l=ya(t,e);t.replace(o,a,Aae),t.remove(i),t.prepend(l)}return t.replace("not is","is not"),t.replace("not are","are not"),t.fullSentence().compute(["tagger","chunks"]),t},FB=Cae;var LB={tags:!0},EE=function(t,e){let n=Ou(t,e);return t.prepend(n+" not"),t},wg=function(t){let e=t.match("be");return e.found?(e.prepend("not"),t):(e=t.match("(is|was|am|are|will|were)"),e.found&&e.append("not"),t)},_g=t=>t.has("(is|was|am|are|will|were|be)"),UB={"simple-present":(t,e)=>_g(t)===!0?wg(t,e):(t=qf(t,e),t=EE(t,e),t),"simple-past":(t,e)=>_g(t)===!0?wg(t,e):(t=qf(t,e),t.prepend("did not"),t),imperative:t=>(t.prepend("do not"),t),infinitive:(t,e)=>_g(t)===!0?wg(t,e):EE(t,e),"passive-past":t=>{if(t.has("got"))return t.replace("got","get",LB),t.prepend("did not"),t;let e=t.match("(was|were|had|have)");return e.found&&e.append("not"),t},"auxiliary-past":t=>{if(t.has("used"))return t.prepend("did not"),t;let e=t.match("(did|does|do)");return e.found&&e.append("not"),t},"want-infinitive":(t,e)=>(t=EE(t,e),t=t.replace("wants","want",LB),t)},Tae=function(t,e,n){if(t.has("#Negative"))return t;if(UB.hasOwnProperty(n))return t=UB[n](t,e),t;let r=t.matchOne("be");return r.found?(r.prepend("not"),t):_g(t)===!0?wg(t,e):(r=t.matchOne("(will|had|have|has|did|does|do|#Modal)"),r.found&&r.append("not"),t)},BB=Tae;var Sae=function(t){class e extends t{constructor(r,o,i){super(r,o,i),this.viewType="Verbs"}parse(r){return this.getNth(r).map($n)}json(r,o){return this.getNth(o).map(a=>{let l=a.toView().json(r)[0]||{};return l.verb=AB(a),l},[])}subjects(r){return this.getNth(r).map(o=>{let i=$n(o);return wn(o,i).subject})}adverbs(r){return this.getNth(r).map(o=>o.match("#Adverb"))}isSingular(r){return this.getNth(r).filter(o=>wn(o).plural!==!0)}isPlural(r){return this.getNth(r).filter(o=>wn(o).plural===!0)}isImperative(r){return this.getNth(r).filter(o=>o.has("#Imperative"))}toInfinitive(r){return this.getNth(r).map(o=>{let i=$n(o),s=Ur(o,i);return CB(o,i,s.form)})}toPresentTense(r){return this.getNth(r).map(o=>{let i=$n(o),s=Ur(o,i);return s.isInfinitive?o:RB(o,i,s.form)})}toPastTense(r){return this.getNth(r).map(o=>{let i=$n(o),s=Ur(o,i);return s.isInfinitive?o:SB(o,i,s.form)})}toFutureTense(r){return this.getNth(r).map(o=>{let i=$n(o),s=Ur(o,i);return s.isInfinitive?o:MB(o,i,s.form)})}toGerund(r){return this.getNth(r).map(o=>{let i=$n(o),s=Ur(o,i);return s.isInfinitive?o:FB(o,i,s.form)})}toPastParticiple(r){return this.getNth(r).map(o=>{let i=$n(o),s=Ur(o,i);return s.isInfinitive?o:IB(o,i,s.form)})}conjugate(r){let{conjugate:o,toInfinitive:i}=this.world.methods.two.transform.verb;return this.getNth(r).map(s=>{let a=$n(s),l=Ur(s,a);l.form==="imperative"&&(l.form="simple-present");let u=a.root.text("normal");if(!a.root.has("#Infinitive")){let f=gt(a.root);u=i(u,s.model,f)||u}return o(u,s.model)},[])}isNegative(){return this.if("#Negative")}isPositive(){return this.ifNo("#Negative")}toPositive(){let r=this.match("do not #Verb");return r.found&&r.remove("do not"),this.remove("#Negative")}toNegative(r){return this.getNth(r).map(o=>{let i=$n(o),s=Ur(o,i);return BB(o,i,s.form)})}update(r){let o=new e(this.document,r);return o._cache=this._cache,o}}e.prototype.toPast=e.prototype.toPastTense,e.prototype.toPresent=e.prototype.toPresentTense,e.prototype.toFuture=e.prototype.toFutureTense,t.prototype.verbs=function(n){let r=pB(this);return r=r.getNth(n),new e(this.document,r.pointer)}},GB=Sae;var HB={api:GB};var $f=function(t,e){let n=e.match(t);if(n.found){let r=n.pronouns().refersTo();if(r.found)return r}return e.none()},AE=function(t){if(!t.found)return t;let[e]=t.fullPointer[0];return e&&e>0?t.update([[e-1]]):t.none()};var Pae=function(t,e){return e==="m"?t.filter(n=>!n.presumedFemale().found):e==="f"?t.filter(n=>!n.presumedMale().found):t},Iae=function(t,e){let n=t.people();return n=Pae(n,e),n.found||(n=t.nouns("#Actor"),n.found)?n.last():e==="f"?$f("(she|her|hers)",t):e==="m"?$f("(he|him|his)",t):t.none()},CE=Iae;var xae=function(t){let e=t.nouns(),n=e.isPlural().notIf("#Pronoun");if(n.found)return n.last();let r=$f("(they|their|theirs)",t);return r.found?r:(n=e.match("(somebody|nobody|everybody|anybody|someone|noone|everyone|anyone)"),n.found?n.last():t.none())},qB=xae;var kae=function(t,e){if(e&&e.found){let n=t.docs[0][0];n.reference=e.ptrs[0]}},TE=function(t,e){let n=t.before(),r=e(n);return r.found||(n=AE(t),r=e(n),r.found)||(n=AE(n),r=e(n),r.found)?r:t.none()},Rae=function(t){t.pronouns().if("(he|him|his|she|her|hers|they|their|theirs|it|its)").forEach(n=>{let r=null;n.has("(he|him|his)")?r=TE(n,o=>CE(o,"m")):n.has("(she|her|hers)")?r=TE(n,o=>CE(o,"f")):n.has("(they|their|theirs)")&&(r=TE(n,qB)),r&&r.found&&kae(n,r)})},$B=Rae;var Nae=function(t){class e extends t{constructor(r,o,i){super(r,o,i),this.viewType="Pronouns"}hasReference(){return this.compute("coreference"),this.filter(r=>r.docs[0][0].reference)}refersTo(){return this.compute("coreference"),this.map(r=>{if(!r.found)return r.none();let o=r.docs[0][0];return o.reference?r.update([o.reference]):r.none()})}update(r){let o=new e(this.document,r);return o._cache=this._cache,o}}t.prototype.pronouns=function(n){let r=this.match("#Pronoun");return r=r.getNth(n),new e(r.document,r.pointer)}},VB=Nae;var jB={compute:{coreference:$B},api:VB};vn.plugin(VL);vn.plugin(jL);vn.plugin(nU);vn.plugin(jB);vn.plugin(gU);vn.plugin(vU);vn.plugin(xU);vn.plugin(zU);vn.plugin(JU);vn.plugin(oB);vn.plugin(hB);vn.plugin(HB);var WB=vn;var Vf=class{constructor(e,n,r,o){this.completionStatusListeners=[];this.app=e,this.settings=n,this.profileService=r,this.providerFactory=o}async*fetchCompletion(){if(this.notifyCompletionStatus(!1),!this.completionEnabled())return;let e=this.app.workspace.activeEditor;if(!e||!e.editor||!this.shouldGenerate(e.editor))return;let n=this.profileService.getActiveProfile(),r=this.providerFactory.getProvider(n.provider),o=n.completionOptions;await r.abort();let i=H_(e.editor,o.userPrompt);this.notifyCompletionStatus(!0),yield*this.complete(e.editor,r,i,o),this.notifyCompletionStatus(!1)}onCompletionStatusChange(e){this.completionStatusListeners.push(e)}completionEnabled(){return this.settings.enabled&&this.profileService.getActivePathConfig().enabled}notifyCompletionStatus(e){for(let n of this.completionStatusListeners)n(e)}async*complete(e,n,r,o){for await(let i of n.generate(e,r,o)){if(i=i.trim(),this.settings.suggestionControl.outputLimit.enabled){let s=WB(i).sentences().out("array");if(s.length>this.settings.suggestionControl.outputLimit.sentences){i=s.slice(0,this.settings.suggestionControl.outputLimit.sentences).join(" "),yield{text:i};break}}yield{text:i}}}shouldGenerate(e){if(this.settings.suggestionControl.manualActivationKey)return!0;if(WM(e)&&!jM(e))return!1;let n=e.getCursor(),r=e.getLine(n.line),o=this.settings.suggestionControl.activationRules;return!(o.requireNonEmptyLine&&(!r||r.length===0)||o.requireCursorNotAtStart&&n.ch===0||o.requireSpaceBeforeCursor&&r[n.ch-1]!==" ")}};var ns=require("obsidian");var jf=class{constructor(e,n,r){this.isGenerating=!1;this.plugin=e,this.profileService=n,this.completionService=r,this.profileService.onProfileChange(this.handleProfileChange.bind(this)),this.completionService.onCompletionStatusChange(this.handleCompletionStatusChange.bind(this)),this.statusBarItem=this.createStatusBarItem(),this.render()}render(){this.isGenerating?(this.statusBarItem.addClass("active"),(0,ns.setTooltip)(this.statusBarItem,"Inscribing...",{placement:"top"})):(this.statusBarItem.removeClass("active"),this.completionService.completionEnabled()?(this.statusBarItem.removeClass("completion-disabled"),this.updateProfile(this.profileService.getActiveProfile().name)):(this.statusBarItem.addClass("completion-disabled"),(0,ns.setTooltip)(this.statusBarItem,"Completion disabled",{placement:"top"})))}createStatusBarItem(){let e=this.plugin.addStatusBarItem();return(0,ns.setIcon)(e,"feather"),e.addClasses(["status-bar-item-icon","mod-clickable"]),e.addEventListener("click",this.displayContextMenu.bind(this)),e}displayContextMenu(e){let n=new ns.Menu,r=this.plugin.settings.enabled,o=this.profileService.getActivePathConfig().enabled,i=this.profileService.getActivePath(),s=this.profileService.getActiveProfile();n.addItem(a=>{a.setTitle(`Profile: ${s.name}`).setIsLabel(!0)}),n.addItem(a=>{a.setTitle(`Completion is ${o?"on":"off"} for: {${i=="/"?"default":i}}`).setChecked(o).onClick(()=>{let l=xm(this.plugin.settings,i);l.enabled=!o,this.plugin.saveSettings(),this.render()})}),n.addItem(a=>{a.setTitle(`Global completion is ${r?"on":"off"}`).setChecked(r).onClick(()=>{this.plugin.settings.enabled=!r,this.plugin.saveSettings(),this.render()})}),n.addSeparator(),n.addItem(a=>{a.setTitle("Open settings").onClick(()=>{let l=this.plugin.app.setting;l.open(),l.openTabById(this.plugin.manifest.id)})}),n.showAtMouseEvent(e)}handleCompletionStatusChange(e){this.isGenerating=e,this.render()}handleProfileChange(e){this.render()}updateProfile(e){(0,ns.setTooltip)(this.statusBarItem,`Profile: ${e}`,{placement:"top"})}};function Eg(t){return t!==null&&typeof t=="object"&&!Array.isArray(t)}function Ag(t,...e){if(!e.length)return t;let n=e.shift();if(Eg(t)&&Eg(n)){for(let r in n)if(Object.prototype.hasOwnProperty.call(n,r)){let o=n[r];Eg(o)&&Eg(t[r])?t[r]=Ag(t[r],o):t[r]=o}}return Ag(t,...e)}var Cg=class extends zB.Plugin{async onload(){await this.loadSettings(),this.profileService=new Wm(this),this.providerFactory=new Im(this),this.completionService=new Vf(this.app,this.settings,this.profileService,this.providerFactory),this.statusBarItem=new jf(this,this.profileService,this.completionService),this.addSettingTab(new Sf(this)),await this.setupExtension()}async setupExtension(){let e=LA({fetchFunc:()=>this.completionService.fetchCompletion(),getOptions:()=>this.profileService.getOptions(),acceptanceHotkey:this.settings.suggestionControl.acceptanceHotkey,triggerHotkey:this.settings.suggestionControl.manualActivationKey});this.registerEditorExtension(e)}async loadSettings(){let e=await this.loadData()||{};this.settings=Ag(o_,e)}async saveSettings(){await this.saveData(this.settings),this.providerFactory.rebuildProviders()}};
/*! Bundled license information:

web-streams-polyfill/dist/ponyfill.es2018.js:
  (**
   * @license
   * web-streams-polyfill v3.3.3
   * Copyright 2024 Mattias Buelens, Diwank Singh Tomer and other contributors.
   * This code is released under the MIT license.
   * SPDX-License-Identifier: MIT
   *)

fetch-blob/index.js:
  (*! fetch-blob. MIT License. Jimmy Wrting <https://jimmy.warting.se/opensource> *)

formdata-polyfill/esm.min.js:
  (*! formdata-polyfill. MIT License. Jimmy Wrting <https://jimmy.warting.se/opensource> *)

node-domexception/index.js:
  (*! node-domexception. MIT License. Jimmy Wrting <https://jimmy.warting.se/opensource> *)

safe-buffer/index.js:
  (*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> *)

gtoken/build/cjs/src/index.cjs:
  (*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE *)

@google/genai/dist/node/index.mjs:
  (**
   * @license
   * Copyright 2025 Google LLC
   * SPDX-License-Identifier: Apache-2.0
   *)

@google/genai/dist/node/index.mjs:
  (**
   * @license
   * Copyright 2025 Google LLC
   * SPDX-License-Identifier: Apache-2.0
   *)

@google/genai/dist/node/index.mjs:
  (**
   * @license
   * Copyright 2025 Google LLC
   * SPDX-License-Identifier: Apache-2.0
   *)

@google/genai/dist/node/index.mjs:
  (**
   * @license
   * Copyright 2025 Google LLC
   * SPDX-License-Identifier: Apache-2.0
   *)

@google/genai/dist/node/index.mjs:
  (**
   * @license
   * Copyright 2025 Google LLC
   * SPDX-License-Identifier: Apache-2.0
   *)

mustache/mustache.mjs:
  (*!
   * mustache.js - Logic-less {{mustache}} templates with JavaScript
   * http://github.com/janl/mustache.js
   *)
*/

/* nosourcemap */